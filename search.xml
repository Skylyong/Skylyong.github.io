<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>Einx-and-einops</title>
      <link href="/2026/01/16/einx-and-einops/"/>
      <url>/2026/01/16/einx-and-einops/</url>
      
        <content type="html"><![CDATA[<p>åœ¨åšæ·±åº¦å­¦ä¹ é¡¹ç›®æ—¶ï¼Œç»å¸¸éœ€è¦å¯¹å¼ é‡è¿›è¡Œå¤æ‚çš„é‡ç»„å’Œå˜æ¢æ“ä½œã€‚Einops  å’Œ Einx æ˜¯ä¸€ä¸ªå¼ºå¤§çš„åº“ï¼Œèƒ½å¤Ÿç®€åŒ–è¿™äº›æ“ä½œï¼Œä½¿ä»£ç æ›´åŠ ç®€æ´å’Œæ˜“è¯»ã€‚ è¿™ä¸¤ä¸ªå·¥å…·éƒ½æœ‰å®˜æ–¹æ–‡æ¡£ï¼Œå®˜æ–¹åœ¨æ–‡æ¡£ä¸­ç»™å‡ºäº†éå¸¸è¯¦å°½çš„æ•™ç¨‹å’Œç¤ºä¾‹ï¼Œè¿™é‡ŒæŠŠå®˜æ–¹çš„é“¾æ¥æ”¾åœ¨ä¸‹é¢ï¼Œæ–¹ä¾¿æ—¥åæŸ¥é˜…å’Œå­¦ä¹ ã€‚</p><ol><li><p>einops å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://einops.rocks/1-einops-basics/">https://einops.rocks/1-einops-basics/</a><br>è¯¥æ–‡æ¡£å¯¹åº”çš„ï¼Œ<a href="https://github.com/arogozhnikov/einops/blob/main/docs/1-einops-basics.ipynb">githubä»“åº“</a></p></li><li><p>einx å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://einx.readthedocs.io/en/stable/gettingstarted/tutorial_notation.html">https://einx.readthedocs.io/en/stable/gettingstarted/tutorial_notation.html</a></p></li></ol><p>å¯¹äºåˆå­¦è€…æ¥è¯´ï¼Œå»ºè®®å…ˆä» einops å…¥æ‰‹ï¼ŒæŒæ¡åŸºæœ¬çš„å¼ é‡å˜æ¢æ“ä½œï¼Œç„¶åå†å­¦ä¹  einxï¼Œä»¥ä¾¿æ›´å¥½åœ°ç†è§£å’Œåº”ç”¨è¿™äº›å·¥å…·ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> tensor </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Chunkåˆ’åˆ†æ–¹æ³•</title>
      <link href="/2026/01/16/chunk-hua-fen-fang-fa/"/>
      <url>/2026/01/16/chunk-hua-fen-fang-fa/</url>
      
        <content type="html"><![CDATA[<p>åœ¨æ„å»ºå¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰åº”ç”¨æˆ– RAG ç³»ç»Ÿæ—¶ï¼Œå¦‚ä½•å°†é•¿æ–‡æ¡£ç§‘å­¦åœ°åˆ‡å‰²æˆå°å—ï¼ˆChunksï¼‰æ˜¯å†³å®šæ£€ç´¢ç²¾åº¦å’Œç”Ÿæˆè´¨é‡çš„å…³é”®ã€‚ æœ€è¿‘å›¢é˜Ÿé‡Œé¢çš„å°ä¼™ä¼´æ­£å¥½éœ€è¦åšè¿™æ–¹é¢çš„å·¥ä½œï¼Œä»Šå¤©å¶ç„¶åˆ·åˆ°äº†è¿™ç¯‡ä»‹ç»ï¼Œåœ¨è¿™é‡Œè®°å½•ä¸€ä¸‹ï¼Œç•™ä½œä»¥åéœ€è¦çš„æ—¶å€™å‚è€ƒã€‚</p><p>é¡¹ç›®ä»“åº“ï¼š <a href="https://github.com/hasibul0912/ChunkWise">https://github.com/hasibul0912/ChunkWise</a></p><p>åŸæ–‡é“¾æ¥ï¼š <a href="https://mp.weixin.qq.com/s/euFBkbMMGBoyIpjs4FhFHA">https://mp.weixin.qq.com/s/euFBkbMMGBoyIpjs4FhFHA</a></p>]]></content>
      
      
      <categories>
          
          <category> å¤§æ¨¡å‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> RAG </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>BPEåˆ†è¯ç¼–ç å’Œè§£ç </title>
      <link href="/2026/01/09/bpe-fen-ci-bian-ma-he-jie-ma/"/>
      <url>/2026/01/09/bpe-fen-ci-bian-ma-he-jie-ma/</url>
      
        <content type="html"><![CDATA[<p>åœ¨<a href="https://skylyong.github.io/2026/01/09/bpe-fen-ci-xun-lian/">è¿™é‡Œ</a>ï¼Œæˆ‘ä»¬ä»‹ç» BPE Tokenizerçš„è®­ç»ƒæ–¹æ³•ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°†ä»‹ç»å¦‚ä½•åˆ©ç”¨è®­ç»ƒé˜¶æ®µå¾—åˆ°çš„è¯è¡¨ï¼ˆVocabularyï¼‰å­—å…¸ï¼Œä»¥åŠ Mergeè®°å½•æ¥å¯¹æ–°çš„æ–‡æœ¬è¿›è¡Œç¼–ç å’Œè§£ç ã€‚</p><h1 id="BPE-Tokenizer-Encoding"><a href="#BPE-Tokenizer-Encoding" class="headerlink" title="BPE Tokenizer Encoding"></a>BPE Tokenizer Encoding</h1><h2 id="ä»€ä¹ˆæ˜¯-BPE-Tokenizer-Encoding"><a href="#ä»€ä¹ˆæ˜¯-BPE-Tokenizer-Encoding" class="headerlink" title="ä»€ä¹ˆæ˜¯ BPE Tokenizer Encoding"></a>ä»€ä¹ˆæ˜¯ BPE Tokenizer Encoding</h2><p>BPE Tokenizer Encoding æ˜¯æŒ‡åˆ©ç”¨ è®­ç»ƒæ—¶å¾—åˆ°çš„è¯è¡¨ï¼ˆVocabularyï¼‰å’Œ Merge å°†æ–‡æœ¬ç¼–ç ä¸º æ•´æ•°IDçš„è¿‡ç¨‹ã€‚</p><h2 id="BPE-Tokenizer-Encoding-çš„æ ¸å¿ƒæ­¥éª¤"><a href="#BPE-Tokenizer-Encoding-çš„æ ¸å¿ƒæ­¥éª¤" class="headerlink" title="BPE Tokenizer Encoding çš„æ ¸å¿ƒæ­¥éª¤"></a>BPE Tokenizer Encoding çš„æ ¸å¿ƒæ­¥éª¤</h2><p>BPE Tokenizer Encoding åŒ…å«ä¸‰ä¸ªæ ¸å¿ƒæ­¥éª¤ï¼Œåˆ†åˆ«ä¸ºï¼š</p><ol><li>é¢„åˆ†è¯ (Pre-tokenize)ï¼š</li></ol><ul><li>é¦–å…ˆå°†è¾“å…¥æ–‡æœ¬åˆ†å‰²æˆâ€œé¢„åˆ†è¯å•å…ƒâ€ï¼ˆpre-tokensï¼‰ã€‚</li><li>å°†æ¯ä¸ªé¢„åˆ†è¯å•å…ƒè½¬æ¢ä¸º UTF-8 å­—èŠ‚åºåˆ—ã€‚</li><li>å…³é”®ç‚¹ï¼šæ¯ä¸ªé¢„åˆ†è¯å•å…ƒæ˜¯ç‹¬ç«‹å¤„ç†çš„ï¼Œä¸ä¼šè·¨è¶Šé¢„åˆ†è¯è¾¹ç•Œè¿›è¡Œåˆå¹¶ã€‚</li></ul><ol start="2"><li>åº”ç”¨åˆå¹¶è§„åˆ™ (Apply the merges)ï¼š</li></ol><ul><li>ä½¿ç”¨è®­ç»ƒé˜¶æ®µç”Ÿæˆçš„åˆå¹¶è§„åˆ™åˆ—è¡¨ï¼ˆmerges listï¼‰ã€‚</li><li>é¡ºåºï¼šä¸¥æ ¼æŒ‰ç…§è§„åˆ™ç”Ÿæˆçš„é¡ºåºä¾æ¬¡åº”ç”¨ã€‚</li><li>è¿‡ç¨‹ï¼šåœ¨æ¯ä¸ªé¢„åˆ†è¯å•å…ƒå†…éƒ¨ï¼ŒæŸ¥æ‰¾å¹¶åˆå¹¶ç¬¦åˆè§„åˆ™çš„å­—èŠ‚å¯¹ï¼Œç›´åˆ°æ²¡æœ‰æ›´å¤šçš„è§„åˆ™é€‚ç”¨æˆ–è€…æ²¡æœ‰å¯åˆå¹¶çš„å­—èŠ‚å¯¹ä¸ºæ­¢ã€‚</li></ul><ol start="3"><li>æ˜ å°„ä¸ºæ•´æ•° ID (Map to IDs)ï¼š</li></ol><ul><li>å°†åˆå¹¶å¤„ç†åæœ€ç»ˆå½¢æˆçš„è¯æ±‡å•å…ƒï¼ˆvocabulary elementsï¼‰ï¼Œæ ¹æ®è¯è¡¨æ˜ å°„ä¸ºå¯¹åº”çš„æ•´æ•°ï¼ˆToken IDsï¼‰ã€‚</li></ul><h2 id="BPE-Tokenizer-Encoding-ä¸­éœ€è¦ç‰¹æ®Šå¤„ç†çš„å†…å®¹"><a href="#BPE-Tokenizer-Encoding-ä¸­éœ€è¦ç‰¹æ®Šå¤„ç†çš„å†…å®¹" class="headerlink" title="BPE Tokenizer Encoding ä¸­éœ€è¦ç‰¹æ®Šå¤„ç†çš„å†…å®¹"></a>BPE Tokenizer Encoding ä¸­éœ€è¦ç‰¹æ®Šå¤„ç†çš„å†…å®¹</h2><p>BPE Tokenizer Encoding ä¸­æœ‰ä¸¤ä¸ªå†…å®¹éœ€è¦ç‰¹åˆ«å¤„ç†ï¼š</p><ol><li>ç‰¹æ®Š Token (Special Tokens)ï¼š</li></ol><ul><li>ç¼–ç å™¨å¿…é¡»èƒ½å¤Ÿæ­£ç¡®è¯†åˆ«å’Œå¤„ç†ç”¨æˆ·å®šä¹‰çš„ç‰¹æ®Š Tokenï¼ˆå¦‚ [CLS], [SEP] ç­‰ï¼‰ï¼Œé˜²æ­¢å®ƒä»¬è¢«é”™è¯¯åˆ†è§£ã€‚</li></ul><ol start="2"><li>å†…å­˜ç®¡ç†ä¸åˆ†å—å¤„ç† (Memory Considerations)ï¼š</li></ol><ul><li>åœºæ™¯ï¼šå¤„ç†æ— æ³•ä¸€æ¬¡æ€§è£…å…¥å†…å­˜çš„å¤§å‹æ–‡æœ¬æ–‡ä»¶æˆ–æ•°æ®æµã€‚</li><li>æ–¹æ³•ï¼šå°†æ•°æ®åˆ‡åˆ†æˆå¯ç®¡ç†çš„â€œå—â€ï¼ˆchunksï¼‰ä¾æ¬¡å¤„ç†ï¼Œä»¥ä¿æŒæ’å®šçš„å†…å­˜å¤æ‚åº¦ã€‚</li><li>çº¦æŸï¼šå¿…é¡»ç¡®ä¿ Token ä¸ä¼šè·¨è¶Šå—çš„è¾¹ç•Œï¼ˆå³ä¸èƒ½æŠŠä¸€ä¸ªå®Œæ•´çš„ Token åˆ‡åˆ†åœ¨ä¸¤ä¸ªå—ä¸­ï¼‰ï¼Œä»¥ä¿è¯åˆ†å—å¤„ç†çš„ç»“æœä¸ä¸€æ¬¡æ€§å…¨é‡å¤„ç†çš„ç»“æœå®Œå…¨ä¸€è‡´ã€‚</li></ul><h2 id="å¯¹-â€œåº”ç”¨åˆå¹¶è§„åˆ™â€çš„è¯¦ç»†è§£é‡Š"><a href="#å¯¹-â€œåº”ç”¨åˆå¹¶è§„åˆ™â€çš„è¯¦ç»†è§£é‡Š" class="headerlink" title="å¯¹ â€œåº”ç”¨åˆå¹¶è§„åˆ™â€çš„è¯¦ç»†è§£é‡Š"></a>å¯¹ â€œåº”ç”¨åˆå¹¶è§„åˆ™â€çš„è¯¦ç»†è§£é‡Š</h2><p>åˆå¹¶è§„åˆ™çš„æ ¸å¿ƒé€»è¾‘ä¸ºæŒ‰ä¼˜å…ˆçº§â€æŸ¥è¡¨â€ï¼Œæƒ³è±¡æ‰‹ä¸­æœ‰ä¸€ä»½<strong>åˆå¹¶æ’è¡Œæ¦œ</strong> ï¼ˆå³è®­ç»ƒé˜¶æ®µå¾—åˆ°çš„ <code>merges</code> åˆ—è¡¨ï¼‰ã€‚è¿™ä¸ªæ’è¡Œæ¦œæ˜¯æœ‰ä¸¥æ ¼é¡ºåºçš„ï¼š<strong>æ’åè¶Šé å‰ï¼Œä¼˜å…ˆçº§è¶Šé«˜ã€‚</strong><br>å¯¹äºæ¯ä¸€ä¸ªé¢„åˆ†è¯å•å…ƒ ï¼ˆPre-tokenï¼‰ï¼Œæˆ‘ä»¬éœ€è¦åšçš„æ˜¯ï¼š</p><ol><li>æŠŠå®ƒçœ‹ä½œä¸€ä¸²åŸºç¡€çš„å­—èŠ‚åºåˆ—ã€‚</li><li>æ‹¿å‡º â€œåˆå¹¶æ’è¡Œæ¦œâ€ï¼Œä»ç¬¬ä¸€åå¼€å§‹å¾€ä¸‹æŸ¥ã€‚</li><li>å¦‚æœå½“å‰åºåˆ—ä¸­å‡ºç°äº†æ’è¡Œæ¦œä¸Šçš„â€œå­—èŠ‚å¯¹â€ï¼Œå°±ç«‹å³æŠŠå®ƒä»¬åˆå¹¶æˆä¸€ä¸ªæ–°çš„å•å…ƒã€‚</li><li>é‡å¤è¿™ä¸ªè¿‡ç¨‹ï¼Œç›´åˆ°æ’è¡Œæ¦œæŸ¥å®Œï¼Œæˆ–è€…åºåˆ—ä¸­å†ä¹Ÿæ‰¾ä¸åˆ°å¯ä»¥åˆå¹¶çš„ç»„åˆä¸ºæ­¢ã€‚</li></ol><h2 id="BPE-Tokenizer-Encoding-çš„å®ä¾‹æ¼”ç¤º"><a href="#BPE-Tokenizer-Encoding-çš„å®ä¾‹æ¼”ç¤º" class="headerlink" title="BPE Tokenizer Encoding çš„å®ä¾‹æ¼”ç¤º"></a>BPE Tokenizer Encoding çš„å®ä¾‹æ¼”ç¤º</h2><p>å‡è®¾æˆ‘ä»¬çš„é¢„åˆ†è¯å•å…ƒæ˜¯ [â€˜theâ€™, â€˜ catâ€™, â€˜ ateâ€™]ã€‚<br>å‡è®¾æˆ‘ä»¬çš„**â€œåˆå¹¶æ’è¡Œæ¦œï¼ˆMergesï¼‰â€**ï¼ˆæŒ‰é¡ºåºï¼‰å¦‚ä¸‹ï¼š<br>(bâ€™tâ€™, bâ€™hâ€™) ğŸ‘‰ (ç¢°åˆ° t å’Œ h å°±åˆå¹¶)<br>(bâ€™ â€˜, bâ€™câ€™) ğŸ‘‰ (ç¢°åˆ° ç©ºæ ¼ å’Œ c å°±åˆå¹¶)<br>(bâ€™ â€˜, bâ€™aâ€™) ğŸ‘‰ (ç¢°åˆ° ç©ºæ ¼ å’Œ a å°±åˆå¹¶)<br>(bâ€™thâ€™, bâ€™eâ€™) ğŸ‘‰ (ç¢°åˆ° th å’Œ e å°±åˆå¹¶)<br>(bâ€™ aâ€™, bâ€™tâ€™) ğŸ‘‰ (ç¢°åˆ° â€œ aâ€ å’Œ t å°±åˆå¹¶)</p><p>æ¥ä¸‹æ¥æˆ‘ä»¬åˆ†åˆ«å¤„ç†è¿™ä¸‰ä¸ªé¢„åˆ†è¯å•å…ƒï¼š</p><p><img src="https://raw.githubusercontent.com/Skylyong/i/main/Pasted%20image%2020260109220849.png"></p><p>ä¸Šè¿°è¿‡ç¨‹ä½“ç°äº†BPEçš„ä¸¤ä¸ªæ ¸å¿ƒç‰¹æ€§ï¼š</p><ol><li><strong>è´ªå©ªç­–ç•¥ï¼ˆGreedyï¼‰</strong>ï¼šåªè¦ç¬¦åˆå½“å‰æœ€é«˜ä¼˜å…ˆçº§çš„åˆå¹¶è§„åˆ™ï¼Œå°±ç«‹å³åˆå¹¶ã€‚</li><li><strong>ç¡®å®šæ€§ï¼ˆDeterministicï¼‰</strong>ï¼šåªè¦è¯è¡¨å’Œåˆå¹¶è§„åˆ™åˆ—è¡¨ç¡®å®šï¼Œå¯¹äºåŒæ ·çš„è¾“å…¥æ–‡æœ¬ï¼Œæ°¸è¿œä¼šç”ŸæˆåŒæ ·çš„ Token ID åºåˆ—ã€‚è¿™ä¿è¯äº†æ¨¡å‹è®­ç»ƒå’Œæ¨ç†æ—¶çš„ä¸€è‡´æ€§ã€‚</li></ol><h2 id="ä»£ç å®ç°"><a href="#ä»£ç å®ç°" class="headerlink" title="ä»£ç å®ç°"></a>ä»£ç å®ç°</h2><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">encode</span>(<span class="params">self, text: <span class="built_in">str</span></span>) -&gt; <span class="built_in">list</span>[<span class="built_in">int</span>]:</span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        Encode an input text into a sequence of token IDs.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        Args:</span></span><br><span class="line"><span class="string">            text (str): Input text to encode.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        Returns:</span></span><br><span class="line"><span class="string">            list[int]: Sequence of token IDs.</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> text:</span><br><span class="line">            <span class="keyword">return</span> []</span><br><span class="line">        </span><br><span class="line">        token_ids = []</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># Split on special tokens if present</span></span><br><span class="line">        <span class="keyword">if</span> <span class="variable language_">self</span>.special_token_pattern:</span><br><span class="line">            segments = re.split(<span class="string">f'(<span class="subst">{self.special_token_pattern}</span>)'</span>, text)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            segments = [text]</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span> segment <span class="keyword">in</span> segments:</span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">not</span> segment:</span><br><span class="line">                <span class="keyword">continue</span></span><br><span class="line">            </span><br><span class="line">            <span class="comment"># Check if segment is a special token</span></span><br><span class="line">            <span class="keyword">if</span> segment <span class="keyword">in</span> <span class="variable language_">self</span>.special_tokens:</span><br><span class="line">                segment_bytes = segment.encode(<span class="string">'utf-8'</span>)</span><br><span class="line">                <span class="keyword">if</span> segment_bytes <span class="keyword">in</span> <span class="variable language_">self</span>.token_to_id:</span><br><span class="line">                    token_ids.append(<span class="variable language_">self</span>.token_to_id[segment_bytes])</span><br><span class="line">                <span class="keyword">continue</span></span><br><span class="line">            </span><br><span class="line">            <span class="comment"># Apply GPT-2 pre-tokenization</span></span><br><span class="line">            pre_tokens = re.findall(<span class="variable language_">self</span>.GPT2_PATTERN, segment)</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">for</span> pre_token <span class="keyword">in</span> pre_tokens:</span><br><span class="line">                <span class="comment"># Convert to bytes and then to list of byte tokens</span></span><br><span class="line">                token_bytes = pre_token.encode(<span class="string">'utf-8'</span>)</span><br><span class="line">                tokens = [<span class="built_in">bytes</span>([b]) <span class="keyword">for</span> b <span class="keyword">in</span> token_bytes]</span><br><span class="line">                </span><br><span class="line">                <span class="comment"># Apply BPE merges</span></span><br><span class="line">                <span class="keyword">while</span> <span class="built_in">len</span>(tokens) &gt; <span class="number">1</span>:</span><br><span class="line">                    <span class="comment"># Find the pair with highest priority (lowest index in merge list)</span></span><br><span class="line">                    best_pair = <span class="literal">None</span></span><br><span class="line">                    best_priority = <span class="built_in">float</span>(<span class="string">'inf'</span>)</span><br><span class="line">                    best_pos = -<span class="number">1</span></span><br><span class="line">                    </span><br><span class="line">                    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(tokens) - <span class="number">1</span>):</span><br><span class="line">                        pair = (tokens[i], tokens[i + <span class="number">1</span>])</span><br><span class="line">                        <span class="keyword">if</span> pair <span class="keyword">in</span> <span class="variable language_">self</span>.merge_priority:</span><br><span class="line">                            priority = <span class="variable language_">self</span>.merge_priority[pair]</span><br><span class="line">                            <span class="keyword">if</span> priority &lt; best_priority:</span><br><span class="line">                                best_priority = priority</span><br><span class="line">                                best_pair = pair</span><br><span class="line">                                best_pos = i</span><br><span class="line">                    </span><br><span class="line">                    <span class="keyword">if</span> best_pair <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">                        <span class="keyword">break</span></span><br><span class="line">                    </span><br><span class="line">                    <span class="comment"># Merge the best pair</span></span><br><span class="line">                    merged_token = best_pair[<span class="number">0</span>] + best_pair[<span class="number">1</span>]</span><br><span class="line">                    tokens = tokens[:best_pos] + [merged_token] + tokens[best_pos + <span class="number">2</span>:]</span><br><span class="line">                </span><br><span class="line">                <span class="comment"># Convert tokens to IDs</span></span><br><span class="line">                <span class="keyword">for</span> token <span class="keyword">in</span> tokens:</span><br><span class="line">                    <span class="keyword">if</span> token <span class="keyword">in</span> <span class="variable language_">self</span>.token_to_id:</span><br><span class="line">                        token_ids.append(<span class="variable language_">self</span>.token_to_id[token])</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> token_ids</span><br></pre></td></tr></tbody></table></figure><h1 id="BPE-Tokenizer-Decoding"><a href="#BPE-Tokenizer-Decoding" class="headerlink" title="BPE Tokenizer Decoding"></a>BPE Tokenizer Decoding</h1><p>BPE Tokenizer Decoding æŒ‡çš„æ˜¯å°†æ•´æ•°IDè§£ç ä¸ºåŸå§‹çš„æ–‡æœ¬ï¼Œç›¸å¯¹äº Encodingï¼Œ Decodingè¿‡ç¨‹æ¯”è¾ƒç®€å•ã€‚ä¸»è¦åŒ…å«ä¸¤æ–¹é¢çš„å†…å®¹ï¼š</p><h2 id="æ ‡å‡†è§£ç æµç¨‹"><a href="#æ ‡å‡†è§£ç æµç¨‹" class="headerlink" title="æ ‡å‡†è§£ç æµç¨‹"></a>æ ‡å‡†è§£ç æµç¨‹</h2><ul><li>æŸ¥è¡¨ä¸æ‹¼æ¥ï¼š æŸ¥æ‰¾æ¯ä¸ª Token ID åœ¨è¯è¡¨ä¸­å¯¹åº”çš„<strong>å­—èŠ‚åºåˆ—</strong>ï¼Œå¹¶å°†å®ƒä»¬æŒ‰é¡ºåºæ‹¼æ¥åœ¨ä¸€èµ·ã€‚</li><li>è½¬æ¢å­—ç¬¦ä¸²ï¼š å°†æ‹¼æ¥åçš„å®Œæ•´å­—èŠ‚åºåˆ—è§£ç ä¸º Unicode å­—ç¬¦ä¸²ã€‚</li></ul><h2 id="å¼‚å¸¸å¤„ç†ï¼ˆæ— æ•ˆç¼–ç ï¼‰"><a href="#å¼‚å¸¸å¤„ç†ï¼ˆæ— æ•ˆç¼–ç ï¼‰" class="headerlink" title="å¼‚å¸¸å¤„ç†ï¼ˆæ— æ•ˆç¼–ç ï¼‰"></a>å¼‚å¸¸å¤„ç†ï¼ˆæ— æ•ˆç¼–ç ï¼‰</h2><ul><li>é—®  é¢˜ï¼šç”±äºè¾“å…¥çš„ Token ID åºåˆ—å¯èƒ½æ˜¯ä»»æ„ç»„åˆï¼Œæ‹¼æ¥åçš„å­—èŠ‚åºåˆ—ä¸ä¸€å®šèƒ½æ„æˆåˆæ³•çš„ Unicode å­—ç¬¦ã€‚</li><li>è§£å†³æ–¹æ¡ˆï¼šå¦‚æœé‡åˆ°æ— æ³•è¯†åˆ«çš„ç•¸å½¢å­—èŠ‚ï¼Œä¸èƒ½æŠ¥é”™ä¸­æ–­ï¼Œè€Œæ˜¯è¦å°†å…¶æ›¿æ¢ä¸ºæ ‡å‡†çš„ Unicode æ›¿æ¢å­—ç¬¦ (U+FFFD)ã€‚</li><li>ä»£ç å®ç°ï¼šåœ¨æ‰§è¡Œ bytes.decode æ—¶ï¼Œè®¾ç½®å‚æ•° errors=â€™replaceâ€™ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨å°†éæ³•å­—èŠ‚è½¬æ¢ä¸ºæ›¿æ¢æ ‡è®°ã€‚</li></ul><h2 id="ä»£ç å®ç°-1"><a href="#ä»£ç å®ç°-1" class="headerlink" title="ä»£ç å®ç°"></a>ä»£ç å®ç°</h2><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">decode</span>(<span class="params">self, ids: <span class="built_in">list</span>[<span class="built_in">int</span>]</span>) -&gt; <span class="built_in">str</span>:</span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">    Decode a sequence of token IDs into text.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    Args:</span></span><br><span class="line"><span class="string">        ids (list[int]): Sequence of token IDs to decode.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    Returns:</span></span><br><span class="line"><span class="string">        str: Decoded text.</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    <span class="comment"># Convert IDs to bytes</span></span><br><span class="line">    byte_list = []</span><br><span class="line">    <span class="keyword">for</span> token_id <span class="keyword">in</span> ids:</span><br><span class="line">        <span class="keyword">if</span> token_id <span class="keyword">in</span> <span class="variable language_">self</span>.id_to_token:</span><br><span class="line">            byte_list.append(<span class="variable language_">self</span>.id_to_token[token_id])</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># Concatenate all bytes</span></span><br><span class="line">    all_bytes = <span class="string">b''</span>.join(byte_list)</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># Decode to string, handling errors gracefully</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="keyword">return</span> all_bytes.decode(<span class="string">'utf-8'</span>, errors=<span class="string">'replace'</span>)</span><br><span class="line">    <span class="keyword">except</span> Exception:</span><br><span class="line">        <span class="keyword">return</span> all_bytes.decode(<span class="string">'utf-8'</span>, errors=<span class="string">'ignore'</span>)</span><br></pre></td></tr></tbody></table></figure><h1 id="å®Œæ•´ä»£ç å®ç°"><a href="#å®Œæ•´ä»£ç å®ç°" class="headerlink" title="å®Œæ•´ä»£ç å®ç°"></a>å®Œæ•´ä»£ç å®ç°</h1><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">class Tokenizer:</span><br><span class="line">    def __init__(self, vocab: dict[int, bytes], merges: list[tuple[bytes, bytes]], special_tokens: list[str] | None = None):</span><br><span class="line">        <span class="string">""</span><span class="string">"</span></span><br><span class="line"><span class="string">        Construct a tokenizer from a given vocabulary, list of merges, and (optionally) a list of special tokens.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        Args:</span></span><br><span class="line"><span class="string">            vocab (dict[int, bytes]): Tokenizer vocabulary mapping token IDs to bytes.</span></span><br><span class="line"><span class="string">            merges (list[tuple[bytes, bytes]]): List of BPE merges.</span></span><br><span class="line"><span class="string">            special_tokens (list[str] | None): Optional list of special tokens.</span></span><br><span class="line"><span class="string">        "</span><span class="string">""</span></span><br><span class="line">        self.vocab = vocab</span><br><span class="line">        self.merges = merges</span><br><span class="line">        self.special_tokens = special_tokens <span class="keyword">if</span> special_tokens is not None <span class="keyword">else</span> []</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># Create reverse vocab for decoding</span></span><br><span class="line">        self.id_to_token = vocab</span><br><span class="line">        self.token_to_id = {v: k <span class="keyword">for</span> k, v <span class="keyword">in</span> vocab.items()}</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># Build merge priority map (earlier merges have higher priority)</span></span><br><span class="line">        self.merge_priority = {pair: i <span class="keyword">for</span> i, pair <span class="keyword">in</span> enumerate(merges)}</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># GPT-2 pre-tokenization pattern</span></span><br><span class="line">        self.GPT2_PATTERN = r<span class="string">""</span><span class="string">"'(?:[sdmt]|ll|ve|re)| ?\p{L}+| ?\p{N}+| ?[^\s\p{L}\p{N}]+|\s+(?!\S)|\s+"</span><span class="string">""</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment"># Build special token pattern and mapping</span></span><br><span class="line">        <span class="keyword">if</span> self.special_tokens:</span><br><span class="line">            self.special_token_bytes = {token.encode(<span class="string">'utf-8'</span>): token <span class="keyword">for</span> token <span class="keyword">in</span> self.special_tokens}</span><br><span class="line">            <span class="comment"># Create regex pattern for splitting on special tokens</span></span><br><span class="line">            <span class="comment"># Sort by length (descending) to match longer tokens first</span></span><br><span class="line">            sorted_tokens = sorted(self.special_tokens, key=len, reverse=True)</span><br><span class="line">            escaped_tokens = [re.escape(token) <span class="keyword">for</span> token <span class="keyword">in</span> sorted_tokens]</span><br><span class="line">            self.special_token_pattern = <span class="string">'|'</span>.<span class="built_in">join</span>(escaped_tokens)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            self.special_token_bytes = {}</span><br><span class="line">            self.special_token_pattern = None</span><br><span class="line"></span><br><span class="line">    @classmethod</span><br><span class="line">    def from_files(cls, vocab_filepath: str, merges_filepath: str, special_tokens: list[str] | None = None):</span><br><span class="line">        <span class="string">""</span><span class="string">"</span></span><br><span class="line"><span class="string">        Construct and return a Tokenizer from serialized vocabulary and merges.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        Args:</span></span><br><span class="line"><span class="string">            vocab_filepath (str): Path to the vocabulary file.</span></span><br><span class="line"><span class="string">            merges_filepath (str): Path to the merges file.</span></span><br><span class="line"><span class="string">            special_tokens (list[str] | None): Optional list of special tokens.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        Returns:</span></span><br><span class="line"><span class="string">            Tokenizer: An instance of the Tokenizer class.</span></span><br><span class="line"><span class="string">        "</span><span class="string">""</span></span><br><span class="line">        <span class="comment"># Load vocabulary</span></span><br><span class="line">        vocab = {}</span><br><span class="line">        with open(vocab_filepath, <span class="string">'r'</span>, encoding=<span class="string">'utf-8'</span>) as f:</span><br><span class="line">            <span class="keyword">for</span> line <span class="keyword">in</span> f:</span><br><span class="line">                line = line.rstrip(<span class="string">'\n'</span>)</span><br><span class="line">                <span class="keyword">if</span> line:</span><br><span class="line">                    <span class="comment"># Parse format: token_id token_bytes</span></span><br><span class="line">                    parts = line.split(<span class="string">' '</span>, 1)</span><br><span class="line">                    <span class="keyword">if</span> len(parts) == 2:</span><br><span class="line">                        token_id = int(parts[0])</span><br><span class="line">                        token_bytes = <span class="built_in">eval</span>(parts[1])  <span class="comment"># Convert string representation to bytes</span></span><br><span class="line">                        vocab[token_id] = token_bytes</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># Load merges</span></span><br><span class="line">        merges = []</span><br><span class="line">        with open(merges_filepath, <span class="string">'r'</span>, encoding=<span class="string">'utf-8'</span>) as f:</span><br><span class="line">            <span class="keyword">for</span> line <span class="keyword">in</span> f:</span><br><span class="line">                line = line.rstrip(<span class="string">'\n'</span>)</span><br><span class="line">                <span class="keyword">if</span> line:</span><br><span class="line">                    <span class="comment"># Parse format: token1 token2</span></span><br><span class="line">                    parts = line.split(<span class="string">' '</span>, 1)</span><br><span class="line">                    <span class="keyword">if</span> len(parts) == 2:</span><br><span class="line">                        token1 = <span class="built_in">eval</span>(parts[0])</span><br><span class="line">                        token2 = <span class="built_in">eval</span>(parts[1])</span><br><span class="line">                        merges.append((token1, token2))</span><br><span class="line">        </span><br><span class="line">        <span class="built_in">return</span> cls(vocab, merges, special_tokens)</span><br><span class="line"></span><br><span class="line">    def encode(self, text: str) -&gt; list[int]:</span><br><span class="line">        <span class="string">""</span><span class="string">"</span></span><br><span class="line"><span class="string">        Encode an input text into a sequence of token IDs.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        Args:</span></span><br><span class="line"><span class="string">            text (str): Input text to encode.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        Returns:</span></span><br><span class="line"><span class="string">            list[int]: Sequence of token IDs.</span></span><br><span class="line"><span class="string">        "</span><span class="string">""</span></span><br><span class="line">        <span class="keyword">if</span> not text:</span><br><span class="line">            <span class="built_in">return</span> []</span><br><span class="line">        </span><br><span class="line">        token_ids = []</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># Split on special tokens if present</span></span><br><span class="line">        <span class="keyword">if</span> self.special_token_pattern:</span><br><span class="line">            segments = re.split(f<span class="string">'({self.special_token_pattern})'</span>, text)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            segments = [text]</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span> segment <span class="keyword">in</span> segments:</span><br><span class="line">            <span class="keyword">if</span> not segment:</span><br><span class="line">                <span class="built_in">continue</span></span><br><span class="line">            </span><br><span class="line">            <span class="comment"># Check if segment is a special token</span></span><br><span class="line">            <span class="keyword">if</span> segment <span class="keyword">in</span> self.special_tokens:</span><br><span class="line">                segment_bytes = segment.encode(<span class="string">'utf-8'</span>)</span><br><span class="line">                <span class="keyword">if</span> segment_bytes <span class="keyword">in</span> self.token_to_id:</span><br><span class="line">                    token_ids.append(self.token_to_id[segment_bytes])</span><br><span class="line">                <span class="built_in">continue</span></span><br><span class="line">            </span><br><span class="line">            <span class="comment"># Apply GPT-2 pre-tokenization</span></span><br><span class="line">            pre_tokens = re.findall(self.GPT2_PATTERN, segment)</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">for</span> pre_token <span class="keyword">in</span> pre_tokens:</span><br><span class="line">                <span class="comment"># Convert to bytes and then to list of byte tokens</span></span><br><span class="line">                token_bytes = pre_token.encode(<span class="string">'utf-8'</span>)</span><br><span class="line">                tokens = [bytes([b]) <span class="keyword">for</span> b <span class="keyword">in</span> token_bytes]</span><br><span class="line">                </span><br><span class="line">                <span class="comment"># Apply BPE merges</span></span><br><span class="line">                <span class="keyword">while</span> len(tokens) &gt; 1:</span><br><span class="line">                    <span class="comment"># Find the pair with highest priority (lowest index in merge list)</span></span><br><span class="line">                    best_pair = None</span><br><span class="line">                    best_priority = <span class="built_in">float</span>(<span class="string">'inf'</span>)</span><br><span class="line">                    best_pos = -1</span><br><span class="line">                    </span><br><span class="line">                    <span class="keyword">for</span> i <span class="keyword">in</span> range(len(tokens) - 1):</span><br><span class="line">                        pair = (tokens[i], tokens[i + 1])</span><br><span class="line">                        <span class="keyword">if</span> pair <span class="keyword">in</span> self.merge_priority:</span><br><span class="line">                            priority = self.merge_priority[pair]</span><br><span class="line">                            <span class="keyword">if</span> priority &lt; best_priority:</span><br><span class="line">                                best_priority = priority</span><br><span class="line">                                best_pair = pair</span><br><span class="line">                                best_pos = i</span><br><span class="line">                    </span><br><span class="line">                    <span class="keyword">if</span> best_pair is None:</span><br><span class="line">                        <span class="built_in">break</span></span><br><span class="line">                    </span><br><span class="line">                    <span class="comment"># Merge the best pair</span></span><br><span class="line">                    merged_token = best_pair[0] + best_pair[1]</span><br><span class="line">                    tokens = tokens[:best_pos] + [merged_token] + tokens[best_pos + 2:]</span><br><span class="line">                </span><br><span class="line">                <span class="comment"># Convert tokens to IDs</span></span><br><span class="line">                <span class="keyword">for</span> token <span class="keyword">in</span> tokens:</span><br><span class="line">                    <span class="keyword">if</span> token <span class="keyword">in</span> self.token_to_id:</span><br><span class="line">                        token_ids.append(self.token_to_id[token])</span><br><span class="line">        </span><br><span class="line">        <span class="built_in">return</span> token_ids</span><br><span class="line"></span><br><span class="line">    def encode_iterable(self, iterable: Iterable[str]) -&gt; Iterator[int]:</span><br><span class="line">        <span class="string">""</span><span class="string">"</span></span><br><span class="line"><span class="string">        Lazily encode an iterable of strings into token IDs.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        Args:</span></span><br><span class="line"><span class="string">            iterable (Iterable[str]): Iterable of strings to encode.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        Returns:</span></span><br><span class="line"><span class="string">            Iterator[int]: Generator yielding token IDs.</span></span><br><span class="line"><span class="string">        "</span><span class="string">""</span></span><br><span class="line">        <span class="keyword">for</span> text <span class="keyword">in</span> iterable:</span><br><span class="line">            <span class="keyword">for</span> token_id <span class="keyword">in</span> self.encode(text):</span><br><span class="line">                yield token_id</span><br><span class="line"></span><br><span class="line">    def decode(self, ids: list[int]) -&gt; str:</span><br><span class="line">        <span class="string">""</span><span class="string">"</span></span><br><span class="line"><span class="string">        Decode a sequence of token IDs into text.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        Args:</span></span><br><span class="line"><span class="string">            ids (list[int]): Sequence of token IDs to decode.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        Returns:</span></span><br><span class="line"><span class="string">            str: Decoded text.</span></span><br><span class="line"><span class="string">        "</span><span class="string">""</span></span><br><span class="line">        <span class="comment"># Convert IDs to bytes</span></span><br><span class="line">        byte_list = []</span><br><span class="line">        <span class="keyword">for</span> token_id <span class="keyword">in</span> ids:</span><br><span class="line">            <span class="keyword">if</span> token_id <span class="keyword">in</span> self.id_to_token:</span><br><span class="line">                byte_list.append(self.id_to_token[token_id])</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># Concatenate all bytes</span></span><br><span class="line">        all_bytes = b<span class="string">''</span>.<span class="built_in">join</span>(byte_list)</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># Decode to string, handling errors gracefully</span></span><br><span class="line">        try:</span><br><span class="line">            <span class="built_in">return</span> all_bytes.decode(<span class="string">'utf-8'</span>, errors=<span class="string">'replace'</span>)</span><br><span class="line">        except Exception:</span><br><span class="line">            <span class="built_in">return</span> all_bytes.decode(<span class="string">'utf-8'</span>, errors=<span class="string">'ignore'</span>)</span><br></pre></td></tr></tbody></table></figure>]]></content>
      
      
      <categories>
          
          <category> å¤§æ¨¡å‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> BPE </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>BPEåˆ†è¯è®­ç»ƒ</title>
      <link href="/2026/01/09/bpe-fen-ci-xun-lian/"/>
      <url>/2026/01/09/bpe-fen-ci-xun-lian/</url>
      
        <content type="html"><![CDATA[<p>åœ¨<a href="https://skylyong.github.io/2025/11/20/1-cs336-bpe-fen-ci-qi-jie-shao/">è¿™é‡Œ</a>ï¼Œæˆ‘ä»¬ä»‹ç»äº†BPEåˆ†è¯çš„åŸç†åŠä¼˜ç¼ºç‚¹ï¼Œæœ¬èŠ‚æˆ‘ä»¬å°†è¯¦ç»†ä»‹ç» BPE Tokenizerçš„è®­ç»ƒæ–¹æ³•ã€‚</p><h1 id="ä»€ä¹ˆæ˜¯-BPE-Tokenizer-Training"><a href="#ä»€ä¹ˆæ˜¯-BPE-Tokenizer-Training" class="headerlink" title="ä»€ä¹ˆæ˜¯ BPE Tokenizer Training"></a>ä»€ä¹ˆæ˜¯ BPE Tokenizer Training</h1><p>BPE Tokenizer Training æ˜¯ä¸€ä¸ªæ„å»ºè¯è¡¨(Vocabulary)çš„è¿‡ç¨‹ï¼Œå®ƒåŸºäºå­—èŠ‚çº§åˆ«ï¼ˆByte-levelï¼‰ï¼Œé€šè¿‡ç»Ÿè®¡è¯­æ–™ä¸­ç›¸é‚»å­—èŠ‚å¯¹å‡ºç°çš„é¢‘ç‡ï¼Œè¿­ä»£åœ°å°†æœ€é¢‘ç¹å‡ºç°çš„å­—èŠ‚å¯¹åˆå¹¶æˆæ–°çš„ã€æ›´é«˜çº§çš„Tokenã€‚å®ƒçš„è¾“å…¥ä¸ºè¯­æ–™ï¼ŒåŸºç¡€è¯è¡¨å’Œç‰¹æ®Štokenï¼Œè¾“å‡ºä¸ºè¯è¡¨ï¼ˆVocabularyï¼‰å­—å…¸å’Œè®°å½•åˆå¹¶çš„ä»¥å…ƒç»„ä¸ºå…ƒç´ çš„listã€‚</p><h1 id="BPE-Tokenizer-Training-çš„ä¸‰ä¸ªæ ¸å¿ƒæ­¥éª¤"><a href="#BPE-Tokenizer-Training-çš„ä¸‰ä¸ªæ ¸å¿ƒæ­¥éª¤" class="headerlink" title="BPE Tokenizer Training çš„ä¸‰ä¸ªæ ¸å¿ƒæ­¥éª¤"></a>BPE Tokenizer Training çš„ä¸‰ä¸ªæ ¸å¿ƒæ­¥éª¤</h1><p><strong>BPE Tokenizer Training åŒ…å«ä¸‰ä¸ªæ ¸å¿ƒæ­¥éª¤</strong>ï¼Œä»‹ç»å¦‚ä¸‹ï¼š</p><ol><li>è¯è¡¨åˆå§‹åŒ–ï¼ˆVocabulary Initialization)ï¼‰</li></ol><ul><li>åŸºç¡€è¯è¡¨ï¼š  åœ¨å­—èŠ‚çº§åˆ«çš„BPEä¸­ï¼Œåˆå§‹è¯è¡¨åŒ…å«æ‰€æœ‰å¯èƒ½çš„256ä¸ªå­—èŠ‚å€¼ï¼ˆ0-255ï¼‰ã€‚</li><li>ç‰¹æ®ŠTokenï¼š åœ¨æ­¤é˜¶æ®µä¹Ÿä¼šåŠ å…¥ç‰¹å®šçš„ç‰¹æ®Š Tokenï¼ˆå¦‚&nbsp;&lt;|endoftext|&gt;ï¼‰ï¼Œç”¨äºæ ‡è®°æ–‡æ¡£è¾¹ç•Œç­‰å…ƒæ•°æ®ã€‚è¿™äº› Token åœ¨åç»­å¤„ç†ä¸­æ°¸è¿œä¸ä¼šè¢«åˆ†å‰²ã€‚</li></ul><ol start="2"><li>é¢„åˆ†è¯ï¼ˆPre-tokenizationï¼‰<br>ä¸ºäº†æé«˜è®¡ç®—æ•ˆç‡å¹¶ä¿ç•™æ ‡ç‚¹ç¬¦å·çš„è¯­ä¹‰åŒºåˆ†ï¼ˆé¿å…è·¨å•è¯å’Œæ ‡ç‚¹çš„æ— æ„ä¹‰åˆå¹¶ï¼‰ï¼Œéœ€è¦å…ˆå¯¹è¯­æ–™è¿›è¡Œç²—ç²’åº¦çš„é¢„åˆ†è¯ã€‚</li></ol><ul><li>æ–¹æ³•ï¼š ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼ï¼ˆRegexï¼Œ å¦‚GPT-2ä½¿ç”¨çš„è§„åˆ™ï¼‰å°†åŸå§‹è¯­æ–™åˆ†å‰²æˆä¸€ä¸ªä¸ª â€œpre-tokenâ€ (é€šå¸¸æ˜¯å•è¯ã€æ ‡ç‚¹æˆ–ç©ºæ ¼çš„ç‰‡æ®µ)</li><li>ç»Ÿè®¡ï¼š è®¡ç®—æ¯ä¸ª pre-token åœ¨è¯­æ–™ä¸­å‡ºç°çš„é¢‘ç‡ã€‚åç»­çš„åˆå¹¶æ“ä½œä»…åœ¨è¿™äº› pre-token å†…éƒ¨è¿›è¡Œï¼Œè€Œä¸æ˜¯æ¯æ¬¡éƒ½é‡æ–°æ‰«ææ•´ä¸ªè¯­æ–™åº“ã€‚</li></ul><ol start="2"><li><p>è®¡ç®—BPEåˆå¹¶ï¼ˆCompute BPE Mergesï¼‰<br><strong>è¿™æ˜¯è®­ç»ƒçš„æ ¸å¿ƒå¾ªç¯è¿‡ç¨‹ï¼š</strong><br>1ï¼‰ ç»Ÿè®¡é¢‘æ¬¡ï¼šåœ¨æ‰€æœ‰ pre-token ä¸­ï¼Œç»Ÿè®¡æ¯ä¸€å¯¹ç›¸é‚»å­—èŠ‚ï¼ˆæˆ–ç°æœ‰ Tokenï¼‰å‡ºç°çš„é¢‘ç‡ã€‚<br>2ï¼‰ å¯»æ‰¾æœ€ä¼˜å¯¹ï¼š æ‰¾å‡ºé¢‘ç‡æœ€é«˜çš„å­—èŠ‚å¯¹ ï¼ˆä¾‹å¦‚ â€œAâ€ å’Œ â€œBâ€ï¼‰</p><ul><li>å¹³å±€æ‰“ç ´è§„åˆ™ï¼ˆTie-breakingï¼‰: å¦‚æœæœ‰å¤šå¯¹é¢‘ç‡ç›¸åŒï¼Œé€‰æ‹©å­—å…¸åºæ›´å¤§çš„é‚£ä¸€å¯¹ï¼ˆlexicographically greaterï¼‰ã€‚</li></ul><p> 3ï¼‰æ‰§è¡Œåˆå¹¶ï¼šå°†è¯¥æœ€å¤§é¢‘ç‡çš„å¯¹åˆå¹¶ä¸ºä¸€ä¸ªæ–°çš„ Token ï¼ˆâ€ABâ€ï¼‰ï¼Œå°†å…¶åŠ å…¥è¯è¡¨ï¼Œå¹¶è®°å½•æœ¬æ¬¡åˆå¹¶ã€‚</p><p> 4ï¼‰è¿­ä»£ï¼š é‡å¤ä¸Šè¿°è¿‡ç¨‹ï¼Œç›´åˆ°è¾¾åˆ°é¢„è®¾çš„åˆå¹¶æ¬¡æ•°æˆ–è¯è¡¨å¤§å°ã€‚</p></li></ol><h1 id="ä»£ç å®ç°"><a href="#ä»£ç å®ç°" class="headerlink" title="ä»£ç å®ç°"></a>ä»£ç å®ç°</h1><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">run_train_bpe</span>(<span class="params"></span></span><br><span class="line"><span class="params">    input_path: <span class="built_in">str</span> | os.PathLike,</span></span><br><span class="line"><span class="params">    vocab_size: <span class="built_in">int</span>,</span></span><br><span class="line"><span class="params">    special_tokens: <span class="built_in">list</span>[<span class="built_in">str</span>],</span></span><br><span class="line"><span class="params">    **kwargs,</span></span><br><span class="line"><span class="params"></span>) -&gt; <span class="built_in">tuple</span>[<span class="built_in">dict</span>[<span class="built_in">int</span>, <span class="built_in">bytes</span>], <span class="built_in">list</span>[<span class="built_in">tuple</span>[<span class="built_in">bytes</span>, <span class="built_in">bytes</span>]]]:</span><br><span class="line">    <span class="string">"""Given the path to an input corpus, run train a BPE tokenizer and</span></span><br><span class="line"><span class="string">    output its vocabulary and merges.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    Args:</span></span><br><span class="line"><span class="string">        input_path (str | os.PathLike): Path to BPE tokenizer training data.</span></span><br><span class="line"><span class="string">        vocab_size (int): Total number of items in the tokenizer's vocabulary (including special tokens).</span></span><br><span class="line"><span class="string">        special_tokens (list[str]): A list of string special tokens to be added to the tokenizer vocabulary.</span></span><br><span class="line"><span class="string">            These strings will never be split into multiple tokens, and will always be</span></span><br><span class="line"><span class="string">            kept as a single token. If these special tokens occur in the `input_path`,</span></span><br><span class="line"><span class="string">            they are treated as any other string.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    Returns:</span></span><br><span class="line"><span class="string">        tuple[dict[int, bytes], list[tuple[bytes, bytes]]]:</span></span><br><span class="line"><span class="string">            vocab:</span></span><br><span class="line"><span class="string">                The trained tokenizer vocabulary, a mapping from int (token ID in the vocabulary)</span></span><br><span class="line"><span class="string">                to bytes (token bytes)</span></span><br><span class="line"><span class="string">            merges:</span></span><br><span class="line"><span class="string">                BPE merges. Each list item is a tuple of bytes (&lt;token1&gt;, &lt;token2&gt;),</span></span><br><span class="line"><span class="string">                representing that &lt;token1&gt; was merged with &lt;token2&gt;.</span></span><br><span class="line"><span class="string">                Merges are ordered by order of creation.</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">   </span><br><span class="line">    </span><br><span class="line">    <span class="comment"># GPT-2 pre-tokenization pattern</span></span><br><span class="line">    GPT2_PATTERN = <span class="string">r"""'(?:[sdmt]|ll|ve|re)| ?\p{L}+| ?\p{N}+| ?[^\s\p{L}\p{N}]+|\s+(?!\S)|\s+"""</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># Step 1: Initialize vocabulary with all 256 bytes</span></span><br><span class="line">    vocab = {i: <span class="built_in">bytes</span>([i]) <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">256</span>)}</span><br><span class="line">    merges = []</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># Calculate number of merges needed</span></span><br><span class="line">    num_merges = vocab_size - <span class="number">256</span> - <span class="built_in">len</span>(special_tokens)</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># Step 2: Read and pre-tokenize the corpus</span></span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(input_path, <span class="string">'r'</span>, encoding=<span class="string">'utf-8'</span>, errors=<span class="string">'ignore'</span>) <span class="keyword">as</span> f:</span><br><span class="line">        text = f.read()</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># Step 3: Split on special tokens to prevent merging across them</span></span><br><span class="line">    <span class="keyword">if</span> special_tokens:</span><br><span class="line">        <span class="comment"># Escape special characters in special tokens and create pattern</span></span><br><span class="line">        escaped_tokens = [re.escape(token) <span class="keyword">for</span> token <span class="keyword">in</span> special_tokens]</span><br><span class="line">        split_pattern = <span class="string">'|'</span>.join(escaped_tokens)</span><br><span class="line">        text_segments = re.split(<span class="string">f'(<span class="subst">{split_pattern}</span>)'</span>, text)</span><br><span class="line">        <span class="comment"># Filter out the special tokens themselves and empty strings</span></span><br><span class="line">        text_segments = [seg <span class="keyword">for</span> seg <span class="keyword">in</span> text_segments <span class="keyword">if</span> seg <span class="keyword">and</span> seg <span class="keyword">not</span> <span class="keyword">in</span> special_tokens]</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        text_segments = [text]</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># Step 4: Pre-tokenize each text segment</span></span><br><span class="line">    pre_tokens = []</span><br><span class="line">    <span class="keyword">for</span> segment <span class="keyword">in</span> text_segments:</span><br><span class="line">        <span class="comment"># Apply GPT-2 regex pattern to get pre-tokens</span></span><br><span class="line">        matches = re.findall(GPT2_PATTERN, segment)</span><br><span class="line">        <span class="keyword">for</span> <span class="keyword">match</span> <span class="keyword">in</span> matches:</span><br><span class="line">            <span class="comment"># Convert each pre-token to a list of bytes</span></span><br><span class="line">            pre_tokens.append([<span class="built_in">bytes</span>([b]) <span class="keyword">for</span> b <span class="keyword">in</span> <span class="keyword">match</span>.encode(<span class="string">'utf-8'</span>)])</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># Step 5: Perform BPE merges (ULTRA OPTIMIZED - Incremental pair counting)</span></span><br><span class="line">    <span class="comment"># Convert pre_tokens to a frequency map to avoid redundant processing</span></span><br><span class="line">    <span class="comment"># ç»Ÿè®¡åˆå§‹æ—¶ï¼Œæ¯ä¸ªå­—ç¬¦ä¸²çš„é¢‘æ¬¡</span></span><br><span class="line">    word_freqs = {}</span><br><span class="line">    <span class="keyword">for</span> token_seq <span class="keyword">in</span> pre_tokens:</span><br><span class="line">        word_tuple = <span class="built_in">tuple</span>(token_seq)</span><br><span class="line">        word_freqs[word_tuple] = word_freqs.get(word_tuple, <span class="number">0</span>) + <span class="number">1</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># Initial pair counting</span></span><br><span class="line">    <span class="comment"># ç»Ÿè®¡åˆå§‹æ—¶ æ¯ä¸ªç›¸é‚»å¯¹å‡ºç°çš„é¢‘æ¬¡</span></span><br><span class="line">    pair_counts = {}</span><br><span class="line">    <span class="keyword">for</span> word, freq <span class="keyword">in</span> word_freqs.items():</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(word) - <span class="number">1</span>):</span><br><span class="line">            pair = (word[i], word[i+<span class="number">1</span>])</span><br><span class="line">            pair_counts[pair] = pair_counts.get(pair, <span class="number">0</span>) + freq</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(num_merges):</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> pair_counts:</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment"># Find best pair (sort by frequency, then lexicographically)</span></span><br><span class="line">        best_pair = <span class="built_in">max</span>(pair_counts, key=<span class="keyword">lambda</span> p: (pair_counts[p], p))</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># Create new token</span></span><br><span class="line">        new_token = best_pair[<span class="number">0</span>] + best_pair[<span class="number">1</span>]</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># Add to vocab and merges</span></span><br><span class="line">        vocab[<span class="built_in">len</span>(vocab)] = new_token</span><br><span class="line">        merges.append(best_pair)</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># Update word_freqs and pair_counts incrementally</span></span><br><span class="line">        new_word_freqs = {}</span><br><span class="line">        <span class="keyword">for</span> word, freq <span class="keyword">in</span> word_freqs.items():</span><br><span class="line">            <span class="comment"># Check if this word contains the pair to merge</span></span><br><span class="line">            <span class="keyword">if</span> <span class="built_in">len</span>(word) &lt; <span class="number">2</span>:</span><br><span class="line">                new_word_freqs[word] = freq</span><br><span class="line">                <span class="keyword">continue</span></span><br><span class="line">            </span><br><span class="line">            <span class="comment"># Check if pair exists in word</span></span><br><span class="line">            has_pair = <span class="literal">False</span></span><br><span class="line">            <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(word) - <span class="number">1</span>):</span><br><span class="line">                <span class="keyword">if</span> word[i] == best_pair[<span class="number">0</span>] <span class="keyword">and</span> word[i+<span class="number">1</span>] == best_pair[<span class="number">1</span>]:</span><br><span class="line">                    has_pair = <span class="literal">True</span></span><br><span class="line">                    <span class="keyword">break</span></span><br><span class="line">            </span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">not</span> has_pair:</span><br><span class="line">                <span class="comment"># Word unchanged, keep it</span></span><br><span class="line">                new_word_freqs[word] = freq</span><br><span class="line">                <span class="keyword">continue</span></span><br><span class="line">            </span><br><span class="line">            <span class="comment"># Remove old pairs from pair_counts</span></span><br><span class="line">            <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(word) - <span class="number">1</span>):</span><br><span class="line">                old_pair = (word[i], word[i+<span class="number">1</span>])</span><br><span class="line">                pair_counts[old_pair] = pair_counts.get(old_pair, <span class="number">0</span>) - freq</span><br><span class="line">                <span class="keyword">if</span> pair_counts[old_pair] &lt;= <span class="number">0</span>:</span><br><span class="line">                    <span class="keyword">del</span> pair_counts[old_pair]</span><br><span class="line">            </span><br><span class="line">            <span class="comment"># Merge the pair in this word</span></span><br><span class="line">            new_word = []</span><br><span class="line">            i = <span class="number">0</span></span><br><span class="line">            <span class="keyword">while</span> i &lt; <span class="built_in">len</span>(word):</span><br><span class="line">                <span class="keyword">if</span> i &lt; <span class="built_in">len</span>(word) - <span class="number">1</span> <span class="keyword">and</span> word[i] == best_pair[<span class="number">0</span>] <span class="keyword">and</span> word[i+<span class="number">1</span>] == best_pair[<span class="number">1</span>]:</span><br><span class="line">                    new_word.append(new_token)</span><br><span class="line">                    i += <span class="number">2</span></span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    new_word.append(word[i])</span><br><span class="line">                    i += <span class="number">1</span></span><br><span class="line">            </span><br><span class="line">            new_word_tuple = <span class="built_in">tuple</span>(new_word)</span><br><span class="line">            new_word_freqs[new_word_tuple] = freq</span><br><span class="line">            </span><br><span class="line">            <span class="comment"># Add new pairs to pair_counts</span></span><br><span class="line">            <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(new_word) - <span class="number">1</span>):</span><br><span class="line">                new_pair = (new_word[i], new_word[i+<span class="number">1</span>])</span><br><span class="line">                pair_counts[new_pair] = pair_counts.get(new_pair, <span class="number">0</span>) + freq</span><br><span class="line">        </span><br><span class="line">        word_freqs = new_word_freqs</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># Step 6: Add special tokens to vocabulary</span></span><br><span class="line">    <span class="keyword">for</span> special_token <span class="keyword">in</span> special_tokens:</span><br><span class="line">        special_token_bytes = special_token.encode(<span class="string">'utf-8'</span>)</span><br><span class="line">        <span class="keyword">if</span> special_token_bytes <span class="keyword">not</span> <span class="keyword">in</span> vocab.values():</span><br><span class="line">            vocab[<span class="built_in">len</span>(vocab)] = special_token_bytes</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> vocab, merges</span><br></pre></td></tr></tbody></table></figure>]]></content>
      
      
      <categories>
          
          <category> å¤§æ¨¡å‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> BPE </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Clashè§„åˆ™é…ç½®æŒ‡å—</title>
      <link href="/2025/12/02/clash-gui-ze-pei-zhi-zhi-nan/"/>
      <url>/2025/12/02/clash-gui-ze-pei-zhi-zhi-nan/</url>
      
        <content type="html"><![CDATA[<p>åŸæ–‡è½¬è‡ªï¼š <a href="https://flashvpn.io/blog/clash-custom-rules-tutorial">https://flashvpn.io/blog/clash-custom-rules-tutorial</a></p><h1 id="Clash-è§„åˆ™å®Œå…¨æŒ‡å—ï¼š2025-æœ€æ–°åˆ†æµè§„åˆ™ã€è‡ªå®šä¹‰é…ç½®"><a href="#Clash-è§„åˆ™å®Œå…¨æŒ‡å—ï¼š2025-æœ€æ–°åˆ†æµè§„åˆ™ã€è‡ªå®šä¹‰é…ç½®" class="headerlink" title="Clash è§„åˆ™å®Œå…¨æŒ‡å—ï¼š2025 æœ€æ–°åˆ†æµè§„åˆ™ã€è‡ªå®šä¹‰é…ç½®"></a>Clash è§„åˆ™å®Œå…¨æŒ‡å—ï¼š2025 æœ€æ–°åˆ†æµè§„åˆ™ã€è‡ªå®šä¹‰é…ç½®</h1><ul><li>â€œä¸ºä»€ä¹ˆæœ‰äº›ç½‘ç«™æ‰“ä¸å¼€ï¼Œå¿…é¡»æ‰‹åŠ¨åˆ‡æ¢ä»£ç†æ¨¡å¼ï¼Ÿâ€</li><li>â€œæ€æ ·æ‰èƒ½è®© Netflixã€YouTube ç­‰æµåª’ä½“è‡ªåŠ¨èµ°æœ€å¿«çš„èŠ‚ç‚¹ï¼Ÿâ€</li><li>â€œæˆ‘æƒ³å±è”½ App å’Œç½‘é¡µé‡Œçš„å¹¿å‘Šï¼ŒClash èƒ½åšåˆ°å—ï¼Ÿâ€</li></ul><p>è¿™äº›é—®é¢˜çš„æ ¸å¿ƒéƒ½æŒ‡å‘åŒä¸€ä¸ªåŠŸèƒ½â€”â€”Clash è§„åˆ™ã€‚</p><p>ç®€å•æ¥è¯´ï¼ŒClash è§„åˆ™å°±æ˜¯ä¸€å¥—äº¤é€šæŒ‡æŒ¥ç³»ç»Ÿï¼Œå®ƒèƒ½è‡ªåŠ¨åˆ¤æ–­å“ªäº›ç½‘ç«™åº”è¯¥èµ°ä»£ç†ï¼ˆç¿»å¢™ï¼‰ï¼Œå“ªäº›åº”è¯¥ç›´è¿ï¼ˆè®¿é—®å›½å†…ç½‘ç«™ï¼‰ï¼Œå“ªäº›åº”è¯¥è¢«å±è”½ï¼ˆå»å¹¿å‘Šï¼‰ã€‚ä¸€å¥—å¥½çš„è§„åˆ™èƒ½è®©æ‚¨çš„ä¸Šç½‘ä½“éªŒå¦‚ä¸èˆ¬é¡ºæ»‘ï¼Œæ— éœ€ä»»ä½•æ‰‹åŠ¨å¹²é¢„ã€‚</p><p>æœ¬æ–‡å°±æ˜¯æ‚¨çš„ç»ˆæè§£å†³æ–¹æ¡ˆã€‚æˆ‘ä»¬å°†é¦–å…ˆä¸ºç»å¤§å¤šæ•°ç”¨æˆ·æä¾›å¹¿å—å¥½è¯„çš„â€œæ‡’äººâ€è§„åˆ™è®¢é˜…åœ°å€ï¼Œè®©æ‚¨ä¸€é”®é…ç½®å¥½å¼ºå¤§çš„åˆ†æµåŠŸèƒ½ã€‚å¯¹äºå¸Œæœ›ç²¾ç»†åŒ–æ§åˆ¶æ¯ä¸€æ¡æµé‡çš„è¿›é˜¶ç”¨æˆ·ï¼Œæˆ‘ä»¬ä¹Ÿåœ¨ååŠéƒ¨åˆ†ä¿ç•™äº†è¯¦å°½çš„æ‰‹åŠ¨ç¼–å†™è§„åˆ™æ•™ç¨‹ã€‚</p><p>æ— è®ºæ‚¨æ˜¯æ–°æ‰‹è¿˜æ˜¯é«˜æ‰‹ï¼Œéƒ½èƒ½åœ¨è¿™ç¯‡æŒ‡å—ä¸­æ‰¾åˆ°æ»¡æ„çš„ç­”æ¡ˆã€‚</p><hr><h2 id="ç¬¬ä¸€éƒ¨åˆ†ï¼šã€–æ‡’äººåŒ…ã€—æœ€ä½³-Clash-è§„åˆ™è®¢é˜…æ¨è"><a href="#ç¬¬ä¸€éƒ¨åˆ†ï¼šã€–æ‡’äººåŒ…ã€—æœ€ä½³-Clash-è§„åˆ™è®¢é˜…æ¨è" class="headerlink" title="ç¬¬ä¸€éƒ¨åˆ†ï¼šã€–æ‡’äººåŒ…ã€—æœ€ä½³ Clash è§„åˆ™è®¢é˜…æ¨è"></a>ç¬¬ä¸€éƒ¨åˆ†ï¼šã€–æ‡’äººåŒ…ã€—æœ€ä½³ Clash è§„åˆ™è®¢é˜…æ¨è</h2><p>å¯¹äºå¤§å¤šæ•°ç”¨æˆ·è€Œè¨€ï¼Œæ‰‹åŠ¨ç»´æŠ¤è§„åˆ™è´¹æ—¶è´¹åŠ›ã€‚æœ€é«˜æ•ˆçš„æ–¹æ³•æ˜¯ä½¿ç”¨ç¤¾åŒºç»´æŠ¤çš„ã€é«˜è´¨é‡çš„è¿œç¨‹è§„åˆ™é›†ã€‚æ‚¨åªéœ€åœ¨ Clash ä¸­æ·»åŠ ä¸€ä¸ªè®¢é˜…é“¾æ¥ï¼Œå³å¯è‡ªåŠ¨è·å–å¹¶æ›´æ–°ä¸Šåƒæ¡ä¼˜åŒ–å¥½çš„è§„åˆ™é›†ã€‚</p><h3 id="æ¨èçš„è§„åˆ™é›†ï¼šLoyalsoldier-clash-rules"><a href="#æ¨èçš„è§„åˆ™é›†ï¼šLoyalsoldier-clash-rules" class="headerlink" title="æ¨èçš„è§„åˆ™é›†ï¼šLoyalsoldier/clash-rules"></a>æ¨èçš„è§„åˆ™é›†ï¼š<code>Loyalsoldier/clash-rules</code></h3><p>è¿™æ˜¯ç›®å‰æœ€å—æ¬¢è¿å’Œæ¨èçš„å¼€æº Clash è§„åˆ™é¡¹ç›®ä¹‹ä¸€ï¼Œç”±ç¤¾åŒºå…±åŒç»´æŠ¤ï¼Œæ›´æ–°éå¸¸åŠæ—¶ã€‚ </p><ul><li><strong>ç‰¹ç‚¹</strong>ï¼šè§„åˆ™å…¨é¢ï¼Œç²¾å‡†è¯†åˆ«å›½å†…å¤–æµé‡ï¼Œå†…ç½®å¹¿å‘Šå±è”½ã€å¸¸è§æµåª’ä½“åˆ†æµç­‰ã€‚ </li><li><strong>GitHub é¡¹ç›®åœ°å€</strong>ï¼š<a href="https://github.com/Loyalsoldier/clash-rules">https://github.com/Loyalsoldier/clash-rules</a></li></ul><h3 id="å¦‚ä½•åœ¨-Clash-ä¸­æ·»åŠ è§„åˆ™è®¢é˜…ï¼Ÿ"><a href="#å¦‚ä½•åœ¨-Clash-ä¸­æ·»åŠ è§„åˆ™è®¢é˜…ï¼Ÿ" class="headerlink" title="å¦‚ä½•åœ¨ Clash ä¸­æ·»åŠ è§„åˆ™è®¢é˜…ï¼Ÿ"></a>å¦‚ä½•åœ¨ Clash ä¸­æ·»åŠ è§„åˆ™è®¢é˜…ï¼Ÿ</h3><p>æ‚¨ä¸éœ€è¦ä¸‹è½½ä»»ä½•æ–‡ä»¶ï¼Œåªéœ€è¦åœ¨ Clash çš„é…ç½®æ–‡ä»¶ä¸­æ·»åŠ ä¸€ä¸ª â€œè§„åˆ™æä¾›è€…â€ï¼ˆRule Providerï¼‰å³å¯ã€‚ </p><p>æ­¥éª¤å¦‚ä¸‹ï¼š</p><ol><li><p>æ‰“å¼€ Clash é…ç½®æ–‡ä»¶ï¼šåœ¨ Clash å®¢æˆ·ç«¯çš„ â€œProfilesâ€ é¡µé¢ï¼Œå³é”®ç‚¹å‡»æ‚¨æ­£åœ¨ä½¿ç”¨çš„é…ç½®æ–‡ä»¶ï¼Œé€‰æ‹© â€œEdit in Text Modeâ€ æˆ– â€œç¼–è¾‘â€ã€‚ </p></li><li><p>æ‰¾åˆ° <code>rule-providers</code> éƒ¨åˆ†ï¼šå¦‚æœæ‚¨çš„é…ç½®æ–‡ä»¶ä¸­æ²¡æœ‰è¿™ä¸ªå­—æ®µï¼Œå¯ä»¥åœ¨æœ«å°¾æ‰‹åŠ¨æ·»åŠ ã€‚ </p></li><li><p>æ·»åŠ æ–°çš„è§„åˆ™æä¾›è€…ï¼Œä¾‹å¦‚ï¼š</p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">rule-providers:</span></span><br><span class="line">  <span class="comment"># æ‚¨è‡ªå·±çš„å…¶ä»–è§„åˆ™æä¾›è€…...</span></span><br><span class="line">  <span class="attr">Loyalsoldier-Rules:</span>  <span class="comment"># è¿™é‡Œæ˜¯è§„åˆ™çš„åç§°ï¼Œå¯ä»¥è‡ªå®šä¹‰</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">http</span></span><br><span class="line">    <span class="attr">behavior:</span> <span class="string">classical</span>  <span class="comment"># æˆ– domain</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">"https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/rules.txt"</span></span><br><span class="line">    <span class="attr">path:</span> <span class="string">./rules/Loyalsoldier-Rules.txt</span></span><br><span class="line">    <span class="attr">interval:</span> <span class="number">86400</span>  <span class="comment"># æ›´æ–°é—´éš”ï¼Œå•ä½ä¸ºç§’ï¼Œ86400 ç§’ä¸ºä¸€å¤©</span></span><br></pre></td></tr></tbody></table></figure></li><li><p>åœ¨è§„åˆ™åˆ—è¡¨ä¸­å¼•ç”¨ï¼šåœ¨é…ç½®æ–‡ä»¶çš„ <code>rules:</code> åˆ—è¡¨é¡¶éƒ¨ï¼Œæ·»åŠ ä¸€è¡Œæ¥å¼•ç”¨è¿™ä¸ªè§„åˆ™é›†ï¼Œä¾‹å¦‚ï¼š</p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">rules:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">RULE-SET,Loyalsoldier-Rules,PROXY</span>  <span class="comment"># å¼•ç”¨è§„åˆ™é›†ï¼Œå¹¶æŒ‡å®šåŒ¹é…åçš„ç­–ç•¥</span></span><br><span class="line">  <span class="comment"># æ‚¨è‡ªå·±çš„å…¶ä»–è§„åˆ™...</span></span><br></pre></td></tr></tbody></table></figure></li><li><p>ä¿å­˜å¹¶é‡è½½ï¼šä¿å­˜æ‚¨çš„é…ç½®æ–‡ä»¶ï¼ŒClash ä¼šè‡ªåŠ¨ä¸‹è½½å¹¶åº”ç”¨æ–°çš„è§„åˆ™é›†ã€‚</p></li></ol><hr><h2 id="ç¬¬äºŒéƒ¨åˆ†ï¼šå¸¸è§åˆ†æµç­–ç•¥è§£æ"><a href="#ç¬¬äºŒéƒ¨åˆ†ï¼šå¸¸è§åˆ†æµç­–ç•¥è§£æ" class="headerlink" title="ç¬¬äºŒéƒ¨åˆ†ï¼šå¸¸è§åˆ†æµç­–ç•¥è§£æ"></a>ç¬¬äºŒéƒ¨åˆ†ï¼šå¸¸è§åˆ†æµç­–ç•¥è§£æ</h2><p>è§„åˆ™çš„ä½œç”¨å°±æ˜¯å‘Šè¯‰ Clashï¼ŒåŒ¹é…åˆ°çš„æµé‡è¯¥æ‰§è¡Œå“ªç§â€œç­–ç•¥â€ã€‚ç†è§£è¿™äº›ç­–ç•¥æ˜¯è‡ªå®šä¹‰åˆ†æµçš„åŸºç¡€ã€‚ </p><ul><li><strong>PROXYï¼ˆä»£ç†ï¼‰</strong>ï¼šæœ€æ ¸å¿ƒçš„ç­–ç•¥ã€‚æ‰€æœ‰åŒ¹é…åˆ°æ­¤ç­–ç•¥çš„æµé‡ï¼Œéƒ½ä¼šé€šè¿‡æ‚¨é€‰æ‹©çš„ä»£ç†èŠ‚ç‚¹ï¼ˆä¾‹å¦‚ç¾å›½ã€é¦™æ¸¯èŠ‚ç‚¹ï¼‰è¿›è¡Œè®¿é—®ã€‚é€šå¸¸ç”¨äºè®¿é—® Google, YouTube, Netflix ç­‰æœåŠ¡ã€‚ </li><li><strong>DIRECTï¼ˆç›´è¿ï¼‰</strong>ï¼šåŒ¹é…æ­¤ç­–ç•¥çš„æµé‡å°†ä¸é€šè¿‡ä»£ç†ï¼Œç›´æ¥ä½¿ç”¨æ‚¨æœ¬åœ°çš„ç½‘ç»œè¿›è¡Œè¿æ¥ã€‚é€šå¸¸ç”¨äºè®¿é—®å›½å†…ç½‘ç«™å’ŒæœåŠ¡ï¼ˆå¦‚ Bilibiliã€æ·˜å®ï¼‰ï¼Œå¯ä»¥æœ€å¤§åŒ–è®¿é—®é€Ÿåº¦ï¼ŒèŠ‚çœä»£ç†æµé‡ã€‚ </li><li><strong>REJECTï¼ˆæ‹’ç»ï¼‰</strong>ï¼šåŒ¹é…æ­¤ç­–ç•¥çš„æµé‡å°†è¢«ç›´æ¥é˜»æ–­ã€‚è¿™æ˜¯å®ç°å¹¿å‘Šå±è”½å’Œéšç§è¿½è¸ªé˜²æŠ¤çš„å…³é”®ã€‚å½“ä¸€ä¸ªè¯·æ±‚ï¼ˆä¾‹å¦‚å¹¿å‘ŠåŸŸåï¼‰åŒ¹é…åˆ° REJECT è§„åˆ™ï¼ŒClash ä¼šç«‹å³æ‹’ç»è¿æ¥ï¼Œæ‚¨çš„è®¾å¤‡ä¸Šå°±ä¸ä¼šæ˜¾ç¤ºè¿™ä¸ªå¹¿å‘Šã€‚</li></ul><p>é€šè¿‡ç»„åˆä½¿ç”¨è¿™äº›ç­–ç•¥ï¼Œæ‚¨å¯ä»¥åˆ›å»ºå‡ºå¼ºå¤§çš„åˆ†æµç³»ç»Ÿï¼Œä¾‹å¦‚ï¼š</p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">DOMAIN-SUFFIX,google.com,PROXY</span>    <span class="comment"># æ‰€æœ‰ Google ç½‘ç«™èµ°ä»£ç†</span></span><br><span class="line"><span class="string">DOMAIN-SUFFIX,bilibili.com,DIRECT</span>  <span class="comment"># æ‰€æœ‰ B ç«™æµé‡éƒ½ç›´è¿</span></span><br><span class="line"><span class="string">DOMAIN-KEYWORD,adservice,REJECT</span>    <span class="comment"># æ‰€æœ‰åŸŸåä¸­åŒ…å« â€œadserviceâ€ çš„æµé‡éƒ½è¢«å±è”½</span></span><br></pre></td></tr></tbody></table></figure><hr><h2 id="ç¬¬ä¸‰éƒ¨åˆ†ï¼šã€–è¿›é˜¶ç¯‡ã€—æ‰‹åŠ¨ç¼–å†™ä½ çš„ä¸“å±è§„åˆ™"><a href="#ç¬¬ä¸‰éƒ¨åˆ†ï¼šã€–è¿›é˜¶ç¯‡ã€—æ‰‹åŠ¨ç¼–å†™ä½ çš„ä¸“å±è§„åˆ™" class="headerlink" title="ç¬¬ä¸‰éƒ¨åˆ†ï¼šã€–è¿›é˜¶ç¯‡ã€—æ‰‹åŠ¨ç¼–å†™ä½ çš„ä¸“å±è§„åˆ™"></a>ç¬¬ä¸‰éƒ¨åˆ†ï¼šã€–è¿›é˜¶ç¯‡ã€—æ‰‹åŠ¨ç¼–å†™ä½ çš„ä¸“å±è§„åˆ™</h2><p>å¦‚æœç¤¾åŒºæä¾›çš„è§„åˆ™é›†ä»ç„¶æ— æ³•æ»¡è¶³æ‚¨æåº¦ä¸ªæ€§åŒ–çš„éœ€æ±‚ï¼ˆä¾‹å¦‚ï¼Œæ‚¨éœ€è¦è®¿é—®ä¸€ä¸ªéå¸¸å°ä¼—çš„ç½‘ç«™ï¼Œè€Œè§„åˆ™é›†æ²¡æœ‰æ”¶å½•å®ƒï¼‰ï¼Œé‚£ä¹ˆæ‚¨å¯ä»¥å­¦ä¹ å¦‚ä½•æ‰‹åŠ¨ç¼–å†™è‡ªå·±çš„è§„åˆ™ã€‚ </p><blockquote><p><strong>å…è´£å£°æ˜</strong>ï¼šæœ¬æ•™ç¨‹é¢å‘å·²ç†Ÿç»ƒä½¿ç”¨ Clash çš„è¿›é˜¶ç”¨æˆ·ã€‚ä¿®æ”¹é…ç½®æ–‡ä»¶æœ‰ä¸€å®šé£é™©ï¼Œè¯·åœ¨æ“ä½œå‰å¤‡ä»½æ‚¨çš„åŸå§‹è®¢é˜…é“¾æ¥ã€‚ </p></blockquote><h3 id="Clash-è§„åˆ™çš„æ ¸å¿ƒåŸç†"><a href="#Clash-è§„åˆ™çš„æ ¸å¿ƒåŸç†" class="headerlink" title="Clash è§„åˆ™çš„æ ¸å¿ƒåŸç†"></a>Clash è§„åˆ™çš„æ ¸å¿ƒåŸç†</h3><p>åœ¨åŠ¨æ‰‹ä¹‹å‰ï¼Œæˆ‘ä»¬å¿…é¡»ç†è§£ Clash è§„åˆ™çš„å·¥ä½œæœºåˆ¶ã€‚</p><blockquote><p><strong>æ ¸å¿ƒæ€æƒ³</strong>ï¼šClash çš„è§„åˆ™å¼•æ“å°±åƒä¸€ä¸ªä¸¥æ ¼çš„â€œé—¨å«â€ã€‚æ¯å½“æœ‰ä¸€ä¸ªç½‘ç»œè¯·æ±‚ï¼ˆä¾‹å¦‚ï¼Œè®¿é—® <code>apple.com</code>ï¼‰è¯•å›¾é€šè¿‡æ—¶ï¼Œé—¨å«ä¼šä»ä¸Šåˆ°ä¸‹åœ°æ£€æŸ¥å®ƒçš„â€œè§„åˆ™åˆ—è¡¨â€ã€‚ä¸€æ—¦æŸä¸ªè¯·æ±‚åŒ¹é…åˆ°äº†åˆ—è¡¨ä¸­çš„æŸä¸€æ¡è§„åˆ™ï¼Œé—¨å«å°±ä¼šç«‹åˆ»æŒ‰ç…§è¯¥è§„åˆ™çš„æŒ‡ç¤ºæ”¾è¡Œï¼ˆä¾‹å¦‚ï¼Œäº¤ç»™â€œç¾å›½èŠ‚ç‚¹â€å¤„ç†ï¼‰ï¼Œå¹¶ä¸”ä¸å†æ£€æŸ¥åç»­çš„è§„åˆ™ã€‚ </p></blockquote><p>è¿™ä¸ªâ€œåŒ¹é…å³åœæ­¢â€çš„åŸåˆ™è‡³å…³é‡è¦ã€‚ </p><h3 id="è§„åˆ™çš„åŸºæœ¬è¯­æ³•"><a href="#è§„åˆ™çš„åŸºæœ¬è¯­æ³•" class="headerlink" title="è§„åˆ™çš„åŸºæœ¬è¯­æ³•"></a>è§„åˆ™çš„åŸºæœ¬è¯­æ³•</h3><p>ä¸€æ¡ Clash è§„åˆ™é€šå¸¸ç”±ä¸‰ä¸ªéƒ¨åˆ†ç»„æˆï¼š<code>ç±»å‹</code>, <code>å€¼</code>, <code>ç­–ç•¥</code>ã€‚ </p><p><strong>æ ¼å¼</strong>ï¼š<code>TYPE,VALUE,POLICY</code></p><ul><li><p><strong>TYPEï¼ˆç±»å‹ï¼‰</strong>ï¼šåŒ¹é…çš„ç±»å‹ã€‚æœ€å¸¸ç”¨çš„æœ‰ï¼š</p><ul><li><code>DOMAIN-SUFFIX</code>ï¼šåŒ¹é…åŸŸååç¼€ã€‚ä¾‹å¦‚ <code>apple.com</code> å¯ä»¥åŒ¹é… <code>www.apple.com</code> å’Œ <code>music.apple.com</code>ã€‚ </li><li><code>DOMAIN-KEYWORD</code>ï¼šåŒ¹é…åŸŸåä¸­çš„å…³é”®è¯ã€‚ä¾‹å¦‚ <code>google</code> å¯ä»¥åŒ¹é… <code>www.google.com</code> å’Œ <code>google.com.hk</code>ã€‚ </li><li><code>IP-CIDR</code>ï¼šåŒ¹é…ä¸€ä¸ª IP åœ°å€æ®µã€‚ </li><li><code>GEOIP</code>ï¼šåŒ¹é…ç‰¹å®šå›½å®¶æˆ–åœ°åŒºçš„ IPã€‚ </li><li><code>FINAL</code>ï¼šæœ€ç»ˆè§„åˆ™ï¼Œå½“ä»¥ä¸Šæ‰€æœ‰è§„åˆ™éƒ½æœªåŒ¹é…æ—¶ï¼Œæ‰§è¡Œæ­¤è§„åˆ™ã€‚</li></ul></li><li><p><strong>VALUEï¼ˆå€¼ï¼‰</strong>ï¼šæ‚¨å¸Œæœ›åŒ¹é…çš„å…·ä½“å†…å®¹ï¼Œä¾‹å¦‚ <code>apple.com</code>ã€‚ </p></li><li><p><strong>POLICYï¼ˆç­–ç•¥ï¼‰</strong>ï¼šåŒ¹é…æˆåŠŸåï¼Œè¦æ‰§è¡Œçš„åŠ¨ä½œã€‚å®ƒå¯ä»¥æ˜¯ï¼š</p><ul><li><code>DIRECT</code>ï¼šç›´è¿ï¼Œä¸èµ°ä»£ç†ã€‚ </li><li><code>REJECT</code>ï¼šæ‹’ç»è¿æ¥ï¼Œå¸¸ç”¨äºå±è”½å¹¿å‘Šã€‚ </li><li>ä¸€ä¸ªç­–ç•¥ç»„çš„åç§°ï¼šä¾‹å¦‚ <code>Proxy</code>, <code>US-Nodes</code>, <code>Streaming</code> ç­‰ã€‚è¿™æ˜¯æ‚¨åœ¨ Proxiesï¼ˆä»£ç†ï¼‰ç•Œé¢çœ‹åˆ°çš„é‚£äº›å¯ä»¥æ‰‹åŠ¨é€‰æ‹©çš„ç­–ç•¥ç»„ã€‚</li></ul></li></ul><p><strong>ç¤ºä¾‹</strong>ï¼š</p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">DOMAIN-SUFFIX,apple.com,US-Nodes</span>     <span class="comment"># æ‰€æœ‰ä»¥ apple.com ç»“å°¾çš„åŸŸåï¼Œéƒ½äº¤ç»™åä¸º â€œUS-Nodesâ€ çš„ç­–ç•¥ç»„å¤„ç†</span></span><br><span class="line"><span class="string">DOMAIN-KEYWORD,google,Proxy</span>          <span class="comment"># æ‰€æœ‰åŸŸåä¸­åŒ…å« google å…³é”®è¯çš„ï¼Œéƒ½äº¤ç»™åä¸º â€œProxyâ€ çš„ç­–ç•¥ç»„å¤„ç†</span></span><br><span class="line"><span class="string">GEOIP,CN,DIRECT</span>                      <span class="comment"># æ‰€æœ‰ç›®æ ‡ IP åœ°å€å½’å±äºä¸­å›½çš„ï¼Œéƒ½ç›´æ¥è¿æ¥</span></span><br><span class="line"><span class="string">FINAL,Proxy</span>                          <span class="comment"># ä»¥ä¸Šè§„åˆ™éƒ½æœªåŒ¹é…æ—¶ï¼Œé»˜è®¤éƒ½äº¤ç»™åä¸º â€œProxyâ€ çš„ç­–ç•¥ç»„å¤„ç†</span></span><br></pre></td></tr></tbody></table></figure><h3 id="å¦‚ä½•æ·»åŠ æ‚¨çš„è‡ªå®šä¹‰è§„åˆ™ï¼Ÿ"><a href="#å¦‚ä½•æ·»åŠ æ‚¨çš„è‡ªå®šä¹‰è§„åˆ™ï¼Ÿ" class="headerlink" title="å¦‚ä½•æ·»åŠ æ‚¨çš„è‡ªå®šä¹‰è§„åˆ™ï¼Ÿ"></a>å¦‚ä½•æ·»åŠ æ‚¨çš„è‡ªå®šä¹‰è§„åˆ™ï¼Ÿ</h3><p>è¿™é‡Œæˆ‘ä»¬ä»‹ç»å¯¹æ–°æ‰‹æ›´å‹å¥½çš„â€œæœ¬åœ°è§„åˆ™æ–‡ä»¶â€æ–¹æ³•ï¼Œå®ƒæ¯”ç›´æ¥ä¿®æ”¹ä¸»é…ç½®æ–‡ä»¶æ›´å®‰å…¨ã€‚ </p><h4 id="æ­¥éª¤ä¸€ï¼šåˆ›å»ºä¸€ä¸ªæœ¬åœ°è§„åˆ™æ–‡ä»¶"><a href="#æ­¥éª¤ä¸€ï¼šåˆ›å»ºä¸€ä¸ªæœ¬åœ°è§„åˆ™æ–‡ä»¶" class="headerlink" title="æ­¥éª¤ä¸€ï¼šåˆ›å»ºä¸€ä¸ªæœ¬åœ°è§„åˆ™æ–‡ä»¶"></a>æ­¥éª¤ä¸€ï¼šåˆ›å»ºä¸€ä¸ªæœ¬åœ°è§„åˆ™æ–‡ä»¶</h4><ul><li><p><strong>ä»»åŠ¡ä¸€</strong>ï¼šåˆ›å»ºæ–‡æœ¬æ–‡ä»¶</p><ul><li>åœ¨æ‚¨ç”µè„‘ä¸Šä¸€ä¸ªæ–¹ä¾¿çš„ä½ç½®ï¼ˆä¾‹å¦‚ â€œæ–‡æ¡£â€ æ–‡ä»¶å¤¹ï¼‰ï¼Œåˆ›å»ºä¸€ä¸ªçº¯æ–‡æœ¬æ–‡ä»¶ã€‚</li><li>å°†å…¶å‘½åä¸º <code>my-rules.txt</code>ã€‚</li></ul></li><li><p><strong>ä»»åŠ¡äºŒ</strong>ï¼šç¼–å†™æ‚¨çš„è§„åˆ™</p><ul><li><p>ç”¨æ–‡æœ¬ç¼–è¾‘å™¨æ‰“å¼€ <code>my-rules.txt</code>ï¼Œåœ¨é‡Œé¢å†™å…¥æ‚¨æƒ³è¦çš„è§„åˆ™ã€‚</p></li><li><p>ä¾‹å¦‚ï¼Œå‡è®¾æ‚¨æƒ³è®©æ‰€æœ‰è®¿é—® <code>openai.com</code> çš„æµé‡éƒ½èµ°ä»£ç†ï¼Œå¹¶ä¸”å±è”½ä¸€ä¸ªå¹¿å‘ŠåŸŸå <code>ads.example.com</code>ã€‚æ‚¨å¯ä»¥åœ¨æ–‡ä»¶ä¸­å†™å…¥ï¼š</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">DOMAIN-SUFFIX,openai.com,Proxy</span><br><span class="line">DOMAIN-SUFFIX,ads.example.com,REJECT</span><br></pre></td></tr></tbody></table></figure></li><li><p>ä¿å­˜æ–‡ä»¶ã€‚</p></li></ul></li></ul><h4 id="æ­¥éª¤äºŒï¼šåœ¨-Clash-ä¸­å¼•ç”¨æ‚¨çš„è§„åˆ™æ–‡ä»¶"><a href="#æ­¥éª¤äºŒï¼šåœ¨-Clash-ä¸­å¼•ç”¨æ‚¨çš„è§„åˆ™æ–‡ä»¶" class="headerlink" title="æ­¥éª¤äºŒï¼šåœ¨ Clash ä¸­å¼•ç”¨æ‚¨çš„è§„åˆ™æ–‡ä»¶"></a>æ­¥éª¤äºŒï¼šåœ¨ Clash ä¸­å¼•ç”¨æ‚¨çš„è§„åˆ™æ–‡ä»¶</h4><ul><li><p><strong>ä»»åŠ¡ä¸€</strong>ï¼šç¼–è¾‘é…ç½®æ–‡ä»¶</p><ul><li>æ‰“å¼€ Clash å®¢æˆ·ç«¯ï¼Œè¿›å…¥ â€œProfilesâ€ é¡µé¢ï¼Œåœ¨æ‚¨çš„é…ç½®æ–‡ä»¶ä¸Šå³é”®å•å‡»ï¼Œé€‰æ‹© â€œEdit in Text Modeâ€ï¼ˆåœ¨æ–‡æœ¬æ¨¡å¼ä¸‹ç¼–è¾‘ï¼‰ã€‚</li></ul></li><li><p><strong>ä»»åŠ¡äºŒ</strong>ï¼šæ·»åŠ è§„åˆ™é›†å¼•ç”¨</p><p>åœ¨é…ç½®æ–‡ä»¶çš„ <code>rules:</code> åˆ—è¡¨çš„æœ€é¡¶ç«¯ï¼ˆä¸ºäº†æœ€é«˜ä¼˜å…ˆçº§ï¼‰ï¼Œæ·»åŠ ï¼š</p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">-</span> <span class="string">RULE-SET,my-rules,Proxy</span></span><br></pre></td></tr></tbody></table></figure><p>ç„¶ååœ¨ <code>rule-providers:</code> éƒ¨åˆ†ï¼ˆå¦‚æœæ²¡æœ‰åˆ™æ–°å»ºï¼‰ï¼Œæ·»åŠ ï¼š</p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">rule-providers:</span></span><br><span class="line">  <span class="attr">my-rules:</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">file</span></span><br><span class="line">    <span class="attr">behavior:</span> <span class="string">classical</span></span><br><span class="line">    <span class="attr">path:</span> <span class="string">"./my-rules.txt"</span>  <span class="comment"># è·¯å¾„ç›¸å¯¹äºæ‚¨çš„é…ç½®æ–‡ä»¶ç›®å½•</span></span><br></pre></td></tr></tbody></table></figure></li><li><p><strong>ä»»åŠ¡ä¸‰</strong>ï¼šæ”¾ç½®æ–‡ä»¶å¹¶ä¿å­˜</p><ul><li><p>å°†æ‚¨ä¹‹å‰åˆ›å»ºçš„ <code>my-rules.txt</code> æ–‡ä»¶ï¼Œå¤åˆ¶åˆ° Clash çš„é…ç½®æ–‡ä»¶ç›®å½•ä¸­ã€‚</p><ul><li>å¦‚æœæ‚¨ä¸ç¡®å®šé…ç½®æ–‡ä»¶ç›®å½•çš„ä½ç½®ï¼Œåœ¨ Clash çš„ â€œGeneralâ€ é¡µé¢ï¼Œé€šå¸¸ä¼šæœ‰ä¸€ä¸ª â€œOpen Folderâ€ æˆ– â€œHome Directoryâ€ çš„æŒ‰é’®ï¼Œç‚¹å‡»å³å¯æ‰“å¼€ã€‚</li></ul></li><li><p>åœ¨æ–‡æœ¬ç¼–è¾‘å™¨ä¸­ä¿å­˜æ‚¨å¯¹ <code>.yaml</code> æ–‡ä»¶çš„ä¿®æ”¹ã€‚Clash é€šå¸¸ä¼šè‡ªåŠ¨é‡è½½æ–°çš„é…ç½®ã€‚</p></li></ul></li></ul><p>ç°åœ¨ï¼Œæ‚¨çš„è‡ªå®šä¹‰è§„åˆ™å·²ç»ç”Ÿæ•ˆäº†ï¼ </p><hr><h2 id="ç¬¬å››éƒ¨åˆ†ï¼šå¸¸è§é—®é¢˜-FAQ"><a href="#ç¬¬å››éƒ¨åˆ†ï¼šå¸¸è§é—®é¢˜-FAQ" class="headerlink" title="ç¬¬å››éƒ¨åˆ†ï¼šå¸¸è§é—®é¢˜ (FAQ)"></a>ç¬¬å››éƒ¨åˆ†ï¼šå¸¸è§é—®é¢˜ (FAQ)</h2><p><strong>Q1: æˆ‘æ·»åŠ äº†è§„åˆ™ï¼Œä¸ºä»€ä¹ˆä¸ç”Ÿæ•ˆï¼Ÿ</strong></p><blockquote><p>A: æœ€å¸¸è§çš„åŸå› æ˜¯è§„åˆ™çš„é¡ºåºã€‚Clash è§„åˆ™æ˜¯â€œåŒ¹é…å³åœæ­¢â€çš„ï¼Œä¸€ä¸ªè¯·æ±‚ä¸€æ—¦åŒ¹é…äº†å‰é¢çš„è§„åˆ™ï¼Œå°±ä¸ä¼šå†çœ‹åé¢çš„ã€‚è¯·ç¡®ä¿æ‚¨æ›´ç²¾ç»†ã€æ›´å…·ä½“çš„è§„åˆ™æ”¾åœ¨åˆ—è¡¨çš„æ›´å‰é¢ã€‚ä¾‹å¦‚ï¼Œ<code>DOMAIN-SUFFIX,test.google.com,DIRECT</code> å¿…é¡»æ”¾åœ¨ <code>DOMAIN-KEYWORD,google,PROXY</code> çš„å‰é¢ï¼Œå¦åˆ™å®ƒæ°¸è¿œä¸ä¼šè¢«åŒ¹é…ã€‚ </p></blockquote><p><strong>Q2: å¦‚ä½•æµ‹è¯•ä¸€æ¡è§„åˆ™æ˜¯å¦åŒ¹é…æˆåŠŸï¼Ÿ</strong></p><blockquote><p>A: æŸ¥çœ‹ Clash å®¢æˆ·ç«¯çš„ â€œConnectionsâ€ï¼ˆè¿æ¥ï¼‰æˆ– â€œæ—¥å¿—â€ é¡µé¢ã€‚å½“æ‚¨è®¿é—®ä¸€ä¸ªç½‘ç«™æ—¶ï¼Œè¿™é‡Œä¼šå®æ—¶æ˜¾ç¤ºæ¯ä¸ªç½‘ç»œè¯·æ±‚å‘½ä¸­äº†å“ªä¸€æ¡è§„åˆ™ï¼Œä»¥åŠå®ƒæœ€ç»ˆèµ°äº†å“ªä¸ªç­–ç•¥ï¼ˆPROXY/DIRECT/REJECTï¼‰ã€‚ </p></blockquote><p><strong>Q3: æˆ‘å¯ä»¥åˆå¹¶å¤šä¸ªè§„åˆ™é›†å—ï¼Ÿ</strong></p><blockquote><p>A: å®Œå…¨å¯ä»¥ã€‚æ‚¨å¯ä»¥åœ¨ <code>rule-providers</code> ä¸­å®šä¹‰å¤šä¸ªè§„åˆ™é›†ï¼Œç„¶ååœ¨ <code>rules</code> åˆ—è¡¨ä¸­é€ä¸€å¼•ç”¨å®ƒä»¬ã€‚é¡ºåºåŒæ ·é‡è¦ã€‚ </p></blockquote><p><strong>Q4: æ›´æ–°æœºåœºè®¢é˜…åï¼Œæˆ‘çš„æ‰‹åŠ¨ä¿®æ”¹ä¼šæ¶ˆå¤±å—ï¼Ÿ</strong></p><blockquote><p>A: å¦‚æœæ‚¨ç›´æ¥ä¿®æ”¹ç”±æœºåœºè®¢é˜…é“¾æ¥ç”Ÿæˆçš„é…ç½®æ–‡ä»¶ï¼Œé‚£ä¹ˆä¼šçš„ã€‚æ­£ç¡®çš„åšæ³•æ˜¯ä½¿ç”¨ Clash çš„ â€œè§£æå™¨ï¼ˆParserï¼‰â€ æˆ–åœ¨æœ¬åœ°ç»´æŠ¤ä¸€ä¸ªä¸»é…ç½®æ–‡ä»¶ï¼Œé€šè¿‡ <code>proxy-providers</code> æ¥å¼•ç”¨æœºåœºçš„èŠ‚ç‚¹ï¼Œè€Œè§„åˆ™éƒ¨åˆ†å®Œå…¨ç”±æ‚¨è‡ªå·±æ§åˆ¶ã€‚è¿™æ˜¯ä¸€ä¸ªæ›´é«˜çº§çš„è¯é¢˜ï¼Œä½†èƒ½è®©æ‚¨ä¸€åŠ³æ°¸é€¸ã€‚ </p></blockquote><hr><h2 id="ç»“è®ºï¼šæ‚¨å·²æˆä¸ºç½‘ç»œæ¶æ„å¸ˆ"><a href="#ç»“è®ºï¼šæ‚¨å·²æˆä¸ºç½‘ç»œæ¶æ„å¸ˆ" class="headerlink" title="ç»“è®ºï¼šæ‚¨å·²æˆä¸ºç½‘ç»œæ¶æ„å¸ˆ"></a>ç»“è®ºï¼šæ‚¨å·²æˆä¸ºç½‘ç»œæ¶æ„å¸ˆ</h2><p>é€šè¿‡ä½¿ç”¨ç°æˆçš„è§„åˆ™è®¢é˜…ï¼Œæ‚¨å·²ç»æ˜¯ä¸€ä½é«˜æ•ˆçš„â€œäº¤é€šè°ƒåº¦å‘˜â€ã€‚è€Œé€šè¿‡æŒæ¡æ‰‹åŠ¨ç¼–å†™è§„åˆ™ï¼Œæ‚¨æ›´æ˜¯æˆä¸ºäº†è‡ªå·±ç½‘ç»œä¸–ç•Œçš„â€œæ¶æ„å¸ˆâ€ã€‚æ‚¨å¯ä»¥éšå¿ƒæ‰€æ¬²åœ°æŒ‡æŒ¥æ¯ä¸€ä¸ªæ•°æ®åŒ…çš„èµ°å‘ï¼Œå®ç°æœ€é«˜æ•ˆç‡ã€æœ€ç¬¦åˆä¸ªäººä¹ æƒ¯çš„ä¸Šç½‘ä½“éªŒã€‚ </p><p>è¿™æ— ç–‘æ˜¯ Clash æœ€å¸å¼•äººçš„é«˜çº§åŠŸèƒ½ä¹‹ä¸€ã€‚å¸Œæœ›æœ¬æŒ‡å—èƒ½å¸®åŠ©æ‚¨è§£é”ä¸€ä¸ªå…¨æ–°çš„ã€é«˜åº¦ä¸ªæ€§åŒ–çš„ç½‘ç»œä¸–ç•Œã€‚ </p><blockquote><p>è§‰å¾—æ‰‹åŠ¨é…ç½®å’Œç»´æŠ¤è§„åˆ™è¿˜æ˜¯å¤ªå¤æ‚ï¼ŸFlash-Gate ä¸ºæ‚¨æä¾›æ›´ç»ˆæçš„â€œæ‡’äººåŒ…â€ã€‚æˆ‘ä»¬çš„æœåŠ¡å†…ç½®äº†å…¨çƒä¼˜åŒ–çš„æ™ºèƒ½åˆ†æµè§„åˆ™ï¼Œæ— éœ€ä»»ä½•æ‰‹åŠ¨é…ç½®ï¼Œå³å¯è‡ªåŠ¨è¯†åˆ«å¹¶åŠ é€Ÿè®¿é—®ç½‘ç«™ã€æµåª’ä½“å’Œ Appã€‚å‘Šåˆ«å¤æ‚çš„è§„åˆ™ç¼–å†™ï¼Œä¸€é”®è¿æ¥ï¼Œå³åˆ»äº«å—ç¨³å®šã€é«˜é€Ÿçš„å…¨çƒç½‘ç»œã€‚ </p></blockquote><hr><h2 id="é…ç½®æ–‡ä»¶ç¤ºä¾‹"><a href="#é…ç½®æ–‡ä»¶ç¤ºä¾‹" class="headerlink" title="é…ç½®æ–‡ä»¶ç¤ºä¾‹"></a>é…ç½®æ–‡ä»¶ç¤ºä¾‹</h2><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ============================================================</span></span><br><span class="line"><span class="comment"># Clash Verge ä¸»é…ç½®æ–‡ä»¶ï¼ˆä½ è‡ªå·±ç»´æŠ¤ï¼‰</span></span><br><span class="line"><span class="comment"># èŠ‚ç‚¹é€šè¿‡ proxy-providers å¼•å…¥ï¼Œä¸ä¼šè¢«æœºåœºæ›´æ–°è¦†ç›–</span></span><br><span class="line"><span class="comment"># ============================================================</span></span><br><span class="line"></span><br><span class="line"><span class="attr">port:</span> <span class="number">7890</span></span><br><span class="line"><span class="attr">socks-port:</span> <span class="number">7891</span></span><br><span class="line"><span class="attr">allow-lan:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">mode:</span> <span class="string">rule</span></span><br><span class="line"><span class="attr">log-level:</span> <span class="string">info</span></span><br><span class="line"><span class="attr">ipv6:</span> <span class="literal">false</span></span><br><span class="line"><span class="attr">unified-delay:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å¯é€‰ï¼šè®¾ç½® Clash.Meta çš„ geodata</span></span><br><span class="line"><span class="attr">geo-auto-update:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">geo-update-interval:</span> <span class="number">72</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ------------------------------------------------------------</span></span><br><span class="line"><span class="comment"># 1. å¼•å…¥æœºåœºèŠ‚ç‚¹ï¼ˆè‡ªåŠ¨æ›´æ–°ï¼‰</span></span><br><span class="line"><span class="comment"># ------------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="attr">proxy-providers:</span></span><br><span class="line">  <span class="attr">airport01:</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">http</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">"https://your-airport01"</span>   <span class="comment"># â† æ¢æˆä½ çš„è®¢é˜…</span></span><br><span class="line">    <span class="attr">interval:</span> <span class="number">3600</span></span><br><span class="line">    <span class="attr">path:</span> <span class="string">./providers/guan_ren_chi.yaml</span></span><br><span class="line">    <span class="attr">health-check:</span></span><br><span class="line">      <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">      <span class="attr">interval:</span> <span class="number">600</span></span><br><span class="line">      <span class="attr">lazy:</span> <span class="literal">true</span></span><br><span class="line">      <span class="attr">url:</span> <span class="string">http://www.gstatic.com/generate_204</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">airport02:</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">http</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">"https://your-airport02"</span>   <span class="comment"># â† æ¢æˆä½ çš„è®¢é˜…</span></span><br><span class="line">    <span class="attr">interval:</span> <span class="number">3600</span></span><br><span class="line">    <span class="attr">path:</span> <span class="string">./providers/tapcloud.yaml</span></span><br><span class="line">    <span class="attr">health-check:</span></span><br><span class="line">      <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">      <span class="attr">interval:</span> <span class="number">600</span></span><br><span class="line">      <span class="attr">lazy:</span> <span class="literal">true</span></span><br><span class="line">      <span class="attr">url:</span> <span class="string">http://www.gstatic.com/generate_204</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ------------------------------------------------------------</span></span><br><span class="line"><span class="comment"># 2. ç­–ç•¥ç»„ï¼ˆä½ å®Œå…¨è‡ªå®šä¹‰ï¼‰</span></span><br><span class="line"><span class="comment"># ------------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="attr">proxy-groups:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">"proxy"</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">select</span></span><br><span class="line">    <span class="attr">use:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">airport01</span></span><br><span class="line"></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">"auto"</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">url-test</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">http://www.gstatic.com/generate_204</span></span><br><span class="line">    <span class="attr">interval:</span> <span class="number">600</span></span><br><span class="line">    <span class="attr">use:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">airport01</span></span><br><span class="line"></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">"proxy_ai"</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">select</span></span><br><span class="line">    <span class="attr">use:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">airport02</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># ------------------------------------------------------------</span></span><br><span class="line"><span class="comment"># 3. DNS é…ç½®ï¼ˆæ¨è Clash.Metaï¼‰</span></span><br><span class="line"><span class="comment"># ------------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="attr">dns:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">listen:</span> <span class="number">0.0</span><span class="number">.0</span><span class="number">.0</span><span class="string">:53</span></span><br><span class="line">  <span class="comment"># ipv6: false # å½“ä¸º false æ—¶, AAAA æŸ¥è¯¢çš„å“åº”å°†ä¸ºç©º</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># è¿™äº› åç§°æœåŠ¡å™¨(nameservers) ç”¨äºè§£æä¸‹åˆ— DNS åç§°æœåŠ¡å™¨ä¸»æœºå.</span></span><br><span class="line">  <span class="comment"># ä»…æŒ‡å®š IP åœ°å€</span></span><br><span class="line">  <span class="attr">default-nameserver:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="number">114.114</span><span class="number">.114</span><span class="number">.114</span></span><br><span class="line">    <span class="bullet">-</span> <span class="number">8.8</span><span class="number">.8</span><span class="number">.8</span></span><br><span class="line">  <span class="comment"># enhanced-mode: fake-ip</span></span><br><span class="line">  <span class="attr">fake-ip-range:</span> <span class="number">198.18</span><span class="number">.0</span><span class="number">.1</span><span class="string">/16</span> <span class="comment"># Fake IP åœ°å€æ±  CIDR</span></span><br><span class="line">  <span class="comment"># use-hosts: true # æŸ¥æ‰¾ hosts å¹¶è¿”å› IP è®°å½•</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># search-domains: [local] # A/AAAA è®°å½•çš„æœç´¢åŸŸ</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># æ­¤åˆ—è¡¨ä¸­çš„ä¸»æœºåå°†ä¸ä¼šä½¿ç”¨ Fake IP è§£æ</span></span><br><span class="line">  <span class="comment"># å³, å¯¹è¿™äº›åŸŸåçš„è¯·æ±‚å°†å§‹ç»ˆä½¿ç”¨å…¶çœŸå® IP åœ°å€è¿›è¡Œå“åº”</span></span><br><span class="line">  <span class="comment"># fake-ip-filter:</span></span><br><span class="line">  <span class="comment">#   - '*.lan'</span></span><br><span class="line">  <span class="comment">#   - localhost.ptlogin2.qq.com</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># æ”¯æŒ UDPã€TCPã€DoTã€DoH. æ‚¨å¯ä»¥æŒ‡å®šè¦è¿æ¥çš„ç«¯å£.</span></span><br><span class="line">  <span class="comment"># æ‰€æœ‰ DNS æŸ¥è¯¢éƒ½ç›´æ¥å‘é€åˆ°åç§°æœåŠ¡å™¨, æ— éœ€ä»£ç†</span></span><br><span class="line">  <span class="comment"># Clash ä½¿ç”¨ç¬¬ä¸€ä¸ªæ”¶åˆ°çš„å“åº”ä½œä¸º DNS æŸ¥è¯¢çš„ç»“æœ.</span></span><br><span class="line">  <span class="attr">nameserver:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="number">114.114</span><span class="number">.114</span><span class="number">.114</span> <span class="comment"># é»˜è®¤å€¼</span></span><br><span class="line">    <span class="bullet">-</span> <span class="number">8.8</span><span class="number">.8</span><span class="number">.8</span> <span class="comment"># é»˜è®¤å€¼</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">tls://dns.rubyfish.cn:853</span> <span class="comment"># DNS over TLS</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">https://1.1.1.1/dns-query</span> <span class="comment"># DNS over HTTPS</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">dhcp://en0</span> <span class="comment"># æ¥è‡ª dhcp çš„ dns</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># ------------------------------------------------------------</span></span><br><span class="line"><span class="comment"># 4. è§„åˆ™ï¼ˆä½ å®Œå…¨æ§åˆ¶ï¼Œä¸ä¼šè¢«æœºåœºè¦†ç›–ï¼‰</span></span><br><span class="line"><span class="comment"># ------------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="attr">rule-providers:</span></span><br><span class="line">  <span class="attr">reject:</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">http</span></span><br><span class="line">    <span class="attr">behavior:</span> <span class="string">domain</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">"https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/reject.txt"</span></span><br><span class="line">    <span class="attr">path:</span> <span class="string">./ruleset/reject.yaml</span></span><br><span class="line">    <span class="attr">interval:</span> <span class="number">86400</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">icloud:</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">http</span></span><br><span class="line">    <span class="attr">behavior:</span> <span class="string">domain</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">"https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/icloud.txt"</span></span><br><span class="line">    <span class="attr">path:</span> <span class="string">./ruleset/icloud.yaml</span></span><br><span class="line">    <span class="attr">interval:</span> <span class="number">86400</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">apple:</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">http</span></span><br><span class="line">    <span class="attr">behavior:</span> <span class="string">domain</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">"https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/apple.txt"</span></span><br><span class="line">    <span class="attr">path:</span> <span class="string">./ruleset/apple.yaml</span></span><br><span class="line">    <span class="attr">interval:</span> <span class="number">86400</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">google:</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">http</span></span><br><span class="line">    <span class="attr">behavior:</span> <span class="string">domain</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">"https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/google.txt"</span></span><br><span class="line">    <span class="attr">path:</span> <span class="string">./ruleset/google.yaml</span></span><br><span class="line">    <span class="attr">interval:</span> <span class="number">86400</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">proxy_rule:</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">http</span></span><br><span class="line">    <span class="attr">behavior:</span> <span class="string">domain</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">"https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/proxy.txt"</span></span><br><span class="line">    <span class="attr">path:</span> <span class="string">./ruleset/proxy.yaml</span></span><br><span class="line">    <span class="attr">interval:</span> <span class="number">86400</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">direct:</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">http</span></span><br><span class="line">    <span class="attr">behavior:</span> <span class="string">domain</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">"https://raw.githubusercontent.com/Loyalsoldier/clash-rules/release/direct.txt"</span></span><br><span class="line">    <span class="attr">path:</span> <span class="string">./ruleset/direct.yaml</span></span><br><span class="line">    <span class="attr">interval:</span> <span class="number">86400</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">private:</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">http</span></span><br><span class="line">    <span class="attr">behavior:</span> <span class="string">domain</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">"https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/private.txt"</span></span><br><span class="line">    <span class="attr">path:</span> <span class="string">./ruleset/private.yaml</span></span><br><span class="line">    <span class="attr">interval:</span> <span class="number">86400</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">gfw:</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">http</span></span><br><span class="line">    <span class="attr">behavior:</span> <span class="string">domain</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">"https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/gfw.txt"</span></span><br><span class="line">    <span class="attr">path:</span> <span class="string">./ruleset/gfw.yaml</span></span><br><span class="line">    <span class="attr">interval:</span> <span class="number">86400</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">tld-not-cn:</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">http</span></span><br><span class="line">    <span class="attr">behavior:</span> <span class="string">domain</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">"https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/tld-not-cn.txt"</span></span><br><span class="line">    <span class="attr">path:</span> <span class="string">./ruleset/tld-not-cn.yaml</span></span><br><span class="line">    <span class="attr">interval:</span> <span class="number">86400</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">telegramcidr:</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">http</span></span><br><span class="line">    <span class="attr">behavior:</span> <span class="string">ipcidr</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">"https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/telegramcidr.txt"</span></span><br><span class="line">    <span class="attr">path:</span> <span class="string">./ruleset/telegramcidr.yaml</span></span><br><span class="line">    <span class="attr">interval:</span> <span class="number">86400</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">cncidr:</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">http</span></span><br><span class="line">    <span class="attr">behavior:</span> <span class="string">ipcidr</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">"https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/cncidr.txt"</span></span><br><span class="line">    <span class="attr">path:</span> <span class="string">./ruleset/cncidr.yaml</span></span><br><span class="line">    <span class="attr">interval:</span> <span class="number">86400</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">lancidr:</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">http</span></span><br><span class="line">    <span class="attr">behavior:</span> <span class="string">ipcidr</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">"https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/lancidr.txt"</span></span><br><span class="line">    <span class="attr">path:</span> <span class="string">./ruleset/lancidr.yaml</span></span><br><span class="line">    <span class="attr">interval:</span> <span class="number">86400</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">applications:</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">http</span></span><br><span class="line">    <span class="attr">behavior:</span> <span class="string">classical</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">"https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/applications.txt"</span></span><br><span class="line">    <span class="attr">path:</span> <span class="string">./ruleset/applications.yaml</span></span><br><span class="line">    <span class="attr">interval:</span> <span class="number">86400</span></span><br><span class="line">  </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="attr">rules:</span></span><br><span class="line">  <span class="comment">################################</span></span><br><span class="line">  <span class="comment"># å¯ä»¥åœ¨è¿™é‡Œæ·»åŠ å…¶ä»–çš„è‡ªå®šä¹‰è§„åˆ™</span></span><br><span class="line">  <span class="comment">################################</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">DOMAIN-SUFFIX,</span> <span class="string">zotero.org,</span> <span class="string">DIRECT</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">RULE-SET,applications,DIRECT</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">DOMAIN,clash.razord.top,DIRECT</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">DOMAIN,yacd.haishan.me,DIRECT</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">RULE-SET,private,DIRECT</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">RULE-SET,reject,REJECT</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">RULE-SET,icloud,DIRECT</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">RULE-SET,apple,DIRECT</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">RULE-SET,google,proxy_ai</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">RULE-SET,proxy_rule,proxy_ai</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">RULE-SET,direct,DIRECT</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">RULE-SET,lancidr,DIRECT</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">RULE-SET,cncidr,DIRECT</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">RULE-SET,telegramcidr,proxy</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">GEOIP,LAN,DIRECT</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">GEOIP,CN,DIRECT</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">MATCH,proxy_ai</span> <span class="comment"># æœ€åä¸€æ¡è§„åˆ™ï¼ŒåŒ¹é…æ‰€æœ‰æœªè¢«å‰é¢è§„åˆ™åŒ¹é…çš„æµé‡</span></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><h2 id="å…¶ä»–å‚è€ƒèµ„æ–™"><a href="#å…¶ä»–å‚è€ƒèµ„æ–™" class="headerlink" title="å…¶ä»–å‚è€ƒèµ„æ–™"></a>å…¶ä»–å‚è€ƒèµ„æ–™</h2><ul><li><p>Clash Verge é…ç½®æ–‡ä»¶ä»‹ç»ï¼š <a href="https://www.clashverg.com/guide/2149.html">https://www.clashverg.com/guide/2149.html</a></p></li><li><p>clash çŸ¥è¯†åº“ ï¼š <a href="https://clash.wiki/configuration/configuration-reference.html">https://clash.wiki/configuration/configuration-reference.html</a></p></li></ul>]]></content>
      
      
      <categories>
          
          <category> ç½‘ç»œå·¥å…· </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Clash, è§„åˆ™é…ç½® </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>1-cs336-BPEåˆ†è¯å™¨ä»‹ç»</title>
      <link href="/2025/11/20/1-cs336-bpe-fen-ci-qi-jie-shao/"/>
      <url>/2025/11/20/1-cs336-bpe-fen-ci-qi-jie-shao/</url>
      
        <content type="html"><![CDATA[<blockquote><p>[!summary]</p><ul><li>Why we need tokenizerï¼Ÿ</li><li>ä¸ºä»€ä¹ˆéœ€è¦åŸºäºå­—èŠ‚çš„åˆ†è¯å™¨ï¼Ÿ</li><li>å½»åº•è§£å†³â€æœªç™»å½•è¯â€é—®é¢˜</li><li>å®ç°å¯¹æ‰€æœ‰è¯­è¨€ã€ç¬¦å·çš„é€šç”¨æ”¯æŒ</li><li>æ ¸å¿ƒåŸç†ï¼š UTF-8ä¸å­—èŠ‚</li></ul></blockquote><h1 id="1-The-motivation-Why-we-need-tokenizer"><a href="#1-The-motivation-Why-we-need-tokenizer" class="headerlink" title="1. The motivation - Why we need tokenizer"></a>1. The motivation - Why we need tokenizer</h1><p>ç”±äºè®¡ç®—æœºåªèƒ½å¤Ÿå¯¹æ•°å­—è¿›è¡Œè®¡ç®—ï¼Œè€Œæ²¡æ³•ç›´æ¥å¯¹å­—ç¬¦åšè®¡ç®—ã€‚å› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ç§æ“ä½œèƒ½å¤Ÿå°†å­—ç¬¦ä¸²ç¼–ç ä¸ºæ•°å­—ï¼›åŒæ—¶å°†è®¡ç®—æœºè¾“å‡ºçš„æ•°å­—è§£ç ä¸ºäººç±»é˜…è¯»å‹å¥½çš„å­—ç¬¦ä¸²ã€‚<br>ä¸Šè¿°ä¸­çš„â€œæ“ä½œâ€å³ä¸º Tokenizersã€‚</p><p><img src="https://raw.githubusercontent.com/Skylyong/i/main/Pasted%20image%2020251020191243.png" alt="Tokenization"></p><p>æ ¹æ®ç¼–ç åŸºæœ¬å•å…ƒçš„ä¸åŒï¼Œå¯ä»¥åˆ’åˆ†å‡ºå¤šç§ä¸åŒçš„ç¼–ç æ–¹å¼ï¼Œå¦‚åŸºäºè¯çº§ã€å­—ç¬¦çº§å’ŒåŸºäºå­—èŠ‚çš„ç¼–ç æ–¹å¼ã€‚</p><p>å…¶ä¸­ï¼ŒåŸºäºå­—èŠ‚çš„Tokenizerï¼ˆByte-based Tokenizerï¼‰ï¼Œæˆ–è€…æ›´å‡†ç¡®åœ°è¯´æ˜¯<strong>å­—èŠ‚çº§ï¼ˆByte-Levelï¼‰å­è¯åˆ†è¯å™¨</strong>ï¼Œæ˜¯ç°ä»£å¤§è¯­è¨€æ¨¡å‹ï¼ˆå¦‚ GPT-2, GPT-3, GPT-4, Llama, Claude ç­‰ï¼‰ä¸­å¹¿æ³›ä½¿ç”¨çš„æ ¸å¿ƒæŠ€æœ¯ã€‚</p><p>å®ƒçš„æ ¸å¿ƒç†å¿µæ˜¯ï¼š<strong>å°†æ–‡æœ¬çš„åŸºç¡€æ„å»ºå—ä»â€œå­—ç¬¦ï¼ˆCharacterï¼‰â€ä¸‹æ²‰åˆ°â€œå­—èŠ‚ï¼ˆByteï¼‰â€</strong>ï¼Œä»è€Œå½»åº•è§£å†³â€œæœªç™»å½•è¯ï¼ˆOOV, Out-Of-Vocabularyï¼‰â€é—®é¢˜ï¼Œå®ç°å¯¹æ‰€æœ‰è¯­è¨€å’Œç¬¦å·çš„é€šç”¨æ”¯æŒã€‚</p><p>ä»¥ä¸‹æ˜¯å¯¹åŸºäºå­—èŠ‚çš„Tokenizerçš„è¯¦ç»†è§£é‡Šï¼ŒåŒ…æ‹¬å…¶èƒŒæ™¯ã€åŸç†ã€å·¥ä½œæµç¨‹åŠä¼˜ç¼ºç‚¹ã€‚</p><hr><h1 id="2-ä¸ºä»€ä¹ˆè¦ç”¨åŸºäºå­—èŠ‚çš„Tokenizerï¼Ÿï¼ˆèƒŒæ™¯ï¼‰"><a href="#2-ä¸ºä»€ä¹ˆè¦ç”¨åŸºäºå­—èŠ‚çš„Tokenizerï¼Ÿï¼ˆèƒŒæ™¯ï¼‰" class="headerlink" title="2. ä¸ºä»€ä¹ˆè¦ç”¨åŸºäºå­—èŠ‚çš„Tokenizerï¼Ÿï¼ˆèƒŒæ™¯ï¼‰"></a>2. ä¸ºä»€ä¹ˆè¦ç”¨åŸºäºå­—èŠ‚çš„Tokenizerï¼Ÿï¼ˆèƒŒæ™¯ï¼‰</h1><p>åœ¨å­—èŠ‚çº§åˆ†è¯å‡ºç°ä¹‹å‰ï¼ŒNLPæ¨¡å‹ä¸»è¦ä½¿ç”¨ä»¥ä¸‹ä¸¤ç§æ–¹å¼ï¼š</p><ol><li><strong>è¯çº§ï¼ˆWord-levelï¼‰ï¼š</strong> æŠŠâ€œappleâ€çœ‹ä½œä¸€ä¸ªæ•´ä½“ã€‚<ul><li><em>ç¼ºç‚¹ï¼š</em> è¯æ±‡è¡¨å¤ªå¤§ï¼ˆå‡ åä¸‡ä¸ªï¼‰ï¼Œä¸”æ— æ³•å¤„ç†ä»æœªè§è¿‡çš„è¯ï¼ˆOOVé—®é¢˜ï¼‰ï¼Œåªèƒ½ç”¨ <code>&lt;UNK&gt;</code> ä»£æ›¿ã€‚</li></ul></li><li><strong>å­—ç¬¦çº§ï¼ˆCharacter-levelï¼‰ï¼š</strong> æŠŠâ€œappleâ€æ‹†æˆ a-p-p-l-eã€‚<ul><li><em>ç¼ºç‚¹ï¼š</em> åºåˆ—å¤ªé•¿ï¼Œä¸”å•ä¸ªå­—ç¬¦ç¼ºä¹è¯­ä¹‰ã€‚</li></ul></li></ol><p>åæ¥å‡ºç°äº† <strong>BPEï¼ˆByte-Pair Encodingï¼‰</strong> ç­‰å­è¯ç®—æ³•ï¼Œè¯•å›¾å¹³è¡¡ä¸¤è€…ã€‚ä½†åœ¨ä¼ ç»Ÿçš„BPEä¸­ï¼ŒåŸºç¡€å•å…ƒä»ç„¶æ˜¯ Unicode å­—ç¬¦ã€‚å¦‚æœé‡åˆ°ç”Ÿåƒ»å­—ï¼ˆå¦‚ç½•è§çš„emojiæˆ–å¤æ±‰å­—ï¼‰ï¼Œå¦‚æœå®ƒä¸åœ¨è¯è¡¨ä¸­ï¼Œä»ç„¶ä¼šå˜æˆ <code>&lt;UNK&gt;</code>ã€‚</p><p><strong>åŸºäºå­—èŠ‚çš„Tokenizer</strong> çš„å‡ºç°å°±æ˜¯ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼š<strong>è®¡ç®—æœºé‡Œçš„æ‰€æœ‰ä¿¡æ¯æœ¬è´¨ä¸Šéƒ½æ˜¯å­—èŠ‚ã€‚åªè¦æˆ‘ä»¬åŸºäºå­—èŠ‚è¿›è¡Œå¤„ç†ï¼Œå°±æ²¡æœ‰è¡¨è¾¾ä¸äº†çš„å†…å®¹ã€‚</strong></p><hr><h1 id="3-æ ¸å¿ƒåŸç†ï¼šUTF-8-ä¸-å­—èŠ‚"><a href="#3-æ ¸å¿ƒåŸç†ï¼šUTF-8-ä¸-å­—èŠ‚" class="headerlink" title="3. æ ¸å¿ƒåŸç†ï¼šUTF-8 ä¸ å­—èŠ‚"></a>3. æ ¸å¿ƒåŸç†ï¼šUTF-8 ä¸ å­—èŠ‚</h1><p>ç†è§£è¿™ä¸ªæŠ€æœ¯çš„å‰ææ˜¯ç†è§£ <strong>UTF-8 ç¼–ç </strong>ã€‚UTF-8 æ˜¯ä¸€ç§å˜é•¿ç¼–ç ï¼š</p><ul><li><strong>è‹±æ–‡/æ•°å­—ï¼ˆASCIIï¼‰ï¼š</strong> å ç”¨ <strong>1ä¸ªå­—èŠ‚</strong>ã€‚</li><li><strong>ä¸­æ–‡/æ—¥æ–‡/éŸ©æ–‡ç­‰ï¼š</strong> é€šå¸¸å ç”¨ <strong>3ä¸ªå­—èŠ‚</strong>ã€‚</li><li><strong>Emoji è¡¨æƒ…ï¼š</strong> é€šå¸¸å ç”¨ <strong>4ä¸ªå­—èŠ‚</strong>ã€‚</li></ul><p><strong>ä¼ ç»Ÿ BPE vs. å­—èŠ‚çº§ BPE (BBPE)ï¼š</strong></p><ul><li><strong>ä¼ ç»Ÿ BPEï¼š</strong> åŸºç¡€è¯è¡¨æ˜¯ Unicode å­—ç¬¦é›†ï¼ˆæ¯”å¦‚å‡ ä¸‡ä¸ªæ±‰å­—ã€å­—æ¯ï¼‰ã€‚å¦‚æœé‡åˆ°ä¸€ä¸ªæ²¡è§è¿‡çš„ Unicode å­—ç¬¦ï¼Œå°±å´©æºƒäº†ã€‚</li><li><strong>å­—èŠ‚çº§ BPEï¼š</strong> åˆå§‹è¯è¡¨ç”±<strong>æ‰€æœ‰å¯èƒ½çš„å•å­—èŠ‚å€¼ç»„æˆï¼Œå³ 0x00 åˆ° 0xFFï¼Œå…± 256 ä¸ªæ¡ç›®ã€‚</strong> å¿…è¦æ—¶ï¼Œè¿˜å¯ä»¥åŠ å…¥ç‰¹æ®Šæ ‡è®°ï¼ˆå¦‚ <code>&lt;pad&gt;</code>ã€<code>&lt;unk&gt;</code> ç­‰ï¼‰ã€‚<ul><li>æ— è®ºä»€ä¹ˆæ–‡å­—ï¼Œé¦–å…ˆéƒ½è½¬æˆå­—èŠ‚æµã€‚</li><li>ç„¶ååœ¨å­—èŠ‚æµä¸Šè¿è¡Œ BPE åˆå¹¶ç®—æ³•ã€‚</li></ul></li></ul><blockquote><p>[!info] Capture åŸºç¡€è¯è¡¨</p><ul><li>åŸºç¡€è¯è¡¨æ˜¯ æ‰€æœ‰å¯èƒ½çš„å•å­—èŠ‚å€¼ï¼Œå…±256ä¸ªæ¡ç›®ï¼Œå³ä¸€ä¸ªå­—èŠ‚ã€‚</li><li>ä¸ºä»€ä¹ˆç”¨ 256 ä¸ªæ¡ç›®èƒ½å¤Ÿè¡¨ç¤ºæ‰€æœ‰çš„ å­—ç¬¦é›†åˆå‘¢ï¼Ÿ å› ä¸ºåœ¨UTF-8ç¼–ç ä¸­ï¼Œè¿˜ä¼šä½¿ç”¨å¤šä¸ªå­—èŠ‚æ¥è¡¨ç¤ºå­—ç¬¦ã€‚æ¯”å¦‚ç”¨2å­—èŠ‚çš„è¯ï¼Œåˆ™å¯ä»¥è¡¨ç¤º 256x256ä¸ªå­—ç¬¦ï¼Œå¤§å¤§æ‰©å±•äº†å…¶è¡¨ç¤ºç©ºé—´ã€‚</li></ul></blockquote><hr><h1 id="4-å·¥ä½œæµç¨‹è¯¦è§£"><a href="#4-å·¥ä½œæµç¨‹è¯¦è§£" class="headerlink" title="4. å·¥ä½œæµç¨‹è¯¦è§£"></a>4. å·¥ä½œæµç¨‹è¯¦è§£</h1><p>ä»¥ GPT-2 å¼•å…¥çš„ Byte-Level BPE ä¸ºä¾‹ï¼Œå¤„ç†æµç¨‹å¦‚ä¸‹ï¼š</p><h4 id="ç¬¬ä¸€æ­¥ï¼šæ–‡æœ¬è½¬å­—èŠ‚ï¼ˆText-to-Bytesï¼‰"><a href="#ç¬¬ä¸€æ­¥ï¼šæ–‡æœ¬è½¬å­—èŠ‚ï¼ˆText-to-Bytesï¼‰" class="headerlink" title="ç¬¬ä¸€æ­¥ï¼šæ–‡æœ¬è½¬å­—èŠ‚ï¼ˆText to Bytesï¼‰"></a>ç¬¬ä¸€æ­¥ï¼šæ–‡æœ¬è½¬å­—èŠ‚ï¼ˆText to Bytesï¼‰</h4><p>è¾“å…¥æ–‡æœ¬ï¼šâ€Hi ä¸–ç•Œâ€</p><p>åœ¨ UTF-8 ç¼–ç ä¸‹ï¼Œè¿™ä¸²æ–‡æœ¬ä¼šè¢«è½¬æ¢æˆå­—èŠ‚åºåˆ—ï¼š</p><ul><li><code>H</code> -&gt; <code>0x48</code></li><li><code>i</code> -&gt; <code>0x69</code></li><li><code>ç©ºæ ¼</code> -&gt; <code>0x20</code></li><li><code>ä¸–</code> -&gt; <code>0xE4, 0xB8, 0x96</code> (3ä¸ªå­—èŠ‚)</li><li><code>ç•Œ</code> -&gt; <code>0xE7, 0x95, 0x8C</code> (3ä¸ªå­—èŠ‚)</li></ul><p><strong>åŸå§‹å­—èŠ‚åºåˆ—ï¼š</strong> <code>[48, 69, 20, E4, B8, 96, E7, 95, 8C]</code></p><h4 id="ç¬¬äºŒæ­¥ï¼šåˆå§‹åŒ–è¯è¡¨ï¼ˆVocabulary-Initializationï¼‰"><a href="#ç¬¬äºŒæ­¥ï¼šåˆå§‹åŒ–è¯è¡¨ï¼ˆVocabulary-Initializationï¼‰" class="headerlink" title="ç¬¬äºŒæ­¥ï¼šåˆå§‹åŒ–è¯è¡¨ï¼ˆVocabulary Initializationï¼‰"></a>ç¬¬äºŒæ­¥ï¼šåˆå§‹åŒ–è¯è¡¨ï¼ˆVocabulary Initializationï¼‰</h4><p>åŸºç¡€è¯è¡¨ä¸å†æ˜¯å‡ ä¸‡ä¸ªå­—ï¼Œè€Œæ˜¯åŒ…å«æ‰€æœ‰å¯èƒ½çš„ 256 ä¸ªå­—èŠ‚å€¼ã€‚è¿™æ„å‘³ç€ä»»ä½•æ–‡ä»¶ã€ä»»ä½•æ–‡æœ¬éƒ½å¯ä»¥è¢«åˆå§‹è¡¨ç¤ºï¼Œç»ä¸ä¼šå‡ºç° <code>&lt;UNK&gt;</code>ã€‚</p><h4 id="ç¬¬ä¸‰æ­¥ï¼šåº”ç”¨-BPE-åˆå¹¶ï¼ˆMergingï¼‰"><a href="#ç¬¬ä¸‰æ­¥ï¼šåº”ç”¨-BPE-åˆå¹¶ï¼ˆMergingï¼‰" class="headerlink" title="ç¬¬ä¸‰æ­¥ï¼šåº”ç”¨ BPE åˆå¹¶ï¼ˆMergingï¼‰"></a>ç¬¬ä¸‰æ­¥ï¼šåº”ç”¨ BPE åˆå¹¶ï¼ˆMergingï¼‰</h4><p>æ¨¡å‹åœ¨è®­ç»ƒé˜¶æ®µä¼šç»Ÿè®¡å­—èŠ‚ç»„åˆçš„é¢‘ç‡ï¼Œå¹¶è¿›è¡Œåˆå¹¶ã€‚</p><ol><li><strong>é«˜é¢‘åˆå¹¶ï¼š</strong> è‹±æ–‡å•è¯é€šå¸¸ç”± ASCII å­—èŠ‚ç»„æˆï¼Œåˆå¹¶å¾ˆå¿«ã€‚ä¾‹å¦‚ <code>48(H)</code> å’Œ <code>69(i)</code> ç»å¸¸ä¸€èµ·å‡ºç°ï¼Œåˆå¹¶æˆ token <code>Hi</code>ã€‚</li><li><strong>å¤šå­—èŠ‚å­—ç¬¦åˆå¹¶ï¼š</strong> å¯¹äºä¸­æ–‡â€œä¸–â€ï¼ˆ<code>E4 B8 96</code>ï¼‰ï¼Œè¿™ä¸‰ä¸ªå­—èŠ‚æ€»æ˜¯ç»‘å®šå‡ºç°çš„ã€‚<ul><li>å¦‚æœâ€œä¸–â€å­—å¸¸è§ï¼ŒBPE ä¼šå­¦åˆ°è§„åˆ™ï¼šå…ˆåˆ <code>E4+B8</code>ï¼Œå†åˆ <code>(E4B8)+96</code>ã€‚</li><li>æœ€ç»ˆï¼Œ<code>E4 B8 96</code> è¿™ä¸‰ä¸ªå­—èŠ‚ä¼šè¢«åˆå¹¶æˆä¸€ä¸ª IDï¼Œä»£è¡¨â€œä¸–â€ã€‚</li></ul></li><li><strong>ç”Ÿåƒ»å­—å¤„ç†ï¼š</strong> å¦‚æœé‡åˆ°ä¸€ä¸ªæç½•è§çš„æ±‰å­—ï¼ˆä¾‹å¦‚ç”± <code>E5 99 99</code> ç»„æˆï¼‰ï¼Œä¸”è¯è¡¨ä¸­æ²¡æœ‰åˆå¹¶å®ƒçš„è®°å½•ã€‚é‚£ä¹ˆå®ƒå°±ä¸ä¼šè¢«åˆå¹¶æˆä¸€ä¸ª tokenï¼Œè€Œæ˜¯è¢«æ‹†è§£ä¸º 3 ä¸ªä»£è¡¨å­—èŠ‚çš„ tokenã€‚</li></ol><h4 id="ç¬¬å››æ­¥ï¼šæœ€ç»ˆ-Tokenization"><a href="#ç¬¬å››æ­¥ï¼šæœ€ç»ˆ-Tokenization" class="headerlink" title="ç¬¬å››æ­¥ï¼šæœ€ç»ˆ Tokenization"></a>ç¬¬å››æ­¥ï¼šæœ€ç»ˆ Tokenization</h4><ul><li>å¸¸è§çš„è¯ï¼ˆå¦‚ â€œappleâ€, â€œä¸­å›½â€ï¼‰ä¼šå¯¹åº”ä¸€ä¸ªç‹¬ç«‹çš„ Token IDã€‚</li><li>ä¸å¸¸è§çš„è¯ï¼Œä¼šé€€åŒ–ä¸ºå‡ ä¸ª Token IDï¼ˆå­è¯æˆ–å­—èŠ‚ï¼‰ã€‚</li><li>å®Œå…¨æœªçŸ¥çš„ä¹±ç æˆ–äºŒè¿›åˆ¶æ•°æ®ï¼Œä¼šé€€åŒ–ä¸ºå•å­—èŠ‚ Token IDã€‚</li></ul><hr><h1 id="5-å…³é”®æŠ€æœ¯ç»†èŠ‚ï¼šGPT-2-çš„-Trick"><a href="#5-å…³é”®æŠ€æœ¯ç»†èŠ‚ï¼šGPT-2-çš„-Trick" class="headerlink" title="5. å…³é”®æŠ€æœ¯ç»†èŠ‚ï¼šGPT-2 çš„ Trick"></a>5. å…³é”®æŠ€æœ¯ç»†èŠ‚ï¼šGPT-2 çš„ Trick</h1><p>ç›´æ¥å¯¹åŸå§‹å­—èŠ‚è¿è¡Œ BPE æœ‰ä¸ªå°é—®é¢˜ï¼šæœ‰äº›å­—èŠ‚æ˜¯æ§åˆ¶å­—ç¬¦ï¼ˆä¸å¯æ‰“å°ï¼‰ï¼Œæœ‰äº›å­—èŠ‚ç»„åˆåœ¨å¤„ç†æ—¶æ¯”è¾ƒéº»çƒ¦ã€‚</p><p>GPT-2 çš„ä½œè€…åœ¨å®ç° Byte-Level BPE æ—¶ä½¿ç”¨äº†ä¸€ä¸ªæŠ€å·§ï¼š</p><ul><li>ä»–ä»¬ä¸ç›´æ¥ä½¿ç”¨ 0-255 çš„åŸå§‹æ•°å€¼ã€‚</li><li>ä»–ä»¬å®šä¹‰äº†ä¸€ä¸ª<strong>å¯é€†æ˜ å°„å‡½æ•°</strong>ï¼Œå°† 256 ä¸ªå­—èŠ‚å€¼æ˜ å°„ä¸º 256 ä¸ª<strong>å¯æ‰“å°çš„ Unicode å­—ç¬¦</strong>ï¼ˆé¿å¼€æ§åˆ¶å­—ç¬¦å’Œç©ºæ ¼é—®é¢˜ï¼‰ã€‚</li><li>ä¾‹å¦‚ï¼šå­—èŠ‚ <code>0</code> å¯èƒ½æ˜ å°„æˆå­—ç¬¦ <code>Ä€</code>ï¼Œå­—èŠ‚ <code>1</code> æ˜ å°„æˆ <code>Ä</code>â€¦</li><li>åˆ†è¯æ˜¯åœ¨è¿™äº›æ˜ å°„åçš„å­—ç¬¦ä¸Šè¿›è¡Œçš„ï¼Œè§£ç æ—¶å†åå‘æ˜ å°„å›å­—èŠ‚ã€‚</li><li><em>æ³¨ï¼šè¿™ä¸»è¦æ˜¯ä¸ºäº†å…¼å®¹å½“æ—¶å·²æœ‰çš„ BPE è®­ç»ƒå·¥å…·ï¼Œé€»è¾‘æœ¬è´¨ä¸Šè¿˜æ˜¯å¯¹å­—èŠ‚æ“ä½œã€‚</em></li></ul><hr><h1 id="6-ä¼˜ç¼ºç‚¹åˆ†æ"><a href="#6-ä¼˜ç¼ºç‚¹åˆ†æ" class="headerlink" title="6. ä¼˜ç¼ºç‚¹åˆ†æ"></a>6. ä¼˜ç¼ºç‚¹åˆ†æ</h1><h4 id="ä¼˜ç‚¹ï¼š"><a href="#ä¼˜ç‚¹ï¼š" class="headerlink" title="ä¼˜ç‚¹ï¼š"></a>ä¼˜ç‚¹ï¼š</h4><ol><li><strong>å½»åº•è§£å†³ OOVï¼ˆæœªç™»å½•è¯ï¼‰é—®é¢˜ï¼š</strong> åªè¦æ˜¯è®¡ç®—æœºèƒ½å­˜çš„æ•°æ®ï¼Œéƒ½èƒ½åˆ†è¯ï¼Œç»å¯¹ä¸ä¼šå‡ºç° <code>&lt;UNK&gt;</code>ã€‚</li><li><strong>å¤šè¯­è¨€é€šç”¨æ€§å¼ºï¼š</strong> ä¸éœ€è¦é’ˆå¯¹ä¸­æ–‡ã€è‹±æ–‡ã€é˜¿æ‹‰ä¼¯æ–‡åˆ†åˆ«è®¾è®¡åˆ†è¯å™¨ï¼Œä¸€å¥—è¯è¡¨èµ°å¤©ä¸‹ã€‚</li><li><strong>è¯è¡¨å¤§å°å¯æ§ï¼š</strong> é€šå¸¸è®¾å®šåœ¨ 50k - 100k å·¦å³ï¼Œæ—¢èƒ½è¦†ç›–å¸¸ç”¨è¯ï¼Œåˆèƒ½å¤„ç†ç”Ÿåƒ»è¯ã€‚</li><li><strong>æ”¯æŒéæ–‡æœ¬æ•°æ®ï¼š</strong> ç†è®ºä¸Šå¯ä»¥ç›´æ¥å¤„ç†ä»£ç ã€Emoji ç”šè‡³äºŒè¿›åˆ¶æ•°æ®ã€‚</li></ol><h4 id="ç¼ºç‚¹ï¼š"><a href="#ç¼ºç‚¹ï¼š" class="headerlink" title="ç¼ºç‚¹ï¼š"></a>ç¼ºç‚¹ï¼š</h4><ol><li><strong>éæ‹‰ä¸è¯­ç³»çš„ Token æ•ˆç‡ç¨ä½ï¼š</strong><ul><li>è‹±æ–‡å•è¯é€šå¸¸ 1 ä¸ªå•è¯ = 1 ä¸ª Tokenã€‚</li><li>ä¸­æ–‡è™½ç„¶å¾ˆå¤šå¸¸è§å­—ä¹Ÿæ˜¯ 1 ä¸ª Tokenï¼ˆå› ä¸º 3 ä¸ªå­—èŠ‚è¢«åˆå¹¶äº†ï¼‰ï¼Œä½†å¦‚æœé‡åˆ°ç¨å¾®ç”Ÿåƒ»ç‚¹çš„è¯ï¼Œå¯èƒ½ä¸€ä¸ªå­—ä¼šè¢«æ‹†æˆ 2-3 ä¸ª Tokenï¼ˆå­—èŠ‚ç¢ç‰‡ï¼‰ã€‚è¿™å¯¼è‡´åœ¨ç›¸åŒä¸Šä¸‹æ–‡çª—å£ï¼ˆContext Windowï¼‰ä¸‹ï¼Œä¸­æ–‡èƒ½åŒ…å«çš„ä¿¡æ¯é‡æœ‰æ—¶ä¸å¦‚ä¸“é—¨ä¸ºä¸­æ–‡ä¼˜åŒ–çš„åˆ†è¯å™¨å¤šã€‚</li></ul></li><li><strong>å­—èŠ‚ç¢ç‰‡æ— æ•ˆæ€§ï¼š</strong> å¦‚æœæ¨¡å‹ç”Ÿæˆçš„ Token åºåˆ—åœ¨ä¸­é—´æˆªæ–­äº†ï¼ˆä¾‹å¦‚ç”Ÿæˆäº†â€œä¸–â€å­—çš„å‰ä¸¤ä¸ªå­—èŠ‚ï¼Œç¼ºäº†ç¬¬ä¸‰ä¸ªï¼‰ï¼Œè§£ç å‡ºæ¥çš„å­—ç¬¦ä¸²å°±æ˜¯ä¹±ç ï¼ˆæ— æ•ˆçš„ UTF-8ï¼‰ã€‚éœ€è¦é¢å¤–çš„è§£ç é€»è¾‘æ¥å¿½ç•¥æˆ–ä¿®å¤è¿™äº›é”™è¯¯ã€‚</li></ol><h1 id="7-ä¸¾ä¸ªç›´è§‚çš„ä¾‹å­"><a href="#7-ä¸¾ä¸ªç›´è§‚çš„ä¾‹å­" class="headerlink" title="7. ä¸¾ä¸ªç›´è§‚çš„ä¾‹å­"></a>7. ä¸¾ä¸ªç›´è§‚çš„ä¾‹å­</h1><p>å‡è®¾è¯è¡¨å¤§å°é™åˆ¶å¾ˆå°ï¼Œæ¨¡å‹é‡åˆ°äº†å­—ç¬¦ä¸² <strong>â€œEarthåœ°çƒâ€</strong>ï¼š</p><ol><li><p><strong>Earth:</strong> å¸¸è§è‹±æ–‡ã€‚</p><ul><li>UTF-8å­—èŠ‚: <code>45 61 72 74 68</code></li><li>BPEç»“æœ: å¯èƒ½ä¼šåˆå¹¶æˆä¸€ä¸ª Token <code>[Earth]</code>ã€‚</li></ul></li><li><p><strong>åœ°:</strong> å¸¸è§ä¸­æ–‡ã€‚</p><ul><li>UTF-8å­—èŠ‚: <code>E5 9C B0</code></li><li>BPEç»“æœ: å› ä¸ºå¸¸è§ï¼Œè¿™ä¸‰ä¸ªå­—èŠ‚å·²ç»åœ¨è¯è¡¨ä¸­åˆå¹¶äº†ï¼Œå˜æˆä¸€ä¸ª Token <code>[åœ°]</code>ã€‚</li></ul></li><li><p><strong>ã™“ (ç”Ÿåƒ»å­—):</strong> å‡è®¾è¿™æ˜¯ä¸ªä»æœªè§è¿‡çš„å­—ã€‚</p><ul><li>UTF-8å­—èŠ‚: <code>EåœŸ åœŸ åœŸ</code> (å‡è®¾ç¼–ç ä¸º <code>F0 A0 B0 C0</code>ï¼Œå…±4å­—èŠ‚)</li><li>BPEç»“æœ: è¯è¡¨ä¸­æ²¡æœ‰ <code>[ã™“]</code> è¿™ä¸ªæ•´ä½“ã€‚</li><li>æ¨¡å‹ä¼šå°†å…¶æ‹†åˆ†ï¼Œä¹Ÿè®¸æ‹†æˆä¸¤ä¸ª Token: <code>[F0A0]</code> å’Œ <code>[B0C0]</code> (å‡è®¾è¿™ä¸¤ä¸ªå­—èŠ‚å¯¹ä»¥å‰è§è¿‡)ï¼Œæˆ–è€…ç›´æ¥æ‹†æˆ 4 ä¸ªå•å­—èŠ‚ Tokenã€‚</li><li><strong>å…³é”®ç‚¹ï¼š</strong> è™½ç„¶æ‹†ç¢äº†ï¼Œä½†ä¿¡æ¯æ²¡ä¸¢ï¼Œæ¨¡å‹ä¾ç„¶æœ‰æœºä¼šé€šè¿‡å­—èŠ‚çš„ç»„åˆå»ç†è§£å®ƒçš„å«ä¹‰ï¼ˆæˆ–è€…è‡³å°‘èƒ½åŸæ ·å¤è¯»å‡ºæ¥ï¼‰ã€‚</li></ul></li></ol><h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><p>åŸºäºå­—èŠ‚çš„ Tokenizer æ˜¯å¤§æ¨¡å‹æ—¶ä»£çš„<strong>é€šç”¨è¯­</strong>ã€‚å®ƒé€šè¿‡å°†æ–‡æœ¬æ‹†è§£ä¸ºæœ€åº•å±‚çš„å­—èŠ‚æµï¼Œå†åˆ©ç”¨ BPE ç®—æ³•è‡ªåº•å‘ä¸Šåœ°é‡ç»„å‡ºæœ‰æ„ä¹‰çš„å­è¯ï¼ŒæˆåŠŸå®ç°äº†åœ¨æœ‰é™è¯è¡¨ä¸‹å¯¹äººç±»æ‰€æœ‰è¯­è¨€å’Œç¬¦å·çš„æ— æŸç¼–ç ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å¤§æ¨¡å‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> BPE </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>linuxå¸¸ç”¨å‘½ä»¤è§£é‡Š</title>
      <link href="/2025/10/16/linux-chang-yong-ming-ling-jie-shi/"/>
      <url>/2025/10/16/linux-chang-yong-ming-ling-jie-shi/</url>
      
        <content type="html"><![CDATA[<p>åœ¨Linuxç³»ç»Ÿä¸­ï¼Œæœ‰è®¸å¤šå¸¸ç”¨çš„å‘½ä»¤å¯ä»¥å¸®åŠ©æˆ‘ä»¬è¿›è¡Œæ—¥å¸¸çš„æ“ä½œå’Œç®¡ç†ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å¸¸ç”¨å‘½ä»¤çš„è§£é‡Šå’Œç¤ºä¾‹ï¼š</p><h1 id="nvidia-smi"><a href="#nvidia-smi" class="headerlink" title="nvidia-smi"></a>nvidia-smi</h1><p>è¯¥å‘½ä»¤ç”¨äºç›‘æ§ GPU çŠ¶æ€ã€‚ä¸‹é¢æ˜¯æ¯ä¸€åˆ—çš„è¯¦ç»†è§£é‡Šï¼š</p><h2 id="ç¬¬ä¸€è¡Œå­—æ®µ"><a href="#ç¬¬ä¸€è¡Œå­—æ®µ" class="headerlink" title="ç¬¬ä¸€è¡Œå­—æ®µ"></a>ç¬¬ä¸€è¡Œå­—æ®µ</h2><table><thead><tr><th>åˆ—å</th><th>å«ä¹‰</th></tr></thead><tbody><tr><td><strong>GPU</strong></td><td>GPU çš„ç¼–å·ï¼ˆä» 0 å¼€å§‹ï¼‰ï¼Œç”¨äºæ ‡è¯†å¤š GPU ç³»ç»Ÿä¸­çš„æ¯ä¸€å¼ æ˜¾å¡ã€‚</td></tr><tr><td><strong>Name</strong></td><td>GPU å‹å·åç§°ï¼Œä¾‹å¦‚ <code>NVIDIA A100</code>, <code>RTX 4090</code>, <code>Tesla V100</code> ç­‰ã€‚</td></tr><tr><td><strong>Persistence-M</strong></td><td>â€œæŒä¹…åŒ–æ¨¡å¼â€ï¼ˆPersistence Modeï¼‰ï¼ŒæŒ‡ GPU é©±åŠ¨æ˜¯å¦ä¿æŒåŠ è½½çŠ¶æ€ï¼š<br> <code>On</code> è¡¨ç¤º GPU ç©ºé—²æ—¶é©±åŠ¨ä»é©»ç•™å†…å­˜ï¼›<code>Off</code> è¡¨ç¤ºç©ºé—²æ—¶é©±åŠ¨å¸è½½ã€‚å¼€å¯åå¯å‡å°‘é¦–æ¬¡è°ƒç”¨ GPU çš„å»¶è¿Ÿã€‚</td></tr><tr><td><strong>Bus-Id</strong></td><td>GPU åœ¨ PCIe æ€»çº¿ä¸­çš„ç‰©ç†åœ°å€ï¼ˆæ€»çº¿ç¼–å·:è®¾å¤‡å·:åŠŸèƒ½å·ï¼‰ï¼Œç”¨äºç³»ç»Ÿå®šä½ GPU ç¡¬ä»¶ã€‚</td></tr><tr><td><strong>Disp.A</strong></td><td>â€œDisplay Activeâ€ï¼Œè¡¨ç¤ºè¯¥ GPU æ˜¯å¦è¿æ¥æ˜¾ç¤ºå™¨å¹¶ç”¨äºå›¾å½¢è¾“å‡ºï¼š<br><code>On</code> è¡¨ç¤ºå½“å‰ç”¨ä½œæ˜¾ç¤ºï¼›<code>Off</code> è¡¨ç¤ºä»…ç”¨äºè®¡ç®—ã€‚</td></tr><tr><td><strong>Volatile Uncorr. ECC</strong></td><td>â€œç¬æ€ä¸å¯çº æ­£ ECC é”™è¯¯è®¡æ•°â€ã€‚è‹¥ GPU å¼€å¯ ECC æ ¡éªŒåŠŸèƒ½ï¼ˆå¦‚ Teslaã€A100 ç³»åˆ—ï¼‰ï¼Œæ­¤åˆ—æ˜¾ç¤ºæ£€æµ‹åˆ°çš„ä¸å¯ä¿®å¤å†…å­˜é”™è¯¯æ•°é‡ã€‚</td></tr></tbody></table><h2 id="ç¬¬äºŒè¡Œå­—æ®µ"><a href="#ç¬¬äºŒè¡Œå­—æ®µ" class="headerlink" title="ç¬¬äºŒè¡Œå­—æ®µ"></a>ç¬¬äºŒè¡Œå­—æ®µ</h2><table><thead><tr><th>åˆ—å</th><th>å«ä¹‰</th></tr></thead><tbody><tr><td><strong>Fan</strong></td><td>é£æ‰‡è½¬é€Ÿç™¾åˆ†æ¯”ï¼ˆ0â€“100%ï¼‰ã€‚éƒ¨åˆ†æ•°æ®ä¸­å¿ƒ GPUï¼ˆå¦‚ A100ï¼‰å¯èƒ½æ— é£æ‰‡ï¼Œæ˜¾ç¤ºä¸º <code>N/A</code>ã€‚</td></tr><tr><td><strong>Temp</strong></td><td>GPU å½“å‰æ¸©åº¦ï¼ˆå•ä½ï¼šæ‘„æ°åº¦ï¼‰ã€‚</td></tr><tr><td><strong>Perf</strong></td><td>æ€§èƒ½çŠ¶æ€ï¼ˆPerformance Stateï¼ŒP0â€“P15ï¼‰ï¼š<br><code>P0</code> è¡¨ç¤ºæœ€é«˜æ€§èƒ½ï¼Œ<code>P15</code> ä¸ºæœ€ä½åŠŸè€—çŠ¶æ€ã€‚</td></tr><tr><td><strong>Pwr:Usage/Cap</strong></td><td>å½“å‰åŠŸç‡ / æœ€å¤§åŠŸç‡é™åˆ¶ï¼ˆå•ä½ï¼šç“¦ï¼‰ã€‚<br>ä¾‹å¦‚ <code>120W / 250W</code> è¡¨ç¤º GPU å½“å‰è€—ç”µ 120Wï¼Œæœ€å¤§å…è®¸ 250Wã€‚</td></tr><tr><td><strong>Memory-Usage</strong></td><td>æ˜¾å­˜ä½¿ç”¨æƒ…å†µï¼š<code>å·²ç”¨ / æ€»é‡</code>ï¼ˆä¾‹å¦‚ <code>10240MiB / 24576MiB</code>ï¼‰ã€‚</td></tr><tr><td><strong>GPU-Util</strong></td><td>GPU æ ¸å¿ƒçš„è®¡ç®—ä½¿ç”¨ç‡ï¼ˆ%ï¼‰ã€‚<br>è¡¨ç¤º GPU æ‰§è¡Œ CUDA æ ¸å¿ƒçš„æ´»è·ƒæ—¶é—´å æ¯”ã€‚</td></tr><tr><td><strong>Compute M.</strong></td><td>â€œè®¡ç®—æ¨¡å¼â€ï¼ˆCompute Modeï¼‰ï¼š<br> - <code>Default</code>ï¼šå…è®¸å¤šä¸ªè¿›ç¨‹å…±äº« GPUã€‚<br> - <code>Exclusive Process</code>ï¼šä»…ä¸€ä¸ªè¿›ç¨‹èƒ½ä½¿ç”¨ GPUã€‚<br> - <code>Prohibited</code>ï¼šç¦æ­¢ä»»ä½•è®¡ç®—ä»»åŠ¡ã€‚</td></tr></tbody></table><h2 id="ç¬¬ä¸‰è¡Œå­—æ®µ"><a href="#ç¬¬ä¸‰è¡Œå­—æ®µ" class="headerlink" title="ç¬¬ä¸‰è¡Œå­—æ®µ"></a>ç¬¬ä¸‰è¡Œå­—æ®µ</h2><table><thead><tr><th>åˆ—å</th><th>å«ä¹‰</th></tr></thead><tbody><tr><td><strong>MIG M.</strong></td><td>â€œMIG æ¨¡å¼â€ï¼ˆMulti-Instance GPUï¼‰ï¼šç”¨äº A100/H100 ç­‰ GPU çš„å¤šå®ä¾‹åˆ’åˆ†åŠŸèƒ½ã€‚<br><code>Enabled</code> è¡¨ç¤º GPU å¯è¢«åˆ†æˆå¤šä¸ªé€»è¾‘å­ GPU å®ä¾‹ï¼›<code>Disabled</code> è¡¨ç¤ºæœªå¯ç”¨ã€‚</td></tr></tbody></table><h2 id="ä¸¾ä¾‹"><a href="#ä¸¾ä¾‹" class="headerlink" title="ä¸¾ä¾‹"></a>ä¸¾ä¾‹</h2><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">| GPU   Name        Persistence-M | Bus-Id        Disp.A | Volatile Uncorr. ECC |</span><br><span class="line">|  0    NVIDIA A100         On    | 00000000:3B:00.0 Off |                    0 |</span><br><span class="line">| Fan  Temp  Perf  Pwr:Usage/Cap |  Memory-Usage | GPU-Util  Compute M. |</span><br><span class="line">| N/A   72C   P0   210W / 250W   |  32000MiB/40000MiB |  95%     Default |</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><p>è§£è¯»ï¼š</p><ul><li><p>ç¬¬ 0 å· GPU æ˜¯ A100ï¼Œé©±åŠ¨å¸¸é©»ï¼›</p></li><li><p>å½“å‰æ¸©åº¦ 72â„ƒï¼›</p></li><li><p>å·¥ä½œåœ¨æœ€é«˜æ€§èƒ½æ¨¡å¼ P0ï¼›</p></li><li><p>åŠŸè€— 210Wï¼›</p></li><li><p>æ˜¾å­˜ä½¿ç”¨ 32GB / 40GBï¼›</p></li><li><p>æ ¸å¿ƒåˆ©ç”¨ç‡ 95%ï¼Œè¯´æ˜ GPU æ­£åœ¨é«˜è´Ÿè½½è¿è¡Œã€‚</p></li></ul><h1 id="free-h"><a href="#free-h" class="headerlink" title="free -h"></a>free -h</h1><p>è¯¥å‘½ä»¤è¡¨ç¤ºç³»ç»Ÿå†…å­˜ä½¿ç”¨æƒ…å†µï¼Œä¸‹é¢æ˜¯å…¶è¯¦ç»†è§£é‡Šï¼š</p><table><thead><tr><th>åˆ—å</th><th>å«ä¹‰</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><strong>total</strong></td><td>å†…å­˜æ€»é‡</td><td>ç³»ç»Ÿç‰©ç†å†…å­˜ï¼ˆRAMï¼‰çš„æ€»å¤§å°ã€‚</td></tr><tr><td><strong>used</strong></td><td>å·²ä½¿ç”¨å†…å­˜</td><td>å½“å‰è¢«è¿›ç¨‹å ç”¨çš„å†…å­˜ + ç¼“å­˜ã€ç¼“å†²åŒºå ç”¨çš„å†…å­˜ï¼ˆåœ¨æ—§ç‰ˆ <code>free</code> ä¸­åŒ…å« cache/bufferï¼Œä½†æ–°ç‰ˆæ›´å‡†ç¡®ï¼‰ã€‚</td></tr><tr><td><strong>free</strong></td><td>å®Œå…¨ç©ºé—²çš„å†…å­˜</td><td>æ²¡æœ‰è¢«ä½¿ç”¨ã€ä¹Ÿæ²¡æœ‰è¢«ç¼“å­˜æˆ–ç¼“å†²çš„å†…å­˜ã€‚<br>âš ï¸ é€šå¸¸è¿™ä¸ªå€¼æ¯”è¾ƒå°æ˜¯æ­£å¸¸çš„ï¼Œå› ä¸º Linux ä¼šå°½é‡åˆ©ç”¨ç©ºé—²å†…å­˜åšç¼“å­˜ï¼Œæé«˜æ€§èƒ½ã€‚</td></tr><tr><td><strong>shared</strong></td><td>å…±äº«å†…å­˜</td><td>è¿›ç¨‹é—´å…±äº«çš„å†…å­˜ï¼ˆä¸»è¦ç”¨äº tmpfsã€å…±äº«åº“æˆ– Docker å®¹å™¨ï¼‰ã€‚</td></tr><tr><td><strong>buff/cache</strong></td><td>ç¼“å†²ä¸ç¼“å­˜åŒº</td><td>æ“ä½œç³»ç»Ÿä¸ºäº†åŠ å¿«è¯»å†™é€Ÿåº¦ï¼Œå°†æ–‡ä»¶æ•°æ®ç¼“å­˜åœ¨å†…å­˜ä¸­çš„ç©ºé—´ã€‚<br>å½“ç¨‹åºéœ€è¦æ›´å¤šå†…å­˜æ—¶ï¼Œè¿™éƒ¨åˆ†å¯ä»¥è¢«ç³»ç»Ÿå¿«é€Ÿå›æ”¶ã€‚</td></tr><tr><td><strong>available</strong></td><td>å¯ç”¨å†…å­˜</td><td>ç¨‹åºåœ¨ä¸è§¦å‘ swap çš„æƒ…å†µä¸‹ï¼Œ<strong>è¿˜èƒ½å®‰å…¨ä½¿ç”¨çš„å†…å­˜é‡</strong>ã€‚<br>è¿™æ˜¯ Linux æœ€æœ‰ç”¨çš„æŒ‡æ ‡ä¹‹ä¸€ï¼Œå› ä¸ºå®ƒè€ƒè™‘äº†å¯å›æ”¶çš„ç¼“å­˜å’Œç¼“å†²åŒºã€‚</td></tr></tbody></table><h2 id="ä¸¾ä¾‹-1"><a href="#ä¸¾ä¾‹-1" class="headerlink" title="ä¸¾ä¾‹"></a>ä¸¾ä¾‹</h2><p>å‡è®¾è¾“å‡ºä¸ºï¼š</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">              total        used        free      shared  buff/cache   available</span><br><span class="line">Mem:           16Gi         8Gi        1Gi       0.5Gi        7Gi        9Gi</span><br><span class="line">Swap:          2Gi         0Gi        2Gi</span><br></pre></td></tr></tbody></table></figure><ul><li><p>used = 8Giï¼šå½“å‰è¢«è¿›ç¨‹ç›´æ¥å ç”¨ 8Gi å†…å­˜ã€‚</p></li><li><p>buff/cache = 7Giï¼šç³»ç»Ÿç¼“å­˜äº† 7Gi æ–‡ä»¶æ•°æ®ï¼Œæé«˜ I/O æ€§èƒ½ã€‚</p></li><li><p>free = 1Giï¼šå½“å‰å®Œå…¨ç©ºé—²çš„å†…å­˜ä»… 1Giã€‚</p></li><li><p>available = 9Giï¼šåº”ç”¨ç¨‹åºä»å¯ä½¿ç”¨çº¦ 9Gi å†…å­˜ï¼Œè¯´æ˜å†…å­˜å……è¶³ã€‚</p></li></ul>]]></content>
      
      
      <categories>
          
          <category> è¿ç»´ </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>ä½¿ç”¨rcloneåœ¨å¤šä¸ªæœåŠ¡å™¨ä¹‹é—´ä¼ è¾“æ–‡ä»¶</title>
      <link href="/2025/10/14/shi-yong-rclone-zai-duo-ge-fu-wu-qi-zhi-jian-chuan-shu-wen-jian/"/>
      <url>/2025/10/14/shi-yong-rclone-zai-duo-ge-fu-wu-qi-zhi-jian-chuan-shu-wen-jian/</url>
      
        <content type="html"><![CDATA[<p>åœ¨æ—¥å¸¸çš„ç§‘ç ”å’Œå·¥ä½œä¸­ï¼Œæˆ‘ç»å¸¸éœ€è¦åœ¨å¤šå°æœåŠ¡å™¨ä¹‹é—´ä¼ è¾“å’ŒåŒæ­¥æ–‡ä»¶ã€‚ä¼ ç»Ÿçš„æ–¹æ³•å¦‚ <code>scp</code> å’Œ <code>rsync</code> è™½ç„¶å¯ä»¥å®Œæˆä»»åŠ¡ï¼Œä½†åœ¨å¤„ç†å¤§è§„æ¨¡æ•°æ®æˆ–å¤æ‚ç›®å½•ç»“æ„æ—¶ï¼Œæ•ˆç‡å’Œç¨³å®šæ€§å¾€å¾€ä¸å°½å¦‚äººæ„ã€‚æœ€è¿‘ï¼Œæˆ‘å‘ç°äº†ä¸€ä¸ªéå¸¸å¼ºå¤§çš„å·¥å…·â€”â€”<code>rclone</code>ï¼Œå®ƒä¸ä»…æ”¯æŒå¤šç§äº‘å­˜å‚¨æœåŠ¡ï¼Œè¿˜èƒ½é«˜æ•ˆåœ°åœ¨ä¸åŒæœåŠ¡å™¨ä¹‹é—´ä¼ è¾“æ–‡ä»¶ã€‚</p><p>ä¸‹é¢å¯¹è¿™æ¬¡ä½¿ç”¨ <code>rclone</code> è¿›è¡ŒæœåŠ¡å™¨é—´æ–‡ä»¶ä¼ è¾“çš„è¿‡ç¨‹è¿›è¡Œç®€å•çš„è®°å½•ï¼Œä»¥ä¾›æ—¥åå‚è€ƒã€‚</p><h2 id="1-å®‰è£…rclone"><a href="#1-å®‰è£…rclone" class="headerlink" title="1. å®‰è£…rclone"></a>1. å®‰è£…rclone</h2><p>åœ¨linuxæœåŠ¡å™¨ä¸Šå®‰è£… <code>rclone</code> éå¸¸ç®€å•ã€‚å¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤è¿›è¡Œå®‰è£…ï¼š</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt update</span><br><span class="line"><span class="built_in">sudo</span> apt install rclone</span><br></pre></td></tr></tbody></table></figure><p>å®‰è£…å®Œæˆåï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤éªŒè¯å®‰è£…æ˜¯å¦æˆåŠŸï¼š</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rclone version</span><br></pre></td></tr></tbody></table></figure><h2 id="2-é…ç½®rclone"><a href="#2-é…ç½®rclone" class="headerlink" title="2. é…ç½®rclone"></a>2. é…ç½®rclone</h2><h3 id="2-1-å¼•å¯¼å¼é…ç½®"><a href="#2-1-å¼•å¯¼å¼é…ç½®" class="headerlink" title="2.1 å¼•å¯¼å¼é…ç½®"></a>2.1 å¼•å¯¼å¼é…ç½®</h3><p>ä½¿ç”¨ <code>rclone</code> ä¹‹å‰ï¼Œéœ€è¦å…ˆè¿›è¡Œé…ç½®ã€‚è¿è¡Œä»¥ä¸‹å‘½ä»¤æ ¹æ®æç¤ºè¿›è¡Œé…ç½®ï¼š</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rclone config</span><br></pre></td></tr></tbody></table></figure><p>åœ¨é…ç½®è¿‡ç¨‹ä¸­ï¼Œå¯ä»¥é€‰æ‹©åˆ›å»ºä¸€ä¸ªæ–°çš„è¿œç¨‹å­˜å‚¨ï¼ˆremoteï¼‰ï¼Œå¹¶æ ¹æ®æç¤ºè¾“å…¥ç›¸å…³ä¿¡æ¯ã€‚è¿™é‡Œæˆ‘ä»¬ä¸»è¦å…³æ³¨æœåŠ¡å™¨é—´ä¼ è¾“ï¼Œå› æ­¤å¯ä»¥é€‰æ‹© <code>sftp</code> ä½œä¸ºä¼ è¾“åè®®ã€‚</p><p>é…ç½®å®Œæˆåï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹å·²é…ç½®çš„è¿œç¨‹å­˜å‚¨ï¼š</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rclone  listremotes</span><br></pre></td></tr></tbody></table></figure><h3 id="2-2-æ‰‹åŠ¨ç¼–è¾‘é…ç½®æ–‡ä»¶"><a href="#2-2-æ‰‹åŠ¨ç¼–è¾‘é…ç½®æ–‡ä»¶" class="headerlink" title="2.2 æ‰‹åŠ¨ç¼–è¾‘é…ç½®æ–‡ä»¶"></a>2.2 æ‰‹åŠ¨ç¼–è¾‘é…ç½®æ–‡ä»¶</h3><p>é™¤äº†ä¸Šè¿°ï¼Œå¼•å¯¼å¼çš„é…ç½®æ–¹æ³•ï¼Œè¿˜å¯ä»¥æ‰‹åŠ¨ç¼–è¾‘é…ç½®æ–‡ä»¶ <code>~/.config/rclone/rclone.conf</code>ï¼Œæ·»åŠ å¦‚ä¸‹å†…å®¹ï¼š</p><figure class="highlight ini"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[server1]</span></span><br><span class="line"><span class="attr">type</span> = sftp</span><br><span class="line"><span class="attr">host</span> = server1.example.com</span><br><span class="line"><span class="attr">user</span> = your_username</span><br><span class="line"><span class="attr">port</span> = <span class="number">22</span></span><br><span class="line"><span class="attr">pass</span> = your_password_or_private_key</span><br><span class="line"><span class="section">[server2]</span></span><br><span class="line"><span class="attr">type</span> = sftp</span><br><span class="line"><span class="attr">host</span> = server2.example.com</span><br><span class="line"><span class="attr">user</span> = your_username</span><br><span class="line"><span class="attr">port</span> = <span class="number">22</span></span><br><span class="line"><span class="attr">pass</span> = your_password_or_private_key</span><br></pre></td></tr></tbody></table></figure><h2 id="3-ä¼ è¾“æ–‡ä»¶"><a href="#3-ä¼ è¾“æ–‡ä»¶" class="headerlink" title="3. ä¼ è¾“æ–‡ä»¶"></a>3. ä¼ è¾“æ–‡ä»¶</h2><p>é…ç½®å®Œæˆåï¼Œå°±å¯ä»¥ä½¿ç”¨ <code>rclone</code> è¿›è¡Œæ–‡ä»¶ä¼ è¾“äº†ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å¸¸ç”¨çš„å‘½ä»¤ç¤ºä¾‹ï¼š</p><h3 id="3-1-ä¼ è¾“å•ä¸ªæ–‡ä»¶"><a href="#3-1-ä¼ è¾“å•ä¸ªæ–‡ä»¶" class="headerlink" title="3.1 ä¼ è¾“å•ä¸ªæ–‡ä»¶"></a>3.1 ä¼ è¾“å•ä¸ªæ–‡ä»¶</h3><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rclone copy server1:/path/to/file.txt server2:/path/to/destination/</span><br></pre></td></tr></tbody></table></figure><h3 id="3-2-ä¼ è¾“æ•´ä¸ªç›®å½•"><a href="#3-2-ä¼ è¾“æ•´ä¸ªç›®å½•" class="headerlink" title="3.2 ä¼ è¾“æ•´ä¸ªç›®å½•"></a>3.2 ä¼ è¾“æ•´ä¸ªç›®å½•</h3><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rclone copy /tmp rclone_test:/home/test/tmp --transfers=32 --checkers=32 --progress --stats-one-line </span><br></pre></td></tr></tbody></table></figure><p>å‘½ä»¤è§£é‡Šï¼š</p><ul><li><code>--transfers=32</code>ï¼šè®¾ç½®åŒæ—¶ä¼ è¾“çš„æ–‡ä»¶æ•°ä¸º32ä¸ªï¼Œå¯ä»¥æé«˜ä¼ è¾“é€Ÿåº¦ã€‚</li><li><code>--checkers=32</code>ï¼šè®¾ç½®åŒæ—¶æ£€æŸ¥çš„æ–‡ä»¶æ•°ä¸º32ä¸ªï¼Œæœ‰åŠ©äºåŠ å¿«ä¼ è¾“å‰çš„æ–‡ä»¶æ£€æŸ¥è¿‡ç¨‹ã€‚</li><li><code>--progress</code>ï¼šæ˜¾ç¤ºä¼ è¾“è¿›åº¦ã€‚</li><li><code>--stats-one-line</code>ï¼šä»¥å•è¡Œæ ¼å¼æ˜¾ç¤ºç»Ÿè®¡ä¿¡æ¯ï¼Œä¾¿äºæŸ¥çœ‹ä¼ è¾“çŠ¶æ€ã€‚</li></ul><h2 id="4-å‚è€ƒèµ„æ–™"><a href="#4-å‚è€ƒèµ„æ–™" class="headerlink" title="4. å‚è€ƒèµ„æ–™"></a>4. å‚è€ƒèµ„æ–™</h2><ul><li><a href="https://rclone.org/docs/">rcloneå®˜æ–¹æ–‡æ¡£</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> è¿ç»´ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> rclone </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Ubuntuä¸Šå½»åº•å¸è½½å’Œé‡è£…NVIDIAé©±åŠ¨åŠç›¸å…³ç»„ä»¶</title>
      <link href="/2025/10/08/ubuntu-shang-che-di-xie-zai-he-chong-zhuang-nvidia-qu-dong-ji-xiang-guan-zu-jian/"/>
      <url>/2025/10/08/ubuntu-shang-che-di-xie-zai-he-chong-zhuang-nvidia-qu-dong-ji-xiang-guan-zu-jian/</url>
      
        <content type="html"><![CDATA[<p>æœ‰æ—¶å€™ï¼Œæˆ‘ä»¬åœ¨é…ç½®NVIDIAé©±åŠ¨ç¯å¢ƒæ—¶ï¼Œä¼šé‡åˆ°å„ç§å„æ ·å¥‡æ€ªçš„é—®é¢˜ï¼Œå¯¼è‡´æ— æ³•æ­£å¸¸ä½¿ç”¨GPUã€‚æ­¤æ—¶ï¼Œå½»åº•å¸è½½NVIDIAé©±åŠ¨åŠç›¸å…³ç»„ä»¶ï¼Œé‡æ–°å®‰è£…ï¼Œå¾€å¾€æ˜¯è§£å†³é—®é¢˜çš„æœ‰æ•ˆæ–¹æ³•ã€‚æœ¬æ–‡å°†ä»‹ç»å¦‚ä½•åœ¨Ubuntuç³»ç»Ÿä¸Šå½»åº•å¸è½½NVIDIAé©±åŠ¨åŠç›¸å…³ç»„ä»¶ã€‚</p><h1 id="å¸è½½"><a href="#å¸è½½" class="headerlink" title="å¸è½½"></a>å¸è½½</h1><p>ä¸‹é¢æ˜¯ä¸€ä»½åœ¨Ubuntuä¸Šå½»åº•å¸è½½H100ç¯å¢ƒä¸­çš„NVIDIAé©±åŠ¨ã€CUDAã€cuDNNã€NCCLç­‰ç›¸å…³ç»„ä»¶çš„å®Œæ•´æ­¥éª¤ã€‚å»ºè®®ä¸¥æ ¼æŒ‰ç…§é¡ºåºæ‰§è¡Œï¼Œé¿å…ç³»ç»Ÿæ®‹ç•™æˆ–é©±åŠ¨å†²çªã€‚</p><h2 id="æå‰å‡†å¤‡"><a href="#æå‰å‡†å¤‡" class="headerlink" title="æå‰å‡†å¤‡"></a>æå‰å‡†å¤‡</h2><h3 id="1-åœæ­¢æ‰€æœ‰GPUç›¸å…³çš„è¿›ç¨‹"><a href="#1-åœæ­¢æ‰€æœ‰GPUç›¸å…³çš„è¿›ç¨‹" class="headerlink" title="1. åœæ­¢æ‰€æœ‰GPUç›¸å…³çš„è¿›ç¨‹"></a>1. åœæ­¢æ‰€æœ‰GPUç›¸å…³çš„è¿›ç¨‹</h3><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> systemctl stop docker</span><br><span class="line"><span class="built_in">sudo</span> systemctl stop nvidia-persistenced</span><br><span class="line"><span class="built_in">sudo</span> systemctl stop gdm</span><br></pre></td></tr></tbody></table></figure><p>å¦‚æœä½¿ç”¨çš„æ˜¯å…¶ä»–æ¡Œé¢ç®¡ç†å™¨ï¼ˆä¾‹å¦‚lightdm æˆ– sddmï¼‰ï¼Œåˆ™æ”¹æˆï¼š</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> systemctl stop lightdm</span><br><span class="line"><span class="comment"># æˆ–</span></span><br><span class="line"><span class="built_in">sudo</span> systemctl stop sddm</span><br></pre></td></tr></tbody></table></figure><h3 id="2-æŸ¥çœ‹å“ªäº›è¿›ç¨‹æ­£åœ¨ä½¿ç”¨-GPU"><a href="#2-æŸ¥çœ‹å“ªäº›è¿›ç¨‹æ­£åœ¨ä½¿ç”¨-GPU" class="headerlink" title="2. æŸ¥çœ‹å“ªäº›è¿›ç¨‹æ­£åœ¨ä½¿ç”¨ GPU"></a>2. æŸ¥çœ‹å“ªäº›è¿›ç¨‹æ­£åœ¨ä½¿ç”¨ GPU</h3><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> lsof /dev/nvidia*</span><br><span class="line"><span class="built_in">sudo</span> fuser -v /dev/nvidia*</span><br></pre></td></tr></tbody></table></figure><p>å¦‚æœ‰è¿›ç¨‹å ç”¨ï¼Œå…ˆç»ˆæ­¢å®ƒä»¬ï¼ˆkill -9 &lt;PID&gt;ï¼‰ã€‚</p><h2 id="å¸è½½-CUDA-Toolkit-ä¸é©±åŠ¨ç›¸å…³åŒ…"><a href="#å¸è½½-CUDA-Toolkit-ä¸é©±åŠ¨ç›¸å…³åŒ…" class="headerlink" title="å¸è½½ CUDA Toolkit ä¸é©±åŠ¨ç›¸å…³åŒ…"></a>å¸è½½ CUDA Toolkit ä¸é©±åŠ¨ç›¸å…³åŒ…</h2><h3 id="1-æ£€æŸ¥å·²å®‰è£…çš„-NVIDIA-ç›¸å…³åŒ…"><a href="#1-æ£€æŸ¥å·²å®‰è£…çš„-NVIDIA-ç›¸å…³åŒ…" class="headerlink" title="1.æ£€æŸ¥å·²å®‰è£…çš„ NVIDIA ç›¸å…³åŒ…"></a>1.æ£€æŸ¥å·²å®‰è£…çš„ NVIDIA ç›¸å…³åŒ…</h3><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">dpkg -l | grep -i nvidia</span><br><span class="line">dpkg -l | grep -i cuda</span><br><span class="line">dpkg -l | grep -i cudnn</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><h3 id="2-å¸è½½æ‰€æœ‰-NVIDIAã€CUDAã€cuDNN-åŒ…"><a href="#2-å¸è½½æ‰€æœ‰-NVIDIAã€CUDAã€cuDNN-åŒ…" class="headerlink" title="2.å¸è½½æ‰€æœ‰ NVIDIAã€CUDAã€cuDNN åŒ…"></a>2.å¸è½½æ‰€æœ‰ NVIDIAã€CUDAã€cuDNN åŒ…</h3><p>æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt-get remove --purge <span class="string">'nvidia-*'</span> <span class="string">'cuda*'</span> <span class="string">'libcudnn*'</span> <span class="string">'libnvinfer*'</span> -y</span><br></pre></td></tr></tbody></table></figure><h3 id="3-åˆ é™¤-NVIDIA-é©±åŠ¨ç¨‹åºå®‰è£…å™¨äº§ç”Ÿçš„æ–‡ä»¶"><a href="#3-åˆ é™¤-NVIDIA-é©±åŠ¨ç¨‹åºå®‰è£…å™¨äº§ç”Ÿçš„æ–‡ä»¶" class="headerlink" title="3.åˆ é™¤ NVIDIA é©±åŠ¨ç¨‹åºå®‰è£…å™¨äº§ç”Ÿçš„æ–‡ä»¶"></a>3.åˆ é™¤ NVIDIA é©±åŠ¨ç¨‹åºå®‰è£…å™¨äº§ç”Ÿçš„æ–‡ä»¶</h3><p>ï¼ˆå¦‚æœä½ æ›¾ç”¨ .run æ–‡ä»¶å®‰è£…é©±åŠ¨ï¼‰</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> /usr/bin/nvidia-uninstall</span><br></pre></td></tr></tbody></table></figure><h2 id="æ¸…ç†æ®‹ç•™æ–‡ä»¶ä¸é…ç½®"><a href="#æ¸…ç†æ®‹ç•™æ–‡ä»¶ä¸é…ç½®" class="headerlink" title="æ¸…ç†æ®‹ç•™æ–‡ä»¶ä¸é…ç½®"></a>æ¸…ç†æ®‹ç•™æ–‡ä»¶ä¸é…ç½®</h2><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> <span class="built_in">rm</span> -rf /usr/local/cuda*</span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">rm</span> -rf /usr/lib/cuda*</span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">rm</span> -rf /usr/include/cuda*</span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">rm</span> -rf /etc/cuda*</span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">rm</span> -rf /etc/modprobe.d/nvidia*</span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">rm</span> -rf /etc/modules-load.d/nvidia*</span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">rm</span> -rf /var/lib/nvidia*</span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">rm</span> -rf /var/log/nvidia*</span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">rm</span> -rf /usr/share/doc/nvidia*</span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">rm</span> -rf /usr/share/nvidia*</span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">rm</span> -rf /opt/nvidia</span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">rm</span> -rf ~/.nv</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><h2 id="å¸è½½å†…æ ¸æ¨¡å—ï¼ˆé©±åŠ¨å†…æ ¸ï¼‰"><a href="#å¸è½½å†…æ ¸æ¨¡å—ï¼ˆé©±åŠ¨å†…æ ¸ï¼‰" class="headerlink" title="å¸è½½å†…æ ¸æ¨¡å—ï¼ˆé©±åŠ¨å†…æ ¸ï¼‰"></a>å¸è½½å†…æ ¸æ¨¡å—ï¼ˆé©±åŠ¨å†…æ ¸ï¼‰</h2><h3 id="å¸è½½æ¨¡å—"><a href="#å¸è½½æ¨¡å—" class="headerlink" title="å¸è½½æ¨¡å—"></a>å¸è½½æ¨¡å—</h3><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> modprobe -r nvidia_drm nvidia_modeset nvidia_uvm nvidia</span><br></pre></td></tr></tbody></table></figure><p>å¦‚æœæŠ¥é”™â€œin useâ€ï¼Œå¯ä»¥å¼ºåˆ¶å¸è½½(<strong>å¸è½½é¡ºåºå¾ˆé‡è¦</strong>)ï¼š</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> rmmod nvidia_uvm</span><br><span class="line"><span class="built_in">sudo</span> rmmod nvidia_modeset</span><br><span class="line"><span class="built_in">sudo</span> rmmod nvidia_drm</span><br><span class="line"><span class="built_in">sudo</span> rmmod nvidia</span><br></pre></td></tr></tbody></table></figure><p>å¦‚ä»æŠ¥é”™ï¼Œå¯è¿›å…¥å•ç”¨æˆ·æ¨¡å¼ï¼š</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> systemctl isolate multi-user.target</span><br></pre></td></tr></tbody></table></figure><p>ç„¶åå†æ‰§è¡Œä¸Šé¢çš„å¸è½½å‘½ä»¤ã€‚</p><h2 id="æ¸…ç†-Docker-GPU-æ’ä»¶"><a href="#æ¸…ç†-Docker-GPU-æ’ä»¶" class="headerlink" title="æ¸…ç† Docker GPU æ’ä»¶"></a>æ¸…ç† Docker GPU æ’ä»¶</h2><p>å¦‚æœä½ ç”¨è¿‡ Docker çš„ GPU æ”¯æŒï¼š</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt-get remove --purge nvidia-container-toolkit nvidia-container-runtime -y</span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">rm</span> -rf /etc/docker/daemon.json</span><br><span class="line"><span class="built_in">sudo</span> systemctl daemon-reload</span><br><span class="line"><span class="built_in">sudo</span> systemctl restart docker</span><br></pre></td></tr></tbody></table></figure><h2 id="æ›´æ–°ä¾èµ–ä¸é‡å¯"><a href="#æ›´æ–°ä¾èµ–ä¸é‡å¯" class="headerlink" title="æ›´æ–°ä¾èµ–ä¸é‡å¯"></a>æ›´æ–°ä¾èµ–ä¸é‡å¯</h2><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt-get autoremove -y</span><br><span class="line"><span class="built_in">sudo</span> apt-get autoclean -y</span><br><span class="line"><span class="built_in">sudo</span> update-initramfs -u</span><br><span class="line"><span class="built_in">sudo</span> reboot</span><br></pre></td></tr></tbody></table></figure><h2 id="éªŒè¯å¸è½½ç»“æœ"><a href="#éªŒè¯å¸è½½ç»“æœ" class="headerlink" title="éªŒè¯å¸è½½ç»“æœ"></a>éªŒè¯å¸è½½ç»“æœ</h2><p>é‡å¯åæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">lsmod | grep nvidia</span><br><span class="line">nvidia-smi</span><br><span class="line"><span class="built_in">which</span> nvcc</span><br></pre></td></tr></tbody></table></figure><p>ç»“æœåº”ä¸ºç©ºæˆ–æŠ¥é”™ï¼ˆè¡¨ç¤º NVIDIA é©±åŠ¨å·²å¸è½½ï¼‰ã€‚</p><h1 id="é‡æ–°å®‰è£…"><a href="#é‡æ–°å®‰è£…" class="headerlink" title="é‡æ–°å®‰è£…"></a>é‡æ–°å®‰è£…</h1><p>å„ä¸ªç»„ä»¶åˆé›†ä¸‹è½½<a href="https://developer.download.nvidia.cn/compute/cuda/repos/ubuntu2204/x86_64/">ä½ç½®</a>ã€‚</p><ol><li>å®‰è£… <a href="https://developer.nvidia.com/cuda-12-8-0-download-archive?target_os=Linux&amp;target_arch=x86_64&amp;Distribution=Ubuntu&amp;target_version=22.04&amp;target_type=deb_local">CUDA Toolkit</a></li><li>å®‰è£… <a href="https://developer.nvidia.com/cuda-12-8-0-download-archive?target_os=Linux&amp;target_arch=x86_64&amp;Distribution=Ubuntu&amp;target_version=22.04&amp;target_type=deb_local">Driver Installer </a></li></ol><p>æ³¨æ„ï¼š ä¸è¦ä½¿ç”¨ç½‘ç»œç‰ˆå®‰è£…æ–¹å¼ï¼Œä¸ç„¶ä¼šå‡çº§åˆ°æœ€æ–°çš„ç‰ˆæœ¬ï¼Œå¯¼è‡´ torch å…¼å®¹æ€§é—®é¢˜ã€‚ é€‰æ‹© deb(local) ç‰ˆæœ¬å®‰è£…ã€‚</p><ol start="3"><li><p>enable_nvidia_persistence_mode</p></li><li><p>å®‰è£… <a href="https://docs.nvidia.com/datacenter/tesla/fabric-manager-user-guide/index.html">nvidia-fabricmanager</a></p></li></ol><p>ä»¥ä¸Šå››ä¸ªæ­¥éª¤ï¼Œä¸èƒ½çœç•¥ï¼Œç¼ºä¸€ä¸å¯ï¼Œå°¤å…¶è¦æ³¨æ„å„ä¸ªç»„ä»¶çš„ç‰ˆæœ¬è¦åŒ¹é…ï¼Œåœ¨å®‰è£…çš„æ—¶å€™è¦æ ¹æ®å®˜æ–¹æ–‡æ¡£çš„è¯´æ˜ï¼Œä¸€æ­¥æ­¥çš„<br>æ¥ï¼Œä¸è¦å¿ƒæ€¥ï¼Œä¹Ÿä¸è¦è·³è¿‡æŸä¸ªæ­¥éª¤ã€‚æ­¤å¤–ï¼Œå¤§æ¨¡å‹ç»™å‡ºçš„å»ºè®®å¾€å¾€åŒ…å«å¤§é‡å¹»è§‰ï¼Œè¦ä»¥å®˜æ–¹æ–‡æ¡£ä¸ºå‡†ã€‚</p><p>å®Œæˆä»¥ä¸Šæ­¥éª¤ä¹‹åï¼Œå¯ä»¥æ‰§è¡Œä¸‹é¢çš„è„šæœ¬ï¼Œæ£€æŸ¥æ˜¯å¦åœ¨å®¿ä¸»æœºä¸­æˆåŠŸå®‰è£…ã€‚</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="built_in">set</span> -e</span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"=== Step 1: æ£€æŸ¥ NVIDIA é©±åŠ¨å’Œ CUDA ==="</span></span><br><span class="line">nvidia-smi || { <span class="built_in">echo</span> <span class="string">"âŒ é©±åŠ¨æœªæ­£å¸¸å·¥ä½œ"</span>; <span class="built_in">exit</span> 1; }</span><br><span class="line">nvcc -V || { <span class="built_in">echo</span> <span class="string">"âŒ CUDA Toolkit æœªå®‰è£…"</span>; <span class="built_in">exit</span> 1; }</span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"=== Step 2: æ£€æŸ¥å ç”¨ GPU çš„è¿›ç¨‹ ==="</span></span><br><span class="line">OCCUPIED=$(<span class="built_in">sudo</span> fuser -v /dev/nvidia* 2&gt;/dev/null || <span class="literal">true</span>)</span><br><span class="line"><span class="keyword">if</span> [ -n <span class="string">"<span class="variable">$OCCUPIED</span>"</span> ]; <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"âš ï¸ å‘ç°å ç”¨ GPU çš„è¿›ç¨‹ï¼š"</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"<span class="variable">$OCCUPIED</span>"</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"è¯·æ‰‹åŠ¨åœæ­¢è¿™äº›è¿›ç¨‹æˆ–é‡å¯æœåŠ¡å™¨"</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"âœ… æ²¡æœ‰å ç”¨ GPU çš„è¿›ç¨‹"</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"=== Step 3: é‡å¯ NVIDIA é©±åŠ¨æ¨¡å— ==="</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"âš ï¸ æ³¨æ„ï¼šè¿™ä¼šæ–­å¼€æ‰€æœ‰ä½¿ç”¨ GPU çš„ç¨‹åºï¼ŒåŒ…æ‹¬ Docker å®¹å™¨"</span></span><br><span class="line"><span class="built_in">sudo</span> rmmod nvidia_uvm nvidia || <span class="built_in">echo</span> <span class="string">"æ¨¡å—å¯èƒ½æ­£åœ¨ä½¿ç”¨ï¼Œå°è¯•å¼ºåˆ¶å¸è½½"</span></span><br><span class="line"><span class="built_in">sudo</span> modprobe nvidia</span><br><span class="line"><span class="built_in">sudo</span> modprobe nvidia_uvm</span><br><span class="line"><span class="built_in">echo</span> <span class="string">"âœ… é©±åŠ¨æ¨¡å—å·²é‡å¯"</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"=== Step 4: è®¾ç½®ç¯å¢ƒå˜é‡ï¼ˆH100 å…¼å®¹ï¼‰ ==="</span></span><br><span class="line"><span class="built_in">export</span> CUDA_MODULE_LOADING=LAZY</span><br><span class="line"><span class="built_in">export</span> NVIDIA_DISABLE_REQUIRE=1</span><br><span class="line"><span class="built_in">echo</span> <span class="string">"âœ… ç¯å¢ƒå˜é‡å·²è®¾ç½®"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"CUDA_MODULE_LOADING=<span class="variable">$CUDA_MODULE_LOADING</span>"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"NVIDIA_DISABLE_REQUIRE=<span class="variable">$NVIDIA_DISABLE_REQUIRE</span>"</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"=== Step 5: æµ‹è¯• PyTorch CUDA åˆå§‹åŒ– ==="</span></span><br><span class="line">python3 - &lt;&lt;<span class="string">'EOF'</span></span><br><span class="line">import torch</span><br><span class="line"><span class="built_in">print</span>(<span class="string">"Torch version:"</span>, torch.__version__)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">"CUDA version:"</span>, torch.version.cuda)</span><br><span class="line">try:</span><br><span class="line">    available = torch.cuda.is_available()</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"CUDA available:"</span>, available)</span><br><span class="line">    <span class="keyword">if</span> available:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">"Device count:"</span>, torch.cuda.device_count())</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(torch.cuda.device_count()):</span><br><span class="line">            <span class="built_in">print</span>(f<span class="string">"GPU {i}:"</span>, torch.cuda.get_device_name(i))</span><br><span class="line">except Exception as e:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"âŒ PyTorch CUDA åˆå§‹åŒ–å¤±è´¥:"</span>, e)</span><br><span class="line">EOF</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><p>åœ¨å®¿ä¸»æœºä¸­æˆåŠŸå®‰è£…ä¹‹åï¼Œæ¥ä¸‹æ¥ å®‰è£…  NVIDIA Container Toolkitï¼Œ ä»¥ä¾¿äºåœ¨ Docker å®¹å™¨ä¸­ä½¿ç”¨ GPUï¼Œå¦‚æœä¸ä½¿ç”¨å®¹å™¨ï¼Œåˆ™ä¸éœ€è¦è¿™ä¸€æ­¥ã€‚æ­¤å¤–ï¼Œåœ¨è¯¥æ­¥éª¤ä¸­ï¼Œä¸éœ€è¦ç‰ˆæœ¬åŒ¹é…ï¼Œç›´æ¥å®‰è£…æœ€æ–°ç‰ˆæœ¬å³å¯ã€‚</p><ol start="5"><li>å®‰è£… <a href="https://docs.nvidia.com/datacenter/cloud-native/container-toolkit/latest/install-guide.html">NVIDIA Container Toolkit</a></li></ol>]]></content>
      
      
      <categories>
          
          <category> è¿ç»´ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> NVIDIA </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>sshé…ç½®ä»‹ç»</title>
      <link href="/2025/10/03/ssh-pei-zhi-jie-shao/"/>
      <url>/2025/10/03/ssh-pei-zhi-jie-shao/</url>
      
        <content type="html"><![CDATA[<h1 id="SSH-ä»‹ç»"><a href="#SSH-ä»‹ç»" class="headerlink" title="SSH ä»‹ç»"></a>SSH ä»‹ç»</h1><h2 id="ä»€ä¹ˆæ˜¯-ssh-é…ç½®"><a href="#ä»€ä¹ˆæ˜¯-ssh-é…ç½®" class="headerlink" title="ä»€ä¹ˆæ˜¯ ssh é…ç½®"></a>ä»€ä¹ˆæ˜¯ ssh é…ç½®</h2><p><code>~/.ssh/config</code> æ–‡ä»¶æ˜¯SSHçš„å®¢æˆ·ç«¯é…ç½®æ–‡ä»¶ï¼Œç”¨äºç®€åŒ–è¿æ¥è¿œç¨‹ä¸»æœºæ—¶çš„å‘½ä»¤è¡Œè¾“å…¥ã€‚é€šè¿‡é…ç½®æ–‡ä»¶ï¼Œå¯ä»¥ä¸ºä¸åŒçš„ä¸»æœºè®¾ç½®ï¼š</p><ul><li>ç”¨æˆ·å</li><li>ç«¯å£å·</li><li>ç§é’¥æ–‡ä»¶è·¯å¾„</li><li>è·³æ¿æœºï¼ˆProxyJump/ProxyCommandï¼‰</li><li>è¿æ¥ä¼˜åŒ–å‚æ•°ï¼ˆKeepAliveã€Compression ç­‰ï¼‰<br>è¿™æ ·å°±ä¸éœ€è¦æ¯æ¬¡éƒ½è¾“å…¥å†—é•¿çš„å‘½ä»¤å’Œå‚æ•°äº†ã€‚</li></ul><h2 id="é…ç½®æ–‡ä»¶ä½ç½®"><a href="#é…ç½®æ–‡ä»¶ä½ç½®" class="headerlink" title="é…ç½®æ–‡ä»¶ä½ç½®"></a>é…ç½®æ–‡ä»¶ä½ç½®</h2><ul><li>ç”¨æˆ·çº§é…ç½®ï¼š <code>~/.ssh/config</code> ï¼ˆæ¨èï¼‰</li><li>å…¨å±€é…ç½®ï¼š <code>/etc/ssh/ssh_config</code> ï¼ˆç³»ç»ŸèŒƒå›´ï¼Œé€šå¸¸ä¸è¦æ”¹ï¼‰<br>ä¼˜å…ˆçº§ï¼š å‘½ä»¤è¡Œå‚æ•° &gt; ç”¨æˆ·çº§é…ç½® &gt; ç³»ç»Ÿçº§é…ç½®</li></ul><h2 id="åŸºæœ¬ç»“æ„"><a href="#åŸºæœ¬ç»“æ„" class="headerlink" title="åŸºæœ¬ç»“æ„"></a>åŸºæœ¬ç»“æ„</h2><p>é…ç½®æ–‡ä»¶ç”±ä¸€ç»„ <code>Host</code> å—ç»„æˆï¼š</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Host åˆ«å</span><br><span class="line">    HostName å®é™…ä¸»æœºåæˆ–IP</span><br><span class="line">    User ç”¨æˆ·å</span><br><span class="line">    Port ç«¯å£å·</span><br><span class="line">    IdentityFile ç§é’¥è·¯å¾„</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><p>ä¾‹å­</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Host myserver</span><br><span class="line">    HostName 192.168.1.100</span><br><span class="line">    User leon</span><br><span class="line">    Port 2222</span><br><span class="line">    IdentityFile ~/.ssh/id_rsa</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><p>è¿™æ ·å°±å¯ä»¥ç›´æ¥ç”¨ï¼š ssh myserver</p><h2 id="å¸¸è§é…ç½®"><a href="#å¸¸è§é…ç½®" class="headerlink" title="å¸¸è§é…ç½®"></a>å¸¸è§é…ç½®</h2><p>ä¸»æœºåˆ«å</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Host myserver</span><br><span class="line">    HostName example.com</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><p>ç”¨æˆ·åå’Œç«¯å£</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">User root</span><br><span class="line">Port 2200</span><br></pre></td></tr></tbody></table></figure><p>æŒ‡å®šç§é’¥æ–‡ä»¶</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">IdentityFile ~/.ssh/id_ed25519</span><br></pre></td></tr></tbody></table></figure><p>è·³æ¿æœºï¼ˆä»£ç†ï¼‰<br>å¦‚æœè¦é€šè¿‡è·³æ¿æœºA è®¿é—®Bï¼š</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Host jump</span><br><span class="line">    HostName jump.example.com</span><br><span class="line">    User leon</span><br><span class="line"></span><br><span class="line">Host target</span><br><span class="line">    HostName target.internal</span><br><span class="line">    User leon</span><br><span class="line">    ProxyJump jump</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><p>å¤š Host é€šé…ç¬¦</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Host *.example.com</span><br><span class="line">    User admin</span><br><span class="line">    IdentityFile ~/.ssh/id_rsa</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><p>å¸¸ç”¨ä¼˜åŒ–å‚æ•°</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">ServerAliveInterval 60   # æ¯ 60 ç§’å‘ä¸€æ¬¡å¿ƒè·³åŒ…</span><br><span class="line">ServerAliveCountMax 5    # å¤±è´¥ 5 æ¬¡æ–­å¼€</span><br><span class="line">Compression yes          # å‹ç¼©æ•°æ®</span><br><span class="line">ControlMaster auto       # å¤ç”¨è¿æ¥</span><br><span class="line">ControlPath ~/.ssh/cm-%r@%h:%p</span><br><span class="line">ControlPersist 10m       # å¤ç”¨ä¿æŒ 10 åˆ†é’Ÿ</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><p>å®Œæ•´ç¤ºä¾‹</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">Host github</span><br><span class="line">    HostName github.com</span><br><span class="line">    User git</span><br><span class="line">    IdentityFile ~/.ssh/id_ed25519</span><br><span class="line"></span><br><span class="line">Host work-server</span><br><span class="line">    HostName 203.0.113.10</span><br><span class="line">    User leon</span><br><span class="line">    Port 2200</span><br><span class="line">    IdentityFile ~/.ssh/work_id_rsa</span><br><span class="line">    ServerAliveInterval 60</span><br><span class="line"></span><br><span class="line">Host internal-*</span><br><span class="line">    User admin</span><br><span class="line">    ProxyJump work-server</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><h1 id="SSH-config-æ¨¡ç‰ˆ"><a href="#SSH-config-æ¨¡ç‰ˆ" class="headerlink" title="SSH config æ¨¡ç‰ˆ"></a>SSH config æ¨¡ç‰ˆ</h1><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"># ==========================================</span><br><span class="line"># åŸºç¡€é…ç½®</span><br><span class="line"># ==========================================</span><br><span class="line">Host *</span><br><span class="line">    ServerAliveInterval 60        # æ¯ 60 ç§’å‘ä¸€æ¬¡å¿ƒè·³ï¼Œé˜²æ‰çº¿</span><br><span class="line">    ServerAliveCountMax 5         # å¤±è´¥ 5 æ¬¡æ–­å¼€</span><br><span class="line">    ControlMaster auto            # å¼€å¯è¿æ¥å¤ç”¨</span><br><span class="line">    ControlPath ~/.ssh/cm-%r@%h:%p</span><br><span class="line">    ControlPersist 10m            # å¤ç”¨ä¿æŒ 10 åˆ†é’Ÿ</span><br><span class="line">    Compression yes               # å¼€å¯å‹ç¼©</span><br><span class="line"></span><br><span class="line"># ==========================================</span><br><span class="line"># GitHub</span><br><span class="line"># ç”¨äº git clone / push</span><br><span class="line"># ==========================================</span><br><span class="line">Host github</span><br><span class="line">    HostName github.com</span><br><span class="line">    User git</span><br><span class="line">    IdentityFile ~/.ssh/id_ed25519</span><br><span class="line"></span><br><span class="line"># ==========================================</span><br><span class="line"># ç§‘ç ”é›†ç¾¤ï¼ˆHPCï¼‰</span><br><span class="line"># å‡è®¾ç™»å½•åæ˜¯ yyyï¼Œä¸»æœºå cluster.edu.cn</span><br><span class="line"># ==========================================</span><br><span class="line">Host hpc</span><br><span class="line">    HostName cluster.edu.cn</span><br><span class="line">    User yyy</span><br><span class="line">    Port 22</span><br><span class="line">    IdentityFile ~/.ssh/hpc_id_rsa</span><br><span class="line"></span><br><span class="line"># ç™»å½•åè¿˜èƒ½ç”¨ scp ä¸Šä¼ ä¸‹è½½ï¼Œä¾‹å¦‚ï¼š</span><br><span class="line"># scp myfile.txt hpc:/home/yyy/</span><br><span class="line"></span><br><span class="line"># ==========================================</span><br><span class="line"># è·³æ¿æœºï¼ˆJump Serverï¼‰</span><br><span class="line"># åœºæ™¯ï¼šéœ€è¦å…ˆç™»å½•è·³æ¿æœº jump.edu.cn æ‰èƒ½è®¿é—®å†…ç½‘ server1</span><br><span class="line"># ==========================================</span><br><span class="line">Host jump</span><br><span class="line">    HostName jump.edu.cn</span><br><span class="line">    User yyy</span><br><span class="line">    IdentityFile ~/.ssh/id_rsa</span><br><span class="line"></span><br><span class="line">Host server1</span><br><span class="line">    HostName 10.0.0.11</span><br><span class="line">    User yyy</span><br><span class="line">    ProxyJump jump</span><br><span class="line"></span><br><span class="line"># ==========================================</span><br><span class="line"># ä¸ªäººäº‘æœåŠ¡å™¨ï¼ˆæ¯”å¦‚é˜¿é‡Œäº‘/è…¾è®¯äº‘ï¼‰</span><br><span class="line"># ==========================================</span><br><span class="line">Host aliyun</span><br><span class="line">    HostName 123.45.67.89</span><br><span class="line">    User root</span><br><span class="line">    Port 22</span><br><span class="line">    IdentityFile ~/.ssh/aliyun.pem</span><br><span class="line"></span><br><span class="line"># ==========================================</span><br><span class="line"># æ‰¹é‡è§„åˆ™ï¼šå†…ç½‘æœºå™¨ç»Ÿä¸€é…ç½®</span><br><span class="line"># ==========================================</span><br><span class="line">Host node-*</span><br><span class="line">    User yyy</span><br><span class="line">    ProxyJump jump</span><br><span class="line">    IdentityFile ~/.ssh/id_rsa</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>]]></content>
      
      
      <categories>
          
          <category> è¿ç»´ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ssh </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MinerUå®‰è£…éƒ¨ç½²</title>
      <link href="/2025/10/02/mineru-an-zhuang-bu-shu/"/>
      <url>/2025/10/02/mineru-an-zhuang-bu-shu/</url>
      
        <content type="html"><![CDATA[<p>æœ€è¿‘ï¼Œå› ä¸ºå®éªŒå·¥ä½œéœ€è¦ï¼ŒæŠ˜è…¾äº†ä¸€ä¸‹MinerUçš„å®‰è£…éƒ¨ç½²ï¼Œè®°å½•ä¸€ä¸‹è¿‡ç¨‹ã€‚</p><p>æˆ‘ä½¿ç”¨çš„æ˜¯é•œåƒéƒ¨ç½²æ–¹å¼ï¼ŒæŒ‰ç…§å®˜æ–¹çš„ç»™å‡ºçš„Dockeré•œåƒè¿›è¡Œéƒ¨ç½²ï¼Œè¿‡ç¨‹è¿˜æ˜¯æ¯”è¾ƒé¡ºåˆ©çš„ã€‚è¿™é‡Œè¦æ³¨æ„çš„æ˜¯ï¼ŒMinerUå¯¹CUDAç‰ˆæœ¬æœ‰è¦æ±‚ï¼Œå…·ä½“è¦æ±‚å¯ä»¥å‚è€ƒå®˜æ–¹æ–‡æ¡£ã€‚æ­¤å¤–ï¼Œé•œåƒçš„ Dockerfile æˆ– docker-compose.yml åº”è¯¥ä»Githubä¸Šæ‹‰å–æœ€æ–°çš„ç‰ˆæœ¬ï¼Œä»¥ç¡®ä¿ä½¿ç”¨çš„æ˜¯æœ€æ–°çš„é…ç½®ã€‚</p><p>æ­¤å¤–ï¼Œåº”è¯¥ä»”ç»†é˜…è¯»ï¼Œå®˜æ–¹ç»™å‡ºçš„ é•œåƒéƒ¨ç½²æŒ‡å—ã€‚å®˜æ–¹ç»™å‡ºäº†ä¸‰ç§ä¸åŒæœåŠ¡çš„ docker-compose.ymlï¼Œä»æˆ‘çš„ç†è§£æ¥çœ‹ï¼Œ MinerU çš„ docker-compose.yml æ–‡ä»¶ä¸­ï¼Œæåˆ°çš„ä¸‰ä¸ªæœåŠ¡ï¼Œæ˜¯ç‹¬ç«‹çš„ï¼Œå³æ¯ç§æœåŠ¡éƒ½å¯ä»¥å•ç‹¬è¿è¡Œï¼Œåªæ˜¯è®¿é—®çš„æ–¹å¼ä¸åŒã€‚</p><ul><li><strong>web apiæœåŠ¡</strong>ï¼šæä¾›FastAPIæ¥å£ï¼Œé€‚åˆç¨‹åºåŒ–è®¿é—®ã€‚</li><li><strong>Gradio WebUI</strong>ï¼šæä¾›Webç•Œé¢ï¼Œé€šè¿‡æµè§ˆå™¨è®¿é—®ï¼Œé€‚åˆdemoå±•ç¤ºã€‚</li><li><strong>vllm-server æœåŠ¡</strong>ï¼šå¯åŠ¨ä¹‹åï¼Œå¯ä»¥é€šè¿‡http clientè¿æ¥vllm serverã€‚</li></ul><p> <a href="https://github.com/opendatalab/MinerU">MinerU githubä¸»é¡µ</a></p><p><a href="https://opendatalab.github.io/MinerU/zh/">MinerUå®˜æ–¹æ–‡æ¡£</a></p><p><a href="https://developer.nvidia.com/cuda-toolkit-archive">CUDA é©±åŠ¨å®‰è£…æŒ‡å—</a></p>]]></content>
      
      
      <categories>
          
          <category> è¿ç»´ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> mineru </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é€šè¿‡dockerè¿è¡ŒEasyConnectç­‰VPNè½¯ä»¶</title>
      <link href="/2025/09/29/tong-guo-docker-yun-xing-easyconnect-deng-vpn-ruan-jian/"/>
      <url>/2025/09/29/tong-guo-docker-yun-xing-easyconnect-deng-vpn-ruan-jian/</url>
      
        <content type="html"><![CDATA[<p>å¤æ—¦VPNç™»å½•<a href="https://yangzhang.site/Note/Fudan/stuvpn/">æ•™ç¨‹</a></p><p>é¡¹ç›®github<a href="https://github.com/docker-easyconnect/docker-easyconnect">åœ°å€</a></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>å…¨å±€é…ç½®Dockerå®¢æˆ·ç«¯ä»£ç†</title>
      <link href="/2025/09/28/quan-ju-pei-zhi-docker-ke-hu-duan-dai-li/"/>
      <url>/2025/09/28/quan-ju-pei-zhi-docker-ke-hu-duan-dai-li/</url>
      
        <content type="html"><![CDATA[<p>æˆ‘ä»¬ä¸‹è½½é•œåƒçš„æ—¶å€™éœ€è¦ç§‘å­¦ä¸Šç½‘ï¼Œä¸‹é¢ä»‹ç»ä¸€ä¸‹å…¨å±€é…ç½®Dockerå®¢æˆ·ç«¯ä»£ç†çš„æ–¹æ³•ï¼Œé…ç½®å¥½<br>ä»¥åæ‰€æœ‰ docker build, docker pull, docker run ç­‰å‘½ä»¤éƒ½å¯ä»¥ç›´æ¥ä½¿ç”¨ä»£ç†ã€‚</p><h2 id="1-ç¼–è¾‘é…ç½®ç›®å½•"><a href="#1-ç¼–è¾‘é…ç½®ç›®å½•" class="headerlink" title="1. ç¼–è¾‘é…ç½®ç›®å½•"></a>1. ç¼–è¾‘é…ç½®ç›®å½•</h2><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> <span class="built_in">mkdir</span> -p /etc/systemd/system/docker.service.d</span><br><span class="line"><span class="built_in">sudo</span> vim /etc/systemd/system/docker.service.d/proxy.conf</span><br></pre></td></tr></tbody></table></figure><h2 id="2-å†™å…¥å†…å®¹-ï¼ˆæ ¹æ®ä½ çš„ä»£ç†åœ°å€å’Œç«¯å£æ”¹ï¼‰"><a href="#2-å†™å…¥å†…å®¹-ï¼ˆæ ¹æ®ä½ çš„ä»£ç†åœ°å€å’Œç«¯å£æ”¹ï¼‰" class="headerlink" title="2. å†™å…¥å†…å®¹ ï¼ˆæ ¹æ®ä½ çš„ä»£ç†åœ°å€å’Œç«¯å£æ”¹ï¼‰"></a>2. å†™å…¥å†…å®¹ ï¼ˆæ ¹æ®ä½ çš„ä»£ç†åœ°å€å’Œç«¯å£æ”¹ï¼‰</h2><figure class="highlight ini"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[Service]</span>   </span><br><span class="line"><span class="attr">Environment</span>=<span class="string">"HTTP_PROXY=http://YOUR_PROXY_IP:YOUR_PROXY_PORT"</span></span><br><span class="line"><span class="attr">Environment</span>=<span class="string">"HTTPS_PROXY=http://YOUR_PROXY_IP:YOUR_PROXY_PORT"</span></span><br><span class="line"><span class="attr">Environment</span>=<span class="string">"NO_PROXY=localhost,127.0.0.1,registry.local,.internal"</span></span><br></pre></td></tr></tbody></table></figure><h2 id="3-é‡è½½é…ç½®å¹¶é‡å¯dockeræœåŠ¡"><a href="#3-é‡è½½é…ç½®å¹¶é‡å¯dockeræœåŠ¡" class="headerlink" title="3. é‡è½½é…ç½®å¹¶é‡å¯dockeræœåŠ¡"></a>3. é‡è½½é…ç½®å¹¶é‡å¯dockeræœåŠ¡</h2><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> systemctl daemon-reload</span><br><span class="line"><span class="built_in">sudo</span> systemctl restart docker</span><br></pre></td></tr></tbody></table></figure><h2 id="4-éªŒè¯"><a href="#4-éªŒè¯" class="headerlink" title="4. éªŒè¯"></a>4. éªŒè¯</h2><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> systemctl show --property=Environment docker</span><br></pre></td></tr></tbody></table></figure><p>å¦‚æœçœ‹åˆ°ä½ åˆšæ‰è®¾ç½®çš„ç¯å¢ƒå˜é‡å°±è¯´æ˜é…ç½®æˆåŠŸäº†ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹ ç¬”è®° </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Linuxç£ç›˜ç®¡ç†åŠMinIOæœåŠ¡é…ç½®</title>
      <link href="/2025/09/16/linux-ci-pan-guan-li-ji-minio-fu-wu-pei-zhi/"/>
      <url>/2025/09/16/linux-ci-pan-guan-li-ji-minio-fu-wu-pei-zhi/</url>
      
        <content type="html"><![CDATA[<h2 id="ä¸€ã€ä½¿ç”¨-lsblk-è·å–ç£ç›˜å†…å®¹"><a href="#ä¸€ã€ä½¿ç”¨-lsblk-è·å–ç£ç›˜å†…å®¹" class="headerlink" title="ä¸€ã€ä½¿ç”¨ lsblk è·å–ç£ç›˜å†…å®¹"></a>ä¸€ã€ä½¿ç”¨ <code>lsblk</code> è·å–ç£ç›˜å†…å®¹</h2><p><img src="https://raw.githubusercontent.com/Skylyong/i/main/20250916204000.png" alt="image-20250916203941166"><br>å¯ä»¥çœ‹åˆ°ï¼š</p><ul><li><strong>sda</strong> å’Œ <strong>sdc</strong> æ˜¯ç©ºç›˜  </li><li><strong>sdb</strong> æ˜¯ç³»ç»Ÿç›˜</li></ul><hr><h2 id="äºŒã€ç£ç›˜åˆ†åŒºå’Œæ ¼å¼åŒ–"><a href="#äºŒã€ç£ç›˜åˆ†åŒºå’Œæ ¼å¼åŒ–" class="headerlink" title="äºŒã€ç£ç›˜åˆ†åŒºå’Œæ ¼å¼åŒ–"></a>äºŒã€ç£ç›˜åˆ†åŒºå’Œæ ¼å¼åŒ–</h2><p>ä»¥ä¸‹è„šæœ¬å°†ä¸€ä¸ªå¤§å®¹é‡ç£ç›˜ï¼ˆå¦‚ 3.6Tï¼‰åˆ†ä¸ºä¸¤ä¸ªç›¸ç­‰å¤§å°çš„åˆ†åŒºï¼Œå¹¶æ ¼å¼åŒ–ä¸º <code>ext4</code> æ–‡ä»¶ç³»ç»Ÿã€‚</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment">########################################################################</span></span><br><span class="line"><span class="comment"># è„šæœ¬åŠŸèƒ½ï¼šåœ¨ Linux ä¸Šå°†ä¸€ä¸ªå¤§å®¹é‡ç£ç›˜ï¼ˆä¾‹å¦‚ 3.6Tï¼‰åˆ†ä¸ºä¸¤ä¸ª</span></span><br><span class="line"><span class="comment">#          ç›¸ç­‰å¤§å°çš„åˆ†åŒºï¼Œå¹¶æ ¼å¼åŒ–ä¸º ext4 æ–‡ä»¶ç³»ç»Ÿã€‚</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># ä½¿ç”¨å‰æ³¨æ„äº‹é¡¹ï¼š</span></span><br><span class="line"><span class="comment"># 1. è¯·å°† DISK="/dev/sdX" ä¿®æ”¹ä¸ºå®é™…ç£ç›˜è®¾å¤‡ï¼Œä¾‹å¦‚ /dev/sdbã€‚</span></span><br><span class="line"><span class="comment"># 2. è„šæœ¬æ‰§è¡Œä¼šæ¸…ç©ºç£ç›˜ä¸Šçš„æ‰€æœ‰æ•°æ®ï¼ŒåŒ…æ‹¬åˆ†åŒºè¡¨å’Œæ–‡ä»¶ç³»ç»Ÿã€‚</span></span><br><span class="line"><span class="comment"># 3. ç¡®è®¤ç£ç›˜æ²¡æœ‰æŒ‚è½½ï¼Œå¦åˆ™å¯èƒ½å¯¼è‡´æ•°æ®ä¸¢å¤±æˆ–ç³»ç»Ÿå¼‚å¸¸ã€‚</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># è„šæœ¬æ­¥éª¤ï¼š</span></span><br><span class="line"><span class="comment"># 1. æ¸…é™¤ç£ç›˜ä¸Šçš„æ‰€æœ‰æ–‡ä»¶ç³»ç»Ÿç­¾åã€‚</span></span><br><span class="line"><span class="comment"># 2. æ¸…é™¤ç£ç›˜ä¸Šçš„ GPT/MBR å…ƒæ•°æ®ã€‚</span></span><br><span class="line"><span class="comment"># 3. åˆ›å»º GPT åˆ†åŒºè¡¨ã€‚</span></span><br><span class="line"><span class="comment"># 4. è®¡ç®—ç£ç›˜æ€»å¤§å°ï¼Œç¡®å®šæ¯ä¸ªåˆ†åŒºå¤§å°çš„ä¸€åŠã€‚</span></span><br><span class="line"><span class="comment"># 5. åˆ›å»ºä¸¤ä¸ªä¸»åˆ†åŒºï¼Œå¤§å°ç›¸ç­‰ã€‚</span></span><br><span class="line"><span class="comment"># 6. å°†ä¸¤ä¸ªåˆ†åŒºæ ¼å¼åŒ–ä¸º ext4 æ–‡ä»¶ç³»ç»Ÿã€‚</span></span><br><span class="line"><span class="comment"># 7. è¾“å‡ºå®Œæˆæç¤ºã€‚</span></span><br><span class="line"><span class="comment">########################################################################</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># ç£ç›˜è®¾å¤‡ï¼Œè¯·ä¿®æ”¹ä¸ºä½ çš„å®é™…è®¾å¤‡</span></span><br><span class="line">DISK=<span class="string">"/dev/sdc"</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># è­¦å‘Šï¼šä¼šæ¸…ç©ºç£ç›˜æ‰€æœ‰æ•°æ®</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"æ­£åœ¨æ¸…ç©ºç£ç›˜ <span class="variable">$DISK</span> ..."</span></span><br><span class="line"><span class="built_in">sudo</span> wipefs -a <span class="variable">$DISK</span></span><br><span class="line"><span class="built_in">sudo</span> sgdisk --zap-all <span class="variable">$DISK</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ›å»º GPT åˆ†åŒºè¡¨</span></span><br><span class="line"><span class="built_in">sudo</span> parted -s <span class="variable">$DISK</span> mklabel gpt</span><br><span class="line"></span><br><span class="line"><span class="comment"># è·å–ç£ç›˜æ€»å¤§å°ï¼ˆGiBï¼‰</span></span><br><span class="line">DISK_SIZE_GB=$(lsblk -b -dn -o SIZE <span class="variable">$DISK</span>)</span><br><span class="line">DISK_SIZE_GB=$((DISK_SIZE_GB / <span class="number">1024</span> / <span class="number">1024</span> / <span class="number">1024</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ¯ä¸ªåˆ†åŒºå¤§å°çš„ä¸€åŠ</span></span><br><span class="line">PART_SIZE_GB=$((DISK_SIZE_GB / <span class="number">2</span>))</span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"ç£ç›˜æ€»å¤§å°: <span class="variable">${DISK_SIZE_GB}</span>Gï¼Œæ¯ä¸ªåˆ†åŒº: <span class="variable">${PART_SIZE_GB}</span>G"</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ›å»ºä¸¤ä¸ªåˆ†åŒº</span></span><br><span class="line"><span class="built_in">sudo</span> parted -s <span class="variable">$DISK</span> mkpart primary 0G <span class="variable">${PART_SIZE_GB}</span>G</span><br><span class="line"><span class="built_in">sudo</span> parted -s <span class="variable">$DISK</span> mkpart primary <span class="variable">${PART_SIZE_GB}</span>G 100%</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ ¼å¼åŒ–ä¸º ext4 æ–‡ä»¶ç³»ç»Ÿ</span></span><br><span class="line"><span class="built_in">sudo</span> mkfs.ext4 <span class="variable">${DISK}</span>1</span><br><span class="line"><span class="built_in">sudo</span> mkfs.ext4 <span class="variable">${DISK}</span>2</span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"åˆ†åŒºå®Œæˆï¼Œåˆ†åˆ«ä¸º <span class="variable">${DISK}</span>1 å’Œ <span class="variable">${DISK}</span>2"</span></span><br></pre></td></tr></tbody></table></figure><hr><h2 id="ä¸‰ã€æŒ‚è½½ç£ç›˜åˆ†åŒº"><a href="#ä¸‰ã€æŒ‚è½½ç£ç›˜åˆ†åŒº" class="headerlink" title="ä¸‰ã€æŒ‚è½½ç£ç›˜åˆ†åŒº"></a>ä¸‰ã€æŒ‚è½½ç£ç›˜åˆ†åŒº</h2><p>ä¸‹é¢çš„è„šæœ¬ç”¨äºå°†åˆ†åŒºæŒ‚è½½åˆ° <code>/mnt</code> ä¸‹å¯¹åº”ç›®å½•ã€‚</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="comment">########################################################################</span></span><br><span class="line"><span class="comment"># è„šæœ¬åŠŸèƒ½ï¼šåœ¨ Linux ç³»ç»Ÿä¸Šï¼Œå°†å·²æœ‰åˆ†åŒºæŒ‚è½½åˆ° /mnt ä¸‹å¯¹åº”ç›®å½•</span></span><br><span class="line"><span class="comment">#          å¹¶è‡ªåŠ¨åˆ›å»ºæŒ‚è½½ç‚¹ã€‚</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># ä½¿ç”¨è¯´æ˜ï¼š</span></span><br><span class="line"><span class="comment"># 1. è„šæœ¬åªæŒ‚è½½åˆ†åŒºï¼Œä¸ä¿®æ”¹ /etc/fstabï¼Œä¸åšå¼€æœºè‡ªåŠ¨æŒ‚è½½ã€‚</span></span><br><span class="line"><span class="comment"># 2. è„šæœ¬ä¼šæ£€æµ‹æŒ‚è½½ç‚¹æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœä¸å­˜åœ¨ä¼šè‡ªåŠ¨åˆ›å»ºã€‚</span></span><br><span class="line"><span class="comment"># 3. è„šæœ¬ä¼šæ£€æµ‹åˆ†åŒºæ˜¯å¦å·²ç»æŒ‚è½½ï¼Œé¿å…é‡å¤æŒ‚è½½ã€‚</span></span><br><span class="line"><span class="comment"># 4. è„šæœ¬å‡è®¾åˆ†åŒºå·²æœ‰æ–‡ä»¶ç³»ç»Ÿï¼ˆå¦‚ ext4ã€xfs ç­‰ï¼‰ã€‚</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># ç£ç›˜åˆ†åŒºå’ŒæŒ‚è½½ç‚¹å¯¹åº”å…³ç³»ï¼š</span></span><br><span class="line"><span class="comment"># /dev/sda1 -&gt; /mnt/sda1</span></span><br><span class="line"><span class="comment"># /dev/sda2 -&gt; /mnt/sda2</span></span><br><span class="line"><span class="comment"># /dev/sdc1 -&gt; /mnt/sdc1</span></span><br><span class="line"><span class="comment"># /dev/sdc2 -&gt; /mnt/sdc2</span></span><br><span class="line"><span class="comment">########################################################################</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ†åŒºå’ŒæŒ‚è½½ç‚¹å¯¹åº”å…³ç³»</span></span><br><span class="line"><span class="built_in">declare</span> -A partitions=(</span><br><span class="line">  [<span class="string">"/dev/sda1"</span>]=<span class="string">"/mnt/sda1"</span></span><br><span class="line">  [<span class="string">"/dev/sda2"</span>]=<span class="string">"/mnt/sda2"</span></span><br><span class="line">  [<span class="string">"/dev/sdc1"</span>]=<span class="string">"/mnt/sdc1"</span></span><br><span class="line">  [<span class="string">"/dev/sdc2"</span>]=<span class="string">"/mnt/sdc2"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment"># éå†åˆ†åŒºå¹¶æŒ‚è½½</span></span><br><span class="line"><span class="keyword">for</span> part <span class="keyword">in</span> <span class="string">"<span class="variable">${!partitions[@]}</span>"</span>; <span class="keyword">do</span></span><br><span class="line">    mount_point=<span class="string">"<span class="variable">${partitions[$part]}</span>"</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># åˆ›å»ºæŒ‚è½½ç‚¹</span></span><br><span class="line">    <span class="keyword">if</span> [ ! -d <span class="string">"<span class="variable">$mount_point</span>"</span> ]; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">sudo</span> <span class="built_in">mkdir</span> -p <span class="string">"<span class="variable">$mount_point</span>"</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"åˆ›å»ºæŒ‚è½½ç‚¹ <span class="variable">$mount_point</span>"</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># æ£€æŸ¥åˆ†åŒºæ˜¯å¦å·²ç»æŒ‚è½½</span></span><br><span class="line">    <span class="keyword">if</span> mount | grep -q <span class="string">"<span class="variable">$part</span>"</span>; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"<span class="variable">$part</span> å·²ç»æŒ‚è½½"</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="comment"># æŒ‚è½½åˆ†åŒº</span></span><br><span class="line">        <span class="built_in">sudo</span> mount <span class="string">"<span class="variable">$part</span>"</span> <span class="string">"<span class="variable">$mount_point</span>"</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"æŒ‚è½½ <span class="variable">$part</span> åˆ° <span class="variable">$mount_point</span> å®Œæˆ"</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"æ‰€æœ‰åˆ†åŒºæŒ‚è½½å®Œæˆ"</span></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><hr><h2 id="å››ã€è®¾ç½®-MinIO-æœåŠ¡"><a href="#å››ã€è®¾ç½®-MinIO-æœåŠ¡" class="headerlink" title="å››ã€è®¾ç½® MinIO æœåŠ¡"></a>å››ã€è®¾ç½® MinIO æœåŠ¡</h2><h3 id="1-æŸ¥çœ‹æœåŠ¡çŠ¶æ€"><a href="#1-æŸ¥çœ‹æœåŠ¡çŠ¶æ€" class="headerlink" title="1. æŸ¥çœ‹æœåŠ¡çŠ¶æ€"></a>1. æŸ¥çœ‹æœåŠ¡çŠ¶æ€</h3><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> systemctl status minio</span><br></pre></td></tr></tbody></table></figure><h3 id="2-ç¼–è¾‘é…ç½®æ–‡ä»¶"><a href="#2-ç¼–è¾‘é…ç½®æ–‡ä»¶" class="headerlink" title="2. ç¼–è¾‘é…ç½®æ–‡ä»¶"></a>2. ç¼–è¾‘é…ç½®æ–‡ä»¶</h3><p>æ ¹æ®é…ç½®æ–‡ä»¶æ‰€åœ¨è·¯å¾„ä¿®æ”¹å‚æ•°ï¼Œä¿®æ”¹é…ç½®å‚æ•°ä¹‹åï¼ŒåŠ è½½é…ç½®ã€‚</p><h3 id="3-åŠ è½½é…ç½®"><a href="#3-åŠ è½½é…ç½®" class="headerlink" title="3. åŠ è½½é…ç½®"></a>3. åŠ è½½é…ç½®</h3><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> systemctl daemon-reload</span><br></pre></td></tr></tbody></table></figure><h3 id="4-é‡å¯æœåŠ¡"><a href="#4-é‡å¯æœåŠ¡" class="headerlink" title="4. é‡å¯æœåŠ¡"></a>4. é‡å¯æœåŠ¡</h3><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> systemctl start minio</span><br></pre></td></tr></tbody></table></figure><h3 id="5-é…ç½®æ–‡ä»¶è¯´æ˜"><a href="#5-é…ç½®æ–‡ä»¶è¯´æ˜" class="headerlink" title="5. é…ç½®æ–‡ä»¶è¯´æ˜"></a>5. é…ç½®æ–‡ä»¶è¯´æ˜</h3><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">- MINIO_ROOT_USER é•¿åº¦å¿…é¡» â‰¥ 3</span><br><span class="line">- MINIO_ROOT_PASSWORD é•¿åº¦å¿…é¡» â‰¥ 8</span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¾ç½®ç›®å½•æƒé™</span></span><br><span class="line"><span class="built_in">chown</span> -R minio:minio /mnt/sda2 /mnt/sda1 /mnt/sdc1 /mnt/sdc2</span><br><span class="line"><span class="built_in">chmod</span> -R 750 /mnt/sda2 /mnt/sda1 /mnt/sdc1 /mnt/sdc2</span><br></pre></td></tr></tbody></table></figure><blockquote><p>âš ï¸ æ³¨æ„ï¼šè¿™é‡Œå¯èƒ½ä¼šé‡åˆ°ä¸€äº› bugï¼Œå¯ä»¥ç»“åˆ GPT å¸®åŠ©è§£å†³ã€‚</p></blockquote><hr><h2 id="äº”ã€MinIO-é…ç½®"><a href="#äº”ã€MinIO-é…ç½®" class="headerlink" title="äº”ã€MinIO é…ç½®"></a>äº”ã€MinIO é…ç½®</h2><h3 id="1-é…ç½®-alias"><a href="#1-é…ç½®-alias" class="headerlink" title="1. é…ç½® alias"></a>1. é…ç½® alias</h3><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mc <span class="built_in">alias</span> <span class="built_in">set</span> myminio http://127.0.0.1:9000 {user} {key}</span><br></pre></td></tr></tbody></table></figure><h3 id="2-æ·»åŠ ç”¨æˆ·"><a href="#2-æ·»åŠ ç”¨æˆ·" class="headerlink" title="2. æ·»åŠ ç”¨æˆ·"></a>2. æ·»åŠ ç”¨æˆ·</h3><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mc admin user add myminio {new_name} {key}</span><br></pre></td></tr></tbody></table></figure><h3 id="3-åˆ›å»º-bucket"><a href="#3-åˆ›å»º-bucket" class="headerlink" title="3. åˆ›å»º bucket"></a>3. åˆ›å»º bucket</h3><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mc mb myminio/{bucket_name}</span><br></pre></td></tr></tbody></table></figure><h3 id="4-å®šä¹‰æƒé™ç­–ç•¥"><a href="#4-å®šä¹‰æƒé™ç­–ç•¥" class="headerlink" title="4. å®šä¹‰æƒé™ç­–ç•¥"></a>4. å®šä¹‰æƒé™ç­–ç•¥</h3><p>åˆ›å»ºæ–‡ä»¶ <code>tcmkg-policy.json</code>, å‡è®¾ <code>bucket</code> çš„åå­—ä¸º <code>tcmkg-data</code>ï¼š</p><figure class="highlight json"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">{</span></span><br><span class="line">  <span class="attr">"Version"</span><span class="punctuation">:</span> <span class="string">"2012-10-17"</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">"Statement"</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="punctuation">{</span></span><br><span class="line">      <span class="attr">"Effect"</span><span class="punctuation">:</span> <span class="string">"Allow"</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">"Action"</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="string">"s3:GetBucketLocation"</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">"s3:ListBucket"</span></span><br><span class="line">      <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">"Resource"</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="string">"arn:aws:s3:::tcmkg-data"</span></span><br><span class="line">      <span class="punctuation">]</span></span><br><span class="line">    <span class="punctuation">}</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">{</span></span><br><span class="line">      <span class="attr">"Effect"</span><span class="punctuation">:</span> <span class="string">"Allow"</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">"Action"</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="string">"s3:GetObject"</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">"s3:PutObject"</span></span><br><span class="line">      <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">"Resource"</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="string">"arn:aws:s3:::tcmkg-data/*"</span></span><br><span class="line">      <span class="punctuation">]</span></span><br><span class="line">    <span class="punctuation">}</span></span><br><span class="line">  <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">}</span></span><br></pre></td></tr></tbody></table></figure><p>è¯´æ˜ï¼š</p><ul><li><strong>s3:GetBucketLocation</strong> + <strong>s3:ListBucket</strong> â†’ å…è®¸æŸ¥çœ‹ bucket ä¿¡æ¯ã€åˆ—å‡ºå¯¹è±¡  </li><li><strong>s3:GetObject</strong> â†’ å…è®¸ä¸‹è½½å¯¹è±¡  </li><li><strong>s3:PutObject</strong> â†’ å…è®¸ä¸Šä¼ å¯¹è±¡  </li><li>ä¸åŒ…å« <strong>s3:DeleteObject</strong> â†’ ç”¨æˆ·ä¸èƒ½åˆ é™¤å¯¹è±¡</li></ul><h3 id="5-åº”ç”¨ç­–ç•¥"><a href="#5-åº”ç”¨ç­–ç•¥" class="headerlink" title="5. åº”ç”¨ç­–ç•¥"></a>5. åº”ç”¨ç­–ç•¥</h3><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mc admin policy create myminio tcmkg-policy ./tcmkg-policy.json</span><br><span class="line">mc admin policy attach myminio tcmkg-policy --user tcmkg</span><br></pre></td></tr></tbody></table></figure><h3 id="6-Web-ç«¯æµ‹è¯•"><a href="#6-Web-ç«¯æµ‹è¯•" class="headerlink" title="6. Web ç«¯æµ‹è¯•"></a>6. Web ç«¯æµ‹è¯•</h3><p>åˆ‡æ¢ç”¨æˆ·è¿›è¡Œæµ‹è¯•ï¼Œæ£€æŸ¥é…ç½®æ˜¯å¦ç”Ÿæ•ˆã€‚  </p><hr><p>âœ… è¿™æ ·ï¼Œä½ å°±å®Œæˆäº† <strong>ç£ç›˜ç®¡ç† + MinIO æœåŠ¡å®‰è£…ä¸é…ç½®</strong> çš„å…¨è¿‡ç¨‹ã€‚  </p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>ä¸åŠ¨ç‚¹å’Œå‹ç¼©æ˜ å°„</title>
      <link href="/2025/08/10/bu-dong-dian-he-ya-suo-ying-she/"/>
      <url>/2025/08/10/bu-dong-dian-he-ya-suo-ying-she/</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>çŸ©é˜µèŒƒæ•°</title>
      <link href="/2025/08/10/ju-zhen-fan-shu/"/>
      <url>/2025/08/10/ju-zhen-fan-shu/</url>
      
        <content type="html"><![CDATA[<h1 id="ä»€ä¹ˆæ˜¯çŸ©é˜µèŒƒæ•°"><a href="#ä»€ä¹ˆæ˜¯çŸ©é˜µèŒƒæ•°" class="headerlink" title="ä»€ä¹ˆæ˜¯çŸ©é˜µèŒƒæ•°"></a>ä»€ä¹ˆæ˜¯çŸ©é˜µèŒƒæ•°</h1><p>çŸ©é˜µèŒƒæ•°ï¼ˆmatrix normï¼‰æ˜¯å°†ä¸€ä¸ªçŸ©é˜µæ˜ å°„åˆ°éè´Ÿå®æ•°çš„<strong>å‡½æ•°:  $|\cdot| $</strong>ï¼Œç”¨æ¥åº¦é‡çŸ©é˜µçš„â€œå¤§å°â€æˆ–â€œé•¿åº¦â€ã€‚çŸ©é˜µèŒƒæ•°éœ€è¦æ»¡è¶³ä»¥ä¸‹ä¸‰ä¸ªæ€§è´¨ï¼š</p><ul><li><p><strong>éè´Ÿæ€§ï¼š</strong><br>å¯¹ä»»æ„çŸ©é˜µ $A$ï¼Œæœ‰<br>$$<br>|A| \geq 0<br>$$<br>ä¸”å½“ä¸”ä»…å½“ $A$ æ˜¯é›¶çŸ©é˜µæ—¶ï¼Œ$|A| = 0$ã€‚</p></li><li><p><strong>é½æ¬¡æ€§ï¼ˆæ­£é½æ¬¡ï¼‰ï¼š</strong><br>å¯¹ä»»æ„æ ‡é‡ $\alpha$ å’ŒçŸ©é˜µ $A$ï¼Œæœ‰<br>$$<br>|\alpha A| = |\alpha| \cdot |A|<br>$$</p></li><li><p><strong>ä¸‰è§’ä¸ç­‰å¼ï¼š</strong><br>å¯¹ä»»æ„çŸ©é˜µ $A$ å’Œ $B$ï¼Œæœ‰<br>$$<br>|A + B| \leq |A| + |B|<br>$$</p></li></ul><h1 id="çŸ©é˜µèŒƒæ•°çš„å‡ ç§å¸¸è§ç±»å‹"><a href="#çŸ©é˜µèŒƒæ•°çš„å‡ ç§å¸¸è§ç±»å‹" class="headerlink" title="çŸ©é˜µèŒƒæ•°çš„å‡ ç§å¸¸è§ç±»å‹"></a>çŸ©é˜µèŒƒæ•°çš„å‡ ç§å¸¸è§ç±»å‹</h1><p>å¸¸è§çŸ©é˜µèŒƒæ•°åˆ†ä¸¤ç±»ï¼š</p><h2 id="A-éç®—å­èŒƒæ•°ï¼ˆentry-basedï¼‰"><a href="#A-éç®—å­èŒƒæ•°ï¼ˆentry-basedï¼‰" class="headerlink" title="(A) éç®—å­èŒƒæ•°ï¼ˆentry-basedï¼‰"></a>(A) éç®—å­èŒƒæ•°ï¼ˆentry-basedï¼‰</h2><p>ç›´æ¥ç”¨çŸ©é˜µå…ƒç´ æ¥å®šä¹‰ï¼š</p><ul><li><p><strong>Frobenius èŒƒæ•°ï¼ˆæ¬§å‡ é‡Œå¾—èŒƒæ•°ï¼‰</strong><br>$$<br>|A|<em>F = \sqrt{\sum</em>{i,j} |a_{ij}|^2}<br>$$<br>å°±æ˜¯æŠŠçŸ©é˜µå½“æˆä¸€ä¸ªé•¿å‘é‡ï¼Œå†å– 2 èŒƒæ•°ã€‚<br>å‡ ä½•æ„ä¹‰ï¼šåƒæ˜¯æµ‹é‡â€œçŸ©é˜µä¸­æ‰€æœ‰å…ƒç´ çš„èƒ½é‡â€ã€‚</p></li><li><p><strong>æœ€å¤§è¡Œå’ŒèŒƒæ•°</strong><br>$$<br>|A|<em>{\infty} = \max_i \sum_j |a</em>{ij}|<br>$$<br>è¡Œç»å¯¹å€¼å’Œæœ€å¤§çš„é‚£ä¸€è¡Œçš„å’Œã€‚</p></li><li><p><strong>æœ€å¤§åˆ—å’ŒèŒƒæ•°</strong><br>$$<br>|A|<em>1 = \max_j \sum_i |a</em>{ij}|<br>$$<br>åˆ—ç»å¯¹å€¼å’Œæœ€å¤§çš„é‚£ä¸€åˆ—çš„å’Œã€‚</p></li></ul><hr><h2 id="B-ç®—å­èŒƒæ•°ï¼ˆoperator-normï¼‰"><a href="#B-ç®—å­èŒƒæ•°ï¼ˆoperator-normï¼‰" class="headerlink" title="(B) ç®—å­èŒƒæ•°ï¼ˆoperator normï¼‰"></a>(B) ç®—å­èŒƒæ•°ï¼ˆoperator normï¼‰</h2><p>ç®—å­èŒƒæ•°ï¼ˆoperator normï¼‰ï¼Œä¹Ÿå«çŸ©é˜µèŒƒæ•° induced normï¼ˆè¯±å¯¼èŒƒæ•°ï¼‰ï¼Œæ˜¯ä¸€ç±»ç”±å‘é‡èŒƒæ•°è¯±å¯¼å‡ºæ¥çš„çŸ©é˜µèŒƒæ•°ã€‚å®ƒåˆ»ç”»äº†çŸ©é˜µä½œä¸ºçº¿æ€§å˜æ¢å¯¹å‘é‡çš„â€œæ”¾å¤§èƒ½åŠ›â€ã€‚å…¶å®šä¹‰ä¸ºï¼š</p><p>$$<br>|A| = \sup_{x \neq 0} \frac{|Ax|}{|x|} = \sup_{|x|=1} |Ax|<br>$$</p><p>è¿™é‡Œï¼š</p><ul><li>ğ‘¥æ˜¯ä»»æ„éé›¶å‘é‡ï¼›</li><li>$|A|$ å°±æ˜¯â€œå¯¹æ‰€æœ‰å•ä½å‘é‡ x, Ax çš„æœ€å¤§ä¼¸ç¼©å› å­ã€‚</li></ul><h3 id="ä¸ºä»€ä¹ˆç®—å­èŒƒæ•°é‡è¦ï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆç®—å­èŒƒæ•°é‡è¦ï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆç®—å­èŒƒæ•°é‡è¦ï¼Ÿ"></a>ä¸ºä»€ä¹ˆç®—å­èŒƒæ•°é‡è¦ï¼Ÿ</h3><ul><li><p>å®ƒåæ˜ äº†çŸ©é˜µä½œä¸ºçº¿æ€§å˜æ¢æ—¶çš„æœ€å¤§â€œæ”¾å¤§æ•ˆåº”â€ã€‚</p></li><li><p>æ˜¯çŸ©é˜µç¨³å®šæ€§åˆ†æã€è¯¯å·®ä¼°è®¡ã€æ•°å€¼åˆ†æçš„é‡è¦å·¥å…·ã€‚</p></li><li><p>åœ¨è§£çº¿æ€§æ–¹ç¨‹ç»„ã€ä¼˜åŒ–å’Œæ§åˆ¶ç†è®ºä¸­å¹¿æ³›åº”ç”¨ã€‚</p></li></ul><br><h3 id="ç®—å­èŒƒæ•°ä¸å‘é‡èŒƒæ•°çš„å…³ç³»"><a href="#ç®—å­èŒƒæ•°ä¸å‘é‡èŒƒæ•°çš„å…³ç³»" class="headerlink" title="ç®—å­èŒƒæ•°ä¸å‘é‡èŒƒæ•°çš„å…³ç³»"></a>ç®—å­èŒƒæ•°ä¸å‘é‡èŒƒæ•°çš„å…³ç³»</h3><p>ä¸åŒçš„å‘é‡èŒƒæ•°ä¼šè¯±å¯¼å‡ºä¸åŒçš„ç®—å­èŒƒæ•°ã€‚å¸¸è§çš„å‘é‡èŒƒæ•°åŠå…¶å¯¹åº”çš„ç®—å­èŒƒæ•°åŒ…æ‹¬ï¼š</p><ul><li><p>$\ell_1$ èŒƒæ•°ï¼ˆå…ƒç´ ç»å¯¹å€¼å’Œï¼‰ï¼š$|A|<em>1 = \max</em>{1 \le j \le n} \sum_{i=1}^m |a_{ij}|$</p></li><li><p>$\ell_\infty$ èŒƒæ•°ï¼ˆå…ƒç´ ç»å¯¹å€¼æœ€å¤§å€¼ï¼‰ï¼š $|A|<em>\infty = \max</em>{1 \le i \le m} \sum_{j=1}^n |a_{ij}|$ </p></li><li><p>$\ell_2$ èŒƒæ•°ï¼ˆæ¬§å‡ é‡Œå¾—èŒƒæ•°ï¼‰ï¼š $|A|<em>2 = \sigma</em>{\max}(A)$ï¼Œå³çŸ©é˜µ $A$ çš„æœ€å¤§å¥‡å¼‚å€¼</p></li></ul><br><h3 id="ä»¥-ell-2-èŒƒæ•°ä¸ºä¾‹çš„ç®—å­èŒƒæ•°è§£æ"><a href="#ä»¥-ell-2-èŒƒæ•°ä¸ºä¾‹çš„ç®—å­èŒƒæ•°è§£æ" class="headerlink" title="ä»¥ $\ell_2$ èŒƒæ•°ä¸ºä¾‹çš„ç®—å­èŒƒæ•°è§£æ"></a>ä»¥ $\ell_2$ èŒƒæ•°ä¸ºä¾‹çš„ç®—å­èŒƒæ•°è§£æ</h3><p>å‡è®¾æˆ‘ä»¬ç”¨çš„å‘é‡èŒƒæ•°æ˜¯ $\ell_2$ èŒƒæ•°ï¼ˆæ¬§å‡ é‡Œå¾—èŒƒæ•°ï¼‰ï¼š</p><p>$$<br>|x|_2 = \sqrt{\sum_i |x_i|^2}<br>$$</p><p>æ­¤æ—¶ç®—å­èŒƒæ•°å®šä¹‰ä¸ºï¼š</p><p>$$<br>|A|<em>2 = \sup</em>{|x|_2=1} |Ax|_2<br>$$</p><ul><li><p>è¿™æ˜¯çŸ©é˜µ $A$ å¯¹å•ä½çƒé¢ä¸Šçš„å‘é‡çš„æœ€å¤§ä¼¸ç¼©ç‡ã€‚</p></li><li><p>å…¶å€¼ç­‰äº $A$ çš„æœ€å¤§å¥‡å¼‚å€¼ï¼Œå³å¥‡å¼‚å€¼åˆ†è§£ï¼ˆSVDï¼‰ä¸­æœ€å¤§çš„å¥‡å¼‚å€¼ $\sigma_{\max}$ã€‚</p></li><li><p>å‡ ä½•ä¸Šï¼Œè¿™ä¸ªèŒƒæ•°æ˜¯ $A$ ä½œä¸ºçº¿æ€§æ˜ å°„ä»è¾“å…¥ç©ºé—´çš„å•ä½çƒæ˜ å°„åˆ°è¾“å‡ºç©ºé—´æ—¶åŒ…ç»œå¤–æ¥çƒçš„åŠå¾„ã€‚</p></li></ul><h3 id="ä¸¾ä¾‹è¯´æ˜"><a href="#ä¸¾ä¾‹è¯´æ˜" class="headerlink" title="ä¸¾ä¾‹è¯´æ˜"></a>ä¸¾ä¾‹è¯´æ˜</h3><p>å‡è®¾</p><p>$$<br>A = \begin{bmatrix}<br>1 &amp; 2 \<br>3 &amp; 4<br>\end{bmatrix}<br>$$</p><ul><li>$\ell_1$ ç®—å­èŒƒæ•°æ˜¯åˆ—ç»å¯¹å€¼å’Œæœ€å¤§å€¼ï¼š</li></ul><p>$$<br>|A|_1 = \max { |1| + |3|, ; |2| + |4| } = \max {4, 6} = 6<br>$$</p><ul><li>$\ell_\infty$ ç®—å­èŒƒæ•°æ˜¯è¡Œç»å¯¹å€¼å’Œæœ€å¤§å€¼ï¼š</li></ul><p>$$<br>|A|_\infty = \max { |1| + |2|, ; |3| + |4| } = \max {3, 7} = 7<br>$$</p><ul><li>$\ell_2$ ç®—å­èŒƒæ•°æ˜¯æœ€å¤§å¥‡å¼‚å€¼ï¼ˆå¯ç”¨ SVD æ±‚å‡ºï¼Œå¤§çº¦æ˜¯ 5.47ï¼‰</li></ul>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹ ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ•°å­¦ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‘é‡èŒƒæ•°</title>
      <link href="/2025/08/10/xiang-liang-fan-shu/"/>
      <url>/2025/08/10/xiang-liang-fan-shu/</url>
      
        <content type="html"><![CDATA[<h2 id="å‘é‡èŒƒæ•°çš„å®šä¹‰"><a href="#å‘é‡èŒƒæ•°çš„å®šä¹‰" class="headerlink" title="å‘é‡èŒƒæ•°çš„å®šä¹‰"></a>å‘é‡èŒƒæ•°çš„å®šä¹‰</h2><p>æ•°å­¦ä¸Šï¼Œå‘é‡èŒƒæ•°æ˜¯ä¸€ä¸ªå‡½æ•° $|\cdot|$ï¼Œå®ƒæŠŠå‘é‡æ˜ å°„æˆä¸€ä¸ªéè´Ÿå®æ•°ï¼Œå¹¶æ»¡è¶³ä»¥ä¸‹ä¸‰ä¸ªæ¡ä»¶ï¼ˆä»»ä½•åˆæ³•çš„èŒƒæ•°éƒ½è¦æ»¡è¶³ï¼‰ï¼š</p><h3 id="éè´Ÿæ€§"><a href="#éè´Ÿæ€§" class="headerlink" title="éè´Ÿæ€§"></a>éè´Ÿæ€§</h3><p>$$<br>|x| \geq 0 \quad \text{ä¸”} \quad |x| = 0 \iff x = 0<br>$$</p><p>å‘é‡çš„é•¿åº¦ä¸å¯èƒ½æ˜¯è´Ÿçš„ï¼Œåªæœ‰é›¶å‘é‡é•¿åº¦ä¸ºé›¶ã€‚</p><h3 id="é½æ¬¡æ€§ï¼ˆhomogeneity-scalabilityï¼‰"><a href="#é½æ¬¡æ€§ï¼ˆhomogeneity-scalabilityï¼‰" class="headerlink" title="é½æ¬¡æ€§ï¼ˆhomogeneity / scalabilityï¼‰"></a>é½æ¬¡æ€§ï¼ˆhomogeneity / scalabilityï¼‰</h3><p>$$<br>|\alpha x| = |\alpha| \cdot |x|<br>$$</p><p>ç¼©æ”¾å‘é‡ï¼Œé•¿åº¦ä¹ŸæŒ‰æ¯”ä¾‹ç¼©æ”¾ã€‚</p><h3 id="ä¸‰è§’ä¸ç­‰å¼"><a href="#ä¸‰è§’ä¸ç­‰å¼" class="headerlink" title="ä¸‰è§’ä¸ç­‰å¼"></a>ä¸‰è§’ä¸ç­‰å¼</h3><p>$$<br>|x + y| \leq |x| + |y|<br>$$</p><p>ä¸¤ä¸ªå‘é‡ç›¸åŠ çš„â€œé•¿åº¦â€ä¸ä¼šè¶…è¿‡å®ƒä»¬é•¿åº¦ä¹‹å’Œï¼ˆå‡ ä½•ä¸Šå°±æ˜¯ä¸‰è§’å½¢ä¸ç­‰å¼ï¼‰ã€‚</p><hr><h2 id="å¸¸è§çš„å‘é‡èŒƒæ•°"><a href="#å¸¸è§çš„å‘é‡èŒƒæ•°" class="headerlink" title="å¸¸è§çš„å‘é‡èŒƒæ•°"></a>å¸¸è§çš„å‘é‡èŒƒæ•°</h2><h3 id="æ¬§å‡ é‡Œå¾—èŒƒæ•°ï¼ˆ2èŒƒæ•°ï¼‰"><a href="#æ¬§å‡ é‡Œå¾—èŒƒæ•°ï¼ˆ2èŒƒæ•°ï¼‰" class="headerlink" title="æ¬§å‡ é‡Œå¾—èŒƒæ•°ï¼ˆ2èŒƒæ•°ï¼‰"></a>æ¬§å‡ é‡Œå¾—èŒƒæ•°ï¼ˆ2èŒƒæ•°ï¼‰</h3><p>$$<br>|x|_2 = \sqrt{x_1^2 + x_2^2 + \cdots + x_n^2}<br>$$</p><p>å°±æ˜¯æ™®é€šçš„ç›´çº¿è·ç¦»ã€‚</p><h3 id="1èŒƒæ•°"><a href="#1èŒƒæ•°" class="headerlink" title="1èŒƒæ•°"></a>1èŒƒæ•°</h3><p>$$<br>|x|_1 = |x_1| + |x_2| + \cdots + |x_n|<br>$$</p><p>åƒæ˜¯â€œèµ°æ ¼å­â€çš„è·ç¦»ï¼ˆæ›¼å“ˆé¡¿è·ç¦»ï¼‰ã€‚</p><h3 id="æ— ç©·èŒƒæ•°ï¼ˆâˆèŒƒæ•°ï¼‰"><a href="#æ— ç©·èŒƒæ•°ï¼ˆâˆèŒƒæ•°ï¼‰" class="headerlink" title="æ— ç©·èŒƒæ•°ï¼ˆâˆèŒƒæ•°ï¼‰"></a>æ— ç©·èŒƒæ•°ï¼ˆâˆèŒƒæ•°ï¼‰</h3><p>$$<br>|x|_{\infty} = \max_i |x_i|<br>$$</p><p>å–åæ ‡é‡Œç»å¯¹å€¼æœ€å¤§çš„é‚£ä¸€é¡¹ã€‚</p><h2 id="å¯¹æ¬§å‡ é‡Œå¾—è·ç¦»å’Œæ›¼å“ˆé¡¿è·ç¦»çš„ç†è§£"><a href="#å¯¹æ¬§å‡ é‡Œå¾—è·ç¦»å’Œæ›¼å“ˆé¡¿è·ç¦»çš„ç†è§£" class="headerlink" title="å¯¹æ¬§å‡ é‡Œå¾—è·ç¦»å’Œæ›¼å“ˆé¡¿è·ç¦»çš„ç†è§£"></a>å¯¹æ¬§å‡ é‡Œå¾—è·ç¦»å’Œæ›¼å“ˆé¡¿è·ç¦»çš„ç†è§£</h2><p>å‡è®¾ä½ åœ¨ä¸€ä¸ªåŸå¸‚çš„è¡—åŒºç½‘æ ¼é‡Œèµ°è·¯ï¼Œæ¯”å¦‚çº½çº¦æ›¼å“ˆé¡¿åŒºã€‚è¡—é“æ˜¯æŒ‰è§„åˆ™çš„ç›´çº¿ç½‘æ ¼åˆ†å¸ƒï¼Œä¸èƒ½ç›´æ¥ç©¿è¿‡å»ºç­‘ç‰©ï¼Œæ‰€ä»¥ä½ ä¸èƒ½ç”¨â€œç›´çº¿è·ç¦»â€ç©¿å¢™è¿‡å»ã€‚</p><p><strong>æ¬§å‡ é‡Œå¾—è·ç¦»ï¼ˆç›´çº¿è·ç¦»ï¼‰</strong>ï¼šæ˜¯ä½ ä¸¤ç‚¹ä¹‹é—´â€œé£è¿‡å»â€çš„æœ€çŸ­è·ç¦»ï¼Œç±»ä¼¼é¸Ÿå„¿ç›´æ¥ä»ä¸€ç‚¹é£åˆ°å¦ä¸€ç‚¹ã€‚</p><p><strong>æ›¼å“ˆé¡¿è·ç¦»ï¼ˆ1èŒƒæ•°ï¼‰</strong>ï¼šæ˜¯ä½ åªèƒ½æ²¿ç€è¡—é“ï¼ˆæ°´å¹³æˆ–å‚ç›´æ–¹å‘ï¼‰èµ°çš„æœ€çŸ­è·¯å¾„è·ç¦»ã€‚æ¯”å¦‚ä½ ä»ä¸€ä¸ªè·¯å£èµ°åˆ°å¦ä¸€ä¸ªè·¯å£ï¼Œä½ åªèƒ½æ²¿ç€æ¨ªè¡—å’Œçºµè¡—èµ°ï¼Œèµ°çš„è·¯å¾„å°±åƒåœ¨èµ°æ£‹ç›˜ä¸Šçš„æ ¼å­ä¸€æ ·ã€‚</p><p>ç”¨å…¬å¼æ¥è¯´ï¼Œä¸¤ä¸ªç‚¹  $x = (x_1, x_2, \dots, x_n)$ å’Œ $y = (y_1, y_2, \dots, y_n)$ çš„æ›¼å“ˆé¡¿è·ç¦»æ˜¯ï¼š</p><p>$$<br>\sum_{i=1}^n |x_i - y_i|<br>$$</p><p>è¿™å°±åƒä½ å…ˆæ²¿ç€ç¬¬ä¸€æ¡è¡—èµ°å‡ æ ¼ï¼Œå†æ²¿ç€ç¬¬äºŒæ¡è¡—èµ°å‡ æ ¼ï¼Œä¸¤ä¸ªæ–¹å‘çš„è·¯ç¨‹åŠ èµ·æ¥ï¼Œå°±æ˜¯æ€»è·¯ç¨‹ã€‚</p><p>æ‰€ä»¥â€œèµ°æ ¼å­â€çš„æ„æ€æ˜¯ï¼šä½ èµ°çš„è·¯å¾„åªèƒ½æ˜¯æ°´å¹³æ–¹å‘å’Œå‚ç›´æ–¹å‘çš„æ ¼å­çº¿æ®µçš„æ€»å’Œï¼Œè€Œä¸æ˜¯ä¸¤ç‚¹é—´çš„ç›´çº¿ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹ ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ•°å­¦ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>èŒƒæ•°çš„åŸºæœ¬æ¦‚å¿µ</title>
      <link href="/2025/08/10/fan-shu-de-ji-ben-gai-nian/"/>
      <url>/2025/08/10/fan-shu-de-ji-ben-gai-nian/</url>
      
        <content type="html"><![CDATA[<p>èŒƒæ•°ï¼ˆnormï¼‰æœ¬è´¨ä¸Šå°±æ˜¯ä¸€ç§ <strong>â€œé•¿åº¦â€æˆ–â€œå¤§å°â€çš„åº¦é‡æ–¹æ³•</strong>ã€‚</p><ul><li><p>å¯¹å‘é‡æ¥è¯´ï¼ŒèŒƒæ•°å‘Šè¯‰ä½ â€œè¿™ä¸ªå‘é‡æœ‰å¤šé•¿â€ã€‚</p></li><li><p>å¯¹çŸ©é˜µæ¥è¯´ï¼ŒèŒƒæ•°å‘Šè¯‰ä½ â€œè¿™ä¸ªçŸ©é˜µèƒ½æŠŠå‘é‡æ‹‰ä¼¸å¤šå°‘â€æˆ–â€œçŸ©é˜µè‡ªèº«æœ‰å¤šå¤§â€ã€‚</p></li></ul>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹ ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ•°å­¦ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ•°å­¦ä¸­çš„é½æ¬¡æ€§ç†è§£</title>
      <link href="/2025/08/10/shu-xue-zhong-de-qi-ci-xing-li-jie/"/>
      <url>/2025/08/10/shu-xue-zhong-de-qi-ci-xing-li-jie/</url>
      
        <content type="html"><![CDATA[<h2 id="ä»€ä¹ˆæ˜¯é½æ¬¡æ€§ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯é½æ¬¡æ€§ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯é½æ¬¡æ€§ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯é½æ¬¡æ€§ï¼Ÿ</h2><p>åœ¨æ•°å­¦ä¸­ï¼Œ<strong>é½æ¬¡æ€§ï¼ˆHomogeneityï¼‰</strong> é€šå¸¸æŒ‡å‡½æ•°æˆ–æ–¹ç¨‹åœ¨è¾“å…¥æŒ‰æ¯”ä¾‹ç¼©æ”¾æ—¶ï¼Œè¾“å‡ºä¹ŸæŒ‰æŸä¸ªå¹‚æ¬¡æ¯”ä¾‹ç¼©æ”¾çš„æ€§è´¨ã€‚</p><h3 id="é½æ¬¡å‡½æ•°"><a href="#é½æ¬¡å‡½æ•°" class="headerlink" title="é½æ¬¡å‡½æ•°"></a>é½æ¬¡å‡½æ•°</h3><p>ä¸€ä¸ªæ˜ å°„  $ f: \mathbb{R}^n \to \mathbb{R} $ ï¼Œå¦‚æœå¯¹äºä»»æ„æ ‡é‡ $ \lambda $ å’Œè¾“å…¥å‘é‡ $ x \in \mathbb{R}^n $ï¼Œæ»¡è¶³ï¼š</p><p>$$<br>f(\lambda x) = \lambda^k f(x)<br>$$</p><p>åˆ™ç§°è¯¥æ˜ å°„ä¸º<strong>kæ¬¡é½æ¬¡å‡½æ•°</strong>ã€‚è¿™é‡Œï¼Œ$ k $ è¢«ç§°ä¸ºé½æ¬¡æ¬¡æ•°ï¼ˆdegree of homogeneityï¼‰ã€‚</p><p><strong>ç¤ºä¾‹ï¼š</strong><br>å‡½æ•° $ f(x,y) = x^2 + y^2 $ æ˜¯äºŒæ¬¡é½æ¬¡å‡½æ•°ï¼Œå› ä¸º</p><p>$$<br>f(\lambda x, \lambda y) = (\lambda x)^2 + (\lambda y)^2 = \lambda^2 (x^2 + y^2) = \lambda^2 f(x,y).<br>$$</p><h2 id="é½æ¬¡æ€§çš„é‡è¦æ€§"><a href="#é½æ¬¡æ€§çš„é‡è¦æ€§" class="headerlink" title="é½æ¬¡æ€§çš„é‡è¦æ€§"></a>é½æ¬¡æ€§çš„é‡è¦æ€§</h2><ol><li><strong>ç†è§£å°ºåº¦å˜åŒ–è¡Œä¸º</strong><br>é½æ¬¡æ€§è¯´æ˜å½“è¾“å…¥æ”¾å¤§æˆ–ç¼©å°æ—¶ï¼Œè¾“å‡ºä¼šæŒ‰ç…§ç¡®å®šçš„å¹‚æ¬¡æ¯”ä¾‹å˜åŒ–ã€‚è¿™ä¸ªæ€§è´¨å¸®åŠ©æˆ‘ä»¬ç†è§£å‡½æ•°å¯¹â€œå°ºåº¦â€å˜åŒ–<br>çš„æ•æ„Ÿåº¦ï¼Œåœ¨å»ºæ¨¡å’Œåˆ†æä¸­éå¸¸æœ‰ç”¨ã€‚</li></ol>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹ ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ•°å­¦ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Claude-Codeå­¦ä¹ è®°å½•</title>
      <link href="/2025/07/28/claude-code-xue-xi-ji-lu/"/>
      <url>/2025/07/28/claude-code-xue-xi-ji-lu/</url>
      
        <content type="html"><![CDATA[<h2 id="Claude-Code-å®‰è£…"><a href="#Claude-Code-å®‰è£…" class="headerlink" title="Claude Code å®‰è£…"></a>Claude Code å®‰è£…</h2><p>æ ¹æ®å®˜æ–¹æ•™ç¨‹ï¼Œç…§ç€æ“ä½œå°±å¥½äº†: <a href="https://docs.anthropic.com/en/docs/claude-code/setup">https://docs.anthropic.com/en/docs/claude-code/setup</a></p><h2 id="æ¥å…¥-Kimi-K2"><a href="#æ¥å…¥-Kimi-K2" class="headerlink" title="æ¥å…¥ Kimi K2"></a>æ¥å…¥ Kimi K2</h2><p>å›½å†…è®¿é—® <code>Claude</code> å›°éš¾ï¼Œå› æ­¤æœ‰äº†Kimi K2 å¹³æ›¿æ–¹æ³•ï¼Œä¸‹é¢æ˜¯æ“ä½œæ­¥éª¤ï¼š</p><p>é¦–å…ˆåˆ°<a href="https://platform.moonshot.cn/console/api-keys">è¿™é‡Œ</a>ç”³è¯·ä¸€ä¸ªAPIï¼Œ ç„¶åè®¾ç½®ç¯å¢ƒå˜é‡ï¼š</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> ANTHROPIC_BASE_URL=<span class="string">"https://api.moonshot.cn/anthropic/"</span></span><br><span class="line"><span class="built_in">export</span> ANTHROPIC_API_KEY=<span class="string">"ä½ çš„APY KEY"</span></span><br><span class="line"><span class="built_in">export</span> ANTHROPIC_SMALL_FAST_MODEL=<span class="string">"kimi-k2-turbo-preview"</span> <span class="comment"># claude v 2.0 ä¸æŒ‡å®šæ¨¡å‹ï¼Œåˆ™ä¼šè°ƒç”¨é»˜è®¤æ¨¡å‹ï¼Œä¼šæŠ¥é”™</span></span><br><span class="line"><span class="built_in">export</span> ANTHROPIC_MODEL=<span class="string">"kimi-k2-turbo-preview"</span></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><p>æœ€åï¼Œç”±äº <code>Claude code</code> è®¾ç½®äº†åœ°åŸŸé™åˆ¶ï¼Œéœ€è¦ç»•è¿‡åˆå§‹ç™»å½•éªŒè¯ï¼Œæ“ä½œå¦‚ä¸‹ã€‚<br>æ‰“å¼€ Claude code çš„é…ç½®æ–‡ä»¶: <code>vim ~/.claude.json</code>ï¼Œä¿®æ”¹ <code>hasCompletedOnboarding</code> ä¸º <code>true</code>, å¦‚æœæ²¡æœ‰ <code>hasCompletedOnboarding</code> åˆ™æ·»åŠ ã€‚ <strong>è¿™é‡Œè¦æ³¨æ„ï¼š <code>hasCompletedOnboarding</code> ä¸èƒ½æ”¾åœ¨ projecté‡Œé¢</strong>ã€‚</p><h2 id="ä½¿ç”¨-Claude-Code"><a href="#ä½¿ç”¨-Claude-Code" class="headerlink" title="ä½¿ç”¨ Claude Code"></a>ä½¿ç”¨ Claude Code</h2><p>åœ¨å‘½ä»¤è¡Œåˆ‡æ¢åˆ° <code>å·¥ä½œç›®å½•</code> ï¼Œè¾“å…¥ <code>claude</code> å‘½ä»¤ï¼Œç»“åˆä¸Šé¢çš„æ•™ç¨‹ï¼Œæ ¹æ®æç¤ºè¿›è¡Œæ“ä½œå³å¯ã€‚</p><h2 id="è‡ªå®šä¹‰è®¾ç½®"><a href="#è‡ªå®šä¹‰è®¾ç½®" class="headerlink" title="è‡ªå®šä¹‰è®¾ç½®"></a>è‡ªå®šä¹‰è®¾ç½®</h2><ol><li>åˆ›å»º <code>CLAUDE.md</code> æ–‡ä»¶<br><code>CLAUDE.md</code>&nbsp;æ˜¯ä¸€ä¸ªç‰¹æ®Šæ–‡ä»¶ï¼ŒClaude åœ¨å‘èµ·å¯¹è¯æ—¶ä¼šè‡ªåŠ¨å°†å…¶æ‹‰å…¥ä¸Šä¸‹æ–‡ä¸­ã€‚å¯ä»¥åœ¨è¯¥æ–‡ä»¶å†…æŒ‡å®šå¦‚ä¸‹çš„å†…å®¹ï¼š<ul><li>å¸¸ç”¨ bash å‘½ä»¤</li><li>æ ¸å¿ƒæ–‡ä»¶å’Œå®ç”¨å‡½æ•°</li><li>ä»£ç é£æ ¼æŒ‡å—</li><li>æµ‹è¯•è¯´æ˜</li><li>ä»“åº“è§„åˆ™ï¼ˆå¦‚ï¼Œåˆ†æ”¯å‘½åï¼Œmerge å’Œ rebaseç­‰ï¼‰</li><li>å¼€å‘è€…ç¯å¢ƒè®¾ç½®ï¼ˆä¾‹å¦‚ï¼Œpyenv çš„ä½¿ç”¨ã€å“ªäº›ç¼–è¯‘å™¨å¯ä»¥å·¥ä½œï¼‰</li><li>é¡¹ç›®ç‰¹æœ‰çš„ä»»ä½•æ„å¤–è¡Œä¸ºæˆ–è­¦å‘Š</li><li>å¸Œæœ› Claude è®°ä½çš„å…¶ä»–ä¿¡æ¯<br><code>CLAUDE.md</code>&nbsp;æ–‡ä»¶æ²¡æœ‰æ ¼å¼è¦æ±‚ã€‚å»ºè®®ä¿æŒå…¶ç®€æ´æ˜“è¯»ã€‚ä¾‹å¦‚ï¼š</li></ul><figure class="highlight markdown"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="section"># Bash commands</span></span><br><span class="line"><span class="bullet">-</span> npm run build: Build the project</span><br><span class="line"><span class="bullet">-</span> npm run typecheck: Run the typechecker</span><br><span class="line"></span><br><span class="line"><span class="section"># Code style</span></span><br><span class="line"><span class="bullet">-</span> Use ES modules (import/export) syntax, not CommonJS (require)</span><br><span class="line"><span class="bullet">-</span> Destructure imports when possible (eg. import { foo } from 'bar')</span><br><span class="line"></span><br><span class="line"><span class="section"># Workflow</span></span><br><span class="line"><span class="bullet">-</span> Be sure to typecheck when you're done making a series of code changes</span><br><span class="line"><span class="bullet">-</span> Prefer running single tests, and not the whole test suite, for performance</span><br></pre></td></tr></tbody></table></figure></li></ol><p>å¯ä»¥å°†&nbsp;<code>CLAUDE.md</code>&nbsp;æ–‡ä»¶æ”¾åœ¨å¤šä¸ªä½ç½®ï¼š</p><ul><li><strong>ä»“åº“æ ¹ç›®å½•</strong>&nbsp;ï¼Œæˆ–è€…ä½ è¿è¡Œ&nbsp;<code>claude</code>&nbsp;çš„ä»»ä½•åœ°æ–¹ï¼ˆæœ€å¸¸è§çš„ç”¨æ³•ï¼‰ã€‚å°†å…¶å‘½åä¸º&nbsp;<code>CLAUDE.md</code>&nbsp;å¹¶å°†å…¶æäº¤åˆ° gitï¼Œä»¥ä¾¿ä½ å¯ä»¥åœ¨ä¸åŒä¼šè¯ä¹‹é—´ä»¥åŠä¸ä½ çš„å›¢é˜Ÿå…±äº«å®ƒï¼ˆæ¨èï¼‰ï¼›æˆ–è€…å°†å…¶å‘½åä¸º&nbsp;<code>CLAUDE.local.md</code>&nbsp;å¹¶&nbsp;<code>.gitignore</code>&nbsp;å¿½ç•¥å®ƒã€‚</li><li>è¿è¡Œ&nbsp;<code>claude</code>&nbsp;<strong>ç›®å½•çš„ä»»ä½•çˆ¶ç›®å½•</strong>&nbsp;ã€‚è¿™å¯¹äº <code>å•ä¸€ä»£ç åº“</code> æœ€æœ‰ç”¨ï¼Œä½ å¯ä»¥åœ¨&nbsp;<code>root/foo</code>&nbsp;ä¸­è¿è¡Œ&nbsp;<code>claude</code>&nbsp;ï¼Œå¹¶åœ¨&nbsp;<code>root/CLAUDE.md</code>&nbsp;å’Œ&nbsp;<code>root/foo/CLAUDE.md</code>&nbsp;ä¸­éƒ½æœ‰&nbsp;<code>CLAUDE.md</code>&nbsp;æ–‡ä»¶ã€‚è¿™ä¸¤ä¸ªç›®å½•éƒ½ä¼šè‡ªåŠ¨è¢«æ‹‰å…¥ä¸Šä¸‹æ–‡ã€‚</li><li>è¿è¡Œ&nbsp;<code>claude</code>&nbsp;<strong>çš„ç›®å½•çš„ä»»ä½•å­ç›®å½•</strong>&nbsp;ã€‚è¿™ä¸ä¸Šé¢çš„æ“ä½œç›¸åï¼Œåªä¼šä»å­ç›®å½•ä¸­çš„ CLAUDE.md æ–‡ä»¶ä¸­æå–ä¸Šä¸‹æ–‡</li><li>ç”¨æˆ·<strong>ä¸»æ–‡ä»¶å¤¹</strong>&nbsp;ï¼ˆ&nbsp;<code>~/.claude/CLAUDE.md</code>&nbsp;ï¼‰ï¼Œè¿™ä¼šå°†å…¶åº”ç”¨äºæ‰€æœ‰çš„ claude ä¼šè¯<br>è¿è¡Œ&nbsp;<code>/init</code>&nbsp;å‘½ä»¤æ—¶ï¼ŒClaude ä¼šè‡ªåŠ¨ä¸ºä½ ç”Ÿæˆä¸€ä¸ª&nbsp;<code>CLAUDE.md</code>&nbsp;ã€‚</li></ul><ol start="2"><li>è°ƒæ•´&nbsp;<code>CLAUDE.md</code>&nbsp;æ–‡ä»¶<br>   <code>CLAUDE.md</code>&nbsp;æ–‡ä»¶å°†æˆä¸º Claude æç¤ºçš„ä¸€éƒ¨åˆ†ï¼Œå› æ­¤åº”è¯¥å¯¹å…¶è¿›è¡Œä¼˜åŒ–æ”¹è¿›ã€‚ä¸€ä¸ªå¸¸è§çš„é”™è¯¯æ˜¯æ·»åŠ å¤§é‡å†…å®¹ï¼Œè€Œæ²¡æœ‰å¯¹å…¶æœ‰æ•ˆæ€§è¿›è¡Œè¿­ä»£ã€‚è¿™é‡Œéœ€è¦èŠ±æ—¶é—´è¿›è¡Œå®éªŒï¼Œä»¥ä¾¿ç¡®å®šå“ªäº›æç¤ºè¯èƒ½å¤Ÿä½¿å¾—æ¨¡å‹ç”Ÿæˆæœ€ä½³çš„æŒ‡ä»¤éµå¾ªã€‚</li></ol><p>   å¯ä»¥æ‰‹åŠ¨å°†å†…å®¹æ·»åŠ åˆ°&nbsp;<code>CLAUDE.md</code>&nbsp;ä¸­ï¼Œä¹Ÿå¯ä»¥æŒ‰&nbsp;<code>#</code>&nbsp;é”®å‘ Claude å‘å‡ºæŒ‡ä»¤ï¼Œä½¿å…¶è‡ªåŠ¨åˆå¹¶åˆ°ç›¸å…³çš„&nbsp;<code>CLAUDE.md</code>&nbsp;ä¸­ã€‚åœ¨ Anthropicï¼Œå·¥ç¨‹å¸ˆä»¬å¶å°”ä¼šé€šè¿‡ä¿®æ”¹æç¤ºè¯ï¼Œæ¥æé«˜æ¨¡å‹çš„æŒ‡ä»¤ä¾ä»æ€§ï¼Œæ¯”å¦‚ä½¿ç”¨â€é‡è¦â€æˆ–â€å¿…é¡»â€æ¥å¼ºè°ƒã€‚</p><ol start="3"><li><p>æ•´ç† Claude å…è®¸ä½¿ç”¨çš„å·¥å…·åˆ—è¡¨<br>åœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œ å½“ Claude Code è¿›è¡Œä»»ä½•æœ‰å¯èƒ½ä¿®æ”¹ç³»ç»Ÿçš„æ“ä½œæ—¶ï¼Œå°†ä¼šè¯·æ±‚ç”¨æˆ·ç»™äºˆæƒé™ã€‚è¿™æ˜¯ä¸ºäº†ä¼˜å…ˆè€ƒè™‘å®‰å…¨æ€§çš„ä¿å®ˆåšæ³•ã€‚ä½¿ç”¨è€…å¯ä»¥è‡ªå®šä¹‰å…è®¸çš„åˆ—è¡¨ï¼Œä»¥å…è®¸è®¤ä¸ºå®‰å…¨çš„å·¥å…·ï¼Œæˆ–è€…å…è®¸å¯èƒ½ä¸å®‰å…¨ä½†æ˜“äºæ’¤é”€çš„å·¥å…·ï¼Œå¦‚æ–‡ä»¶ç¼–è¾‘ã€git commitç­‰ã€‚<br>ä»¥ä¸‹å››ç§æ–¹æ³•ç”¨äºç®¡ç†å·¥å…·çš„è®¸å¯ï¼š</p><ul><li>åœ¨ä¼šè¯æœŸé—´å‡ºç°æç¤ºæ—¶ï¼Œ&nbsp;<strong>é€‰æ‹©â€œå§‹ç»ˆå…è®¸â€</strong>&nbsp;ã€‚</li><li>ä½¿ç”¨ <strong><code>/permissions</code></strong> : å¯åŠ¨ Claude Code åï¼Œå¯ä»¥æ·»åŠ æˆ–ç§»é™¤å…è®¸åˆ—è¡¨ä¸­çš„å·¥å…·ã€‚ä¾‹å¦‚ï¼Œå¯ä»¥æ·»åŠ &nbsp;<code>Edit</code>&nbsp;ä»¥å§‹ç»ˆå…è®¸æ–‡ä»¶ç¼–è¾‘ï¼Œæ·»åŠ &nbsp;<code>Bash(git commit:*)</code>&nbsp;ä»¥å…è®¸ git æäº¤ï¼Œæˆ–æ·»åŠ â€œ&nbsp;<code>mcp__puppeteer__puppeteer_navigate</code>&nbsp;â€ä»¥å…è®¸ä½¿ç”¨ Puppeteer MCP æœåŠ¡å™¨è¿›è¡Œå¯¼èˆªã€‚</li><li><strong>æ‰‹åŠ¨ç¼–è¾‘</strong>&nbsp;<code>.claude/settings.json</code>&nbsp;æˆ–&nbsp;<code>~/.claude.json</code></li><li><strong>ä½¿ç”¨&nbsp;<code>--allowedTools</code>&nbsp;CLI flag</strong> è·å–ç‰¹å®šäºä¼šè¯çš„æƒé™ã€‚</li></ul></li><li><p>å¦‚æœä½¿ç”¨ GitHub , è¯·å®‰è£… <code>gh CLI</code><br>Claude çŸ¥é“å¦‚ä½•ä½¿ç”¨&nbsp;<code>gh</code>&nbsp;CLI ä¸ GitHub äº¤äº’ï¼Œä¾‹å¦‚åˆ›å»ºé—®é¢˜ã€æäº¤æ‹‰å–è¯·æ±‚ã€é˜…è¯»è¯„è®ºç­‰ç­‰ã€‚å³ä½¿æ²¡æœ‰å®‰è£…&nbsp;<code>gh</code>&nbsp;ï¼ŒClaude ä»ç„¶å¯ä»¥ä½¿ç”¨ GitHub API æˆ– MCP æœåŠ¡å™¨ï¼ˆå¦‚æœæ‚¨å·²å®‰è£…ï¼‰ã€‚</p></li></ol><h2 id="ç»™-Claude-æ›´å¤šå·¥å…·"><a href="#ç»™-Claude-æ›´å¤šå·¥å…·" class="headerlink" title="ç»™ Claude æ›´å¤šå·¥å…·"></a>ç»™ Claude æ›´å¤šå·¥å…·</h2><ol><li>è®© Claude ä½¿ç”¨ bash å·¥å…·<br><code>Claude Code</code> ä¼šç»§æ‰¿ä½ çš„Bashç¯å¢ƒï¼Œä½¿å…¶èƒ½å¤Ÿè®¿é—®ä½ æ‰€æœ‰çš„å·¥å…·ã€‚è™½ç„¶Claudeå¯ä»¥è¯†åˆ« <code>unix tools</code> å’Œ <code>gh</code> ç­‰å¸¸ç”¨å·¥å…·ï¼Œä½†å¦‚æœæ²¡æœ‰æŒ‡ä»¤ï¼Œå®ƒå°±æ— æ³•è¯†åˆ«ä½ è‡ªå®šä¹‰çš„ <code>Bash</code> å·¥å…·ï¼š<ul><li>å‘Šè¯‰ <code>Claude</code> å·¥å…·çš„åç§°å’Œä½¿ç”¨ç¤ºä¾‹</li><li>å‘Šè¯‰ <code>Claude</code> è¿è¡Œ <code>--help</code> æ¥æŸ¥çœ‹å·¥å…·çš„ä½¿ç”¨æ–‡æ¡£</li><li>åœ¨ <code>CLAUDE.md</code> ä¸­è®°å½•å¸¸ç”¨å·¥å…·</li></ul></li><li>è®© Claude ä½¿ç”¨ MCP<br><code>Claude Code</code> å³å¯ä»¥ä½œä¸º MCP æœåŠ¡å™¨ï¼Œä¹Ÿå¯ä»¥ä½œä¸ºå®¢æˆ·ç«¯ï¼Œä½œä¸ºå®¢æˆ·ç«¯ï¼Œå®ƒå¯ä»¥è¿æ¥ä»»æ„æ•°é‡çš„MCPæœåŠ¡å™¨ï¼Œå¹¶é€šè¿‡ä¸‰ç§æ–¹å¼è®¿é—®æœåŠ¡å™¨å·¥å…·ã€‚</li><li>è‡ªå®šä¹‰å‘½ä»¤<br>å¯¹äºé‡å¤çš„å·¥ä½œæµï¼Œå¯ä»¥é€šè¿‡è®¾ç½®æç¤ºæ¨¡ç‰ˆï¼Œè‡ªå®šä¹‰å·¥ä½œæµå‘½ä»¤ï¼Œä»è€Œé€šè¿‡ / è®¿é—®</li></ol><h2 id="å°è¯•å¸¸è§çš„å·¥ä½œæµ"><a href="#å°è¯•å¸¸è§çš„å·¥ä½œæµ" class="headerlink" title="å°è¯•å¸¸è§çš„å·¥ä½œæµ"></a>å°è¯•å¸¸è§çš„å·¥ä½œæµ</h2><ol><li>æ¢ç´¢ã€è§„åˆ’ã€ç¼–ç ã€æäº¤<br>æ¢ç´¢é˜¶æ®µï¼š å‘Šè¯‰ Claude è¯»å–æ–‡ä»¶ï¼Œä½†æ˜¯ä¸è¿›è¡Œä»»ä½•ç¼–ç <br>è§„åˆ’é˜¶æ®µï¼š è®© Claude åˆ¶å®šä¸€ä¸ªè§£å†³ç‰¹æ®Šé—®é¢˜çš„è®¡åˆ’<br>ç¼–ç é˜¶æ®µï¼š è¦æ±‚ Claude åœ¨ä»£ç ä¸­å®ç°å…¶è§£å†³æ–¹æ¡ˆ<br>æäº¤é˜¶æ®µï¼š gitç»´æŠ¤ï¼Œreadmeç»´æŠ¤ï¼Œæ—¥å¿—ç»´æŠ¤ä»¥åŠè§£é‡Šæ“ä½œ<br>ğŸ“¢æ³¨æ„ï¼šå‰é¢ä¸¤ä¸ªæ­¥éª¤è‡³å…³é‡è¦ï¼Œå¦‚æœæ²¡æœ‰è¿™äº›æ­¥éª¤ï¼Œ<code>Claude</code> ä¼šç›´æ¥å¼€å§‹ç¼–å†™è§£å†³æ–¹æ¡ˆï¼Œä½†æ˜¯å¦‚æœæœ‰å‰é¢ä¸¤ä¸ªæ­¥éª¤ï¼Œå¯ä»¥æ˜¾è‘—æé«˜éœ€è¦æ·±å…¥æ€è€ƒçš„é—®é¢˜çš„æ•ˆç‡ã€‚</li><li>ç¼–å†™æµ‹è¯•ï¼Œæäº¤ï¼›ç¼–ç ï¼Œè¿­ä»£ï¼Œæäº¤<br>a. è®© Claude æ ¹æ®é¢„æœŸçš„è¾“å…¥ è¾“å‡ºå¯¹ç¼–å†™æµ‹è¯•ï¼Œæ˜ç¡®è¯´æ˜ä½ æ­£åœ¨è¿›è¡Œæµ‹è¯•é©±åŠ¨å¼€å‘ã€‚<br>b. å‘Šè¯‰ Claude è¿è¡Œæµ‹è¯•å¹¶ç¡®è®¤å®ƒä»¬æ˜¯æˆåŠŸè¿˜æ˜¯å¤±è´¥ï¼Œæ˜ç¡®å‘Šè¯‰å®ƒåœ¨æ­¤é˜¶æ®µä¸è¦ç¼–å†™ä»»ä½•å®ç°ä»£ç é€šå¸¸ä¼šæœ‰æ‰€å¸®åŠ©ã€‚<br>c. å½“å¯¹æµ‹è¯•æ»¡æ„æ—¶ï¼Œè¯· Claude æäº¤æµ‹è¯•<br>d. è¦æ±‚ Claude ç¼–å†™é€šè¿‡æµ‹è¯•çš„ä»£ç ï¼Œå¹¶æç¤ºå®ƒä¸è¦ä¿®æ”¹æµ‹è¯•ã€‚<br>e. å¯¹æ›´æ”¹æ»¡æ„åï¼Œè¦æ±‚ Claude æäº¤ä»£ç </li><li>ç¼–å†™ä»£ç ï¼Œæˆªå›¾ç»“æœï¼Œè¿­ä»£</li><li>ä½¿ç”¨ YOLOæ¨¡å¼<br>å¯ä»¥ä½¿ç”¨ <code>claude --dangerously-skip-permissions</code> ç»•è¿‡æ‰€æœ‰æƒé™æ£€æŸ¥ï¼Œè®© <code>Claude</code> ä¸é—´æ–­åœ°å·¥ä½œç›´è‡³å®Œæˆã€‚ä½†æ˜¯è¿™ä¸ªæ¨¡å¼æœ‰é£é™©ï¼Œä¸ºäº†é™ä½é£é™©ï¼Œæœ€å¥½åœ¨æ²¡æœ‰äº’è”ç½‘è¿æ¥çš„å®¹å™¨ä¸­ä½¿ç”¨ã€‚</li><li>ä»£ç åº“é—®ç­”<br>åœ¨æ–°åŠ å…¥ä»£ç åº“æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ <code>Claude Code</code> è¿›è¡Œå­¦ä¹ å’Œæ¢ç´¢ï¼Œå¸¸è§é—®é¢˜å¦‚ä¸‹ï¼š<br>a. æ—¥å¿—è®°å½•å¦‚ä½•å·¥ä½œ<br>b. å¦‚ä½•åˆ›å»ºæ–°çš„APIç«¯ç‚¹<br>c. ç¬¬xxè¡Œçš„ä½œç”¨æ˜¯ä»€ä¹ˆ<br>ğŸ’¡æç¤ºï¼š åœ¨ <code>Anthropic</code> , ä»¥è¿™ç§æ–¹å¼ä½¿ç”¨ <code>Claude Code</code> å·²ç»æˆä¸ºæ ¸å¿ƒå…¥èŒå·¥ä½œæµç¨‹ï¼Œæ˜¾è‘—ç¼©çŸ­äº†ä¸Šæ‰‹æ—¶é—´ï¼Œå¹¶å‡è½»äº†å…¶ä»–å·¥ç¨‹å¸ˆçš„è´Ÿæ‹…ã€‚</li><li>ä½¿ç”¨ Claude ä¸gitäº¤äº’<br> Claude å¯ä»¥é«˜æ•ˆåœ°å¤„ç†è®¸å¤š git æ“ä½œï¼Œæ¯”å¦‚ï¼š<br> a. æœç´¢ git å†å²è®°å½•æ¥å›ç­”è¯¸å¦‚â€å“ªäº›æ›´æ”¹å¯¼è‡´äº† v1.2.3ç‰ˆæœ¬â€<br> b. ç¼–å†™æäº¤æ¶ˆæ¯ï¼ŒClaudeå°†è‡ªåŠ¨æŸ¥çœ‹æ›´æ”¹å’Œæœ€è¿‘çš„å†å²è®°å½•,å¹¶æ ¹æ®æ‰€æœ‰ç›¸å…³ä¸Šä¸‹æ–‡ç¼–å†™ä¸€æ¡æ¶ˆæ¯<br> c. å¤„ç†å¤æ‚çš„gitæ“ä½œï¼Œä¾‹å¦‚æ¢å¤æ–‡ä»¶ã€è§£å†³rebaseç­‰</li><li>ä½¿ç”¨ Claude ä¸ GitHubäº¤äº’</li><li>ä½¿ç”¨ Claude æ¥æ“ä½œ Jupyter Notebook</li></ol><h2 id="ä¼˜åŒ–å·¥ä½œæµ"><a href="#ä¼˜åŒ–å·¥ä½œæµ" class="headerlink" title="ä¼˜åŒ–å·¥ä½œæµ"></a>ä¼˜åŒ–å·¥ä½œæµ</h2><ol><li>æŒ‡ç¤ºè¦å…·ä½“</li><li>ç»™ Claude å›¾ç‰‡æˆ–è€…å›¾è¡¨ï¼š å°†å›¾åƒç›´æ¥æ‹–æ”¾åˆ°æç¤ºè¾“å…¥ä¸­ï¼Œæˆ–è€…æä¾›å›¾åƒçš„æ–‡ä»¶è·¯å¾„</li><li>æŒ‡å®šå¸Œæœ›ClaudeæŸ¥çœ‹æˆ–å¤„ç†çš„æ–‡ä»¶</li><li>ä¸º Claude æä¾›URL: å°†ç‰¹å®šçš„ url æ”¾åœ¨æç¤ºè¯ä¸­ï¼Œä»¥ä¾¿äº Claude è·å–å¹¶è¯»å–ï¼Œä¸ºäº†é¿å…å‡ºç°æƒé™é—®é¢˜ï¼Œå¯ä»¥å°†urlæ·»åŠ åˆ°å…è®¸çš„åˆ—è¡¨ä¸­</li><li>å°½æ—©å¹¶ç»å¸¸æ€§çš„çº æ­£é”™è¯¯</li><li>ä½¿ç”¨ /CLEAR ä¿æŒä¸Šä¸‹æ–‡èšç„¦ï¼š åœ¨ä»»åŠ¡ä¹‹é—´ç”¨ /clear å‘½ä»¤æ¥é‡ç½®ä¸Šä¸‹æ–‡</li><li>ä½¿ç”¨æ¸…å•æ¥å¤„ç†å¤æ‚çš„å·¥ä½œæµ</li><li>å¦‚ä½•å°†æ•°æ®ä¼ å…¥ Claude</li></ol><h2 id="ä½¿ç”¨-headless-mode-å®ç°-infra-çš„è‡ªåŠ¨åŒ–"><a href="#ä½¿ç”¨-headless-mode-å®ç°-infra-çš„è‡ªåŠ¨åŒ–" class="headerlink" title="ä½¿ç”¨ headless mode å®ç° infra çš„è‡ªåŠ¨åŒ–"></a>ä½¿ç”¨ <code>headless mode</code> å®ç° <code>infra</code> çš„è‡ªåŠ¨åŒ–</h2><h2 id="ä½¿ç”¨å¤š-Claude-æ¥å¯¹å·¥ä½œæµè¿›è¡Œå‡çº§"><a href="#ä½¿ç”¨å¤š-Claude-æ¥å¯¹å·¥ä½œæµè¿›è¡Œå‡çº§" class="headerlink" title="ä½¿ç”¨å¤š Claude æ¥å¯¹å·¥ä½œæµè¿›è¡Œå‡çº§"></a>ä½¿ç”¨å¤š Claude æ¥å¯¹å·¥ä½œæµè¿›è¡Œå‡çº§</h2><ol><li>è®©ä¸€ä¸ª Claude ç¼–å†™ä»£ç ï¼Œå¦å¤–ä¸€ä¸ªClaudeæ¥éªŒè¯<br>é€šè¿‡å¯åŠ¨å¤šä¸ªç»ˆç«¯ï¼Œä»è€Œå®ç°å¤šä¸ª Claude çš„å¯åŠ¨</li></ol><h2 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h2><ol><li><p>å®˜æ–¹æ•™ç¨‹ï¼š <a href="https://www.anthropic.com/engineering/claude-code-best-practices">https://www.anthropic.com/engineering/claude-code-best-practices</a></p></li><li><p>é¿å‘æ€»ç»“ï¼š <a href="https://www.bilibili.com/video/BV14SuFzHEof/?spm_id_from=333.337.search-card.all.click&amp;vd_source=23a5f90103c28e0016184059a052d467">https://www.bilibili.com/video/BV14SuFzHEof/?spm_id_from=333.337.search-card.all.click&amp;vd_source=23a5f90103c28e0016184059a052d467</a></p></li><li><p>æ•™ç¨‹1ï¼š <a href="https://www.bilibili.com/video/BV1S8u2zDE5p/?spm_id_from=333.337.search-card.all.click&amp;vd_source=23a5f90103c28e0016184059a052d467">https://www.bilibili.com/video/BV1S8u2zDE5p/?spm_id_from=333.337.search-card.all.click&amp;vd_source=23a5f90103c28e0016184059a052d467</a></p></li><li><p>æ•™ç¨‹2ï¼š <a href="https://www.bilibili.com/video/BV1VkMTzjEhy?spm_id_from=333.788.recommend_more_video.0&amp;vd_source=23a5f90103c28e0016184059a052d467">https://www.bilibili.com/video/BV1VkMTzjEhy?spm_id_from=333.788.recommend_more_video.0&amp;vd_source=23a5f90103c28e0016184059a052d467</a></p></li></ol>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹å¼€å‘ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> claude-code </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>uvå¸¸ç”¨æ“ä½œ</title>
      <link href="/2025/07/25/uv-chang-yong-cao-zuo/"/>
      <url>/2025/07/25/uv-chang-yong-cao-zuo/</url>
      
        <content type="html"><![CDATA[<h2 id="åˆ›å»ºé¡¹ç›®"><a href="#åˆ›å»ºé¡¹ç›®" class="headerlink" title="åˆ›å»ºé¡¹ç›®"></a>åˆ›å»ºé¡¹ç›®</h2><ol><li>åˆ›å»ºä¸€ä¸ªæ–°çš„ Python é¡¹ç›®</li></ol><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">uv init hello-world</span><br><span class="line"><span class="built_in">cd</span> hello-world</span><br></pre></td></tr></tbody></table></figure><ol start="2"><li>åœ¨å·²æœ‰çš„å·¥ä½œç›®å½•ä¸­åˆå§‹åŒ–ä¸€ä¸ªé¡¹ç›®</li></ol><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> hello-world</span><br><span class="line"><span class="built_in">cd</span> hello-world</span><br><span class="line">uv init</span><br></pre></td></tr></tbody></table></figure><h2 id="é¡¹ç›®ç»“æ„"><a href="#é¡¹ç›®ç»“æ„" class="headerlink" title="é¡¹ç›®ç»“æ„"></a>é¡¹ç›®ç»“æ„</h2><p>ä¸€ä¸ªå®Œæ•´çš„é¡¹ç›®åˆ—è¡¨å¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">â”œâ”€â”€ .venv</span><br><span class="line">â”‚   â”œâ”€â”€ bin</span><br><span class="line">â”‚   â”œâ”€â”€ lib</span><br><span class="line">â”‚   â””â”€â”€ pyvenv.cfg</span><br><span class="line">â”œâ”€â”€ .python-version</span><br><span class="line">â”œâ”€â”€ README.md</span><br><span class="line">â”œâ”€â”€ main.py</span><br><span class="line">â”œâ”€â”€ pyproject.toml</span><br><span class="line">â””â”€â”€ uv.lock</span><br></pre></td></tr></tbody></table></figure><ul><li><code>pyproject.toml</code> åŒ…å«æœ‰å…³é¡¹ç›®çš„å…ƒæ•°æ®ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼Œå¯ä»¥ç”¨è¯¥æ–‡ä»¶æ¥æŒ‡å®šä¾èµ–é¡¹ç›®ä»¥åŠé¡¹ç›®çš„è¯¦ç»†ä¿¡æ¯ï¼š</li></ul><figure class="highlight toml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[project]</span></span><br><span class="line"><span class="attr">name</span> = <span class="string">"hello-world"</span></span><br><span class="line"><span class="attr">version</span> = <span class="string">"0.1.0"</span></span><br><span class="line"><span class="attr">description</span> = <span class="string">"Add your description here"</span></span><br><span class="line"><span class="attr">readme</span> = <span class="string">"README.md"</span></span><br><span class="line"><span class="attr">dependencies</span> = []</span><br></pre></td></tr></tbody></table></figure><ul><li><p><code>.python-version</code> åŒ…å«é¡¹ç›®çš„é»˜è®¤Pythonç‰ˆæœ¬ã€‚å‘Šè¯‰ <code>uv</code> åœ¨åˆ›å»ºé¡¹ç›®è™šæ‹Ÿç¯å¢ƒæ—¶ä½¿ç”¨å“ªä¸ªPythonç‰ˆæœ¬ã€‚</p></li><li><p><code>.venv</code> åŒ…å«é¡¹ç›®çš„è™šæ‹Ÿç¯å¢ƒï¼Œè¿™æ˜¯ä¸€ä¸ªä¸ç³»ç»Ÿå…¶ä»–éƒ¨åˆ†éš”ç¦»çš„ Python ç¯å¢ƒï¼Œ<code>uv</code> å°†åœ¨è¿™é‡Œå®‰è£…é¡¹ç›®çš„ä¾èµ–é¡¹ã€‚</p></li><li><p><code>uv.lock</code> æ˜¯ä¸€ä¸ªè·¨å¹³å°çš„é”æ–‡ä»¶ï¼Œå…¶ä¸­åŒ…å«é¡¹ç›®ä¾èµ–é¡¹çš„ç²¾ç¡®ä¿¡æ¯ã€‚ä¸ç”¨äºæŒ‡å®šé¡¹ç›®æ€»ä½“éœ€æ±‚çš„ <code>pyproject.toml</code> ä¸åŒï¼Œé”æ–‡ä»¶åŒ…å«é¡¹ç›®ç¯å¢ƒä¸­å·²å®‰è£…çš„ç²¾ç¡®è§£æç‰ˆæœ¬ã€‚æ­¤æ–‡ä»¶åº”çº³å…¥ç‰ˆæœ¬æ§åˆ¶ï¼Œä»¥ä¾¿åœ¨ä¸åŒæœºå™¨ä¸Šå®ç°ä¸€è‡´ä¸”å¯é‡å¤çš„å®‰è£…ã€‚</p></li></ul><p>æ³¨æ„ï¼š<code>uv.lock</code> æ˜¯ä¸€ä¸ªäººç±»å¯è¯»çš„ TOML æ–‡ä»¶ï¼Œä½†ç”± uv ç®¡ç†ï¼Œä¸åº”æ‰‹åŠ¨ç¼–è¾‘ã€‚</p><h2 id="ç®¡ç†ä¾èµ–é¡¹"><a href="#ç®¡ç†ä¾èµ–é¡¹" class="headerlink" title="ç®¡ç†ä¾èµ–é¡¹"></a>ç®¡ç†ä¾èµ–é¡¹</h2><h3 id="æ·»åŠ ä¾èµ–é¡¹"><a href="#æ·»åŠ ä¾èµ–é¡¹" class="headerlink" title="æ·»åŠ ä¾èµ–é¡¹"></a>æ·»åŠ ä¾èµ–é¡¹</h3><p>å¯ä»¥ä½¿ç”¨ <code>uv add</code> å‘½ä»¤å‘ <code>pyproject.toml</code> æ–‡ä»¶æ·»åŠ ä¾èµ–é¡¹ã€‚è¿™ä¹Ÿä¼šæ›´æ–°é”æ–‡ä»¶å’Œé¡¹ç›®ç¯å¢ƒï¼š</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">uv add requests</span><br></pre></td></tr></tbody></table></figure><p>å¯ä»¥æŒ‡å®šç‰ˆæœ¬çº¦æŸæˆ–æ›¿ä»£æ¥æºï¼š</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æŒ‡å®šç‰ˆæœ¬çº¦æŸ</span></span><br><span class="line">uv add <span class="string">'requests==2.31.0'</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ·»åŠ gitä¾èµ–</span></span><br><span class="line">uv add git+https://github.com/psf/requests</span><br></pre></td></tr></tbody></table></figure><p>ä¹Ÿå¯ä»¥ä½¿ç”¨å¸¦æœ‰ <code>-r</code> æ ‡å¿—çš„ <code>uv add</code> ä»æ–‡ä»¶æ·»åŠ æ‰€æœ‰ä¾èµ–é¡¹ï¼š</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä»requirements.txtæ·»åŠ æ‰€æœ‰ä¾èµ–</span></span><br><span class="line">uv add -r requirements.txt -c constraints.txt</span><br></pre></td></tr></tbody></table></figure><h3 id="åˆ é™¤ä¾èµ–é¡¹"><a href="#åˆ é™¤ä¾èµ–é¡¹" class="headerlink" title="åˆ é™¤ä¾èµ–é¡¹"></a>åˆ é™¤ä¾èµ–é¡¹</h3><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">uv remove requests</span><br></pre></td></tr></tbody></table></figure><h3 id="å‡çº§è½¯ä»¶åŒ…"><a href="#å‡çº§è½¯ä»¶åŒ…" class="headerlink" title="å‡çº§è½¯ä»¶åŒ…"></a>å‡çº§è½¯ä»¶åŒ…</h3><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">uv lock --upgrade-package requests</span><br></pre></td></tr></tbody></table></figure><h2 id="è¿è¡Œå‘½ä»¤"><a href="#è¿è¡Œå‘½ä»¤" class="headerlink" title="è¿è¡Œå‘½ä»¤"></a>è¿è¡Œå‘½ä»¤</h2><p><code>uv run</code> å¯ç”¨äºåœ¨æ‚¨çš„é¡¹ç›®ç¯å¢ƒä¸­è¿è¡Œä»»æ„è„šæœ¬æˆ–å‘½ä»¤ï¼š</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">uv run example.py</span><br></pre></td></tr></tbody></table></figure><p>ä¹Ÿå¯ä»¥å…ˆä½¿ç”¨ <code>uv sync</code> å‘½ä»¤æ‰‹åŠ¨æ›´æ–°ç¯å¢ƒï¼Œæ¿€æ´»ç¯å¢ƒï¼Œå†æ‰§è¡Œå‘½ä»¤ï¼š</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">uv <span class="built_in">sync</span></span><br><span class="line"><span class="built_in">source</span> .venv/bin/activate</span><br><span class="line">flask run -p 3000</span><br><span class="line">python example.py</span><br></pre></td></tr></tbody></table></figure><h2 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h2><p>uv å®˜ç½‘æŒ‡å—ï¼š<a href="https://docs.astral.sh/uv/guides/projects/">https://docs.astral.sh/uv/guides/projects/</a></p>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹å¼€å‘ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> uv </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å…¨æœŸæœ›å®šç†å…¬å¼æ¨å¯¼</title>
      <link href="/2025/07/13/quan-qi-wang-ding-li-gong-shi-tui-dao/"/>
      <url>/2025/07/13/quan-qi-wang-ding-li-gong-shi-tui-dao/</url>
      
        <content type="html"><![CDATA[<h1 id="å¼•è¨€"><a href="#å¼•è¨€" class="headerlink" title="å¼•è¨€"></a>å¼•è¨€</h1><p>æœ€è¿‘æ¨å¯¼å¼ºåŒ–å­¦ä¹ çš„<code>Bellman equation</code>ï¼Œåœ¨åŒ–è§£ç¬¬äºŒé¡¹<code>Future Reward</code>é¡¹æ—¶ï¼Œéœ€è¦ç”¨åˆ°<code>å…¨æœŸæœ›å®šç†</code>ï¼Œç§‰æ‰¿è´¹æ›¼å­¦ä¹ æ³•çš„ç†å¿µï¼Œè¿™é‡Œä»ä¸¤ä¸ªæ–¹é¢å¯¹<code>å…¨æœŸæœ›å®šç†</code>å…¬å¼è¿›è¡Œä»‹ç»ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬ä»¥ä¸€ä¸ªç®€å•çš„ä¾‹å­ä»æ„Ÿæ€§ä¸Šç†è§£è¯¥å…¬å¼ï¼Œç„¶åå†ä»æ•°å­¦çš„è§’åº¦å¯¹å…¶è¿›è¡Œè¾ƒä¸ºä¸¥è°¨çš„æ¨å¯¼ã€‚</p><h1 id="å…¨æœŸæœ›å®šç†å…¬å¼"><a href="#å…¨æœŸæœ›å®šç†å…¬å¼" class="headerlink" title="å…¨æœŸæœ›å®šç†å…¬å¼"></a>å…¨æœŸæœ›å®šç†å…¬å¼</h1><ol><li>å‡è®¾$B_1, B_2, â€¦, B_n$ æ˜¯ä¸€ç»„äº’ä¸ç›¸å®¹çš„äº‹ä»¶ï¼Œå¹¶ä¸”å½¢æˆæ ·æœ¬ç©ºé—´çš„ä¸€ä¸ªåˆ†å‰²ï¼›</li><li>$C$æ˜¯ä¸€ä¸ªç¡®å®šäº‹ä»¶ï¼Œä¸” $p(C) &gt; 0$ï¼›</li><li>$A$æ˜¯ä¸€ä¸ªéšæœºå˜é‡ã€‚</li></ol><p>åˆ™æœ‰ï¼š<br>$$E[A | C] = \sum_{i=1}^{n} p(B_i | C) E[A |B_i, C] $$<br>ä¸Šè¿°å…¬å¼å³ä¸ºå…¨æœŸæœ›å®šç†å…¬å¼ã€‚</p><h1 id="å¯¹å…¬å¼çš„æ„Ÿæ€§ç†è§£"><a href="#å¯¹å…¬å¼çš„æ„Ÿæ€§ç†è§£" class="headerlink" title="å¯¹å…¬å¼çš„æ„Ÿæ€§ç†è§£"></a>å¯¹å…¬å¼çš„æ„Ÿæ€§ç†è§£</h1><p>ç”¨å¤§ç™½è¯æ¥è¯´å°±æ˜¯ï¼š <font color="red">æˆ‘æƒ³çŸ¥é“ï¼Œåœ¨å·²çŸ¥å‘ç”Ÿäº†$C$ çš„æ¡ä»¶ä¸‹ï¼Œéšæœºå˜é‡$A$çš„çš„å¹³å‡å€¼æ˜¯å¤šå°‘ï¼Ÿé‚£æˆ‘ä»¬å¯ä»¥å…ˆçœ‹çœ‹ï¼Œåœ¨$C$é‡Œï¼Œå„ä¸ªå­æƒ…å†µ$B_i$å‘ç”Ÿçš„æ¦‚ç‡æœ‰å¤šå°‘ï¼Œç„¶ååœ¨æ¯ä¸ªå°æƒ…å†µé‡Œç®—ä¸€ä¸‹$A$çš„å¹³å‡å€¼ï¼Œæœ€ååŠ æƒæ±‚å’Œå°±å¥½äº†ã€‚<br></font><br><br><br>å°±åƒæ˜¯ï¼š</p><p>å‡å¦‚æˆ‘ä»¬åšä¸€ä¸ªå®éªŒï¼š</p><ul><li>$C$è¡¨ç¤ºâ€œä½ è¿›å…¥äº†ä¸€æ‰€å¤§å­¦â€</li><li>$B_1$è¡¨ç¤ºâ€œä½ è¿›çš„æ˜¯æ•°å­¦ç³»â€ï¼Œ$B_2$è¡¨ç¤ºâ€œä½ è¿›çš„æ˜¯ç‰©ç†ç³»â€â€¦â€¦ (è¿™äº›ç³»æŠŠå¤§å­¦åˆ†æˆäº†åˆ’åˆ†)</li><li>$A$è¡¨ç¤ºâ€œä½ çš„æœªæ¥æ”¶å…¥â€</li></ul><p>é‚£ä¹ˆé—®é¢˜æ˜¯ï¼š <strong>åœ¨ä½ å·²ç»è¿›å…¥å¤§å­¦ï¼ˆBï¼‰çš„å‰æä¸‹ï¼Œä½ çš„æœªæ¥æ”¶å…¥çš„å¹³å‡å€¼æ˜¯å¤šå°‘ï¼Ÿ</strong></p><p>ç­”æ¡ˆå°±æ˜¯ï¼š</p><ul><li><p>ä½ åœ¨æ•°å­¦ç³»çš„æ¦‚ç‡ x æ•°å­¦ç³»çš„å¹³å‡æ”¶å…¥</p></li><li><p>ä½ åœ¨ç‰©ç†ç³»çš„æ¦‚ç‡ x ç‰©ç†ç³»çš„å¹³å‡æ”¶å…¥</p></li><li><p>â€¦</p><p>ä»¥ä¸ŠåŠ èµ·æ¥å°±æ˜¯ä½ åœ¨å¤§å­¦çš„å¹³å‡æ”¶å…¥ã€‚</p></li></ul><blockquote><p>Note: ä¸æƒ³çœ‹æ¯ç‡¥æ•°å­¦å…¬å¼çš„åŒå­¦çœ‹åˆ°è¿™é‡Œå°±å¥½äº†ï¼Œå¯ä»¥è·³è¿‡ä¸‹é¢çš„æ•°å­¦è¯æ˜éƒ¨åˆ†ã€‚</p></blockquote><h1 id="å¯¹å…¬å¼çš„è¯æ˜"><a href="#å¯¹å…¬å¼çš„è¯æ˜" class="headerlink" title="å¯¹å…¬å¼çš„è¯æ˜"></a>å¯¹å…¬å¼çš„è¯æ˜</h1><h2 id="å…¨æœŸæœ›å®šç†å…¬å¼çš„æ¨å¯¼"><a href="#å…¨æœŸæœ›å®šç†å…¬å¼çš„æ¨å¯¼" class="headerlink" title="å…¨æœŸæœ›å®šç†å…¬å¼çš„æ¨å¯¼"></a>å…¨æœŸæœ›å®šç†å…¬å¼çš„æ¨å¯¼</h2><p>ä¸‹é¢ï¼Œæˆ‘ä»¬æ¥è¯æ˜å…¨æœŸæœ›å®šç†å…¬å¼ï¼š$$E[A | C] = \sum_{i=1}^{n} p(B_i | C) E[A |B_i, C] $$</p><p>æˆ‘ä»¬ä»æ¡ä»¶æ¦‚ç‡çš„å…¨æ¦‚ç‡å…¬å¼ï¼ˆç¨åæˆ‘ä»¬å†å¯¹è¯¥å…¬å¼è¿›è¡Œæ¨å¯¼ï¼‰ï¼š</p><p>$$<br>\begin{align}<br>p(A=a|C) = \sum_{i=1}^{n} p(A=a|B_i, C) p(B_i|C)<br>\end{align}<br>$$</p><p>å‡ºå‘ï¼Œè¿›è¡Œæ¨å¯¼ã€‚</p><p>é¦–å…ˆï¼Œå¯¹å…¬å¼(1) çš„å·¦è¾¹è¿›è¡ŒåŠ æƒæ±‚å’Œï¼Œå¾—åˆ°æœŸæœ›è¡¨è¾¾å¼ï¼š</p><p>$$<br>\begin{align*}<br>    E[A | C] &amp;= \sum_{a\in A} P(a |C)a \<br>\end{align*}<br>$$<br>æ¥ä¸‹æ¥ï¼Œä»£å…¥å…¬å¼(1) çš„å³è¾¹ï¼Œå¾—åˆ°ï¼š<br>$$\begin{align*}<br>    E[A | C] &amp;= \sum_{a\in A} \sum_{i=1}^{n} p(A=a|B_i, C) p(B_i|C) a \<br>    &amp;= \sum_{i=1}^{n}  p(B_i|C) \sum_{a\in A} p(A=a|B_i, C) a \<br>    &amp;= \sum_{i=1}^{n}  p(B_i|C) E[A | B_i, C] \<br>\end{align*}<br>$$<br>æœ€ç»ˆï¼Œæˆ‘ä»¬å¾—åˆ°äº†å…¨æœŸæœ›å®šç†å…¬å¼ï¼š<br>$$E[A | C] = \sum_{i=1}^{n} p(B_i | C) E[A |B_i, C] $$</p><p>è‡³æ­¤ï¼Œæˆ‘ä»¬ä»æ¡ä»¶æ¦‚ç‡çš„å…¨æ¦‚ç‡å…¬å¼å‡ºå‘ï¼Œæ¨å¯¼å‡ºäº†å…¨æœŸæœ›å®šç†å…¬å¼ã€‚ä¸‹é¢æˆ‘ä»¬ä»æ›´ä¸€èˆ¬çš„æ¦‚å¿µï¼Œæ¨å¯¼æ¡ä»¶æ¦‚ç‡çš„å…¨æ¦‚ç‡å…¬å¼ã€‚</p><h2 id="æ¡ä»¶æ¦‚ç‡çš„å…¨æ¦‚ç‡å…¬å¼çš„æ¨å¯¼"><a href="#æ¡ä»¶æ¦‚ç‡çš„å…¨æ¦‚ç‡å…¬å¼çš„æ¨å¯¼" class="headerlink" title="æ¡ä»¶æ¦‚ç‡çš„å…¨æ¦‚ç‡å…¬å¼çš„æ¨å¯¼"></a>æ¡ä»¶æ¦‚ç‡çš„å…¨æ¦‚ç‡å…¬å¼çš„æ¨å¯¼</h2><ul><li>å‡è®¾$B_1, B_2, â€¦, B_n$ æ˜¯ä¸€ç»„äº’ä¸ç›¸å®¹çš„äº‹ä»¶ï¼Œå¹¶ä¸”å½¢æˆæ ·æœ¬ç©ºé—´çš„ä¸€ä¸ªåˆ†å‰²ï¼›</li><li>$C$æ˜¯ä¸€ä¸ªç¡®å®šäº‹ä»¶ï¼Œä¸” $p(C) &gt; 0$ï¼›</li><li>$A$æ˜¯ä¸€ä¸ªéšæœºå˜é‡ã€‚</li></ul><p>æˆ‘ä»¬éœ€è¦æ¨å¯¼å‡ºä¸‹é¢çš„ç­‰å¼ï¼š<br>$$p(A | C) = \sum_{i=1}^{n} p(A | B_i, C) P(B_i | C)$$</p><p>æ¨å¯¼è¿‡ç¨‹ï¼š</p><ol><li>æˆ‘ä»¬ä»æ¡ä»¶æ¦‚ç‡çš„å®šä¹‰å‡ºå‘ï¼š<br>$p(A | C) = \frac{p(A \cap C)}{p(C)}$ï¼Œ<br>æˆ‘ä»¬å¸Œæœ›æŠŠ$p(A|C)$è¡¨è¾¾ä¸ºå…³äº$B_i$çš„åŠ æƒå’Œã€‚</li></ol> <img src="https://raw.githubusercontent.com/Skylyong/i/main/20250713155940.jpeg" alt="Bellmanå…¬å¼æ¨å¯¼" style="zoom: 67%;"><ol start="2"><li><p>ä½¿ç”¨å…¨æ¦‚ç‡å…¬å¼è®¡ç®—$p(A \cap C)$ï¼šå› ä¸º$B_1, B_2, â€¦$ æ˜¯ä¸€ç»„äº’ä¸ç›¸å®¹çš„äº‹ä»¶ï¼Œå¹¶å½¢æˆæ ·æœ¬ç©ºé—´çš„ä¸€ä¸ªåˆ†å‰²ï¼Œæ‰€ä»¥ $A  \cap C$ = $\bigcup_{i=1}^{n} (A \cap B_i \cap C)$(å¦‚å›¾æ‰€ç¤º)ï¼Œ åŒæ—¶ï¼Œè¿™äº›$A \cap B_i \cap C$<br>ä¸¤ä¸¤ä¸¤äº’ä¸ç›¸å®¹ï¼Œå› æ­¤ï¼š<br>$$p(A \cap C) = \sum_{i=1}^{n} p(A \cap B_i \cap C)$$</p></li><li><p>æ ¹æ®æ¦‚ç‡çš„ä¹˜æ³•å…¬å¼ï¼Œæˆ‘ä»¬å¯¹æ¯ä¸€é¡¹ $p(A \cap B_i \cap C)$è¿›è¡Œå±•å¼€ï¼š<br>$$p(A \cap B_i \cap C) = p(A | B_i \cap C) p(B_i \cap C) $$<br>ä»£å…¥ä¸Šé¢çš„å…¬å¼ï¼Œå¾—åˆ°ï¼š<br>$$p(A \cap C) = \sum_{i=1}^{n} p(A | B_i \cap C) p(B_i \cap C)$$</p></li><li><p>å°†ä¸Šå¼ï¼Œä»£å…¥ $p(A | C) = \frac{p(A \cap C)}{p(C)}$ï¼Œå¾—åˆ°ï¼š<br>$$<br>\begin{align*}<br>p(A | C) &amp;= \frac{\sum_{i=1}^{n} p(A | B_i \cap C) p(B_i \cap C)}{p(C)} \<br>&amp;= \sum_{i=1}^{n} p(A | B_i \cap C) \frac{p(B_i \cap C)}{p(C)} \<br>&amp;= \sum_{i=1}^{n} p(A | B_i, C) p(B_i | C)<br>\end{align*}<br>$$</p></li><li><p>ç»¼ä¸Šï¼Œæˆ‘ä»¬å¾—åˆ°äº†æ¡ä»¶æ¦‚ç‡çš„å…¨æ¦‚ç‡å…¬å¼ï¼š<br>$$p(A | C) = \sum_{i=1}^{n} p(A | B_i, C) P(B_i | C)$$</p></li></ol><p>æ¨å¯¼å®Œæ¯•ã€‚<br><br></p><h1 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h1><ol><li>Bertsekas D, Tsitsiklis J N. Introduction to probability[M]. Athena Scientific, 2008.</li></ol>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹ ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ¦‚ç‡è®º </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è´å°”æ›¼ç­‰å¼ä»‹ç»åŠæ¨å¯¼</title>
      <link href="/2025/07/12/bei-er-man-deng-shi-jie-shao-ji-tui-dao/"/>
      <url>/2025/07/12/bei-er-man-deng-shi-jie-shao-ji-tui-dao/</url>
      
        <content type="html"><![CDATA[<h1 id="å¼•è¨€"><a href="#å¼•è¨€" class="headerlink" title="å¼•è¨€"></a>å¼•è¨€</h1><p><code>Bellman equation</code> æ˜¯å¼ºåŒ–å­¦ä¹ çš„åŸºçŸ³ï¼Œä»¥å‰ä¸ºäº†å¿«é€Ÿåº”ç”¨ï¼Œè¿™éƒ¨åˆ†çš„çŸ¥è¯†æ²¡æœ‰åƒé€ï¼Œæ€»æ˜¯æœ‰ä¸€ç§ä¸è¸å®çš„æ„Ÿè§‰ï¼Œè¿™æ¬¡ä»è´¹æ›¼å­¦ä¹ æ³•çš„æ€æƒ³å‡ºå‘ï¼ŒåŠ›æ±‚å®Œå…¨é€å½»ç†è§£è¯¥å…¬å¼åŠå…¶æ¨å¯¼è¿‡ç¨‹ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬åˆ†ä¸‰ä¸ªéƒ¨åˆ†å¯¹<code>Bellman equation</code>è¿›è¡Œè®²è¿°ã€‚</p><h1 id="å‰ç½®çŸ¥è¯†"><a href="#å‰ç½®çŸ¥è¯†" class="headerlink" title="å‰ç½®çŸ¥è¯†"></a>å‰ç½®çŸ¥è¯†</h1><p>è´å°”æ›¼ç­‰å¼æ¨å¯¼çš„å‰ç½®çŸ¥è¯†ï¼Œä¸»è¦åŒ…å«æ¡ä»¶æ¦‚ç‡çš„å…¨æ¦‚ç‡å…¬å¼ï¼Œä»¥åŠå…¨æœŸæœ›å®šç†ï¼Œç›¸å…³ä»‹ç»åœ¨<a href="https://eggplant.wiki/2025/07/13/quan-qi-wang-ding-li-gong-shi-tui-dao/">è¿™é‡Œ</a>ã€‚</p><h1 id="Bellman-equation-æ¨å¯¼"><a href="#Bellman-equation-æ¨å¯¼" class="headerlink" title="Bellman equation æ¨å¯¼"></a>Bellman equation æ¨å¯¼</h1><h1 id="ä¸¤ä¸ªä½¿ç”¨-Bellman-equation-çš„ä¾‹å­"><a href="#ä¸¤ä¸ªä½¿ç”¨-Bellman-equation-çš„ä¾‹å­" class="headerlink" title="ä¸¤ä¸ªä½¿ç”¨ Bellman equation çš„ä¾‹å­"></a>ä¸¤ä¸ªä½¿ç”¨ Bellman equation çš„ä¾‹å­</h1>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹ ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¼ºåŒ–å­¦ä¹  </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä½¿ç”¨Dockeræ„å»ºWebdavæœåŠ¡å™¨</title>
      <link href="/2025/06/17/shi-yong-docker-gou-jian-webdav-fu-wu-qi/"/>
      <url>/2025/06/17/shi-yong-docker-gou-jian-webdav-fu-wu-qi/</url>
      
        <content type="html"><![CDATA[<h1 id="1-å‰è¨€"><a href="#1-å‰è¨€" class="headerlink" title="1. å‰è¨€"></a>1. å‰è¨€</h1><p>åŠå¹´å‰ï¼Œæˆ‘æ›¾åŸºäº Apache2 æ­å»ºäº†ä¸€å¥— <a href="https://eggplant.wiki/2025/01/26/da-jian-webdav-fu-wu-qi-shi-xian-obsidian-he-zotero-duo-duan-tong-bu/">WebDAV æœåŠ¡</a>ï¼Œç”¨äºå®ç° Obsidian å’Œ Zotero çš„å¤šç«¯åŒæ­¥ã€‚é‚£æ¬¡éƒ¨ç½²è¿‡ç¨‹å¯è°“ä¸€æ³¢ä¸‰æŠ˜ï¼Œå°¤å…¶æ˜¯åœ¨é…ç½® SSL ç­¾åå’Œ Apache2 æ—¶é‡åˆ°äº†ä¸å°‘éº»çƒ¦ã€‚ç”±äºå½“æ—¶æˆ‘æ²¡æœ‰å¤‡æ¡ˆçš„åŸŸåï¼Œåªèƒ½ä½¿ç”¨å…¬ç½‘ IP ç”³è¯· SSL è¯ä¹¦ï¼Œè€Œä¸”å…è´¹è¯ä¹¦åªæœ‰ 3 ä¸ªæœˆæœ‰æ•ˆæœŸï¼Œåˆ°æœŸåè¿˜éœ€è¦æ‰‹åŠ¨ç»­ç­¾ã€‚è™½ç„¶æœ€ç»ˆå‹‰å¼ºé…ç½®æˆåŠŸï¼Œä½†ä¹ŸèŠ±äº†æˆ‘ä¸å°‘æ—¶é—´å’Œç²¾åŠ›ã€‚</p><p>é—æ†¾çš„æ˜¯ï¼Œè¿™å¥—æœåŠ¡æ²¡èƒ½æŒç»­ä½¿ç”¨å¤ªä¹…ã€‚ç­‰ SSL è¯ä¹¦è¿‡æœŸä¹‹åï¼Œæˆ‘å› ä¸ºå¿™äºå…¶ä»–äº‹åŠ¡ä¹Ÿå°±æ²¡æœ‰å†å»ç»­ç­¾ã€‚è€Œå½“æˆ‘æƒ³é‡æ–°å¯ç”¨è¿™å¥—åŒæ­¥æ–¹æ¡ˆæ—¶ï¼Œå´å‘ç°å½“æ—¶ä½¿ç”¨çš„åä¸ºäº‘å»‰ä»·æœåŠ¡å™¨ï¼ˆä»… 1GB å†…å­˜ï¼‰å¡é¡¿ä¸¥é‡ï¼Œè¿ SSH ç™»å½•éƒ½æˆé—®é¢˜ã€‚å³ä¾¿é‡å¯ç³»ç»Ÿï¼Œæ€§èƒ½ä¹Ÿæ²¡æœ‰å¥½è½¬ï¼Œäºæ˜¯è¿™ä»¶äº‹ä¾¿è¢«æˆ‘æç½®äº†ä¸‹æ¥ã€‚</p><p>ç›´åˆ°æœ€è¿‘ï¼Œæˆ‘å†æ¬¡æ„Ÿå—åˆ° Obsidian ä¸ Zotero å¤šç«¯åŒæ­¥çš„å¼ºçƒˆéœ€æ±‚ã€‚æ°å¥½è¿™æ®µæ—¶é—´æˆ‘ä¹Ÿæ·±å…¥å­¦ä¹ äº† Docker çš„ä½¿ç”¨ï¼Œä¾¿æƒ³åˆ°æˆ–è®¸å¯ä»¥é€šè¿‡ Docker æ¥éƒ¨ç½² WebDAVã€‚é€šè¿‡å®¹å™¨åŒ–éƒ¨ç½²ï¼Œæ—¢å¯ä»¥ç®€åŒ–é…ç½®æµç¨‹ï¼Œåˆèƒ½ä¿è¯æœªæ¥è¿ç§»æˆ–é‡å»ºæ—¶çš„å¤ç”¨æ€§ï¼Œå¤§å¤§æå‡æ•ˆç‡ã€‚</p><p>äºæ˜¯ï¼Œæˆ‘é€‰æ‹©ä½¿ç”¨äº†ç°æˆçš„ WebDAV Docker é•œåƒï¼Œå¹¶å°†æœåŠ¡å™¨è¿ç§»åˆ°äº†è…¾è®¯äº‘çš„æµ·å¤–èŠ‚ç‚¹ã€‚é€šè¿‡è´­ä¹°å»‰ä»·è½»é‡åŒ–åŸŸåå’Œæµ·å¤– IPï¼Œæˆ‘å¯ä»¥åœ¨æ— éœ€å¤‡æ¡ˆçš„æƒ…å†µä¸‹æ­£å¸¸ä½¿ç”¨åŸŸåè®¿é—®ã€‚æ›´ä»¤äººæ¬£å–œçš„æ˜¯ï¼Œè¿™ä¸€æ¬¡æˆ‘é€šè¿‡è‡ªåŠ¨åŒ–å·¥å…·é…ç½®äº† HTTPSï¼ŒSSL è¯ä¹¦å¯ä»¥è‡ªåŠ¨ç»­ç­¾ï¼Œå½»åº•è§£å†³äº†ä¸Šä¸€æ¬¡çš„ç—›ç‚¹ã€‚</p><p>è¿™æ¬¡éƒ¨ç½²è¿‡ç¨‹æ•´ä½“é¡ºåˆ©è®¸å¤šï¼Œä½†ä¸­é€”ä»ç„¶è¸©äº†ä¸€äº›å‘ã€‚å› æ­¤ï¼Œæˆ‘å†³å®šå°†æ•´ä¸ªè¿‡ç¨‹è®°å½•ä¸‹æ¥ï¼Œæ—¢æ˜¯å¯¹è‡ªå·±çš„æ€»ç»“ï¼Œä¹Ÿå¸Œæœ›èƒ½ä¸ºæœ‰ç±»ä¼¼éœ€æ±‚çš„æœ‹å‹æä¾›å‚è€ƒã€‚</p><h1 id="2-æ¦‚è¿°"><a href="#2-æ¦‚è¿°" class="headerlink" title="2. æ¦‚è¿°"></a>2. æ¦‚è¿°</h1><p>è¿™æ¬¡é…ç½®çš„åŸºäºDockerçš„WebDAVæ–‡ä»¶å…±äº«æœåŠ¡ï¼Œä¸»è¦æœ‰å¦‚ä¸‹ç‰¹ç‚¹ï¼š</p><ul><li>ä½¿ç”¨Traefikä½œä¸ºåå‘ä»£ç†å’ŒSSLè¯ä¹¦ç®¡ç†</li><li>éƒ¨ç½²åœ¨Dockerç¯å¢ƒä¸­</li></ul><br><h1 id="3-éƒ¨ç½²æŒ‡å—"><a href="#3-éƒ¨ç½²æŒ‡å—" class="headerlink" title="3. éƒ¨ç½²æŒ‡å—"></a>3. éƒ¨ç½²æŒ‡å—</h1><h2 id="3-1-å‰ææ¡ä»¶"><a href="#3-1-å‰ææ¡ä»¶" class="headerlink" title="3.1 å‰ææ¡ä»¶"></a>3.1 å‰ææ¡ä»¶</h2><ul><li>å·²å®‰è£…Dockerå’ŒDocker Compose</li><li>åŸŸåDNSå·²æ­£ç¡®è§£æåˆ°æœåŠ¡å™¨IP</li></ul><h2 id="3-2-é…ç½®è¯´æ˜"><a href="#3-2-é…ç½®è¯´æ˜" class="headerlink" title="3.2 é…ç½®è¯´æ˜"></a>3.2 é…ç½®è¯´æ˜</h2><p>ä¸»è¦çš„é…ç½®æ–‡ä»¶æœ‰ä¸‰ä¸ªï¼Œåˆ†åˆ«æ˜¯docker-compose.ymlã€traefik.tomlä»¥åŠ.envã€‚</p><ul><li><p><strong>docker-compose.yml</strong><br>ä¸»è¦è´Ÿè´£å®šä¹‰æ•´ä¸ªæœåŠ¡æ ˆçš„å®¹å™¨ç»„æˆå’Œç½‘ç»œé…ç½®ã€‚åŒ…æ‹¬æ¯ä¸ªæœåŠ¡ä½¿ç”¨çš„é•œåƒã€ç«¯å£æ˜ å°„ã€å·æŒ‚è½½ã€ç¯å¢ƒå˜é‡å¼•ç”¨ã€ä¾èµ–æœåŠ¡ç­‰ã€‚</p></li><li><p><strong>traefik.toml</strong><br>Traefik çš„ä¸»é…ç½®æ–‡ä»¶ï¼Œè´Ÿè´£å®šä¹‰ Traefik æœ¬èº«çš„è¡Œä¸ºã€‚ä¾‹å¦‚æ˜¯å¦å¯ç”¨ Web UIã€ç›‘å¬å“ªäº› entrypointsï¼ˆå¦‚ HTTP/HTTPSï¼‰ã€è¯ä¹¦è‡ªåŠ¨ç”³è¯·ï¼ˆLetâ€™s Encryptï¼‰æ–¹å¼ã€æ—¥å¿—è¾“å‡ºçº§åˆ«ç­‰ã€‚</p></li><li><p><strong>.env</strong><br>ç”¨äºå­˜æ”¾ç¯å¢ƒå˜é‡ï¼Œä¾› docker-compose.yml ä¸­å¼•ç”¨ã€‚è¿™æ ·å¯ä»¥å®ç°é…ç½®çš„çµæ´»ç®¡ç†å’Œç‰ˆæœ¬æ§åˆ¶çš„å®‰å…¨æ€§ï¼Œé¿å…åœ¨ compose æ–‡ä»¶ä¸­ç¡¬ç¼–ç æ•æ„Ÿä¿¡æ¯ï¼ˆå¦‚å¯†ç ã€åŸŸåã€ç«¯å£ç­‰ï¼‰ã€‚</p></li></ul><blockquote><p><strong>æ³¨æ„</strong>ï¼šéœ€è¦æ‰‹åŠ¨ä¿®æ”¹ <code>traefik.toml</code>ä¸­çš„é‚®ç®±åœ°å€ï¼Œå› ä¸ºtraefik.toml ä¸æ”¯æŒä½¿ç”¨ .env æ–‡ä»¶ä¸­çš„ ACME_EMAIL å˜é‡ã€‚</p></blockquote><h2 id="3-3-docker-compose-yml-é…ç½®"><a href="#3-3-docker-compose-yml-é…ç½®" class="headerlink" title="3.3 docker-compose.yml é…ç½®"></a>3.3 docker-compose.yml é…ç½®</h2><p>ä¸‹é¢æ˜¯ <code>docker-compose.yml</code>ä¸­åº”è¯¥å¡«å†™çš„é…ç½®ï¼Œè¿™ä¸ªé…ç½®ç»è¿‡å¤šæ¬¡ä¿®æ”¹ï¼ŒæŒ‰ç…§æ“ä½œä¸€æ­¥æ­¥ä¸‹æ¥ï¼Œæ˜¯å¯ä»¥ç›´æ¥è·‘é€šçš„ã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br></pre></td><td class="code"><pre><span class="line">version: <span class="string">'3'</span></span><br><span class="line"><span class="comment"># See https://docs.docker.com/compose/overview/ for more information.</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># If you make changes to this file or any related files, apply them by</span></span><br><span class="line"><span class="comment"># navigating to the directory that holds this file and run this as root:</span></span><br><span class="line"><span class="comment">#   docker-compose down; docker-compose up -d</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Create two networks: one for front-end containers that we'll make</span></span><br><span class="line"><span class="comment"># publicly accessible to the internet, and one for private back-end.</span></span><br><span class="line">networks:</span><br><span class="line">  frontend:</span><br><span class="line">    name: webdav_frontend  <span class="comment"># Explicitly set network name</span></span><br><span class="line">  backend:</span><br><span class="line">    name: webdav_backend  <span class="comment"># Explicitly set network name</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Create persistent Docker volumes to preserve important data.</span></span><br><span class="line"><span class="comment"># We don't want our data to be lost when restarting containers.</span></span><br><span class="line">volumes:</span><br><span class="line">  vol-webdav:</span><br><span class="line"></span><br><span class="line"><span class="comment"># Create our containers.</span></span><br><span class="line">services:</span><br><span class="line">  <span class="comment"># Traefik is a reverse proxy. It handles SSL and passes traffic to</span></span><br><span class="line">  <span class="comment"># Docker containers via rules you define in docker-compose labels.</span></span><br><span class="line">  <span class="comment"># Its dashboard is at http://example.com/traefik/ (behind a login).</span></span><br><span class="line">  traefik:</span><br><span class="line">    <span class="comment"># https://hub.docker.com/_/traefik/</span></span><br><span class="line">    image: ${BASE_IMAGE_URL}/traefik:latest</span><br><span class="line">    command: </span><br><span class="line">      <span class="comment"># --api --docker --acme.email="${ACME_EMAIL}"</span></span><br><span class="line">      - <span class="string">"--api.dashboard=true"</span></span><br><span class="line">      - <span class="string">"--providers.docker=true"</span></span><br><span class="line">      - <span class="string">"--providers.docker.exposedbydefault=false"</span></span><br><span class="line">      - <span class="string">"--entrypoints.web.address=:80"</span></span><br><span class="line">      - <span class="string">"--entrypoints.websecure.address=:443"</span></span><br><span class="line">      - <span class="string">"--certificatesresolvers.letsencrypt.acme.httpchallenge=true"</span></span><br><span class="line">      - <span class="string">"--certificatesresolvers.letsencrypt.acme.httpchallenge.entrypoint=web"</span></span><br><span class="line">      - <span class="string">"--certificatesresolvers.letsencrypt.acme.email=${ACME_EMAIL}"</span></span><br><span class="line">      - <span class="string">"--certificatesresolvers.letsencrypt.acme.storage=/acme.json"</span></span><br><span class="line">    restart: always</span><br><span class="line">    networks:</span><br><span class="line">      - backend</span><br><span class="line">      - frontend</span><br><span class="line">    volumes:</span><br><span class="line">      - /var/run/docker.sock:/var/run/docker.sock <span class="comment"># Access to Docker</span></span><br><span class="line">      - ./traefik.toml:/traefik.toml              <span class="comment"># Traefik configuration</span></span><br><span class="line">      - ./acme.json:/acme.json                    <span class="comment"># SSL certificates</span></span><br><span class="line">    ports:</span><br><span class="line">      <span class="comment"># Map port 80 and 443 on the host to this container.</span></span><br><span class="line">      - <span class="string">"801:80"</span></span><br><span class="line">      - <span class="string">"4431:443"</span></span><br><span class="line">    labels:</span><br><span class="line">      <span class="comment"># - "traefik.docker.network=webdav_frontend"</span></span><br><span class="line">      <span class="comment"># - "traefik.enable=true"</span></span><br><span class="line">      <span class="comment"># - "traefik.frontend.rule=Host:${TRAEFIK_DOMAINS}; PathPrefixStrip:/traefik"</span></span><br><span class="line">      <span class="comment"># - "traefik.port=8080"</span></span><br><span class="line">      <span class="comment"># - "traefik.protocol=http"</span></span><br><span class="line">      <span class="comment"># # Remove next line to disable login prompt for the dashboard.</span></span><br><span class="line">      <span class="comment"># - "traefik.frontend.auth.basic=${BASIC_AUTH}"</span></span><br><span class="line"></span><br><span class="line">      <span class="comment"># - "traefik.enable=true"</span></span><br><span class="line">      <span class="comment"># - "traefik.http.routers.webdav.rule=Host(`eggabc.site`)"</span></span><br><span class="line">      <span class="comment"># - "traefik.http.routers.webdav.entrypoints=websecure"</span></span><br><span class="line">      <span class="comment"># - "traefik.http.routers.webdav.tls.certresolver=letsencrypt"</span></span><br><span class="line">      <span class="comment"># - "traefik.http.services.webdav.loadbalancer.server.port=80"</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        - <span class="string">"traefik.enable=true"</span></span><br><span class="line">        - <span class="string">"traefik.http.routers.dashboard.rule=Host(`${TRAEFIK_DOMAINS}`)"</span></span><br><span class="line">        - <span class="string">"traefik.http.routers.dashboard.service=api@internal"</span></span><br><span class="line">        - <span class="string">"traefik.http.routers.dashboard.entrypoints=websecure"</span></span><br><span class="line">        - <span class="string">"traefik.http.routers.dashboard.tls.certresolver=letsencrypt"</span></span><br><span class="line">        - <span class="string">"traefik.http.routers.dashboard.middlewares=auth"</span></span><br><span class="line">        - <span class="string">"traefik.http.middlewares.auth.basicauth.users=${BASIC_AUTH}"</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Watchtower detects if any linked containers have an new image</span></span><br><span class="line">  <span class="comment"># available, automatically updating &amp; restarting them if needed.</span></span><br><span class="line">  <span class="comment"># watchtower:</span></span><br><span class="line">  <span class="comment">#   # https://hub.docker.com/r/centurylink/watchtower/</span></span><br><span class="line">  <span class="comment">#   image: v2tec/watchtower:latest</span></span><br><span class="line">  <span class="comment">#   # https://github.com/v2tec/watchtower#options</span></span><br><span class="line">  <span class="comment">#   # This schedule applies updates (if available) at midnight.</span></span><br><span class="line">  <span class="comment">#   command: --cleanup --schedule "0 0 0 * * *"</span></span><br><span class="line">  <span class="comment">#   restart: always</span></span><br><span class="line">  <span class="comment">#   volumes:</span></span><br><span class="line">  <span class="comment">#     - /var/run/docker.sock:/var/run/docker.sock</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># The main WebDAV container.</span></span><br><span class="line">  webdav:</span><br><span class="line">    <span class="comment"># https://hub.docker.com/r/bytemark/webdav/</span></span><br><span class="line">    image: ${BASE_IMAGE_URL}/bytemark/webdav</span><br><span class="line">    restart: always</span><br><span class="line">    networks:</span><br><span class="line">      - frontend</span><br><span class="line">    volumes:</span><br><span class="line">      <span class="comment"># - ./user.passwd:/user.passwd</span></span><br><span class="line">      - <span class="built_in">type</span>: bind</span><br><span class="line">        source: ./user.passwd</span><br><span class="line">        target: /user.passwd</span><br><span class="line">        read_only: true</span><br><span class="line">      - vol-webdav:/var/lib/dav</span><br><span class="line">    environment:</span><br><span class="line">      SERVER_NAMES: ${WEBDAV_DOMAINS}</span><br><span class="line">      LOCATION: ${WEBDAV_LOCATION}</span><br><span class="line">    labels:</span><br><span class="line">      <span class="comment"># - "traefik.docker.network=webdav_frontend"</span></span><br><span class="line">      <span class="comment"># - "traefik.enable=true"</span></span><br><span class="line">      <span class="comment"># - "traefik.frontend.rule=Host:${WEBDAV_DOMAINS}"</span></span><br><span class="line">      <span class="comment"># - "traefik.port=80"</span></span><br><span class="line">      <span class="comment"># - "traefik.protocol=http"</span></span><br><span class="line">      - <span class="string">"traefik.enable=true"</span></span><br><span class="line">      - <span class="string">"traefik.http.routers.webdav.rule=Host(`${WEBDAV_DOMAINS}`) &amp;&amp; PathPrefix(`${WEBDAV_LOCATION}`)"</span></span><br><span class="line">      - <span class="string">"traefik.http.routers.webdav.entrypoints=websecure"</span></span><br><span class="line">      - <span class="string">"traefik.http.routers.webdav.tls.certresolver=letsencrypt"</span></span><br><span class="line">      - <span class="string">"traefik.http.services.webdav.loadbalancer.server.port=80"</span></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><h2 id="3-4-Traefik-é…ç½®"><a href="#3-4-Traefik-é…ç½®" class="headerlink" title="3.4 Traefik é…ç½®"></a>3.4 Traefik é…ç½®</h2><h3 id="3-4-1-æ–°å»º-acme-json-æ–‡ä»¶"><a href="#3-4-1-æ–°å»º-acme-json-æ–‡ä»¶" class="headerlink" title="3.4.1 æ–°å»º  acme.json æ–‡ä»¶"></a>3.4.1 æ–°å»º  acme.json æ–‡ä»¶</h3><p> Traefik éœ€è¦ä¸€ä¸ª JSON æ–‡ä»¶ä¿å­˜è¯ä¹¦ä¿¡æ¯ï¼Œè¯·åœ¨æ ¹ç›®å½•ä¸‹æ–°å»ºè¯¥ç©ºæ–‡ä»¶ï¼Œå¹¶è®¾ç½®æƒé™ï¼š</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">touch</span> acme.json</span><br><span class="line"><span class="built_in">chmod</span> 600 acme.json</span><br></pre></td></tr></tbody></table></figure><h3 id="3-4-2-åˆ›å»º-traefik-toml-æ–‡ä»¶ï¼Œå¹¶æ·»åŠ å¦‚ä¸‹å†…å®¹ï¼š"><a href="#3-4-2-åˆ›å»º-traefik-toml-æ–‡ä»¶ï¼Œå¹¶æ·»åŠ å¦‚ä¸‹å†…å®¹ï¼š" class="headerlink" title="3.4.2 åˆ›å»º traefik.toml æ–‡ä»¶ï¼Œå¹¶æ·»åŠ å¦‚ä¸‹å†…å®¹ï¼š"></a>3.4.2 åˆ›å»º traefik.toml æ–‡ä»¶ï¼Œå¹¶æ·»åŠ å¦‚ä¸‹å†…å®¹ï¼š</h3><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">[global]</span><br><span class="line">  checkNewVersion = <span class="literal">false</span></span><br><span class="line">  sendAnonymousUsage = <span class="literal">false</span></span><br><span class="line"></span><br><span class="line">[entryPoints]</span><br><span class="line">  [entryPoints.web]</span><br><span class="line">    address = <span class="string">":80"</span></span><br><span class="line">  [entryPoints.websecure]</span><br><span class="line">    address = <span class="string">":443"</span></span><br><span class="line"></span><br><span class="line">[api]</span><br><span class="line">  dashboard = <span class="literal">true</span></span><br><span class="line">  insecure = <span class="literal">false</span></span><br><span class="line"></span><br><span class="line">[providers]</span><br><span class="line">  [providers.docker]</span><br><span class="line">    endpoint = <span class="string">"unix:///var/run/docker.sock"</span></span><br><span class="line">    exposedByDefault = <span class="literal">false</span></span><br><span class="line">    watch = <span class="literal">true</span></span><br><span class="line">    network = <span class="string">"webdav_frontend"</span></span><br><span class="line"></span><br><span class="line">[certificatesResolvers.letsencrypt]</span><br><span class="line">  [certificatesResolvers.letsencrypt.acme]</span><br><span class="line">    email = <span class="string">"your_email_address"</span></span><br><span class="line">    storage = <span class="string">"acme.json"</span></span><br><span class="line">    [certificatesResolvers.letsencrypt.acme.httpChallenge]</span><br><span class="line">      entryPoint = <span class="string">"web"</span></span><br><span class="line"></span><br><span class="line">[<span class="built_in">log</span>]</span><br><span class="line">  level = <span class="string">"INFO"</span></span><br></pre></td></tr></tbody></table></figure><p>æç¤ºï¼š éœ€è¦å°† <code>your_email_address</code> æ›¿æ¢ä¸ºä½ è‡ªå·±çš„é‚®ç®±åœ°å€ã€‚</p><h2 id="3-5-é…ç½®ç¯å¢ƒå˜é‡"><a href="#3-5-é…ç½®ç¯å¢ƒå˜é‡" class="headerlink" title="3.5 é…ç½®ç¯å¢ƒå˜é‡"></a>3.5 é…ç½®ç¯å¢ƒå˜é‡</h2><h3 id="3-5-1-è®¾ç½®åŸºæœ¬è®¤è¯"><a href="#3-5-1-è®¾ç½®åŸºæœ¬è®¤è¯" class="headerlink" title="3.5.1 è®¾ç½®åŸºæœ¬è®¤è¯"></a>3.5.1 è®¾ç½®åŸºæœ¬è®¤è¯</h3><ul><li>ä½¿ç”¨ <code>htpasswd</code> å‘½ä»¤ç”Ÿæˆç”¨æˆ·å¯†ç æ–‡ä»¶ <code>user.passwd</code>ï¼š</li></ul><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">htpasswd -c user.passwd username</span><br></pre></td></tr></tbody></table></figure><blockquote><p>æç¤ºï¼šå¦‚æœç³»ç»Ÿä¸­æ²¡æœ‰å®‰è£… htpasswdï¼Œå¯é€šè¿‡å®‰è£… apache2-utilsï¼ˆDebian/Ubuntuï¼‰æˆ– httpd-toolsï¼ˆCentOSï¼‰è·å¾—è¯¥å‘½ä»¤ã€‚</p></blockquote><ul><li>è®¾ç½®æ–‡ä»¶æƒé™<br>è®¾ç½® user.passwd æ–‡ä»¶æƒé™ä¸º 644 ï¼ˆä¸å®‰å…¨ï¼Œä¸´æ—¶å¿«é€Ÿè§£å†³æ–¹æ¡ˆï¼‰ï¼š</li></ul><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">chmod</span> 644 user.passwd</span><br></pre></td></tr></tbody></table></figure><p>ç„¶åå°†ç”Ÿæˆçš„å“ˆå¸Œå¯†ç å¤åˆ¶åˆ° .env æ–‡ä»¶ä¸­çš„ BASIC_AUTH å˜é‡ä¸­ã€‚</p><h3 id="3-5-2-åˆ›å»º-envæ–‡ä»¶ï¼Œå¹¶æ ¹æ®æç¤ºè¿›è¡Œè®¾ç½®"><a href="#3-5-2-åˆ›å»º-envæ–‡ä»¶ï¼Œå¹¶æ ¹æ®æç¤ºè¿›è¡Œè®¾ç½®" class="headerlink" title="3.5.2 åˆ›å»º .envæ–‡ä»¶ï¼Œå¹¶æ ¹æ®æç¤ºè¿›è¡Œè®¾ç½®"></a>3.5.2 åˆ›å»º <code>.env</code>æ–‡ä»¶ï¼Œå¹¶æ ¹æ®æç¤ºè¿›è¡Œè®¾ç½®</h3><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Docker Compose can read environment variables from this file.</span></span><br><span class="line"><span class="comment"># See https://docs.docker.com/compose/env-file/</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Put admin areas behind a login prompt, with username and password</span></span><br><span class="line"><span class="comment"># specified here. Run `htpasswd -n admin` to create a password hash</span></span><br><span class="line"><span class="comment"># for user "admin". Paste the output here. SSL strongly recommended.</span></span><br><span class="line"><span class="comment"># ä½¿ç”¨ `htpasswd -n username` å‘½ä»¤ç”Ÿæˆå¯†ç å“ˆå¸Œã€‚</span></span><br><span class="line">BASIC_AUTH=</span><br><span class="line"></span><br><span class="line"><span class="comment"># Let's Encrypt needs an email address for registration.</span></span><br><span class="line"><span class="comment"># é…ç½® Let's Encrypt çš„æ³¨å†Œé‚®ç®±ï¼Œä¸éœ€è¦åœ¨ Let's Encrypt ç½‘ç«™ä¸Šæ³¨å†Œã€‚</span></span><br><span class="line">ACME_EMAIL=</span><br><span class="line"><span class="comment"># The Traefik dashboard will be available at these domains.</span></span><br><span class="line"><span class="comment"># The URL is http://example.com/traefik/</span></span><br><span class="line"><span class="comment"># You'll need to fill in BASIC_AUTH above.</span></span><br><span class="line"><span class="comment"># Traefik çš„ä»ªè¡¨ç›˜å°†å¯é€šè¿‡è¿™äº›åŸŸåè®¿é—®ï¼Œè¦ç¡®ä¿è¯¥åŸŸåèƒ½å¤Ÿè¢«è§£æï¼Œä¸ç„¶ä¼šæŠ¥é”™</span></span><br><span class="line">TRAEFIK_DOMAINS=</span><br><span class="line"><span class="comment"># Your WebDAV site will be available at these domains. Every domain</span></span><br><span class="line"><span class="comment"># needs DNS records pointing to your server for SSL to work.</span></span><br><span class="line"><span class="comment"># ä½ çš„ WebDAV ç«™ç‚¹å°†å¯é€šè¿‡è¿™äº›åŸŸåè®¿é—®ã€‚æ¯ä¸ªåŸŸåéƒ½éœ€è¦ DNS è®°å½•æŒ‡å‘ä½ çš„æœåŠ¡å™¨ï¼Œä»¥ä¾¿ SSL å·¥ä½œã€‚</span></span><br><span class="line">WEBDAV_DOMAINS=</span><br><span class="line"></span><br><span class="line"><span class="comment"># Set the URL path where you want your WebDAV site to be.</span></span><br><span class="line"><span class="comment"># è®¾ç½® WebDAV ç«™ç‚¹çš„ URL è·¯å¾„ï¼Œè¦ä»¥ æ–œæ ç»“å°¾ï¼Œå¦åˆ™æŠ¥é”™</span></span><br><span class="line">WEBDAV_LOCATION=/webdav/</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#è®¾ç½®dockeré•œåƒçš„åœ°å€</span></span><br><span class="line">BASE_IMAGE_URL=docker.1ms.run</span><br></pre></td></tr></tbody></table></figure><blockquote><p>æç¤ºï¼šåœ¨ä¸Šé¢çš„é…ç½®ä¸­ï¼Œç­‰å·å³è¾¹çš„å˜é‡å€¼éƒ½ä¸è¦åŠ å¼•å·ï¼Œç›´æ¥å¡«å†™å˜é‡å€¼å³å¯ã€‚</p></blockquote><h1 id="4-æœåŠ¡ç®¡ç†"><a href="#4-æœåŠ¡ç®¡ç†" class="headerlink" title="4. æœåŠ¡ç®¡ç†"></a>4. æœåŠ¡ç®¡ç†</h1><table><thead><tr><th>æ“ä½œ</th><th>å‘½ä»¤</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>å¯åŠ¨æœåŠ¡</td><td><code>docker-compose up -d</code></td><td>åå°å¯åŠ¨æ‰€æœ‰å®¹å™¨</td></tr><tr><td>åœæ­¢æœåŠ¡</td><td><code>docker-compose down</code></td><td>åœæ­¢å¹¶ç§»é™¤æ‰€æœ‰å®¹å™¨</td></tr><tr><td>æŸ¥çœ‹æ—¥å¿—</td><td><code>docker-compose logs -f</code></td><td>å®æ—¶æŸ¥çœ‹å®¹å™¨æ—¥å¿—</td></tr><tr><td>æ›´æ–°æœåŠ¡</td><td><code>docker-compose pull &amp;&amp; docker-compose up -d</code></td><td>æ‹‰å–æœ€æ–°é•œåƒå¹¶é‡å¯æœåŠ¡</td></tr></tbody></table><h1 id="5-æ³¨æ„äº‹é¡¹"><a href="#5-æ³¨æ„äº‹é¡¹" class="headerlink" title="5. æ³¨æ„äº‹é¡¹"></a>5. æ³¨æ„äº‹é¡¹</h1><p>âš ï¸ <strong>é‡è¦æç¤º</strong>:</p><ul><li>é¦–æ¬¡å¯åŠ¨å¯èƒ½éœ€è¦å‡ åˆ†é’Ÿè·å–SSLè¯ä¹¦</li><li>ä¿®æ”¹é…ç½®åéœ€è¦é‡å¯æœåŠ¡ç”Ÿæ•ˆ</li><li>ç¡®ä¿<code>.env</code>å’Œ<code>user.passwd</code>æ–‡ä»¶å·²æ­£ç¡®é…ç½®</li><li>å®šæœŸå¤‡ä»½<code>acme.json</code>æ–‡ä»¶ä»¥é˜²æ­¢è¯ä¹¦ä¸¢å¤±</li><li>å»ºè®®ä½¿ç”¨å¼ºå¯†ç ä¿æŠ¤WebDAVè®¿é—®</li></ul>]]></content>
      
      
      <categories>
          
          <category> è¿ç»´ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> webdav, docker, obsidian, zotero </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>git_team_collab_workflow</title>
      <link href="/2025/05/14/git-team-collab-workflow/"/>
      <url>/2025/05/14/git-team-collab-workflow/</url>
      
        <content type="html"><![CDATA[<h1 id="ğŸ› ï¸-å›¢é˜Ÿ-Git-åä½œæµç¨‹è§„èŒƒ"><a href="#ğŸ› ï¸-å›¢é˜Ÿ-Git-åä½œæµç¨‹è§„èŒƒ" class="headerlink" title="ğŸ› ï¸ å›¢é˜Ÿ Git åä½œæµç¨‹è§„èŒƒ"></a>ğŸ› ï¸ å›¢é˜Ÿ Git åä½œæµç¨‹è§„èŒƒ</h1><p>ä¸ºç¡®ä¿å¤šäººåä½œå¼€å‘çš„é«˜æ•ˆä¸è§„èŒƒï¼Œå›¢é˜Ÿç»Ÿä¸€é‡‡ç”¨å¦‚ä¸‹ Git å·¥ä½œæµæµç¨‹ï¼Œ è®°å½•å¦‚ä¸‹ï¼š</p><h2 id="ğŸ› ï¸-0-å…‹éš†è¿œç¨‹ä»“åº“"><a href="#ğŸ› ï¸-0-å…‹éš†è¿œç¨‹ä»“åº“" class="headerlink" title="ğŸ› ï¸ 0. å…‹éš†è¿œç¨‹ä»“åº“"></a>ğŸ› ï¸ 0. å…‹éš†è¿œç¨‹ä»“åº“</h2><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> git@github.com:xxx.git</span><br></pre></td></tr></tbody></table></figure><h2 id="ğŸš€-1-åˆ›å»ºä¸ªäººå¼€å‘åˆ†æ”¯"><a href="#ğŸš€-1-åˆ›å»ºä¸ªäººå¼€å‘åˆ†æ”¯" class="headerlink" title="ğŸš€ 1. åˆ›å»ºä¸ªäººå¼€å‘åˆ†æ”¯"></a>ğŸš€ 1. åˆ›å»ºä¸ªäººå¼€å‘åˆ†æ”¯</h2><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git checkout -b &lt;your_branch_name&gt;</span><br></pre></td></tr></tbody></table></figure><hr><h2 id="ğŸ› ï¸-2-æœ¬åœ°å¼€å‘ä¸æäº¤"><a href="#ğŸ› ï¸-2-æœ¬åœ°å¼€å‘ä¸æäº¤" class="headerlink" title="ğŸ› ï¸ 2. æœ¬åœ°å¼€å‘ä¸æäº¤"></a>ğŸ› ï¸ 2. æœ¬åœ°å¼€å‘ä¸æäº¤</h2><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git diff                   <span class="comment"># æŸ¥çœ‹å˜æ›´ï¼ˆå¯é€‰ï¼‰</span></span><br><span class="line">git add &lt;file&gt;             <span class="comment"># æ·»åŠ åˆ°æš‚å­˜åŒº</span></span><br><span class="line">git commit -m <span class="string">"è¯´æ˜å†…å®¹"</span>    <span class="comment"># æäº¤</span></span><br></pre></td></tr></tbody></table></figure><hr><h2 id="â˜ï¸-3-æ¨é€åˆ°è¿œç¨‹ä»“åº“"><a href="#â˜ï¸-3-æ¨é€åˆ°è¿œç¨‹ä»“åº“" class="headerlink" title="â˜ï¸ 3. æ¨é€åˆ°è¿œç¨‹ä»“åº“"></a>â˜ï¸ 3. æ¨é€åˆ°è¿œç¨‹ä»“åº“</h2><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git push origin &lt;your_branch_name&gt;</span><br></pre></td></tr></tbody></table></figure><hr><h2 id="ğŸ”„-4-åŒæ­¥ä¸»åˆ†æ”¯æœ€æ–°ä»£ç "><a href="#ğŸ”„-4-åŒæ­¥ä¸»åˆ†æ”¯æœ€æ–°ä»£ç " class="headerlink" title="ğŸ”„ 4. åŒæ­¥ä¸»åˆ†æ”¯æœ€æ–°ä»£ç "></a>ğŸ”„ 4. åŒæ­¥ä¸»åˆ†æ”¯æœ€æ–°ä»£ç </h2><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">git checkout main</span><br><span class="line">git pull origin main       <span class="comment"># æ›´æ–°ä¸»åˆ†æ”¯</span></span><br><span class="line">git checkout &lt;your_branch_name&gt;</span><br><span class="line">git rebase main            <span class="comment"># å°†ä¸»åˆ†æ”¯æ”¹åŠ¨åº”ç”¨åˆ°å½“å‰åˆ†æ”¯</span></span><br></pre></td></tr></tbody></table></figure><p>å¦‚æœ‰å†²çªï¼Œè§£å†³åæ‰§è¡Œï¼š</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git add &lt;conflicted_files&gt;</span><br><span class="line">git rebase --<span class="built_in">continue</span></span><br></pre></td></tr></tbody></table></figure><blockquote><p>âš ï¸ æœ€åå¼ºåˆ¶æ¨é€æ›´æ–°åˆ†æ”¯ï¼š</p></blockquote><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git push origin &lt;your_branch_name&gt; -f</span><br></pre></td></tr></tbody></table></figure><hr><h2 id="ğŸ”-5-å‘èµ·-Pull-Request"><a href="#ğŸ”-5-å‘èµ·-Pull-Request" class="headerlink" title="ğŸ” 5. å‘èµ· Pull Request"></a>ğŸ” 5. å‘èµ· Pull Request</h2><ul><li>GitHub ç‚¹å‡» <strong>â€œCompare &amp; pull requestâ€</strong></li><li>è®¾ç½®ï¼š<ul><li>ç›®æ ‡åˆ†æ”¯ï¼š<code>main</code></li><li>æºåˆ†æ”¯ï¼šä½ çš„å¼€å‘åˆ†æ”¯</li></ul></li><li>å¡«å†™è¯´æ˜ï¼Œç‚¹å‡» <strong>â€œCreate pull requestâ€</strong></li></ul><hr><h2 id="âœ…-6-å®¡æ ¸ä¸åˆå¹¶"><a href="#âœ…-6-å®¡æ ¸ä¸åˆå¹¶" class="headerlink" title="âœ… 6. å®¡æ ¸ä¸åˆå¹¶"></a>âœ… 6. å®¡æ ¸ä¸åˆå¹¶</h2><ul><li>å›¢é˜Ÿæˆå‘˜å®¡æŸ¥ä»£ç </li><li>å®¡æ ¸é€šè¿‡åï¼Œä½¿ç”¨ <strong>Squash and merge</strong> æ–¹å¼åˆå¹¶</li></ul><blockquote><p>âœ… åˆå¹¶æˆä¸€æ¬¡æäº¤ï¼Œä¿æŒä¸»åˆ†æ”¯æ•´æ´</p></blockquote><hr><h2 id="ğŸ§¹-7-åˆ é™¤åˆå¹¶åçš„åˆ†æ”¯"><a href="#ğŸ§¹-7-åˆ é™¤åˆå¹¶åçš„åˆ†æ”¯" class="headerlink" title="ğŸ§¹ 7. åˆ é™¤åˆå¹¶åçš„åˆ†æ”¯"></a>ğŸ§¹ 7. åˆ é™¤åˆå¹¶åçš„åˆ†æ”¯</h2><h3 id="è¿œç¨‹åˆ é™¤ï¼š"><a href="#è¿œç¨‹åˆ é™¤ï¼š" class="headerlink" title="è¿œç¨‹åˆ é™¤ï¼š"></a>è¿œç¨‹åˆ é™¤ï¼š</h3><ul><li>åœ¨ GitHub ä¸Šç‚¹å‡» <strong>â€œDelete branchâ€</strong></li></ul><h3 id="æœ¬åœ°åˆ é™¤ï¼š"><a href="#æœ¬åœ°åˆ é™¤ï¼š" class="headerlink" title="æœ¬åœ°åˆ é™¤ï¼š"></a>æœ¬åœ°åˆ é™¤ï¼š</h3><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git checkout main</span><br><span class="line">git branch -D &lt;your_branch_name&gt;</span><br></pre></td></tr></tbody></table></figure><hr><h2 id="ğŸ”„-8-åŒæ­¥ä¸»åˆ†æ”¯"><a href="#ğŸ”„-8-åŒæ­¥ä¸»åˆ†æ”¯" class="headerlink" title="ğŸ”„ 8. åŒæ­¥ä¸»åˆ†æ”¯"></a>ğŸ”„ 8. åŒæ­¥ä¸»åˆ†æ”¯</h2><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git pull origin main</span><br></pre></td></tr></tbody></table></figure><hr><h2 id="ğŸ“Œ-å»ºè®®"><a href="#ğŸ“Œ-å»ºè®®" class="headerlink" title="ğŸ“Œ å»ºè®®"></a>ğŸ“Œ å»ºè®®</h2><ul><li>é¿å…å¤šäººæ“ä½œåŒä¸€åˆ†æ”¯</li><li>æ¯æ¬¡å¼€å‘ä»»åŠ¡ä½¿ç”¨æ–°åˆ†æ”¯</li><li>åˆå¹¶å‰åŠ¡å¿…åŒæ­¥ä¸»åˆ†æ”¯ï¼Œè§£å†³å†²çª</li><li>æäº¤ä¿¡æ¯å»ºè®®è§„èŒƒå‘½åï¼Œå¦‚ï¼š<ul><li><code>feat: add login modal</code></li><li><code>fix: correct time format</code></li></ul></li></ul><hr><h2 id="ğŸ“š-å‚è€ƒèµ„æ–™"><a href="#ğŸ“š-å‚è€ƒèµ„æ–™" class="headerlink" title="ğŸ“š å‚è€ƒèµ„æ–™"></a>ğŸ“š å‚è€ƒèµ„æ–™</h2><p>-<a href="https://www.bilibili.com/video/BV19e4y1q7JJ/?spm_id_from=333.337.search-card.all.click&amp;vd_source=23a5f90103c28e0016184059a052d467">é«˜å¤©çš„æ•™ç¨‹</a></p>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹å¼€å‘ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> github </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æœ¬åœ°æ„å»ºdockeré•œåƒå¹¶ä¸Šä¼ è‡³é˜¿é‡Œäº‘é•œåƒæœåŠ¡ç«™</title>
      <link href="/2025/04/24/ben-di-gou-jian-docker-jing-xiang-bing-shang-chuan-zhi-a-li-yun-jing-xiang-fu-wu-zhan/"/>
      <url>/2025/04/24/ben-di-gou-jian-docker-jing-xiang-bing-shang-chuan-zhi-a-li-yun-jing-xiang-fu-wu-zhan/</url>
      
        <content type="html"><![CDATA[<p>æœ€è¿‘æ¯”èµ›éœ€è¦æ„å»º<code>docker</code>é•œåƒï¼Œä¸Šä¼ è‡³é˜¿é‡Œäº‘é•œåƒæœåŠ¡ç«™ï¼Œä»¥ä¾¿äºå®˜æ–¹å¤ç°æµ‹è¯„ï¼Œè¿™æ˜¯ä¸€ä¸ªç¹ççš„è¿‡ç¨‹ï¼Œä»¥åä¹Ÿä¼šç”¨åˆ°ï¼Œæ‰€ä»¥è®°å½•ä¸€ä¸‹ã€‚</p><p>ä¸»è¦åˆ†ä¸ºä»¥ä¸‹å‡ æ­¥ï¼š</p><p>1ï¼‰ å¼€é€šé˜¿é‡Œäº‘é•œåƒæœåŠ¡</p><p>2ï¼‰ åœ¨æœ¬åœ°ç”µè„‘æˆ–è€…æœåŠ¡å™¨ä¸Šé¢å®‰è£…docker</p><p>3ï¼‰ æ„å»ºdockeré•œåƒ</p><p>4ï¼‰ å°†æœ¬åœ° docker é•œåƒæ¨é€è‡³é˜¿é‡Œäº‘é•œåƒæœåŠ¡ç«™</p><p>5ï¼‰æœ¬åœ°ä¸€é”®é•œåƒåˆ›å»ºå’Œä¸Šä¼ è„šæœ¬</p><p>ä¸‹é¢ä¸ºè¯¦ç»†çš„æ­¥éª¤æè¿°ï¼š</p><h2 id="1ï¼‰-å¼€é€šé˜¿é‡Œäº‘é•œåƒæœåŠ¡"><a href="#1ï¼‰-å¼€é€šé˜¿é‡Œäº‘é•œåƒæœåŠ¡" class="headerlink" title="1ï¼‰ å¼€é€šé˜¿é‡Œäº‘é•œåƒæœåŠ¡"></a>1ï¼‰ å¼€é€šé˜¿é‡Œäº‘é•œåƒæœåŠ¡</h2><p>é˜¿é‡Œäº‘é•œåƒæœåŠ¡ç«™çš„å¼€é€šè¿‡ç¨‹æ¯”è¾ƒç¹çï¼Œæ ¹æ®<a href="https://www.datawhale.cn/activity/185/27/116?rankingPage=1">DataWhaleçš„æ•™ç¨‹</a>æ“ä½œå¦‚ä¸‹ï¼š</p><p>a. ç‚¹å‡»<a href="https://www.aliyun.com/product/acr">é“¾æ¥</a>å¹¶ç™»å½•é˜¿é‡Œäº‘è´¦å·</p><p><img src="https://raw.githubusercontent.com/Skylyong/i/main/20250424152224.png" alt="1. æ‰“å¼€ç®¡ç†æ§åˆ¶å°"></p><p>b. åˆ›å»ºä¸ªäººç‰ˆå®ä¾‹</p><p><img src="https://raw.githubusercontent.com/Skylyong/i/main/20250424152336.png" alt="img"></p><p>c. åˆ›å»ºå‘½åç©ºé—´</p><p><img src="https://raw.githubusercontent.com/Skylyong/i/main/20250424152445.png" alt="img"></p><p>d.  åˆ›å»ºé•œåƒä»“åº“</p><p>åˆ›å»ºé•œåƒä»“åº“æ—¶ï¼Œä»£ç æºé€‰æ‹©æœ¬åœ°é•œåƒä¸Šä¼ ï¼Œç„¶åä¼šè·³è½¬åˆ°åŸºæœ¬ä¿¡æ¯é¡µé¢ï¼ŒæŸ¥çœ‹æ“ä½œæŒ‡å—ï¼Œè¿™é‡Œå†™æ˜äº†ï¼Œå¦‚ä½•å°†æœ¬åœ°é•œåƒä¸Šä¼ åˆ°é•œåƒæœåŠ¡ç«™çš„è¯¦ç»†æ­¥å¥ã€‚</p><h2 id="2ï¼‰-åœ¨æœ¬åœ°ç”µè„‘æˆ–è€…æœåŠ¡å™¨ä¸Šé¢å®‰è£…docker"><a href="#2ï¼‰-åœ¨æœ¬åœ°ç”µè„‘æˆ–è€…æœåŠ¡å™¨ä¸Šé¢å®‰è£…docker" class="headerlink" title="2ï¼‰ åœ¨æœ¬åœ°ç”µè„‘æˆ–è€…æœåŠ¡å™¨ä¸Šé¢å®‰è£…docker"></a>2ï¼‰ åœ¨æœ¬åœ°ç”µè„‘æˆ–è€…æœåŠ¡å™¨ä¸Šé¢å®‰è£…docker</h2><p>æ­¤å¤„ç•¥ï¼Œè¯¦è§dockerå®˜ç½‘ã€‚</p><h2 id="3ï¼‰-æ„å»ºdockeré•œåƒ"><a href="#3ï¼‰-æ„å»ºdockeré•œåƒ" class="headerlink" title="3ï¼‰ æ„å»ºdockeré•œåƒ"></a>3ï¼‰ æ„å»ºdockeré•œåƒ</h2><p>a. æ„å»º <code>docker-file</code> æ–‡ä»¶</p><p>æ ¹æ®è‡ªå·±çš„éœ€æ±‚ç¼–è¾‘å¥½<code>docker-file</code>æ–‡ä»¶ï¼Œä»¥ä¸‹æ˜¯ä¸€ä¸ªç¤ºä¾‹ï¼š</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">FROM registry.cn-hangzhou.aliyuncs.com/sais-public/pytorch:2.0.0-py3.9.12-cuda11.8.0-u22.04</span><br><span class="line"></span><br><span class="line">ADD . /app</span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¾ç½®å·¥ä½œç›®å½•</span></span><br><span class="line">WORKDIR /app</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ›´æ–°pip</span></span><br><span class="line"></span><br><span class="line">RUN pip install --upgrade pip</span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¾ç½®pipå›½å†…æº</span></span><br><span class="line">RUN pip config <span class="built_in">set</span> global.index-url https://pypi.tuna.tsinghua.edu.cn/simple</span><br><span class="line"></span><br><span class="line">RUN pip install torch_scatter-2.1.1+pt20cu118-cp39-cp39-linux_x86_64.whl</span><br><span class="line"></span><br><span class="line"><span class="comment"># å®šä¹‰å®¹å™¨å¯åŠ¨æ—¶é»˜è®¤æ‰§è¡Œçš„å‘½ä»¤</span></span><br><span class="line">CMD [<span class="string">"sh"</span>, <span class="string">"/app/run.sh"</span>]</span><br></pre></td></tr></tbody></table></figure><p>b. æ‰§è¡Œæ„å»º<code>docker</code>é•œåƒçš„å‘½ä»¤ï¼š</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker build -t <span class="built_in">test</span>:v4 -f Dockerfile .</span><br></pre></td></tr></tbody></table></figure><p>c. æŸ¥çœ‹æ„å»ºå¥½çš„ <code>docker</code> é•œåƒ</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker images</span><br></pre></td></tr></tbody></table></figure><h2 id="4-å°†æœ¬åœ°-docker-é•œåƒæ¨é€è‡³é˜¿é‡Œäº‘é•œåƒæœåŠ¡ç«™"><a href="#4-å°†æœ¬åœ°-docker-é•œåƒæ¨é€è‡³é˜¿é‡Œäº‘é•œåƒæœåŠ¡ç«™" class="headerlink" title="4) å°†æœ¬åœ° docker é•œåƒæ¨é€è‡³é˜¿é‡Œäº‘é•œåƒæœåŠ¡ç«™"></a>4) å°†æœ¬åœ° docker é•œåƒæ¨é€è‡³é˜¿é‡Œäº‘é•œåƒæœåŠ¡ç«™</h2><p>æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ï¼Œä¸ºæœ¬åœ°é•œåƒæ‰“æ ‡ç­¾ï¼Œå¹¶ä¸”å°†æœ¬åœ°é•œåƒæ¨é€åˆ°é˜¿é‡Œäº‘é•œåƒæœåŠ¡ç«™ï¼ˆä¸‹é¢æ˜¯ä¸€ä¸ªç¤ºä¾‹ï¼Œå…·ä½“çš„å¯ä»¥åœ¨1.dæ­¥éª¤ â€œåˆ›å»ºé•œåƒä»“åº“-æ“ä½œæŒ‡å—â€ä¸­æŸ¥çœ‹ ï¼‰</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ docker login --username=[ç”¨æˆ·å] [é•œåƒç«™ç‚¹]</span><br><span class="line">$ docker tag [ImageId] [é•œåƒç«™ç‚¹]/[å‘½åç©ºé—´]/[é•œåƒä»“åº“å]:[é•œåƒç‰ˆæœ¬å·]</span><br><span class="line">$ docker push [é•œåƒç«™ç‚¹]/[å‘½åç©ºé—´]/[é•œåƒä»“åº“å]:[é•œåƒç‰ˆæœ¬å·]</span><br></pre></td></tr></tbody></table></figure><h2 id="5ï¼‰-æœ¬åœ°ä¸€é”®é•œåƒåˆ›å»ºå’Œä¸Šä¼ è„šæœ¬"><a href="#5ï¼‰-æœ¬åœ°ä¸€é”®é•œåƒåˆ›å»ºå’Œä¸Šä¼ è„šæœ¬" class="headerlink" title="5ï¼‰ æœ¬åœ°ä¸€é”®é•œåƒåˆ›å»ºå’Œä¸Šä¼ è„šæœ¬"></a>5ï¼‰ æœ¬åœ°ä¸€é”®é•œåƒåˆ›å»ºå’Œä¸Šä¼ è„šæœ¬</h2><p>ä¸ºäº†æ–¹ä¾¿ï¼Œä¸‹é¢ç»™å‡ºäº†<code>æœ¬åœ°ä¸€é”®é•œåƒåˆ›å»ºå’Œä¸Šä¼ è„šæœ¬</code>ç¤ºä¾‹ï¼š</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment"># dockerçš„æ ‡ç­¾</span></span><br><span class="line">TAG=<span class="variable">${1:-"v4"}</span></span><br><span class="line"><span class="comment"># dockerçš„ç”¨æˆ·åå’Œå¯†ç </span></span><br><span class="line">USER=<span class="string">""</span></span><br><span class="line">PASSWORD=<span class="string">""</span></span><br><span class="line"><span class="comment"># æ¨é€çš„dockerä»“åº“</span></span><br><span class="line">REGISTRY=<span class="string">"[é•œåƒç«™ç‚¹]/[å‘½åç©ºé—´]/[é•œåƒä»“åº“å]"</span></span><br><span class="line"><span class="comment"># ä½¿ç”¨å˜é‡è¿›è¡Œ Docker ç™»å½•</span></span><br><span class="line">docker login -u <span class="variable">$USER</span> -p <span class="variable">$PASSWORD</span> [é•œåƒç«™ç‚¹]</span><br><span class="line"><span class="comment"># æ‰“åŒ…ä»£ç </span></span><br><span class="line">docker build -t <span class="built_in">test</span>:v4 -f Dockerfile .</span><br><span class="line"><span class="comment"># ä¿®æ”¹é•œåƒ</span></span><br><span class="line">docker tag <span class="built_in">test</span>:v4 <span class="variable">$REGISTRY</span>:<span class="variable">$TAG</span></span><br><span class="line"><span class="comment"># æ¨é€é•œåƒ</span></span><br><span class="line">docker push <span class="variable">$REGISTRY</span>:<span class="variable">$TAG</span></span><br><span class="line"><span class="comment"># æ‰“å°ä¿¡æ¯</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"æ¨é€æˆåŠŸï¼Œè¯·åˆ°æ¯”èµ›å®˜æ–¹æäº¤ä½œå“"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"é•œåƒè·¯å¾„ï¼š<span class="variable">$REGISTRY</span>:<span class="variable">$TAG</span>"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"ç”¨æˆ·åï¼š<span class="variable">$USER</span> / å¯†ç ï¼š<span class="variable">$PASSWORD</span>"</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¸€é”®åŒ–è„šæœ¬æ‰“åŒ…ä½¿ç”¨ï¼š</span></span><br><span class="line"><span class="comment">## 1. å°†æ‰€æœ‰çš„ä»£ç  æ¨¡å‹ è¿è¡Œè„šæœ¬æ”¾åœ¨åŒä¸€ä¸ªæ–‡ä»¶å¤¹</span></span><br><span class="line"><span class="comment">## 2. ä¿®æ”¹ä¸Šè¿°è„šæœ¬ä¸­çš„ è´¦å· å¯†ç  ä»“åº“</span></span><br><span class="line"><span class="comment">## 3. æ‰§è¡Œæ¨é€è„šæœ¬ï¼šsh push.sh (é»˜è®¤tagä¸ºv1ï¼Œå¦‚éœ€è¦ä¿®æ”¹å¯å‘½ä»¤åæ·»åŠ ï¼Œå¦‚ï¼šsh push.sh v2)</span></span><br><span class="line"><span class="comment">## 4. ç­‰å¾…æˆåŠŸåŠæ‰“å°</span></span><br></pre></td></tr></tbody></table></figure><h2 id="å‚è€ƒé“¾æ¥"><a href="#å‚è€ƒé“¾æ¥" class="headerlink" title="å‚è€ƒé“¾æ¥"></a>å‚è€ƒé“¾æ¥</h2><p><a href="https://www.datawhale.cn/activity/185/27/116?rankingPage=1">Datawhaleå¼€é€šé˜¿é‡Œäº‘é•œåƒæœåŠ¡æ•™ç¨‹ </a></p><p>å®Œï¼ enjoy ğŸ˜„</p>]]></content>
      
      
      <categories>
          
          <category> çˆ¬å‘æ€»ç»“ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> docker </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å®‰è£…torch-scatteræ—¶é‡åˆ°çš„å‘</title>
      <link href="/2025/04/18/an-zhuang-torch-scatter-shi-yu-dao-de-keng/"/>
      <url>/2025/04/18/an-zhuang-torch-scatter-shi-yu-dao-de-keng/</url>
      
        <content type="html"><![CDATA[<p>ä»Šå¤©åœ¨ä½¿ç”¨ <code>pip</code> å®‰è£…<code> torch-scatter</code> åŒ…æ—¶æŠ¥é”™ï¼Œç„¶åä½¿ç”¨ <code>conda</code> æˆåŠŸå®‰è£…äº†ï¼Œä½†æ˜¯è¿è¡Œä»£ç çš„æ—¶å€™æŠ¥é”™ï¼Œå¹¶ä¸”æ˜¯ä¸€ä¸ªåº•å±‚çš„é”™è¯¯ã€‚</p><p>æŸ¥è¯¢ä¹‹åå‘ç°ï¼Œæ˜¯å› ä¸º<strong>åœ¨ä½¿ç”¨ <code>torch_scatter</code>ã€<code>torch_sparse</code>ã€<code>torch_cluster</code> ç­‰åŸºäº C++ çš„æ‰©å±•æ¨¡å—æ—¶ï¼Œå¦‚æœ <code>PyTorch</code> ç‰ˆæœ¬å’Œç³»ç»Ÿç¯å¢ƒä¸å®Œå…¨åŒ¹é…ï¼Œå°±å®¹æ˜“å‘ç”Ÿè¿™ç±»åº•å±‚ç¼–è¯‘å¤±è´¥ã€‚</strong></p><p>è§£å†³æ–¹æ³•æœ€ç¨³å®šä¹Ÿæœ€çœäº‹çš„æ–¹å¼æ˜¯<strong>ä¸è¦ä»æºç ç¼–è¯‘ torch_scatter</strong>ï¼Œè€Œæ˜¯ä½¿ç”¨é¢„ç¼–è¯‘å¥½çš„ <code>.whl</code> åŒ…è¿›è¡Œå®‰è£…ã€‚æ­¥éª¤å¦‚ä¸‹ï¼š</p><ol><li>ç¡®è®¤ <code>PyTorch</code> å’Œ <code>Python</code> ç‰ˆæœ¬</li></ol><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">python -c <span class="string">"import torch; print(torch.__version__)"</span></span><br><span class="line">python -V</span><br></pre></td></tr></tbody></table></figure><ol start="2"><li>è®¿é—® <a href="https://data.pyg.org/whl/">https://data.pyg.org/whl/</a> ä¸‹è½½å¯¹åº”ç‰ˆæœ¬çš„ <code>*.whl</code> åˆ°æœ¬åœ°</li></ol>  <img src="https://raw.githubusercontent.com/Skylyong/i/main/20250418231208.png" alt="image-20250418222818844" style="zoom:100%;"><ol start="3"><li>ä½¿ç”¨<code>pip</code>å®‰è£…ä¸‹è½½çš„ <code>whl</code> åŒ…</li></ol><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install xxx.whl</span><br></pre></td></tr></tbody></table></figure><p>è¿™æ ·é—®é¢˜å°±è§£å†³äº†ï¼Œå¼€å¿ƒğŸ˜„</p>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> pytorch </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>neo4jå¯¼å…¥èŠ‚ç‚¹å’Œè¾¹çš„pythonä»£ç </title>
      <link href="/2025/03/17/neo4j-dao-ru-jie-dian-he-bian-de-python-dai-ma/"/>
      <url>/2025/03/17/neo4j-dao-ru-jie-dian-he-bian-de-python-dai-ma/</url>
      
        <content type="html"><![CDATA[<p>åœ¨åšçŸ¥è¯†å›¾è°±ç›¸å…³çš„é¡¹ç›®æ—¶ï¼Œç»å¸¸éœ€è¦å°†æ•°æ®å¯¼å…¥åˆ°neo4jä¸­ï¼Œè¿™é‡Œåˆ†äº«ä¸€ä¸‹å¯¼å…¥èŠ‚ç‚¹å’Œè¾¹çš„pythonä»£ç ï¼Œä»¥ä¾¿äºä»¥åæŸ¥é˜…ã€‚</p><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä¸‹é¢çš„ä»£ç æ˜¯åœ¨neo4j 5.x ç‰ˆæœ¬ä¸Šæµ‹è¯•é€šè¿‡çš„ï¼Œå¦‚æœæ˜¯å…¶ä»–ç‰ˆæœ¬ï¼Œå¯èƒ½éœ€è¦åšä¸€äº›è°ƒæ•´ã€‚</p><ol><li>neo4j å¯¼å…¥èŠ‚ç‚¹å’Œè¾¹çš„ç±»å®ç°</li></ol><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">from</span> neo4j <span class="keyword">import</span> GraphDatabase</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">format_properties</span>(<span class="params"> properties</span>):</span><br><span class="line">    <span class="comment"># å°†å±æ€§å­—å…¸è½¬æ¢ä¸ºä¸å¸¦å¼•å·çš„å­—ç¬¦ä¸²</span></span><br><span class="line">        formatted_properties = []</span><br><span class="line">        <span class="keyword">for</span> key, value <span class="keyword">in</span> properties.items():</span><br><span class="line">            <span class="keyword">if</span> <span class="built_in">isinstance</span>(value, <span class="built_in">str</span>):</span><br><span class="line">                formatted_properties.append(<span class="string">f"<span class="subst">{key}</span>: '<span class="subst">{value}</span>'"</span>)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                formatted_properties.append(<span class="string">f"<span class="subst">{key}</span>: '<span class="subst">{value}</span>'"</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="string">'{'</span> + <span class="string">', '</span>.join(formatted_properties) + <span class="string">'}'</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Neo4jClass</span>:</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, uri, auth</span>):</span><br><span class="line">        <span class="variable language_">self</span>.driver = GraphDatabase.driver(uri, auth=auth)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">close</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="variable language_">self</span>.driver.close()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">create_node</span>(<span class="params">self, label, properties</span>):</span><br><span class="line">        <span class="keyword">with</span> <span class="variable language_">self</span>.driver.session() <span class="keyword">as</span> session:</span><br><span class="line">            session.write_transaction(<span class="variable language_">self</span>._create_node, label, properties)</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">del_all</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">with</span> <span class="variable language_">self</span>.driver.session() <span class="keyword">as</span> session:</span><br><span class="line">            query = <span class="string">f'MATCH (n) DETACH DELETE n'</span></span><br><span class="line">            session.run(query)</span><br><span class="line"></span><br><span class="line"><span class="meta">    @staticmethod</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">_create_node</span>(<span class="params">tx, label, properties</span>):</span><br><span class="line">        query = <span class="string">f"CREATE (n:<span class="subst">{label}</span> $properties) RETURN n"</span></span><br><span class="line">        tx.run(query, properties=properties)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">create_relationship</span>(<span class="params">self, label1, properties1, label2, properties2, relationship</span>):</span><br><span class="line">        <span class="keyword">with</span> <span class="variable language_">self</span>.driver.session() <span class="keyword">as</span> session:</span><br><span class="line">            session.write_transaction(<span class="variable language_">self</span>._create_relationship, label1, properties1, label2, properties2, relationship)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">    @staticmethod</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">_create_relationship</span>(<span class="params">tx, label1, properties1, label2, properties2, relationship</span>):</span><br><span class="line">        properties1 = format_properties(properties1)</span><br><span class="line">        properties2 = format_properties(properties2)</span><br><span class="line">        query = <span class="string">f"MATCH (a:<span class="subst">{label1}</span> <span class="subst">{properties1}</span>), (b:<span class="subst">{label2}</span> <span class="subst">{properties2}</span>) \</span></span><br><span class="line"><span class="string">                 CREATE (a)-[r:<span class="subst">{relationship}</span>]-&gt;(b) RETURN r"</span></span><br><span class="line">        tx.run(query)</span><br><span class="line">        </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">create_relationship_with_properties</span>(<span class="params">self, label1, properties1, label2, properties2, relationship, properties</span>):</span><br><span class="line">        <span class="keyword">with</span> <span class="variable language_">self</span>.driver.session() <span class="keyword">as</span> session:</span><br><span class="line">            session.write_transaction(<span class="variable language_">self</span>._create_relationship_with_properties, label1, properties1, label2, properties2, relationship, properties)</span><br><span class="line">    </span><br><span class="line"><span class="meta">    @staticmethod</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">_create_relationship_with_properties</span>(<span class="params">tx, label1, properties1, label2, properties2, relationship, properties</span>):</span><br><span class="line">        properties1 = format_properties(properties1)</span><br><span class="line">        properties2 = format_properties(properties2)</span><br><span class="line">        properties = format_properties(properties)</span><br><span class="line">        query = <span class="string">f"MATCH (a:<span class="subst">{label1}</span> <span class="subst">{properties1}</span>), (b:<span class="subst">{label2}</span> <span class="subst">{properties2}</span>) \</span></span><br><span class="line"><span class="string">                 CREATE (a)-[r:<span class="subst">{relationship}</span> <span class="subst">{properties}</span>]-&gt;(b) RETURN r"</span></span><br><span class="line">        tx.run(query)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">run_query</span>(<span class="params">self, query</span>):</span><br><span class="line">        <span class="keyword">with</span> <span class="variable language_">self</span>.driver.session() <span class="keyword">as</span> session:</span><br><span class="line">            <span class="keyword">return</span> session.run(query)</span><br><span class="line">    </span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> <span class="string">'__main__'</span> == __name__:</span><br><span class="line">    url = <span class="string">r'bolt://localhost:7687'</span></span><br><span class="line">    auth = (<span class="string">"neo4j"</span>, <span class="string">"neo4j-key"</span>)</span><br><span class="line"></span><br><span class="line">    neo4j = Neo4jClass(uri=url, auth=auth)</span><br><span class="line"></span><br><span class="line">    neo4j.del_all()</span><br><span class="line">    neo4j.create_node(<span class="string">"Person"</span>, {<span class="string">"name"</span>: <span class="string">"Alice"</span>, <span class="string">"age"</span>: <span class="number">30</span>})</span><br><span class="line">    neo4j.create_node(<span class="string">"Person"</span>, {<span class="string">"name"</span>: <span class="string">"Bob"</span>, <span class="string">"age"</span>: <span class="number">25</span>})</span><br><span class="line">    neo4j.create_relationship(<span class="string">"Person"</span>, {<span class="string">"name"</span>: <span class="string">"Alice"</span>}, <span class="string">"Person"</span>, {<span class="string">"name"</span>: <span class="string">"Bob"</span>}, <span class="string">"KNOWS"</span>)</span><br><span class="line">    </span><br><span class="line">    neo4j.create_node(<span class="string">"Person"</span>, {<span class="string">"name"</span>: <span class="string">"Tom"</span>, <span class="string">"age"</span>: <span class="number">30</span>})</span><br><span class="line">    neo4j.create_relationship_with_properties(<span class="string">"Person"</span>, {<span class="string">"name"</span>: <span class="string">"Alice"</span>}, <span class="string">"Person"</span>, {<span class="string">"name"</span>: <span class="string">"Tom"</span>}, <span class="string">"KW"</span>, {<span class="string">"since"</span>: <span class="string">"2021-01-01"</span>, <span class="string">"weight"</span>: <span class="number">0.8</span>})</span><br><span class="line"></span><br><span class="line">    neo4j.close()</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><ol start="2"><li>å®é™…ä½¿ç”¨ç¤ºä¾‹</li></ol><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">@author: eggplant</span></span><br><span class="line"><span class="string">@project: TCM_KG</span></span><br><span class="line"><span class="string">@time: 2024å¹´07æœˆ30æ—¥13:16:04</span></span><br><span class="line"><span class="string">@function: å°†é¢„å¤„ç†å¥½çš„èŠ‚ç‚¹å’Œä¸‰å…ƒç»„å¯¼å…¥ Neo4j æ•°æ®åº“</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">JSON æ–‡ä»¶æ ¼å¼è¯´æ˜:</span></span><br><span class="line"><span class="string">JSON æ–‡ä»¶åº”åŒ…å«ä»¥ä¸‹é”®:</span></span><br><span class="line"><span class="string">- `entity_nodes` (list): å®ä½“èŠ‚ç‚¹åˆ—è¡¨ï¼Œæ¯ä¸ªå…ƒç´ æ˜¯ä¸€ä¸ªå­—å…¸ï¼ŒåŒ…å«:</span></span><br><span class="line"><span class="string">  - `name` (str): å®ä½“åç§°</span></span><br><span class="line"><span class="string">  - `type` (str): å®ä½“ç±»å‹</span></span><br><span class="line"><span class="string">  - å…¶ä»–å±æ€§ (å¯é€‰)</span></span><br><span class="line"><span class="string">- `relation_nodes` (list): å…³ç³»èŠ‚ç‚¹åˆ—è¡¨ï¼Œæ¯ä¸ªå…ƒç´ æ˜¯ä¸€ä¸ªå­—å…¸ï¼ŒåŒ…å«:</span></span><br><span class="line"><span class="string">  - `name` (str): å…³ç³»åç§°</span></span><br><span class="line"><span class="string">  - `property` (dict, å¯é€‰): å…³ç³»å±æ€§</span></span><br><span class="line"><span class="string">- `triples` (list): ä¸‰å…ƒç»„åˆ—è¡¨ï¼Œæ¯ä¸ªå…ƒç´ æ˜¯ä¸€ä¸ªä¸‰å…ƒç»„ (e1_idx, rel_idx, e2_idx)ï¼Œç´¢å¼•æŒ‡å‘ `entity_nodes` å’Œ `relation_nodes`</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">ç¤ºä¾‹ JSON æ–‡ä»¶:</span></span><br><span class="line"><span class="string">{</span></span><br><span class="line"><span class="string">    "entity_nodes": [</span></span><br><span class="line"><span class="string">        {"name": "æ„Ÿå†’", "type": "ç–¾ç—…", "ç—‡çŠ¶": "å‘çƒ­"},</span></span><br><span class="line"><span class="string">        {"name": "å‘çƒ­", "type": "ç—‡çŠ¶"}</span></span><br><span class="line"><span class="string">    ],</span></span><br><span class="line"><span class="string">    "relation_nodes": [</span></span><br><span class="line"><span class="string">        {"name": "å…·æœ‰ç—‡çŠ¶", "property": {"å¼ºåº¦": "é«˜"}}</span></span><br><span class="line"><span class="string">    ],</span></span><br><span class="line"><span class="string">    "triples": [</span></span><br><span class="line"><span class="string">        [0, 0, 1]  # ä»£è¡¨ "æ„Ÿå†’" -&gt; "å…·æœ‰ç—‡çŠ¶" -&gt; "å‘çƒ­"</span></span><br><span class="line"><span class="string">    ]</span></span><br><span class="line"><span class="string">}</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">import</span> tqdm</span><br><span class="line"><span class="keyword">from</span> .neo4j_tools <span class="keyword">import</span> Neo4jClass</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">dict_to_string</span>(<span class="params">entity: <span class="built_in">dict</span></span>) -&gt; <span class="built_in">dict</span>:</span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">    å°†å®ä½“å­—å…¸ä¸­çš„åµŒå¥—å­—å…¸è½¬æ¢ä¸º JSON å­—ç¬¦ä¸²</span></span><br><span class="line"><span class="string">    </span></span><br><span class="line"><span class="string">    å‚æ•°:</span></span><br><span class="line"><span class="string">    - entity (dict): éœ€è¦è½¬æ¢çš„å®ä½“å­—å…¸</span></span><br><span class="line"><span class="string">    </span></span><br><span class="line"><span class="string">    è¿”å›:</span></span><br><span class="line"><span class="string">    - dict: å¤„ç†åçš„å­—å…¸ï¼ŒåµŒå¥—å­—å…¸è½¬æ¢ä¸º JSON å­—ç¬¦ä¸²</span></span><br><span class="line"><span class="string">    </span></span><br><span class="line"><span class="string">    ç¤ºä¾‹:</span></span><br><span class="line"><span class="string">    è¾“å…¥: {"name": "æ„Ÿå†’", "å±æ€§": {"ç—…å› ": "ç—…æ¯’æ„ŸæŸ“"}}</span></span><br><span class="line"><span class="string">    è¾“å‡º: {"name": "æ„Ÿå†’", "å±æ€§": '{"ç—…å› ": "ç—…æ¯’æ„ŸæŸ“"}'}</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    <span class="keyword">return</span> {key: json.dumps(value, ensure_ascii=<span class="literal">False</span>) <span class="keyword">if</span> <span class="built_in">isinstance</span>(value, <span class="built_in">dict</span>) <span class="keyword">else</span> value <span class="keyword">for</span> key, value <span class="keyword">in</span> entity.items()}</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">import_entity_nodes</span>(<span class="params">neo4j, entity_nodes: <span class="built_in">list</span>, debug_n: <span class="built_in">int</span></span>):</span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">    å¯¼å…¥å®ä½“èŠ‚ç‚¹</span></span><br><span class="line"><span class="string">    </span></span><br><span class="line"><span class="string">    å‚æ•°:</span></span><br><span class="line"><span class="string">    - neo4j (Neo4jClass): Neo4j æ•°æ®åº“æ“ä½œå®ä¾‹</span></span><br><span class="line"><span class="string">    - entity_nodes (list): å®ä½“èŠ‚ç‚¹åˆ—è¡¨</span></span><br><span class="line"><span class="string">    - debug_n (int): è°ƒè¯•æ¨¡å¼ä¸‹æœ€å¤§å¯¼å…¥æ•°é‡ (-1 è¡¨ç¤ºä¸é™åˆ¶)</span></span><br><span class="line"><span class="string">    </span></span><br><span class="line"><span class="string">    ç¤ºä¾‹:</span></span><br><span class="line"><span class="string">    entity_nodes = [{"name": "æ„Ÿå†’", "type": "ç–¾ç—…"}, {"name": "å‘çƒ­", "type": "ç—‡çŠ¶"}]</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"å¯¼å…¥å®ä½“èŠ‚ç‚¹..."</span>)</span><br><span class="line">    <span class="keyword">for</span> idx, entity <span class="keyword">in</span> tqdm.tqdm(<span class="built_in">enumerate</span>(entity_nodes)):</span><br><span class="line">        neo4j.create_node(entity[<span class="string">'type'</span>], dict_to_string(entity))</span><br><span class="line">        <span class="keyword">if</span> debug_n != -<span class="number">1</span> <span class="keyword">and</span> idx &gt;= debug_n:</span><br><span class="line">            <span class="keyword">break</span>  <span class="comment"># Debug æ¨¡å¼é™åˆ¶å¯¼å…¥æ•°é‡</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">import_triples</span>(<span class="params">neo4j, data: <span class="built_in">dict</span>, debug_n: <span class="built_in">int</span></span>):</span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">    å¯¼å…¥ä¸‰å…ƒç»„å…³ç³»</span></span><br><span class="line"><span class="string">    </span></span><br><span class="line"><span class="string">    å‚æ•°:</span></span><br><span class="line"><span class="string">    - neo4j (Neo4jClass): Neo4j æ•°æ®åº“æ“ä½œå®ä¾‹</span></span><br><span class="line"><span class="string">    - data (dict): åŒ…å« `entity_nodes`, `relation_nodes`, `triples` çš„ JSON æ•°æ®</span></span><br><span class="line"><span class="string">    - debug_n (int): è°ƒè¯•æ¨¡å¼ä¸‹æœ€å¤§å¯¼å…¥æ•°é‡ (-1 è¡¨ç¤ºä¸é™åˆ¶)</span></span><br><span class="line"><span class="string">    </span></span><br><span class="line"><span class="string">    ç¤ºä¾‹:</span></span><br><span class="line"><span class="string">    data = {</span></span><br><span class="line"><span class="string">        "entity_nodes": [{"name": "æ„Ÿå†’", "type": "ç–¾ç—…"}, {"name": "å‘çƒ­", "type": "ç—‡çŠ¶"}],</span></span><br><span class="line"><span class="string">        "relation_nodes": [{"name": "å…·æœ‰ç—‡çŠ¶"}],</span></span><br><span class="line"><span class="string">        "triples": [[0, 0, 1]]</span></span><br><span class="line"><span class="string">    }</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"å¯¼å…¥ä¸‰å…ƒç»„..."</span>)</span><br><span class="line">    <span class="keyword">for</span> idx, (e1_idx, rel_idx, e2_idx) <span class="keyword">in</span> tqdm.tqdm(<span class="built_in">enumerate</span>(data[<span class="string">'triples'</span>])):</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            entity1 = {<span class="string">'name'</span>: data[<span class="string">'entity_nodes'</span>][e1_idx][<span class="string">'name'</span>], <span class="string">'type'</span>: data[<span class="string">'entity_nodes'</span>][e1_idx][<span class="string">'type'</span>]}</span><br><span class="line">            entity2 = {<span class="string">'name'</span>: data[<span class="string">'entity_nodes'</span>][e2_idx][<span class="string">'name'</span>], <span class="string">'type'</span>: data[<span class="string">'entity_nodes'</span>][e2_idx][<span class="string">'type'</span>]}</span><br><span class="line">            relation = data[<span class="string">'relation_nodes'</span>][rel_idx]</span><br><span class="line"></span><br><span class="line">            entity1, entity2 = <span class="built_in">map</span>(dict_to_string, (entity1, entity2))</span><br><span class="line">            entity1_clean = {k: v.replace(<span class="string">"'"</span>, <span class="string">"_"</span>) <span class="keyword">for</span> k, v <span class="keyword">in</span> entity1.items() <span class="keyword">if</span> k != <span class="string">'type'</span>}</span><br><span class="line">            entity2_clean = {k: v.replace(<span class="string">"'"</span>, <span class="string">"_"</span>) <span class="keyword">for</span> k, v <span class="keyword">in</span> entity2.items() <span class="keyword">if</span> k != <span class="string">'type'</span>}</span><br><span class="line">            </span><br><span class="line">            neo4j.create_relationship_with_properties(</span><br><span class="line">                entity1[<span class="string">'type'</span>], entity1_clean, entity2[<span class="string">'type'</span>], entity2_clean, relation[<span class="string">'name'</span>], relation.get(<span class="string">'property'</span>, {})</span><br><span class="line">            )</span><br><span class="line">        <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f"è·³è¿‡é”™è¯¯ä¸‰å…ƒç»„ <span class="subst">{idx}</span>: <span class="subst">{e}</span>"</span>)</span><br><span class="line">        <span class="keyword">if</span> debug_n != -<span class="number">1</span> <span class="keyword">and</span> idx &gt;= debug_n:</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">import_data_to_neo4j</span>(<span class="params">neo4j, file_paths: <span class="built_in">list</span>, debug_n: <span class="built_in">int</span> = -<span class="number">1</span></span>):</span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">    ä» JSON æ–‡ä»¶å¯¼å…¥æ•°æ®åˆ° Neo4j</span></span><br><span class="line"><span class="string">    </span></span><br><span class="line"><span class="string">    å‚æ•°:</span></span><br><span class="line"><span class="string">    - neo4j (Neo4jClass): Neo4j æ•°æ®åº“æ“ä½œå®ä¾‹</span></span><br><span class="line"><span class="string">    - file_paths (list): JSON æ–‡ä»¶è·¯å¾„åˆ—è¡¨</span></span><br><span class="line"><span class="string">    - debug_n (int): è°ƒè¯•æ¨¡å¼ä¸‹æœ€å¤§å¯¼å…¥æ•°é‡ (-1 è¡¨ç¤ºä¸é™åˆ¶)</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    <span class="keyword">for</span> file_path <span class="keyword">in</span> file_paths:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f"å¤„ç†æ–‡ä»¶: <span class="subst">{file_path}</span>"</span>)</span><br><span class="line">        <span class="keyword">with</span> <span class="built_in">open</span>(file_path, <span class="string">'r'</span>, encoding=<span class="string">'utf-8'</span>) <span class="keyword">as</span> f:</span><br><span class="line">            data = json.load(f)</span><br><span class="line">        </span><br><span class="line">        import_entity_nodes(neo4j, data.get(<span class="string">'entity_nodes'</span>, []), debug_n)</span><br><span class="line">        import_triples(neo4j, data, debug_n)</span><br><span class="line">    </span><br><span class="line">    neo4j.close()</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"æ•°æ®å¯¼å…¥å®Œæˆï¼"</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</span><br><span class="line">    DEBUG_N = -<span class="number">1</span>  <span class="comment"># è°ƒè¯•æ¨¡å¼ï¼Œè®¾ç½®å¯¼å…¥çš„æœ€å¤§æ•°é‡ï¼Œ-1 è¡¨ç¤ºä¸é™åˆ¶</span></span><br><span class="line">    </span><br><span class="line">    NEO4J_CONFIG = {</span><br><span class="line">        <span class="string">"uri"</span>: <span class="string">"bolt://localhost:7687"</span>,</span><br><span class="line">        <span class="string">"auth"</span>: (<span class="string">"neo4j"</span>, <span class="string">"neo4j-key"</span>)</span><br><span class="line">    }</span><br><span class="line">    FILE_PATHS = [</span><br><span class="line">        <span class="string">r'data.json'</span>,</span><br><span class="line">    ]</span><br><span class="line">    </span><br><span class="line">    neo4j = Neo4jClass(**NEO4J_CONFIG)</span><br><span class="line">    neo4j.del_all()</span><br><span class="line">    </span><br><span class="line">    import_data_to_neo4j(neo4j, FILE_PATHS, debug_n=DEBUG_N)</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><p>enjoy it! ğŸ‰</p>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> neo4j </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è¡—æ‹åˆé›†</title>
      <link href="/2025/03/09/jie-pai-he-ji/"/>
      <url>/2025/03/09/jie-pai-he-ji/</url>
      
        <content type="html"><![CDATA[<p>æ•´ç†äº†ä¸€äº›ä»¥å‰çš„è¡—æ‹ç…§ç‰‡ï¼Œé™†é™†ç»­ç»­æ‹äº†å‡ ä¸‡å¼ ï¼Œåé¢ä¼šæŒç»­æ›´æ–° â€¦</p><div class="multiple-breaks" style="height: 30px;"></div><p><img src="https://raw.githubusercontent.com/Skylyong/i/main/20250309011045.png" alt="image-20250309011043469"></p><div class="multiple-breaks" style="height: 360px;"></div><p><img src="https://raw.githubusercontent.com/Skylyong/i/main/20250309011143.png" alt="image-20250309011141761"></p><div class="multiple-breaks" style="height: 360px;"></div><p><img src="https://raw.githubusercontent.com/Skylyong/i/main/20250309011206.png" alt="image-20250309011204621"></p><p><span class="image-caption  ">ã€Œå†¬æ—¥å›¾ä¹¦é¦†å‰çš„æ ‘ã€‚ã€</span></p><div class="multiple-breaks" style="height: 360px;"></div><p><img src="https://raw.githubusercontent.com/Skylyong/i/main/20250309011221.png" alt="image-20250309011218660"></p><div class="multiple-breaks" style="height: 360px;"></div><p><img src="https://raw.githubusercontent.com/Skylyong/i/main/20250309011240.png" alt="image-20250309011238240"></p><p><span class="image-caption  ">ã€Œæ ¡å›­é‡Œé¢æ ‘ä¸Šçš„é¸Ÿå·¢ã€‚ã€</span></p><div class="multiple-breaks" style="height: 360px;"></div><p><img src="https://raw.githubusercontent.com/Skylyong/i/main/20250309011302.png" alt="image-20250309011300579"></p><div class="multiple-breaks" style="height: 360px;"></div><p><img src="https://raw.githubusercontent.com/Skylyong/i/main/20250309011318.png" alt="image-20250309011316987"></p><div class="multiple-breaks" style="height: 360px;"></div><p><img src="https://raw.githubusercontent.com/Skylyong/i/main/20250309011345.png" alt="image-20250309011344050"></p><div class="multiple-breaks" style="height: 360px;"></div><p><img src="https://raw.githubusercontent.com/Skylyong/i/main/20250309011402.png" alt="image-20250309011400836"></p><div class="multiple-breaks" style="height: 360px;"></div><p><img src="https://raw.githubusercontent.com/Skylyong/i/main/20250309011422.png" alt="image-20250309011420372"></p><div class="multiple-breaks" style="height: 360px;"></div><p><img src="https://raw.githubusercontent.com/Skylyong/i/main/20250309011500.png" alt="image-20250309011459223"></p><div class="multiple-breaks" style="height: 360px;"></div><p><img src="https://raw.githubusercontent.com/Skylyong/i/main/20250309011514.png" alt="image-20250309011512562"></p><div class="multiple-breaks" style="height: 360px;"></div><p><img src="https://raw.githubusercontent.com/Skylyong/i/main/20250309012213.png" alt="image-20250309012212232"></p><div class="multiple-breaks" style="height: 360px;"></div><p><img src="https://raw.githubusercontent.com/Skylyong/i/main/20250309012238.png" alt="image-20250309012237636"></p><div class="multiple-breaks" style="height: 360px;"></div><p><img src="https://raw.githubusercontent.com/Skylyong/i/main/20250309012254.png" alt="image-20250309012253051"></p><div class="multiple-breaks" style="height: 360px;"></div><p><img src="https://raw.githubusercontent.com/Skylyong/i/main/20250309012310.png" alt="image-20250309012308962"></p><div class="multiple-breaks" style="height: 360px;"></div><p><img src="https://raw.githubusercontent.com/Skylyong/i/main/20250309012336.png" alt="image-20250309012335634"></p><div class="multiple-breaks" style="height: 360px;"></div><p><img src="https://raw.githubusercontent.com/Skylyong/i/main/20250309012358.png" alt="image-20250309012357276"></p><div class="multiple-breaks" style="height: 360px;"></div><p><img src="https://raw.githubusercontent.com/Skylyong/i/main/20250309012420.png" alt="image-20250309012419510"></p><div class="multiple-breaks" style="height: 360px;"></div><p><img src="https://raw.githubusercontent.com/Skylyong/i/main/20250309012445.png" alt="image-20250309012443963"></p><div class="multiple-breaks" style="height: 360px;"></div><p><img src="https://raw.githubusercontent.com/Skylyong/i/main/20250309012506.png" alt="image-20250309012504640"></p><div class="multiple-breaks" style="height: 360px;"></div><p><img src="https://raw.githubusercontent.com/Skylyong/i/main/20250309012529.png" alt="image-20250309012528296"></p><div class="multiple-breaks" style="height: 360px;"></div><p><img src="https://raw.githubusercontent.com/Skylyong/i/main/20250309012544.png" alt="image-20250309012542797"></p><div class="multiple-breaks" style="height: 360px;"></div><p><img src="https://raw.githubusercontent.com/Skylyong/i/main/20250309012601.png" alt="image-20250309012559789"></p><div class="multiple-breaks" style="height: 360px;"></div><p><img src="https://raw.githubusercontent.com/Skylyong/i/main/20250309012618.png" alt="image-20250309012617264"></p><div class="multiple-breaks" style="height: 360px;"></div><p><img src="https://raw.githubusercontent.com/Skylyong/i/main/20250309012638.png" alt="image-20250309012637503"></p><div class="multiple-breaks" style="height: 360px;"></div><p><img src="https://raw.githubusercontent.com/Skylyong/i/main/20250309011603.png" alt="image-20250309011601530"></p><div class="multiple-breaks" style="height: 360px;"></div><p><img src="https://raw.githubusercontent.com/Skylyong/i/main/20250309011617.png" alt="image-20250309011615470"></p><div class="multiple-breaks" style="height: 360px;"></div><p><img src="https://raw.githubusercontent.com/Skylyong/i/main/20250309011649.png" alt="image-20250309011648512"></p><p><img src="https://raw.githubusercontent.com/Skylyong/i/main/20250309011707.png" alt="image-20250309011706058"></p><div class="multiple-breaks" style="height: 360px;"></div><p><img src="https://raw.githubusercontent.com/Skylyong/i/main/20250309011722.png" alt="image-20250309011720467"></p><div class="multiple-breaks" style="height: 360px;"></div><p><img src="https://raw.githubusercontent.com/Skylyong/i/main/20250309011736.png" alt="image-20250309011735331"></p><div class="multiple-breaks" style="height: 360px;"></div><p><img src="https://raw.githubusercontent.com/Skylyong/i/main/20250309011804.png" alt="image-20250309011802854"></p><div class="multiple-breaks" style="height: 360px;"></div><p><img src="https://raw.githubusercontent.com/Skylyong/i/main/20250309011826.png" alt="image-20250309011825391"></p><div class="multiple-breaks" style="height: 360px;"></div><p><img src="https://raw.githubusercontent.com/Skylyong/i/main/20250309011842.png" alt="image-20250309011840388"></p><div class="multiple-breaks" style="height: 360px;"></div><p><img src="https://raw.githubusercontent.com/Skylyong/i/main/20250309011903.png" alt="image-20250309011902068"></p><div class="multiple-breaks" style="height: 360px;"></div><p><img src="https://raw.githubusercontent.com/Skylyong/i/main/20250309011917.png" alt="image-20250309011916350"></p><div class="multiple-breaks" style="height: 360px;"></div><p><img src="https://raw.githubusercontent.com/Skylyong/i/main/20250309011934.png" alt="image-20250309011933590"></p><div class="multiple-breaks" style="height: 360px;"></div><p><img src="https://raw.githubusercontent.com/Skylyong/i/main/20250309012001.png" alt="image-20250309012000387"></p><div class="multiple-breaks" style="height: 360px;"></div><p><img src="https://raw.githubusercontent.com/Skylyong/i/main/20250309012029.png" alt="image-20250309012028556"></p><div class="multiple-breaks" style="height: 360px;"></div><p><img src="https://raw.githubusercontent.com/Skylyong/i/main/20250309012046.png" alt="image-20250309012044991"></p><div class="multiple-breaks" style="height: 360px;"></div><p><img src="https://raw.githubusercontent.com/Skylyong/i/main/20250309012117.png" alt="image-20250309012117"></p><div class="multiple-breaks" style="height: 360px;"></div><p><img src="https://raw.githubusercontent.com/Skylyong/i/main/20250309012133.png" alt="image-20250309012124306"></p><div class="multiple-breaks" style="height: 360px;"></div><style>.multiple-breaks {    display: block;    margin-top: 20px;}.image-caption {          font-family: 'Inter', 'Noto Sans SC', sans-serif; /* ç®€çº¦æ— è¡¬çº¿å­—ä½“ */    font-size: 15px; /* é€‚ä¸­çš„å­—ä½“å¤§å° */    color: #666; /* ä½å¯¹æ¯”åº¦ç°è‰²ï¼Œé¿å…å–§å®¾å¤ºä¸» */    text-align: center; /* æ–‡å­—å±…ä¸­ï¼Œæé«˜å¯¹ç§°æ„Ÿ */    font-weight: 400; /* é€‚ä¸­çš„å­—é‡ï¼Œä¿æŒç®€æ´ */    margin-top: 12px; /* ä¸å›¾ç‰‡ä¿æŒåˆé€‚ç•™ç™½ */    line-height: 1.8; /* å¢åŠ è¡Œé—´è·ï¼Œè®©æ–‡å­—æ›´é€šé€ */    letter-spacing: 0.5px; /* é€‚å½“å¢åŠ å­—é—´è·ï¼Œå¢å¼ºå‘¼å¸æ„Ÿ */} </style>]]></content>
      
      
      <categories>
          
          <category> æ‘„å½± </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è¡—æ‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>äººåƒæ‘„å½±åˆé›†</title>
      <link href="/2025/03/09/ren-xiang-she-ying-he-ji/"/>
      <url>/2025/03/09/ren-xiang-she-ying-he-ji/</url>
      
        <content type="html"><![CDATA[<p>åé¢ä¼šæŒç»­æ›´æ–° â€¦<br><br><br><br><br><br><br><br></p><p><img src="https://raw.githubusercontent.com/Skylyong/i/main/20250309001405.png" alt="image-20250309000801077"></p><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><p><img src="https://raw.githubusercontent.com/Skylyong/i/main/20250309000843.png" alt="image-20250309000834470"></p><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><p><img src="https://raw.githubusercontent.com/Skylyong/i/main/20250309000903.png" alt="image-20250309000900685"></p><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><p><img src="https://raw.githubusercontent.com/Skylyong/i/main/20250309000927.png" alt="image-20250309000925088"></p><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><p><img src="https://raw.githubusercontent.com/Skylyong/i/main/20250309001529.png" alt="image-20250309001006265"></p><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><p><img src="https://raw.githubusercontent.com/Skylyong/i/main/20250309001548.png" alt="image-20250309001047780"></p><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><p><img src="https://raw.githubusercontent.com/Skylyong/i/main/20250309001716.png" alt="image-20250309001715109"></p><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><p><img src="https://raw.githubusercontent.com/Skylyong/i/main/20250309001122.png" alt="image-20250309001120875"></p><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><p><img src="https://raw.githubusercontent.com/Skylyong/i/main/20250309001237.png" alt="image-20250309001156888"></p><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>]]></content>
      
      
      <categories>
          
          <category> æ‘„å½± </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ‘„å½± </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>matplotlib è®¾ç½®æ˜¾ç¤ºä¸­æ–‡</title>
      <link href="/2025/03/08/matplotlib-xian-shi-zhong-wen/"/>
      <url>/2025/03/08/matplotlib-xian-shi-zhong-wen/</url>
      
        <content type="html"><![CDATA[<p>å…ˆä»ç½‘ç»œä¸Šä¸‹è½½ <code>SimHei.ttf</code>  æ–‡ä»¶æ”¾åœ¨æŸä¸ªä½ç½®ï¼Œç„¶åç”¨ä¸‹é¢çš„ä»£ç ï¼Œè®¾ç½®å­—ä½“çš„ä½ç½®ã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="comment"># ä» data/original/SylvanL/Exam/tcm_exam_1.csv è¯»å–æ•°æ®</span></span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">from</span> matplotlib <span class="keyword">import</span> font_manager</span><br><span class="line"><span class="keyword">from</span> matplotlib <span class="keyword">import</span> rcParams</span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="keyword">import</span> matplotlib </span><br><span class="line"><span class="comment"># è®¾ç½®å½“å‰ç›®å½•</span></span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line">os.chdir(<span class="string">'/cpfs01/projects-SSD/cfff-bafab61057ac_SSD/zyt_09215/liyong/TCM-EMBEDDING'</span>)</span><br><span class="line"></span><br><span class="line">my_font = font_manager.FontProperties(fname=<span class="string">"fonts/SimHei.ttf"</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># å…¨å±€è®¾ç½®å­—ä½“</span></span><br><span class="line">matplotlib.rcParams[<span class="string">'font.sans-serif'</span>]=my_font.get_name()  <span class="comment"># ç”¨é»‘ä½“æ˜¾ç¤ºä¸­æ–‡</span></span><br><span class="line">matplotlib.rcParams[<span class="string">'axes.unicode_minus'</span>]=<span class="literal">False</span> </span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><p>ä½¿ç”¨</p><p>åœ¨éœ€è¦ä½¿ç”¨ä¸­æ–‡çš„åœ°æ–¹ï¼ŒæŒ‡å®šä¸Šé¢è®¾ç½®å¥½çš„å­—ä½“</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">plt.title(<span class="string">"æè¿°é•¿åº¦åˆ†å¸ƒ"</span>, fontproperties=my_font)</span><br><span class="line">plt.xlabel(<span class="string">"é•¿åº¦"</span>, fontproperties=my_font)</span><br><span class="line">plt.ylabel(<span class="string">"æ•°é‡"</span>, fontproperties=my_font)</span><br></pre></td></tr></tbody></table></figure><p>enjoyï¼ </p>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹ç»éªŒ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>pythonå¤šè¿›ç¨‹ç¤ºä¾‹</title>
      <link href="/2025/03/08/python-duo-jin-cheng-shi-li/"/>
      <url>/2025/03/08/python-duo-jin-cheng-shi-li/</url>
      
        <content type="html"><![CDATA[<ol><li>å¯¼å…¥ä¾èµ–çš„åŒ…</li></ol><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> concurrent.futures <span class="keyword">import</span> ProcessPoolExecutor, as_completed</span><br></pre></td></tr></tbody></table></figure><ol start="2"><li>å®šä¹‰å¤„ç†å†…å®¹çš„å‡½æ•°ï¼Œè¯¥å‡½æ•°è¦æ˜¯å…¨å±€å‡½æ•°ï¼Œä¸èƒ½æ”¾åœ¨å‡½æ•°æˆ–è€…ç±»é‡Œé¢<br>å‡½æ•°çš„å‚æ•°åªæœ‰ä¸€ä¸ªï¼Œå¯ä»¥ç”¨å…ƒç»„åŒ…è£…èµ·æ¥ï¼Œç„¶åå†è§£åŒ…</li></ol><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">process_record</span>(<span class="params">args</span>):</span><br><span class="line">    text = args[<span class="number">0</span>][<span class="string">"text"</span>]</span><br><span class="line">    CONTENT = args[<span class="number">1</span>]</span><br><span class="line">    extract_info = inference(text, model=<span class="string">"deepseek-chat"</span>, CONTENT=CONTENT)</span><br><span class="line">    <span class="keyword">return</span> {</span><br><span class="line">        <span class="string">"text"</span>: text,</span><br><span class="line">        <span class="string">"extract_info"</span>: extract_info</span><br><span class="line">    }</span><br></pre></td></tr></tbody></table></figure><ol start="3"><li>ä½¿ç”¨å¤šè¿›ç¨‹å¤„ç†æ•°æ®<br>åœ¨ with ä¸‹é¢ä¸€å…±æœ‰ä¸¤ä¸ªforï¼Œç¬¬ä¸€ä¸ªforè´Ÿè´£å°†æ•°æ®å’Œå¤„ç†å‡½æ•°æ”¾åœ¨ä¸€ä¸ª futures ä¸­ï¼Œ ç¬¬äºŒä¸ªforè´Ÿè´£å¤„ç†å’Œè¿”å›å¤„ç†ç»“æœã€‚</li></ol><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">with</span> ProcessPoolExecutor(max_workers=max_workers) <span class="keyword">as</span> executor:</span><br><span class="line">       futures = []</span><br><span class="line">       <span class="keyword">for</span> d <span class="keyword">in</span> data:</span><br><span class="line">           args = (d, CONTENT)</span><br><span class="line">           futures.append(executor.submit(process_record, args))</span><br><span class="line"></span><br><span class="line">       <span class="comment"># ä½¿ç”¨ as_completed è¿­ä»£è¿”å›å·²ç»å®Œæˆçš„ä»»åŠ¡</span></span><br><span class="line">       <span class="comment"># tqdm ç”¨äºæ˜¾ç¤ºè¿›åº¦æ¡</span></span><br><span class="line">       <span class="keyword">for</span> idx, future <span class="keyword">in</span> <span class="built_in">enumerate</span>(tqdm.tqdm(as_completed(futures), total=<span class="built_in">len</span>(futures), desc=<span class="string">"Extracting info"</span>)):</span><br><span class="line">           result = future.result()</span><br><span class="line">           new_data.append(result)</span><br><span class="line"></span><br><span class="line">           <span class="comment"># æ¯å®Œæˆ 100 ä¸ªæ ·æœ¬ï¼Œä¿å­˜ä¸€æ¬¡ä¸´æ—¶æ–‡ä»¶</span></span><br><span class="line">           <span class="keyword">if</span> (idx + <span class="number">1</span>) % <span class="number">500</span> == <span class="number">0</span>:</span><br><span class="line">               <span class="keyword">with</span> <span class="built_in">open</span>(save_path, <span class="string">"w"</span>, encoding=<span class="string">"utf-8"</span>) <span class="keyword">as</span> f:</span><br><span class="line">                   json.dump(new_data, f, indent=<span class="number">4</span>, ensure_ascii=<span class="literal">False</span>)</span><br><span class="line">                   <span class="built_in">print</span>(<span class="string">f"Extracted information from <span class="subst">{idx+<span class="number">1</span>}</span> medical records, and saved to <span class="subst">{save_path}</span>"</span>)</span><br></pre></td></tr></tbody></table></figure><p>enjoy ! </p>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹ç»éªŒ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä½¿ç”¨BERTå¾—åˆ°çŸ­è¯­å‘é‡è¡¨ç¤ºå¹¶è¿›è¡Œå±‚æ¬¡èšç±»å®ç°ç›¸ä¼¼æ€§å»é‡</title>
      <link href="/2025/03/06/shi-yong-bert-de-dao-duan-yu-xiang-liang-biao-shi-bing-jin-xing-ceng-ci-ju-lei-shi-xian-xiang-si-xing-qu-chong/"/>
      <url>/2025/03/06/shi-yong-bert-de-dao-duan-yu-xiang-liang-biao-shi-bing-jin-xing-ceng-ci-ju-lei-shi-xian-xiang-si-xing-qu-chong/</url>
      
        <content type="html"><![CDATA[<p>åœ¨è‡ªç„¶è¯­è¨€å¤„ç†ï¼ˆNLPï¼‰ä¸­ï¼ŒçŸ­è¯­çš„ç›¸ä¼¼æ€§åˆ†ææ˜¯ä¸€ä¸ªå¸¸è§ä¸”é‡è¦çš„ä»»åŠ¡ã€‚ä¼ ç»Ÿçš„æ–‡æœ¬ç›¸ä¼¼æ€§è®¡ç®—æ–¹æ³•å¾€å¾€ä¾èµ–äºæ‰‹å·¥è®¾è®¡çš„ç‰¹å¾ï¼Œä½†éšç€æ·±åº¦å­¦ä¹ å’Œé¢„è®­ç»ƒè¯­è¨€æ¨¡å‹çš„å‡ºç°ï¼ŒBERTï¼ˆBidirectional Encoder Representations from Transformersï¼‰åŠå…¶è¡ç”Ÿæ¨¡å‹ä¸ºæˆ‘ä»¬æä¾›äº†æ›´å¼ºå¤§çš„è¡¨è¾¾èƒ½åŠ›ã€‚åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†ä»‹ç»å¦‚ä½•ä½¿ç”¨BERTæ¨¡å‹å¯¹çŸ­è¯­è¿›è¡Œå‘é‡åŒ–ï¼Œå¹¶ç»“åˆå±‚æ¬¡èšç±»ç®—æ³•å¯¹ç›¸ä¼¼çŸ­è¯­è¿›è¡Œå»é‡ã€‚</p><h1 id="ä»»åŠ¡èƒŒæ™¯"><a href="#ä»»åŠ¡èƒŒæ™¯" class="headerlink" title="ä»»åŠ¡èƒŒæ™¯"></a>ä»»åŠ¡èƒŒæ™¯</h1><p>åœ¨å¾ˆå¤šåº”ç”¨åœºæ™¯ä¸‹ï¼Œæˆ‘ä»¬å¾€å¾€éœ€è¦ä»å¤§é‡çš„çŸ­è¯­æ•°æ®ä¸­å»é™¤é‡å¤æˆ–è€…ç›¸ä¼¼çš„å†…å®¹ï¼Œä»¥ä¾¿äºè¿›ä¸€æ­¥åˆ†æã€‚ä¾‹å¦‚ï¼Œåœ¨ä¼ ç»Ÿä¸­åŒ»ï¼ˆTCMï¼‰æ•°æ®åˆ†æä¸­ï¼Œå¯èƒ½æœ‰å¤§é‡çš„ç±»ä¼¼ä»»åŠ¡ç›¸å…³æŸ¥è¯¢æˆ–åŒ»ç–—æœ¯è¯­éœ€è¦è¿›è¡Œèšç±»å¤„ç†ã€‚è¿™é‡Œï¼Œæˆ‘ä»¬é€šè¿‡ä»¥ä¸‹æ­¥éª¤æ¥å®ç°ç›¸ä¼¼æ€§å»é‡ï¼š</p><ol><li><strong>ä½¿ç”¨BERTæ¨¡å‹è·å–çŸ­è¯­çš„å‘é‡è¡¨ç¤º</strong>ï¼šBERTåŠå…¶å˜ä½“èƒ½å¤Ÿé€šè¿‡ä¸Šä¸‹æ–‡ä¿¡æ¯å‡†ç¡®åœ°æ•æ‰çŸ­è¯­çš„è¯­ä¹‰ã€‚</li><li><strong>è®¡ç®—çŸ­è¯­ä¹‹é—´çš„ç›¸ä¼¼åº¦</strong>ï¼šé€šè¿‡è®¡ç®—çŸ­è¯­å‘é‡ä¹‹é—´çš„ä½™å¼¦ç›¸ä¼¼åº¦ï¼Œå¾—åˆ°çŸ­è¯­ä¹‹é—´çš„ç›¸ä¼¼æ€§ã€‚</li><li><strong>è¿›è¡Œå±‚æ¬¡èšç±»</strong>ï¼šå±‚æ¬¡èšç±»å¯ä»¥æ ¹æ®ç›¸ä¼¼åº¦å°†ç›¸ä¼¼çŸ­è¯­åˆ†åˆ°åŒä¸€ä¸ªç±»åˆ«ï¼Œè¿›è€Œå®ç°å»é‡ã€‚</li></ol><h1 id="å…³é”®æ­¥éª¤"><a href="#å…³é”®æ­¥éª¤" class="headerlink" title="å…³é”®æ­¥éª¤"></a>å…³é”®æ­¥éª¤</h1><h2 id="åŠ è½½æ•°æ®"><a href="#åŠ è½½æ•°æ®" class="headerlink" title="åŠ è½½æ•°æ®"></a>åŠ è½½æ•°æ®</h2><p>åœ¨å¤„ç†çŸ­è¯­ä¹‹å‰ï¼Œæˆ‘ä»¬é¦–å…ˆéœ€è¦åŠ è½½åŒ…å«çŸ­è¯­çš„åŸå§‹æ•°æ®ã€‚å‡è®¾æ•°æ®å·²ç»ä¿å­˜åœ¨CSVæ–‡ä»¶ä¸­ï¼Œæ¯ä¸€è¡Œä»£è¡¨ä¸€ä¸ªçŸ­è¯­ã€‚æˆ‘ä»¬é€šè¿‡Pandasåº“è¯»å–æ–‡ä»¶å¹¶æå–çŸ­è¯­åˆ—ã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">load_data</span>(<span class="params">self, file_path</span>):</span><br><span class="line">    df = pd.read_csv(file_path)</span><br><span class="line">    <span class="keyword">if</span> <span class="string">"text"</span> <span class="keyword">not</span> <span class="keyword">in</span> df.columns:</span><br><span class="line">        <span class="keyword">raise</span> ValueError(<span class="string">"CSV æ–‡ä»¶å¿…é¡»åŒ…å« 'text' åˆ—"</span>)</span><br><span class="line">    <span class="keyword">return</span> df[<span class="string">"text"</span>].dropna().tolist()</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><h2 id="ä½¿ç”¨BERTæ¨¡å‹è·å–çŸ­è¯­å‘é‡"><a href="#ä½¿ç”¨BERTæ¨¡å‹è·å–çŸ­è¯­å‘é‡" class="headerlink" title="ä½¿ç”¨BERTæ¨¡å‹è·å–çŸ­è¯­å‘é‡"></a>ä½¿ç”¨BERTæ¨¡å‹è·å–çŸ­è¯­å‘é‡</h2><p>é€šè¿‡åŠ è½½ä¸€ä¸ªé¢„è®­ç»ƒçš„BERTæ¨¡å‹ï¼ˆä¾‹å¦‚ thenlper/gte-base-zhï¼‰ï¼Œæˆ‘ä»¬å¯ä»¥å°†æ¯ä¸ªçŸ­è¯­è½¬æ¢ä¸ºä¸€ä¸ªå›ºå®šç»´åº¦çš„å‘é‡ã€‚è¿™äº›å‘é‡èƒ½å¤Ÿæ•æ‰çŸ­è¯­çš„è¯­ä¹‰ä¿¡æ¯ï¼Œåç»­çš„ç›¸ä¼¼æ€§è®¡ç®—å°†ä¾èµ–è¿™äº›å‘é‡ã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">encode_phrases</span>(<span class="params">self, phrases</span>):</span><br><span class="line">    embeddings = <span class="variable language_">self</span>.model.encode(phrases, convert_to_numpy=<span class="literal">True</span>)</span><br><span class="line">    <span class="keyword">return</span> embeddings</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><h2 id="è®¡ç®—çŸ­è¯­ä¹‹é—´çš„ç›¸ä¼¼åº¦å¹¶è¿›è¡Œèšç±»"><a href="#è®¡ç®—çŸ­è¯­ä¹‹é—´çš„ç›¸ä¼¼åº¦å¹¶è¿›è¡Œèšç±»" class="headerlink" title="è®¡ç®—çŸ­è¯­ä¹‹é—´çš„ç›¸ä¼¼åº¦å¹¶è¿›è¡Œèšç±»"></a>è®¡ç®—çŸ­è¯­ä¹‹é—´çš„ç›¸ä¼¼åº¦å¹¶è¿›è¡Œèšç±»</h2><p>çŸ­è¯­çš„ç›¸ä¼¼åº¦å¯ä»¥é€šè¿‡è®¡ç®—å®ƒä»¬çš„ä½™å¼¦ç›¸ä¼¼åº¦æ¥è¡¡é‡ã€‚ä¸ºäº†å¯¹çŸ­è¯­è¿›è¡Œèšç±»ï¼Œæˆ‘ä»¬å°†è®¡ç®—çŸ­è¯­å‘é‡ä¹‹é—´çš„è·ç¦»ï¼ˆä½¿ç”¨ä½™å¼¦è·ç¦»ï¼‰ã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">cluster_phrases</span>(<span class="params">self, embeddings</span>):</span><br><span class="line">    Z = linkage(<span class="number">1</span> - np.inner(embeddings, embeddings), method=<span class="string">'average'</span>)</span><br><span class="line">    labels = fcluster(Z, t=<span class="variable language_">self</span>.eps, criterion=<span class="string">'distance'</span>)</span><br><span class="line">    <span class="keyword">return</span> labels</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><h2 id="å°†ç›¸ä¼¼çš„çŸ­è¯­åˆ†åˆ°åŒä¸€ç±»åˆ«"><a href="#å°†ç›¸ä¼¼çš„çŸ­è¯­åˆ†åˆ°åŒä¸€ç±»åˆ«" class="headerlink" title="å°†ç›¸ä¼¼çš„çŸ­è¯­åˆ†åˆ°åŒä¸€ç±»åˆ«"></a>å°†ç›¸ä¼¼çš„çŸ­è¯­åˆ†åˆ°åŒä¸€ç±»åˆ«</h2><p>ä¸‹é¢ï¼Œæˆ‘ä»¬å°†ç›¸ä¼¼çš„çŸ­è¯­åˆ†åˆ°åŒä¸€ç±»åˆ«ã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">group_clusters</span>(<span class="params">self, phrases, labels</span>):</span><br><span class="line">    cluster_dict = defaultdict(<span class="built_in">list</span>)</span><br><span class="line">    <span class="keyword">for</span> phrase, label <span class="keyword">in</span> <span class="built_in">zip</span>(phrases, labels):</span><br><span class="line">        cluster_dict[label].append(phrase)</span><br><span class="line">    <span class="keyword">return</span> cluster_dict</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><h2 id="ä¿å­˜èšç±»ç»“æœ"><a href="#ä¿å­˜èšç±»ç»“æœ" class="headerlink" title="ä¿å­˜èšç±»ç»“æœ"></a>ä¿å­˜èšç±»ç»“æœ</h2><p>æœ€åï¼Œå°†èšç±»ç»“æœä¿å­˜ä¸ºCSVæ–‡ä»¶ï¼Œæ¯ä¸€åˆ—å¯¹åº”ä¸€ä¸ªç±»åˆ«ï¼Œæ–¹ä¾¿åç»­çš„åˆ†æã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">save_clusters</span>(<span class="params">self, cluster_dict, output_path</span>):</span><br><span class="line">    filtered_clusters = {k: v <span class="keyword">for</span> k, v <span class="keyword">in</span> cluster_dict.items() <span class="keyword">if</span> k != -<span class="number">1</span>}</span><br><span class="line">    max_len = <span class="built_in">max</span>(<span class="built_in">len</span>(v) <span class="keyword">for</span> v <span class="keyword">in</span> filtered_clusters.values())</span><br><span class="line">    cluster_columns = [v + [<span class="string">""</span>] * (max_len - <span class="built_in">len</span>(v)) <span class="keyword">for</span> v <span class="keyword">in</span> filtered_clusters.values()]</span><br><span class="line">    df = pd.DataFrame(cluster_columns).T</span><br><span class="line">    df.to_csv(output_path, index=<span class="literal">False</span>, encoding=<span class="string">"utf-8-sig"</span>)</span><br></pre></td></tr></tbody></table></figure><br><br><h1 id="å®Œæ•´ä»£ç "><a href="#å®Œæ•´ä»£ç " class="headerlink" title="å®Œæ•´ä»£ç "></a>å®Œæ•´ä»£ç </h1><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">from</span> sentence_transformers <span class="keyword">import</span> SentenceTransformer</span><br><span class="line"><span class="keyword">from</span> sklearn.cluster <span class="keyword">import</span> DBSCAN</span><br><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> defaultdict</span><br><span class="line"><span class="keyword">from</span> scipy.cluster.hierarchy <span class="keyword">import</span> linkage, fcluster</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">PhraseClustering</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, model_name=<span class="string">"thenlper/gte-base-zh"</span>, eps=<span class="number">0.3</span>, min_samples=<span class="number">2</span></span>):</span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        åˆå§‹åŒ– BERT æ¨¡å‹å’Œ DBSCAN å‚æ•°</span></span><br><span class="line"><span class="string">        :param model_name: é¢„è®­ç»ƒ BERT æ¨¡å‹åç§°ï¼ˆé»˜è®¤ä½¿ç”¨è½»é‡çº§ SBERTï¼‰</span></span><br><span class="line"><span class="string">        :param eps: DBSCAN èšç±»çš„åŠå¾„å‚æ•°</span></span><br><span class="line"><span class="string">        :param min_samples: DBSCAN çš„æœ€å°æ ·æœ¬æ•°</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        <span class="variable language_">self</span>.model = SentenceTransformer(model_name)</span><br><span class="line">        <span class="variable language_">self</span>.eps = eps</span><br><span class="line">        <span class="variable language_">self</span>.min_samples = min_samples</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">load_data</span>(<span class="params">self, file_path</span>):</span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        è¯»å– CSV æ–‡ä»¶ä¸­çš„çŸ­è¯­</span></span><br><span class="line"><span class="string">        :param file_path: CSV æ–‡ä»¶è·¯å¾„</span></span><br><span class="line"><span class="string">        :return: çŸ­è¯­åˆ—è¡¨</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        df = pd.read_csv(file_path)</span><br><span class="line">        <span class="keyword">if</span> <span class="string">"ç»†ç²’åº¦_ä»»åŠ¡ç›¸å…³æŸ¥è¯¢"</span> <span class="keyword">not</span> <span class="keyword">in</span> df.columns:</span><br><span class="line">            <span class="keyword">raise</span> ValueError(<span class="string">"CSV æ–‡ä»¶å¿…é¡»åŒ…å« 'text' åˆ—"</span>)</span><br><span class="line">        <span class="keyword">return</span> df[<span class="string">"ç»†ç²’åº¦_ä»»åŠ¡ç›¸å…³æŸ¥è¯¢"</span>].dropna().tolist()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">encode_phrases</span>(<span class="params">self, phrases</span>):</span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        ä½¿ç”¨ BERT ç¼–ç çŸ­è¯­</span></span><br><span class="line"><span class="string">        :param phrases: çŸ­è¯­åˆ—è¡¨</span></span><br><span class="line"><span class="string">        :return: çŸ­è¯­çš„å‘é‡è¡¨ç¤ºï¼ˆNumPy æ•°ç»„ï¼‰</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        embeddings = <span class="variable language_">self</span>.model.encode(phrases, convert_to_numpy=<span class="literal">True</span>)</span><br><span class="line">        <span class="keyword">return</span> embeddings</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">cluster_phrases</span>(<span class="params">self, embeddings</span>):</span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        ä½¿ç”¨å±‚æ¬¡èšç±»è¿›è¡Œèšç±»</span></span><br><span class="line"><span class="string">        :param embeddings: çŸ­è¯­çš„å‘é‡è¡¨ç¤º</span></span><br><span class="line"><span class="string">        :return: èšç±»æ ‡ç­¾</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        <span class="comment"># ä½¿ç”¨cosineè·ç¦»è®¡ç®—å±‚æ¬¡èšç±»</span></span><br><span class="line">        Z = linkage(<span class="number">1</span> - np.inner(embeddings, embeddings), method=<span class="string">'average'</span>)  <span class="comment"># 1 - cosine similarity = cosine distance</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment"># æ ¹æ®è·ç¦»é˜ˆå€¼æ¥å½¢æˆèšç±»</span></span><br><span class="line">        labels = fcluster(Z, t=<span class="variable language_">self</span>.eps, criterion=<span class="string">'distance'</span>)  <span class="comment"># tè¡¨ç¤ºèšç±»çš„è·ç¦»é˜ˆå€¼</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> labels</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">group_clusters</span>(<span class="params">self, phrases, labels</span>):</span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        æ ¹æ® DBSCAN ç»“æœå°†çŸ­è¯­åˆ†ç»„</span></span><br><span class="line"><span class="string">        :param phrases: åŸå§‹çŸ­è¯­åˆ—è¡¨</span></span><br><span class="line"><span class="string">        :param labels: èšç±»æ ‡ç­¾</span></span><br><span class="line"><span class="string">        :return: ä»¥å­—å…¸å½¢å¼å­˜å‚¨çš„èšç±»ç»“æœ {ç±»åˆ«ID: çŸ­è¯­åˆ—è¡¨}</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        cluster_dict = defaultdict(<span class="built_in">list</span>)</span><br><span class="line">        <span class="keyword">for</span> phrase, label <span class="keyword">in</span> <span class="built_in">zip</span>(phrases, labels):</span><br><span class="line">            cluster_dict[label].append(phrase)</span><br><span class="line">        <span class="keyword">return</span> cluster_dict</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">save_clusters</span>(<span class="params">self, cluster_dict, output_path</span>):</span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        å°†èšç±»ç»“æœä¿å­˜åˆ° CSV æ–‡ä»¶ï¼Œæ¯ä¸€åˆ—å¯¹åº”ä¸€ä¸ªç±»åˆ«</span></span><br><span class="line"><span class="string">        :param cluster_dict: èšç±»åçš„çŸ­è¯­å­—å…¸</span></span><br><span class="line"><span class="string">        :param output_path: è¾“å‡º CSV æ–‡ä»¶è·¯å¾„</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        <span class="comment"># è¿‡æ»¤æ‰å™ªå£°ç‚¹ï¼ˆDBSCAN ä¸­å™ªå£°ç‚¹çš„ label ä¸º -1ï¼‰</span></span><br><span class="line">        filtered_clusters = {k: v <span class="keyword">for</span> k, v <span class="keyword">in</span> cluster_dict.items() <span class="keyword">if</span> k != -<span class="number">1</span>}</span><br><span class="line"></span><br><span class="line">        <span class="comment"># æŒ‰åˆ—å¯¹é½</span></span><br><span class="line">        max_len = <span class="built_in">max</span>(<span class="built_in">len</span>(v) <span class="keyword">for</span> v <span class="keyword">in</span> filtered_clusters.values())</span><br><span class="line">        cluster_columns = [v + [<span class="string">""</span>] * (max_len - <span class="built_in">len</span>(v)) <span class="keyword">for</span> v <span class="keyword">in</span> filtered_clusters.values()]</span><br><span class="line"></span><br><span class="line">        <span class="comment"># è½¬ç½®å­˜å…¥ DataFrame</span></span><br><span class="line">        df = pd.DataFrame(cluster_columns).T</span><br><span class="line">        df.to_csv(output_path, index=<span class="literal">False</span>, encoding=<span class="string">"utf-8-sig"</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">run</span>(<span class="params">self, input_csv, output_csv</span>):</span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        å®Œæ•´æ‰§è¡Œæµç¨‹ï¼šåŠ è½½æ•°æ® -&gt; è®¡ç®—å‘é‡ -&gt; èšç±» -&gt; ä¿å­˜ç»“æœ</span></span><br><span class="line"><span class="string">        :param input_csv: è¾“å…¥ CSV æ–‡ä»¶è·¯å¾„</span></span><br><span class="line"><span class="string">        :param output_csv: è¾“å‡º CSV æ–‡ä»¶è·¯å¾„</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">"1. åŠ è½½æ•°æ®..."</span>)</span><br><span class="line">        phrases = <span class="variable language_">self</span>.load_data(input_csv)</span><br><span class="line">        </span><br><span class="line">        <span class="built_in">print</span>(<span class="string">"2. è®¡ç®—çŸ­è¯­å‘é‡..."</span>)</span><br><span class="line">        embeddings = <span class="variable language_">self</span>.encode_phrases(phrases)</span><br><span class="line"></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">"3. è¿›è¡Œ å±‚æ¬¡ èšç±»..."</span>)</span><br><span class="line">        labels = <span class="variable language_">self</span>.cluster_phrases(embeddings)</span><br><span class="line"></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">"4. æ•´ç†èšç±»ç»“æœ..."</span>)</span><br><span class="line">        cluster_dict = <span class="variable language_">self</span>.group_clusters(phrases, labels)</span><br><span class="line"></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f"5. å‘ç° <span class="subst">{<span class="built_in">len</span>(cluster_dict)}</span> ä¸ªç±»åˆ«ï¼Œä¿å­˜åˆ° <span class="subst">{output_csv}</span> ..."</span>)</span><br><span class="line">        <span class="variable language_">self</span>.save_clusters(cluster_dict, output_csv)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">"âœ… å¤„ç†å®Œæˆï¼"</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</span><br><span class="line">    <span class="comment"># é…ç½®å‚æ•°</span></span><br><span class="line">    input_file = <span class="string">"taskPhraseClustering/second_fine_grained_tasks_new_sorted.csv"</span>  <span class="comment"># è¾“å…¥æ–‡ä»¶</span></span><br><span class="line">    output_file = <span class="string">"taskPhraseClustering/output_clusters.csv"</span>  <span class="comment"># è¾“å‡ºæ–‡ä»¶</span></span><br><span class="line">    clustering = PhraseClustering(eps=<span class="number">3</span>, min_samples=<span class="number">2</span>)  <span class="comment"># å¯è°ƒèŠ‚ eps å½±å“èšç±»æ•ˆæœ eps å€¼è¶Šå¤§ ç±»åˆ«æ•°è¶Šå°‘</span></span><br><span class="line">    clustering.run(input_file, output_file)</span><br></pre></td></tr></tbody></table></figure><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>é€šè¿‡æœ¬æ•™ç¨‹ï¼Œæˆ‘ä»¬å±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨BERTæ¨¡å‹å¯¹çŸ­è¯­è¿›è¡Œè¯­ä¹‰å‘é‡åŒ–ï¼Œå¹¶ç»“åˆå±‚æ¬¡èšç±»ç®—æ³•å®ç°çŸ­è¯­ç›¸ä¼¼æ€§å»é‡ã€‚æ­¤æ–¹æ³•å¯ä»¥æœ‰æ•ˆåœ°å°†ç›¸ä¼¼çš„çŸ­è¯­åˆ†ç»„ï¼Œå¸®åŠ©æˆ‘ä»¬åœ¨å¤§è§„æ¨¡æ–‡æœ¬æ•°æ®ä¸­æå–æœ‰ç”¨çš„ä¿¡æ¯ã€‚åœ¨å®é™…åº”ç”¨ä¸­ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥æ ¹æ®éœ€è¦è°ƒæ•´èšç±»çš„å‚æ•°ï¼Œä»¥é€‚åº”ä¸åŒçš„æ•°æ®é›†å’Œéœ€æ±‚ã€‚</p><p>å€¼å¾—ä¸€æçš„æ˜¯ï¼Œåœ¨ä¸Šè¿°çš„ä»£ç ä¸­ï¼Œ <code>eps</code> å‚æ•°æ˜¯ä¸€ä¸ªå…³é”®å‚æ•°ï¼Œå®ƒçš„å€¼è¶Šå¤§åˆ™ç±»åˆ«æ•°è¶Šå°‘ï¼Œåä¹‹ï¼Œç±»åˆ«æ•°è¶Šå¤šã€‚</p><p>enjoy it!</p>]]></content>
      
      
      <categories>
          
          <category> è‡ªç„¶è¯­è¨€å¤„ç† </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ–‡æœ¬èšç±» bertå‘é‡è¡¨ç¤º </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åŸºäºç¼–è¾‘è·ç¦»çš„æ–‡æœ¬å±‚æ¬¡èšç±»</title>
      <link href="/2025/03/06/ji-yu-bian-ji-ju-chi-de-wen-ben-ceng-ci-ju-lei/"/>
      <url>/2025/03/06/ji-yu-bian-ji-ju-chi-de-wen-ben-ceng-ci-ju-lei/</url>
      
        <content type="html"><![CDATA[<p>åœ¨è‡ªç„¶è¯­è¨€å¤„ç†ï¼ˆNLPï¼‰å’Œæ•°æ®æ¸…æ´—è¿‡ç¨‹ä¸­ï¼Œå¤„ç†ç›¸ä¼¼æ–‡æœ¬çš„èšç±»é—®é¢˜æ˜¯ä¸€ä¸ªå¸¸è§çš„æŒ‘æˆ˜ã€‚ä¾‹å¦‚ï¼Œåœ¨æœç´¢æ—¥å¿—ã€åŒ»å­¦æœ¯è¯­ã€å®¢æˆ·æŸ¥è¯¢ç­‰æ–‡æœ¬æ•°æ®ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸ä¼šé‡åˆ°æ‹¼å†™ç›¸ä¼¼æˆ–è¿‘ä¼¼è¡¨è¾¾çš„è¯æ±‡ã€‚ä¸ºäº†æ›´å¥½åœ°å¯¹è¿™äº›æ•°æ®è¿›è¡Œåˆ†ç±»å’Œç®¡ç†ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ ç¼–è¾‘è·ç¦»ï¼ˆLevenshtein Distanceï¼‰ ç»“åˆ å±‚æ¬¡èšç±»ï¼ˆHierarchical Clusteringï¼‰ è¿›è¡Œæ–‡æœ¬èšç±»ã€‚</p><p>æœ¬æ–‡ä»‹ç»äº†ä¸€ç§åŸºäº Python çš„ ç¼–è¾‘è·ç¦»å±‚æ¬¡èšç±» æ–¹æ³•ï¼Œå¹¶æä¾›äº†ä¸€ä¸ªå®Œæ•´çš„å®ç°ä»£ç ã€‚è¯¥æ–¹æ³•çš„æ ¸å¿ƒæ€æƒ³æ˜¯ï¼š</p><ul><li><p>è®¡ç®—ç¼–è¾‘è·ç¦»çŸ©é˜µï¼šé€šè¿‡ Levenshtein è·ç¦»è¡¡é‡æ–‡æœ¬ä¹‹é—´çš„ç›¸ä¼¼æ€§ã€‚</p></li><li><p>å±‚æ¬¡èšç±»ï¼šä½¿ç”¨å±‚æ¬¡èšç±»ï¼Œå°†ç›¸ä¼¼çš„æ–‡æœ¬å½’ç±»åˆ°ç›¸åŒçš„ç°‡ä¸­ã€‚</p></li><li><p>æ’åºå’Œè¾“å‡ºï¼šæŒ‰ç…§èšç±»ç»“æœå¯¹æ•°æ®è¿›è¡Œæ’åºï¼Œå¹¶å°†ç»“æœä¿å­˜ä¸º CSV æ–‡ä»¶ï¼Œä¾¿äºåç»­åˆ†æã€‚</p></li></ul><br>ä¸‹é¢æ˜¯å®ç°ä»£ç :<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">from</span> scipy.cluster.hierarchy <span class="keyword">import</span> linkage, fcluster</span><br><span class="line"><span class="keyword">from</span> scipy.spatial.distance <span class="keyword">import</span> pdist, squareform</span><br><span class="line"><span class="keyword">import</span> Levenshtein  <span class="comment"># ç”¨äºè®¡ç®—ç¼–è¾‘è·ç¦»</span></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">EditDistanceClustering</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, input_csv: <span class="built_in">str</span>, output_csv: <span class="built_in">str</span>, column_name: <span class="built_in">str</span>, threshold: <span class="built_in">int</span> = <span class="number">5</span></span>):</span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        åˆå§‹åŒ–ç±»</span></span><br><span class="line"><span class="string">        :param input_csv: è¾“å…¥CSVæ–‡ä»¶è·¯å¾„</span></span><br><span class="line"><span class="string">        :param output_csv: è¾“å‡ºCSVæ–‡ä»¶è·¯å¾„</span></span><br><span class="line"><span class="string">        :param column_name: éœ€è¦èšç±»çš„åˆ—å</span></span><br><span class="line"><span class="string">        :param threshold: è·ç¦»é˜ˆå€¼ï¼Œå†³å®šç°‡çš„åˆ’åˆ†</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        <span class="variable language_">self</span>.input_csv: <span class="built_in">str</span> = input_csv</span><br><span class="line">        <span class="variable language_">self</span>.output_csv: <span class="built_in">str</span> = output_csv</span><br><span class="line">        <span class="variable language_">self</span>.column_name: <span class="built_in">str</span> = column_name</span><br><span class="line">        <span class="variable language_">self</span>.threshold: <span class="built_in">int</span> = threshold</span><br><span class="line">        <span class="variable language_">self</span>.df: pd.DataFrame | <span class="literal">None</span> = <span class="literal">None</span>  <span class="comment"># åˆå§‹åŒ–DataFrameå˜é‡</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">read_csv</span>(<span class="params">self</span>) -&gt; <span class="literal">None</span>:</span><br><span class="line">        <span class="string">"""è¯»å–CSVæ–‡ä»¶åˆ°DataFrameä¸­"""</span></span><br><span class="line">        <span class="variable language_">self</span>.df = pd.read_csv(<span class="variable language_">self</span>.input_csv)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">lev_distance</span>(<span class="params">self, s1: <span class="built_in">str</span>, s2: <span class="built_in">str</span></span>) -&gt; <span class="built_in">int</span>:</span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        è®¡ç®—ä¸¤ä¸ªå­—ç¬¦ä¸²ä¹‹é—´çš„Levenshteinç¼–è¾‘è·ç¦»</span></span><br><span class="line"><span class="string">        :param s1: ç¬¬ä¸€ä¸ªå­—ç¬¦ä¸²</span></span><br><span class="line"><span class="string">        :param s2: ç¬¬äºŒä¸ªå­—ç¬¦ä¸²</span></span><br><span class="line"><span class="string">        :return: ç¼–è¾‘è·ç¦»</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        <span class="keyword">return</span> Levenshtein.distance(s1, s2)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">compute_edit_distance_matrix</span>(<span class="params">self</span>) -&gt; np.ndarray:</span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        è®¡ç®—å­—ç¬¦ä¸²åˆ—è¡¨çš„ç¼–è¾‘è·ç¦»çŸ©é˜µ</span></span><br><span class="line"><span class="string">        :return: è®¡ç®—å¾—åˆ°çš„ç¼–è¾‘è·ç¦»çŸ©é˜µï¼ˆäºŒç»´æ•°ç»„ï¼‰</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        <span class="comment"># è·å–æŒ‡å®šåˆ—çš„æ‰€æœ‰å­—ç¬¦ä¸²å¹¶è½¬æ¢ä¸ºåˆ—è¡¨</span></span><br><span class="line">        strings: <span class="built_in">list</span>[<span class="built_in">str</span>] = <span class="variable language_">self</span>.df[<span class="variable language_">self</span>.column_name].astype(<span class="built_in">str</span>).tolist()</span><br><span class="line">        <span class="comment"># å°†å­—ç¬¦ä¸²åˆ—è¡¨è½¬æ¢ä¸ºNumPyæ•°ç»„ï¼Œå¹¶è°ƒæ•´ä¸ºäºŒç»´æ ¼å¼</span></span><br><span class="line">        strings_array: np.ndarray = np.array(strings).reshape(-<span class="number">1</span>, <span class="number">1</span>)</span><br><span class="line">        <span class="comment"># è®¡ç®—ç¼–è¾‘è·ç¦»çŸ©é˜µ</span></span><br><span class="line">        <span class="keyword">return</span> squareform(pdist(strings_array, <span class="keyword">lambda</span> u, v: <span class="variable language_">self</span>.lev_distance(u[<span class="number">0</span>], v[<span class="number">0</span>])))</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">cluster_and_sort</span>(<span class="params">self</span>) -&gt; <span class="literal">None</span>:</span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        æ‰§è¡Œå±‚æ¬¡èšç±»ï¼Œå¹¶æ ¹æ®èšç±»ç»“æœæ’åº</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        <span class="comment"># è®¡ç®—ç¼–è¾‘è·ç¦»çŸ©é˜µ</span></span><br><span class="line">        distance_matrix: np.ndarray = <span class="variable language_">self</span>.compute_edit_distance_matrix()</span><br><span class="line">        <span class="comment"># ä½¿ç”¨å±‚æ¬¡èšç±»æ–¹æ³•ï¼ˆWardæ–¹æ³•ï¼‰è¿›è¡Œèšç±»</span></span><br><span class="line">        linkage_matrix: np.ndarray = linkage(distance_matrix, method=<span class="string">'ward'</span>)</span><br><span class="line">        <span class="comment"># æ ¹æ®è®¾å®šçš„é˜ˆå€¼è¿›è¡Œèšç±»åˆ’åˆ†</span></span><br><span class="line">        clusters: np.ndarray = fcluster(linkage_matrix, <span class="variable language_">self</span>.threshold, criterion=<span class="string">'distance'</span>)</span><br><span class="line">        <span class="comment"># å°†ç°‡ç¼–å·æ·»åŠ åˆ°DataFrameä¸­</span></span><br><span class="line">        <span class="variable language_">self</span>.df[<span class="string">'Cluster'</span>] = clusters</span><br><span class="line">        <span class="comment"># æŒ‰ç°‡ç¼–å·æ’åºï¼Œå¹¶å»æ‰Clusteråˆ—</span></span><br><span class="line">        <span class="variable language_">self</span>.df = <span class="variable language_">self</span>.df.sort_values(by=[<span class="string">'Cluster'</span>]).drop(columns=[<span class="string">'Cluster'</span>])</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">save_csv</span>(<span class="params">self</span>) -&gt; <span class="literal">None</span>:</span><br><span class="line">        <span class="string">"""å°†å¤„ç†åçš„DataFrameä¿å­˜å›CSVæ–‡ä»¶"""</span></span><br><span class="line">        <span class="variable language_">self</span>.df.to_csv(<span class="variable language_">self</span>.output_csv, index=<span class="literal">False</span>, encoding=<span class="string">'utf-8-sig'</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">run</span>(<span class="params">self</span>) -&gt; <span class="literal">None</span>:</span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        è¿è¡Œå®Œæ•´çš„æ•°æ®å¤„ç†æµç¨‹ï¼ŒåŒ…æ‹¬è¯»å–CSVã€èšç±»æ’åºã€ä¿å­˜CSV</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        <span class="variable language_">self</span>.read_csv()</span><br><span class="line">        <span class="variable language_">self</span>.cluster_and_sort()</span><br><span class="line">        <span class="variable language_">self</span>.save_csv()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># ç¤ºä¾‹ç”¨æ³•</span></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</span><br><span class="line">    <span class="comment"># æŒ‡å®šè¾“å…¥å’Œè¾“å‡ºCSVæ–‡ä»¶è·¯å¾„ä»¥åŠéœ€è¦èšç±»çš„åˆ—</span></span><br><span class="line">    clustering: EditDistanceClustering = EditDistanceClustering(</span><br><span class="line">        <span class="string">'data/second_fine_grained_tasks_new.csv'</span>, </span><br><span class="line">        <span class="string">'data/second_fine_grained_tasks_new_sorted1.csv'</span>, </span><br><span class="line">        <span class="string">'ç»†ç²’åº¦_ä»»åŠ¡ç›¸å…³æŸ¥è¯¢'</span></span><br><span class="line">    )</span><br><span class="line">    <span class="comment"># è¿è¡Œèšç±»æµç¨‹</span></span><br><span class="line">    clustering.run()</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><br><p>ä»¥ä¸Šä»£ç è¿è¡Œå®Œä¹‹åï¼Œä¼šå°† <code>data/second_fine_grained_tasks_new.csv</code> æ–‡ä»¶ä¸­çš„æ–‡æœ¬æ•°æ®æŒ‰ç…§ç¼–è¾‘è·ç¦»è¿›è¡Œå±‚æ¬¡èšç±»ï¼Œå¹¶æ ¹æ®èšç±»ç»“æœè¿›è¡Œæ’åºï¼Œ<br>æœ€åå°†ç»“æœä¿å­˜åˆ° <code>data/second_fine_grained_tasks_new_sorted1.csv</code> ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> è‡ªç„¶è¯­è¨€å¤„ç† </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ–‡æœ¬èšç±» ç¼–è¾‘è·ç¦» </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Aiç«èµ›å¹³å°</title>
      <link href="/2025/02/27/ai-jing-sai-ping-tai/"/>
      <url>/2025/02/27/ai-jing-sai-ping-tai/</url>
      
        <content type="html"><![CDATA[<p>æœ€è¿‘å¯¹å¸¸è§çš„Aiç«èµ›å¹³å°åšäº†æ•´ç†ï¼Œè®°å½•å¦‚ä¸‹ï¼š</p><ul><li>Kaggle:  <a href="https://www.kaggle.com/">https://www.kaggle.com/</a></li><li>AIcrowd: <a href="https://www.aicrowd.com/">https://www.aicrowd.com/</a></li><li>Codalab :  <a href="https://codalab.lisn.upsaclay.fr/">https://codalab.lisn.upsaclay.fr/</a></li><li>DrivenData: <a href="https://www.drivendata.org/">https://www.drivendata.org/</a></li><li>Grand Challenge: <a href="https://grand-challenge.org/">https://grand-challenge.org/</a></li><li>Topcoder:  <a href="https://www.topcoder.com/challenges">https://www.topcoder.com/challenges</a></li><li>Zindi: <a href="https://zindi.africa/">https://zindi.africa/</a></li><li>å¤©æ± :  <a href="https://tianchi.aliyun.com/">https://tianchi.aliyun.com/</a></li><li>DataCastle: <a href="http://www.dcjingsai.com/">http://www.dcjingsai.com/</a></li><li>AI Studio:  <a href="https://aistudio.baidu.com/">https://aistudio.baidu.com/</a></li></ul><p>å„èµ›äº‹å¹³å°çš„ç‰¹ç‚¹æ±‡æ€»å¦‚ä¸‹ï¼š</p><p><img src="https://raw.githubusercontent.com/Skylyong/i/main/20250228094452.png" alt="image-20250228094442500"></p><p>æ³¨ï¼š ä¸Šé¢çš„ä¿¡æ¯æ¥è‡ªäºå¤§æ¨¡å‹ï¼Œä½†å¯¹ç»™å‡ºçš„é“¾æ¥åšäº†äººå·¥éªŒè¯ï¼Œå…¶ä¸­é™¤ Topcoder å¹³å°é¡µé¢æ˜¾ç¤ºä¸å…¨ä»¥å¤–ï¼Œå…¶ä»–å¹³å°ç»™å‡ºçš„é“¾æ¥åœ°å€å‡å¯ä»¥æ­£å¸¸è®¿é—®ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> æ€»ç»“ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> aiç«èµ› </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>pythonæ—¥å¸¸å¼€å‘æ‚è®°</title>
      <link href="/2025/02/19/python-ri-chang-kai-fa-za-ji/"/>
      <url>/2025/02/19/python-ri-chang-kai-fa-za-ji/</url>
      
        <content type="html"><![CDATA[<h1 id="macç³»ç»Ÿ-pandaså­˜å‚¨ä¸ºcsv-åœ¨excelä¸­æ‰“å¼€ä¹±ç "><a href="#macç³»ç»Ÿ-pandaså­˜å‚¨ä¸ºcsv-åœ¨excelä¸­æ‰“å¼€ä¹±ç " class="headerlink" title="macç³»ç»Ÿ pandaså­˜å‚¨ä¸ºcsv åœ¨excelä¸­æ‰“å¼€ä¹±ç "></a>macç³»ç»Ÿ pandaså­˜å‚¨ä¸ºcsv åœ¨excelä¸­æ‰“å¼€ä¹±ç </h1><blockquote><p>åœ¨ä½¿ç”¨pandaså­˜å‚¨æ•°æ®ä¸ºcsvæ–‡ä»¶åï¼Œåœ¨excelä¸­æ‰“å¼€ä¼šå‡ºç°ä¹±ç é—®é¢˜ï¼Œè§£å†³æ–¹æ³•å¦‚ä¸‹ï¼š<br>æŒ‡å®šç¼–ç æ ¼å¼ä¸º<code>utf-8-sig</code>ï¼Œå³å¯è§£å†³é—®é¢˜ã€‚</p></blockquote><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df.to_csv(<span class="string">'output.csv'</span>, index=<span class="literal">False</span>, encoding=<span class="string">'utf-8-sig'</span>)</span><br></pre></td></tr></tbody></table></figure><h1 id="api-è°ƒç”¨å¤§æ¨¡å‹æ—¶ï¼ŒæŒ‡å®šè¿”å›jsonæ ¼å¼æ•°æ®"><a href="#api-è°ƒç”¨å¤§æ¨¡å‹æ—¶ï¼ŒæŒ‡å®šè¿”å›jsonæ ¼å¼æ•°æ®" class="headerlink" title="api è°ƒç”¨å¤§æ¨¡å‹æ—¶ï¼ŒæŒ‡å®šè¿”å›jsonæ ¼å¼æ•°æ®"></a>api è°ƒç”¨å¤§æ¨¡å‹æ—¶ï¼ŒæŒ‡å®šè¿”å›jsonæ ¼å¼æ•°æ®</h1><blockquote><p>è§£å†³æ–¹æ³•å¦‚ä¸‹ï¼š æŒ‡å®š response_format ä¸º <code>{"type":"json_object"}</code>ï¼Œä½†æ˜¯è¿™ä¸ªæ–¹æ³•åœ¨deepseekä¸­ä¸é€‚ç”¨ã€‚</p></blockquote><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">client = openai = OpenAI(api_key=gpt_api_key,</span><br><span class="line">        base_url=gpt_base_url</span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">response = client.chat.completions.create(</span><br><span class="line">                model= model,</span><br><span class="line">                messages=[</span><br><span class="line">                    {<span class="string">"role"</span>: <span class="string">"system"</span>, <span class="string">"content"</span>: <span class="string">"ä½ æ˜¯ä¸€åä¸­åŒ»è¯ä¸“å®¶"</span>},</span><br><span class="line">                    {<span class="string">"role"</span>: <span class="string">"user"</span>, <span class="string">"content"</span>: prompt}</span><br><span class="line">                ],</span><br><span class="line">                max_tokens=<span class="number">2048</span>,</span><br><span class="line">                response_format={<span class="string">"type"</span>:<span class="string">"json_object"</span>}</span><br><span class="line">            )</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><blockquote><p> openAi å®˜æ–¹è§£é‡Šï¼š</p><p> <img src="https://raw.githubusercontent.com/Skylyong/i/main/20250219171031.png" alt="image-20250219171024040"></p><p> å‚è€ƒé“¾æ¥ï¼š<a href="https://beta.openai.com/docs/api-reference/completions/create">openaiå®˜æ–¹æ–‡æ¡£</a></p></blockquote><h1 id="fishå¯¼è‡´çš„Macç«¯ä¸Linuxç«¯è¿œç¨‹è¿æ¥æœåŠ¡å™¨è¶…æ—¶"><a href="#fishå¯¼è‡´çš„Macç«¯ä¸Linuxç«¯è¿œç¨‹è¿æ¥æœåŠ¡å™¨è¶…æ—¶" class="headerlink" title="fishå¯¼è‡´çš„Macç«¯ä¸Linuxç«¯è¿œç¨‹è¿æ¥æœåŠ¡å™¨è¶…æ—¶"></a>fishå¯¼è‡´çš„Macç«¯ä¸Linuxç«¯è¿œç¨‹è¿æ¥æœåŠ¡å™¨è¶…æ—¶</h1><p>å½“è¿œç¨‹æœåŠ¡å™¨é…ç½®ä½¿ç”¨fishæ—¶, å¯èƒ½å‡ºç°Macç«¯æˆ–Linuxç«¯æ— æ³•è¿æ¥è¿œç¨‹æœåŠ¡å™¨çš„é—®é¢˜, å‚è€ƒ<a href="https://github.com/microsoft/vscode-remote-release/issues/2509">vscodeçš„ISSUS</a>, å¯é…ç½®â€remote.SSH.useLocalServerâ€: falseæ¥è§£å†³æ­¤é—®é¢˜ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹å¼€å‘ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é€šè¿‡dockeréƒ¨ç½²doccanoæ ‡æ³¨å·¥å…·</title>
      <link href="/2025/02/12/tong-guo-docker-bu-shu-doccano-biao-zhu-gong-ju/"/>
      <url>/2025/02/12/tong-guo-docker-bu-shu-doccano-biao-zhu-gong-ju/</url>
      
        <content type="html"><![CDATA[<p>ä¸ŠåŠå¹´ä½¿ç”¨äº† <code>doccano</code> æ ‡æ³¨å·¥å…·å¯¹å‘½åå®ä½“è¯†åˆ«ä»»åŠ¡åšäº†æ ‡æ³¨ï¼Œæ„Ÿè§‰å¾ˆå¥½ç”¨ã€‚<br>æœ€è¿‘å‡†å¤‡å°†å…¶éƒ¨ç½²åˆ°æœåŠ¡å™¨ä¸Šï¼Œé€šè¿‡ <code>docker</code> å®¹å™¨çš„æ–¹å¼è¿›è¡Œï¼Œä»¥ä¾¿äºä»¥åå¯ä»¥å¿«é€Ÿéƒ¨ç½²ã€‚</p><p>è®¸ä¹…ä¸ç”¨ä¹Ÿæ˜¯é‡åˆ°äº†ä¸å°‘é—®é¢˜ï¼Œä¸»è¦æ˜¯éƒ¨ç½²å¥½ç³»ç»Ÿåï¼Œä¸Šä¼ æ•°æ®ä¸€ç›´è½¬åœˆï¼Œæ²¡æœ‰ååº”ï¼Œåé¢å‘ç°æ˜¯å› ä¸ºæ²¡æœ‰å¯åŠ¨ <code>doccano task</code>,<br>è€Œtaskéœ€è¦å’Œ <code>doccano webserver</code> ä¸€èµ·å¯åŠ¨ï¼Œ <code>openai</code> ç»™æˆ‘çš„å»ºè®®æ˜¯å¯åŠ¨ä¸¤ä¸ª <code>docker</code> æœåŠ¡ï¼Œæˆ‘è¿˜æ˜¯é€‰ç”¨äº†å¸¸è§„çš„ <code>screen</code> æ–¹å¼ã€‚</p><p>ä¸‹é¢æ˜¯è‡ªå·±ç¼–å†™çš„å¯ä»¥ä½¿ç”¨çš„ <code>docker-compose</code> æ–‡ä»¶ï¼Œè®°å½•åœ¨æ­¤ï¼Œæ–¹ä¾¿ä»¥åè°ƒç”¨ã€‚</p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">'3.8'</span></span><br><span class="line"></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">doccano:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">docker-0.unsee.tech/python:3.9</span></span><br><span class="line">    <span class="attr">container_name:</span> <span class="string">doccano</span></span><br><span class="line">    <span class="attr">restart:</span> <span class="string">unless-stopped</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">./doccano_data:/app/doccano_data</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">"8000:8000"</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">PIP_NO_CACHE_DIR=off</span></span><br><span class="line">    <span class="attr">command:</span> <span class="string">&gt;</span></span><br><span class="line"><span class="string">      sh -c "apt-get update &amp;&amp; apt-get install -y screen &amp;&amp;</span></span><br><span class="line"><span class="string">             pip install --no-cache-dir doccano &amp;&amp;</span></span><br><span class="line"><span class="string">             pip install numpy==1.24.0 pandas==1.5.3 &amp;&amp;</span></span><br><span class="line"><span class="string">             doccano init &amp;&amp;</span></span><br><span class="line"><span class="string">             doccano createuser --username admin --password admin &amp;&amp;</span></span><br><span class="line"><span class="string">             screen -dmS doccano_server doccano webserver --port 8000 &amp;&amp;</span></span><br><span class="line"><span class="string">             screen -dmS doccano_task doccano task &amp;&amp;</span></span><br><span class="line"><span class="string">             tail -f /dev/null"</span></span><br></pre></td></tr></tbody></table></figure>]]></content>
      
      
      <categories>
          
          <category> æ€»ç»“ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> docker, doccano </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åœ¨å‘ˆè´¡çš„æ—¥å­â€”â€”å¤ä¹ èµ„æ–™ä¸è§äº†</title>
      <link href="/2025/02/06/zai-cheng-gong-de-ri-zi-fu-xi-zi-liao-bu-jian-liao/"/>
      <url>/2025/02/06/zai-cheng-gong-de-ri-zi-fu-xi-zi-liao-bu-jian-liao/</url>
      
        <content type="html"><![CDATA[<p>åˆç¿»åˆ°äº†ä¸€ç¯‡å½“æ—¶çš„è®°å½•ï¼Œèµ·å› æ˜¯å¤ä¹ èµ„æ–™å¤ªå¤šï¼Œä¸æ–¹ä¾¿éšèº«æºå¸¦ï¼Œæˆ‘å°†ä¹¦è—åœ¨äº†å›¾ä¹¦é¦†çš„é¡¶æ¥¼æ¶ˆé˜²é€šé“ï¼ˆé˜…è§ˆå®¤åœ¨äºŒæ¥¼ï¼Œä¹¦è—åœ¨12æ¥¼é™„è¿‘ï¼‰ï¼Œç»“æœï¼Œè¢«ä¿å®‰æ”¶èµ°äº†ã€‚è¿˜ä¾ç¨€è®°å¾—ï¼Œåˆå¤œçš„ä¿å®‰ä»¬æ‰“ç€æ‰‹ç”µç­’ï¼Œåœ¨è¿‡é“ã€é—¨çª—æ—®æ—¯è§’ã€èŠ±ç“¶åé¢åˆ°å¤„ç¿»æ‰¾è€ƒç ”erä¹¦çš„æƒ…èŠ‚ï¼Œå¥½ä¸€æ³¢çŒ«é¼ æ¸¸æˆã€‚</p><p>ä¸‹é¢æ˜¯å½“æ—¶çš„è®°å½•ï¼š</p><blockquote><p>ä¸€æ—©ä¸Šæ¥å›¾ä¹¦é¦†ï¼Œå‘ç°ä¹¦ä¸è§äº†ã€‚ä»7ç‚¹å¤šæŠ˜è…¾åˆ°ç°åœ¨ï¼ˆ8:55ï¼‰æ‰ä»ç®¡ç†å‘˜å¤„æ‹¿åˆ°äº†æˆ‘çš„å¤ä¹ èµ„æ–™ã€‚æ•°äº†æ•°åº”è¯¥æ˜¯æ²¡æœ‰ä¸¢å¤±ï¼Œæ‚¬ç€çš„ä¸€é¢—å¿ƒæ€»ç®—æ”¾äº†ä¸‹æ¥ã€‚å·²ç»è¿‡äº†æ—©ç‚¹çš„æ—¶é—´ï¼Œæ—©ç‚¹æ˜¯åƒä¸æˆäº†ã€‚</p><p>å¯æ˜¯æ¥ä¸‹æ¥çš„æ™šä¸Šæˆ‘åº”è¯¥å¦‚ä½•å®‰ç½®æˆ‘çš„ä¹¦å‘¢ï¼Ÿä½çš„åœ°æ–¹ç¦»å›¾ä¹¦é¦†è¿‘5å…¬é‡Œï¼Œå°†å…¨éƒ¨çš„ä¹¦èƒŒè¿›èƒŒå‡ºæ˜¯æ–­ç„¶ä¸è¡Œçš„ã€‚</p><p>Plan 1:æŠŠä¹¦ç²¾å‡ä¸€ä¸‹ï¼Œæ¯å¤©åªå¸¦å½“å¤©è¦çœ‹çš„ä¹¦ï¼Œè¿™æ ·çš„é‡ç°é˜¶æ®µèƒŒè¿›èƒŒå‡ºåº”è¯¥æ˜¯æ²¡æœ‰é—®é¢˜çš„ã€‚åªæ˜¯çœ‹åˆ°ä¸€ä¸ªçŸ¥è¯†ç‚¹æƒ³è¦æ‰¾å‚è€ƒçš„è¯ï¼Œå°±ä¸èƒ½äº†ã€‚ä¹Ÿè®¸æˆ‘å¯ä»¥æŠŠä¹¦éƒ½æ‰«æä¸€ä¸‹åšæˆç”µå­çš„ï¼Œä½†æ˜¯é˜…è¯»ä½“éªŒæ€ä¹ˆæ ·å‘¢ï¼Ÿä¼šä¸ä¼šå¾ˆå·®ï¼Ÿæ‰«æä¹Ÿéœ€è¦å¾ˆå¤šæ—¶é—´ã€‚</p><p>Plan2:ç»§ç»­å†’ç€é£é™©ï¼Œå†æƒ³åŠæ³•æ‰¾ä¸€ä¸ªæ›´éšè”½çš„åœ°æ–¹ï¼ŒæŠŠä¹¦è—åœ¨å›¾ä¹¦é¦†å†…ã€‚ä¼˜ç‚¹ï¼šè½»è£…å‡ºè¡Œï¼Œä¸ç´¯ï¼Œæ–¹ä¾¿éšæ—¶ç¿»é˜…å‚è€ƒï¼Œæœ‰ç´§è¿«æ„Ÿï¼Œæœ‰åˆ©äºä¿æŒä¸æ”¾æ¾çš„å¤ä¹ çŠ¶æ€ã€‚ç¼ºç‚¹ï¼šé£é™©å¤§ï¼Œå¦‚æœå†è¢«å‘ç°ï¼Œæœ‰å¯èƒ½æ‹¿ä¸äº†ä¹¦ï¼Œå› ä¸ºæœ‰å†å²ï¼Œåœ¨ä¿å®‰é‚£é‡Œä¸å¥½äº¤ä»£ã€‚</p><p>Plan3:å¯¹ä¿å®‰ã€ç‰©ä¸šäººå‘˜è¿›è¡Œå…¬å…³ï¼Œçœ‹èƒ½å¦å°†ä¹¦æ”¾åœ¨å…¶åŠå…¬å®¤æˆ–è€…å·¥å…·å®¤ã€‚ä¼˜ç‚¹ï¼šå…·æœ‰2çš„æ‰€æœ‰ä¼˜ç‚¹ï¼Œå¤–åŠ é›¶é£é™©ã€‚ç¼ºç‚¹ï¼šå…¬å…³ç²¾åŠ›è€—è´¹å¤§ï¼Œä¸ä¸€å®šèƒ½æˆåŠŸï¼Œä»æœ€è¿‘çš„æ¥è§¦ä¸‹æ¥ï¼Œæ„Ÿè§‰éš¾åº¦å¾ˆå¤§ã€‚ï¼ˆè¿™é‡Œçš„å·¥ä½œäººå‘˜æ‰§è¡Œæ”¶ä¹¦å¾ˆå½»åº•ï¼Œä½†ä¹Ÿå¹¶ä¸æ˜¯æ²¡æœ‰äººæƒ…å‘³ï¼Œè¿˜éœ€è¦ä¸€æ®µæ—¶é—´æ¥è§‚å¯Ÿã€‚ï¼‰</p><p>Plan4:è”åˆå­¦æ ¡çš„åŒå­¦ä¸€èµ·å‘å›¾ä¹¦é¦†é¢†å¯¼åæ˜ ï¼Œå¸Œæœ›èƒ½å¤Ÿæ”¾å®½æ”¶ä¹¦çš„æ¡ä»¶ã€‚è¿™ä¸ªéš¾åº¦æœªçŸ¥ï¼Œæ²¡æœ‰å°è¯•è¿‡ï¼Œè€—è´¹ç²¾åŠ›æœ€å¤§ã€‚</p><p>Plan5:åœ¨å°±è¿‘éå›¾ä¹¦é¦†çš„åœ°æ–¹æ‰¾ä¸€ä¸ªæ”¾ä¹¦ç‚¹ï¼Œä¼˜ç‚¹ï¼šä¸ç”¨æ¥å›æ¬å¾ˆå¤šä¹¦ï¼Œæœ‰ç´§è¿«æ„Ÿã€‚ç¼ºç‚¹ï¼šä¸å¤Ÿä¾¿æ·ï¼Œæœ‰ä¸¢å¤±æ‰¾ä¸åˆ°çš„å¯èƒ½ã€‚è¿™ä¸ªéœ€è¦å†è€ƒå¯Ÿè€ƒå¯Ÿï¼Œå†å…·ä½“é—®é¢˜å…·ä½“åˆ†æã€‚</p><p>æ€»è®°ï¼šç°é˜¶æ®µå…ˆæŒ‰Plan1æ‰§è¡Œï¼Œçœ‹çœ‹ä¸¤å‘¨å†…å¯¹å¤ä¹ çš„å½±å“æœ‰å¤šå¤§ã€‚åŒæ—¶åœ¨ä»Šå¤©ç¡®è®¤plan2æ˜¯å¦å¯è¡Œ(æ˜¯å¦æœ‰æ›´åŠ éšè”½çš„æ”¾ä¹¦ç‚¹ï¼Ÿï¼‰ï¼Ÿä¸€å‘¨å†…ç¡®è®¤plan5æ˜¯å¦å¯è¡Œ(æ˜¯å¦æœ‰ç¦»å›¾ä¹¦é¦†è¿‘çš„å®‰å…¨å¯é çš„æ”¾ä¹¦ç‚¹?ï¼‰ä¸¤å‘¨å†…ç¡®è®¤plan3æ˜¯å¦å¯è¡Œ(èƒ½å¦å…¬å…³ï¼‰ï¼Ÿå¯¹plan4ä¿æŒå…³æ³¨ã€‚</p></blockquote><p>åè®°ï¼šæƒ³èµ·æ¥ï¼Œå½“æ—¶æ˜¯æš‘å‡ï¼Œåº§ä½æœ‰å¾ˆå¤§ä½™é‡ï¼Œä¸å­˜åœ¨å ä½çš„é—®é¢˜ã€‚ä¸€å¼€å§‹ä¿å®‰æ˜¯å…è®¸å­¦ç”Ÿå°†ä¹¦æ”¾åœ¨åº§ä½ä¸Šè¿‡å¤œçš„ï¼Œåæ¥ä¼¼ä¹æ˜¯æŸäº›å­¦ç”Ÿå› ä¸ºâ€å¥½â€ä½ç½®ä¸€ç›´è¢«åˆ«äººå ç”¨ï¼Œå¾—ä¸åˆ°æ¢ä½ç½®çš„æœºä¼šï¼Œå°±æŠŠé—®é¢˜ååº”ç»™äº†æŸé¢†å¯¼ã€‚é¢†å¯¼å¤§ä¸ºå…‰ç«ï¼Œéšä¸‹ä»¤ç¦æ­¢ç•™ä¹¦è¿‡å¤œï¼Œæ‰€ä»¥å‡ºç°äº†å‰æ–‡ â€œä¸¥æ‰“â€çš„ç”»é¢ã€‚å…¶å®ï¼Œè¿™ä½é¢†å¯¼ï¼Œåªè¦æ˜¯ç¨å¾®åŠ¨ç‚¹è„‘å­ï¼Œåˆ’åˆ†å‡ºä¸€å°å—åŒºåŸŸï¼Œæ‹¿å‡ å¼ æ¡Œå­ä¸“é—¨æ”¾ä¹¦å°±æ˜¯çš†å¤§æ¬¢å–œçš„äº‹å„¿äº†ã€‚</p><p>ä¹Ÿæ˜¯æŒºæ€€å¿µï¼Œå½“æ—¶ä¸€ç‚¹ä¸å†…è€—ï¼Œç¢°åˆ°é—®é¢˜ç§¯æåˆ—è®¡åˆ’ï¼Œæƒ³åŠæ³•çš„è‡ªå·±ã€‚</p><p><img src="https://raw.githubusercontent.com/Skylyong/i/main/20250206170912.png" alt="image-20250206170909967"></p>]]></content>
      
      
      <categories>
          
          <category> ç”Ÿæ´»æƒ…æ„Ÿ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‘ˆè´¡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åœ¨å‘ˆè´¡çš„æ—¥å­â€”â€”æé±¼æ²³</title>
      <link href="/2025/02/06/zai-cheng-gong-de-ri-zi-lao-yu-he/"/>
      <url>/2025/02/06/zai-cheng-gong-de-ri-zi-lao-yu-he/</url>
      
        <content type="html"><![CDATA[<p>ä»Šæ—¥å†™è®ºæ–‡å†™ä¹äº†ï¼Œå°±å»ç¿»äº†ç¿»ä»¥å‰è®°çš„ç¬”è®°ï¼Œç¿»åˆ°äº†åœ¨å‘ˆè´¡å­¦ä¹ ç”Ÿæ´»æ—¶æœŸçš„è®°å½•ã€‚æƒ³å½“åˆï¼Œæˆ‘ä¸ºäº†é€ƒé¿å®¶äººäº²æˆšå¸¦æ¥çš„å‹åŠ›ã€ç‹¬è‡ªä¸€äººå»å‘ˆè´¡å¯»æ±‚ä¸€ç‰‡æ¸…å‡€ä¹‹åœ°å¤ä¹ å¤‡è€ƒï¼Œæ—¶å…‰åŒ†åŒ†ï¼Œä¸€æ™ƒå‡ å¹´è¿‡å»äº†ï¼Œä»¤äººæ„Ÿå¹ã€‚</p><p>è™½çœ‹ä»¥å‰è®°å½•çš„æ–‡å­—ç•¥æ˜¾å¹¼ç¨šï¼Œä½†ä¸ºäº†ä¿è¯è®°å½•çš„çœŸå®æ€§ï¼Œæˆ‘ä¸€å­—ä¸è½çš„ç…§æ¬äº†è¿‡æ¥ï¼Œä¸‹é¢æ˜¯å½“æ—¶çš„è®°å½•ï¼š</p><p>ä¸çŸ¥ä¸è§‰å°±åˆ°äº†æœˆæœ«ï¼Œåœ¨å‘ˆè´¡å·²ç»å¿«ä¸€ä¸ªæœˆäº†ã€‚æœ€è¿‘å¤©å¤©æ³¡å›¾ä¹¦é¦†ï¼Œæ„Ÿè§‰æ•ˆç‡æœ‰ç‚¹ä¸‹é™ï¼Œè€Œæˆ‘å¯¹é™¤æ ¡å›­ä¹‹å¤–çš„å‘¨è¾¹ç¯å¢ƒè¿˜ä¸€æ— æ‰€çŸ¥ï¼Œè¶ç€æ²¡ä¸‹é›¨çš„å‘¨å…­å°±å‡ºå»çœ‹äº†çœ‹ã€‚</p><p>ä¸Šåˆé…ç½®å¥½æ— çº¿APæ‰¾äº†ä¸ªå…±äº«è½¦å°±éª‘äº†å‡ºå»ï¼Œæ²¡å¤šä¹…ï¼ˆçº¦30åˆ†é’Ÿï¼‰å°±åˆ°äº†æ»‡æ± è¾¹ä¸Šçš„æé±¼æ²³å…¬å›­ã€‚è™½ç„¶æ˜¯å‘¨æœ«ç”±äºéšæ—¶ä¼šä¸‹é›¨çš„æ ·å­ï¼Œå…¬å›­é‡Œé¢äººä¸å¤šï¼Œå¾ˆæ˜¯æ¸…é™ã€‚</p><p>å…¬å›­ä¾æ»‡æ± ä¸œè¾¹çš„æ¹–å²¸çº¿è€Œå»ºï¼Œå› æœ‰ä¸€æ¡å°æ²³åœ¨æ­¤æ³¨å…¥æ»‡æ± ï¼Œå°æ²³é‡Œå¯ä»¥æåˆ°å°é±¼å°è™¾ï¼Œå› æ­¤å–åä¸ºæé±¼æ²³å…¬å›­ã€‚</p><p>è¿™é‡Œç§æ¤æœ€å¤šçš„è¦æ•°æ°´è¡«äº†ï¼Œå¤§ç‰‡å¤§ç‰‡çš„æ°´è¡«ï¼Œè¡Œèµ°å…¶ä¸­ï¼ŒçŠ¹å¦‚èº«åœ¨ç»¿æµ·ä¸€èˆ¬ï¼Œä»¤äººå¿ƒæ—·ç¥æ€¡ã€‚æ°´è¡«å¯¹æˆ‘è€Œè¨€å¹¶ä¸é™Œç”Ÿï¼Œåœ¨å¹³åŸåœ°åŒºçš„æ¹–è¾¹æ¹¿åœ°å¤§å¤šæœ‰ç§æ¤ï¼Œä½†æ˜¯å¦‚æ­¤å¯†é›†çš„æ°´è¡«æ—æˆ‘æ˜¯ç¬¬ä¸€æ¬¡è§åˆ°ï¼Œè§‰å¾—å¾ˆéœ‡æ’¼ï¼Œç”¨å¯†ä¸é€å…‰æ¥å½¢å®¹ä¹Ÿä¸€ç‚¹ä¸ä¸ºè¿‡ã€‚å›æ¥çš„è·¯ä¸Šä¸€ç›´åœ¨æƒ³ï¼Œåœ¨è¿™æ ·å¯†é›†çš„æ ‘æ—ä¸­ï¼Œæ ‘ä¸æ ‘ä¹‹é—´ä¸ºä½•ä¸ä¼šé®æŒ¡æ‰é˜³å…‰ï¼Œæˆ–è€…å› ç«äº‰å…»æ–™è€Œé€ æˆæŸäº›æ ‘è‹—æ­»äº¡å‘¢ï¼Ÿ</p><p><img src="https://raw.githubusercontent.com/Skylyong/i/main/20250206142919.png" alt="image-20250206142908312"></p><p> çŠ¹å¦‚èº«å¤„ç»¿æµ·ä¹‹ä¸­ ä»¤äººå¿ƒæ—·ç¥æ€¡ï¼ˆåè®°ï¼šåœ¨åæ¥çš„æ—¥å­é‡Œï¼Œè¿™ç‰‡ç»¿è‰²ï¼Œæ—¶å¸¸å‡ºç°åœ¨æˆ‘çš„è„‘å­é‡Œï¼Œåœ¨æˆ‘å¿ƒä¸­ç§ä¸‹äº†ä¸€ç‰‡ç»¿è‰²ä¹‹æµ·ï¼‰</p><p>ç¢ç£¨æ¥ç¢ç£¨å»ï¼Œæˆ‘è§‰å¾—é¦–å…ˆå¾—ç›Šäºæ»‡æ± çš„å­˜åœ¨ï¼Œé€ å°±äº†å‘¨è¾¹çš„æ¹¿åœ°ç”Ÿæ€ï¼Œä½¿å¾—ç©ºæ°”èƒ½å¤Ÿä¸€ç›´ä¿æŒå¾ˆé«˜çš„æ¹¿åº¦ï¼Œæ°´è¡«å–œæ°´å–œæ¹¿ï¼Œè¿™æä¾›äº†å®ƒä»¬å¿…è¦çš„ç”Ÿé•¿æ¡ä»¶ï¼›å¦å¤–ï¼Œé«˜åŸåœ°åŒºä¸åŒå¹³åŸï¼Œè¿™é‡Œå…‰ç…§å……è¶³ï¼Œæ˜†æ˜æ›´æ˜¯å››å­£é˜³å…‰æ˜åªšï¼Œå•ä½é¢ç§¯ä¸Šæä¾›äº†æ¯”å¹³åŸåœ°åŒºæ›´å¤šçš„å…‰èƒ½é‡ï¼Œæ‰€ä»¥æ°´è¡«å¦‚æ­¤å¯†é›†çš„æƒ…å†µä¸‹è¿˜èƒ½ä¿æŒå¾ˆå¥½çš„é•¿åŠ¿ã€‚</p><p>æ¯”èµ·æ°´è¡«å¤§å†›ï¼Œå…¬å›­ä¸­ä¹Ÿç§æ¤äº†ä¸€äº›æŸ³æ ‘ï¼Œæ°´è¡«çš„æŒºæ‹”ä¿ä¸½ï¼ŒæŸ³æ¡å¯è°“åƒå§¿ç™¾æ€ã€å©€å¨œå¤šå§¿ï¼Œå¾ˆå¤šæŸ³æ ‘çš„æ ¹é¡»éƒ½æš´éœ²åœ¨å¤–ï¼Œçœ‹èµ·æ¥åƒè€äººçš„èƒ¡é¡»ï¼Œåªæ˜¯é¢œè‰²æ˜¯æœ±çº¢è‰²çš„ï¼Œè¿œè¿œçœ‹å»è¿˜æœ‰ç‚¹å“äººã€‚</p><p>åœ¨æ—é—´æ•£è½ç€é›¶æ˜Ÿçš„æ‚è‰ï¼ŒåŒ—è¾¹ä¸´è¿‘æ»‡æ± çš„åŒºåŸŸèŠ¦è‹‡ä¸›ç”Ÿã€‚å¦å¤–ï¼Œè‡ªè¡Œè½¦é“çš„ä¸¤è¾¹é›¶é›¶æ•£æ•£ç§æ¤äº†ä¸€äº›ç¾äººè•‰ã€‚</p><p>ä¸ºäº†ä¿æŠ¤æ¹¿åœ°ï¼Œå‡å°‘åƒåœ¾å‡è½»æ±¡æŸ“ï¼Œæ—åŒºå’ŒèŠ¦è‹‡è¡é‡Œç¦æ­¢è®¾æ‘Šå¼€åº—ï¼Œæ ˆé“æˆ–æ­¥é“ä¸Šæ¯ç›¸éš”ä¸è¿œçš„åœ°æ–¹å°±è®¾äº†ä¸€ä¸ªåƒåœ¾æ¡¶ã€‚è¿™æ ·çš„ç¯å¢ƒå¼•æ¥äº†ä¸å°‘é¸Ÿå„¿åœ¨æ­¤å®‰å®¶ã€‚æ°´è¡«æ—é‡Œé¢ï¼Œä¸æ—¶ä¼šä¼ å‡ºçŒ«å¤´é¹°çš„å«å£°ï¼Œä¼°è®¡é‡Œé¢ä½äº†ä¸å°‘ã€‚èŠ¦è‹‡å’Œæ‚è‰ä»ä¸­ï¼Œå¶å°”æœ‰é‡é¸Ÿé£å‡ºï¼Œè¿æ°”å¥½ç‚¹çš„è¯ï¼Œè¿˜èƒ½çœ‹åˆ°ç™½å¤©é¹…åœ¨æ°´é¢åˆ’æ°´ã€‚</p><p><img src="https://raw.githubusercontent.com/Skylyong/i/main/20250206143043.png" alt="image-20250206143039109"></p><p>æœ€è¥¿ä¸´æ¹–çš„æ ˆé“ èƒ½å¤Ÿçœ‹åˆ°æ»‡æ± </p><p>å…¬å›­åŒ—çš„èŠ¦è‹‡è¡æœ‰æ ˆé“ç©¿æ’å…¶ä¸­ï¼Œåœ¨æœ€è¥¿ä¸´æ¹–çš„æ ˆé“ä¸Šèƒ½å¤Ÿæ¬£èµåˆ°æ»‡æ± çš„ç¾æ™¯ï¼Œå¾ˆé€‚åˆæƒ…ä¾£çº¦ä¼šé—²æ¸¸ã€‚å…¬å›­çš„æœ€å—ç«¯æ˜¯ä¸€å°å—äººé€ ç ‚çŸ³æ»©ï¼ˆå…¬å›­çš„åœ°å›¾ä¸Šå«æ²™æ»©ï¼Œä½†æ˜¯åœ°é¢ä¸Šé“ºçš„ç ‚çŸ³ç²’å¾„å·²ç»è¾¾åˆ°ç ¾çŸ³çš„çº§åˆ«äº†ï¼Œç£¨åœ†åº¦ä¹Ÿå¾ˆå·®ï¼Œæˆ‘è§‰å¾—å«ç ‚çŸ³æ»©æ›´ä¸ºå¦¥å½“ï¼‰ï¼Œè¿™é‡Œèšé›†äº†è®¸å¤šå®¶é•¿å’Œå°å­©ï¼Œå°å­©ä»¬æˆ–æ˜¯å¬‰æˆæ‰“é—¹ï¼Œæˆ–æ˜¯åŒå®¶é•¿ä¸€é“çœºæœ›è¿œæ–¹çš„æ¹–é¢ï¼›æœ‰å‡ ä¸ªå­¦ç”Ÿæ¨¡æ ·çš„å¥³å­©ï¼Œç‰¹æ„åŒ–äº†ç¾ç¾çš„å¦†ï¼Œç©¿ä¸Šæ¼‚äº®çš„è¡£æœæ¥è¿™é‡Œæ¸¸ç©æ‹ç…§ï¼Œæ€»ä¹‹å¥½ä¸æƒ¬æ„ã€‚</p><p><img src="https://raw.githubusercontent.com/Skylyong/i/main/20250206150910.png" alt="image-20250206143208654"></p><p>çœºæœ›è¿œæ–¹ï¼ˆä¸€ï¼‰</p><p><img src="https://raw.githubusercontent.com/Skylyong/i/main/20250206143304.png" alt="image-20250206143302496"></p><p> çœºæœ›è¿œæ–¹ï¼ˆäºŒï¼‰</p><p><img src="https://raw.githubusercontent.com/Skylyong/i/main/20250206143405.png" alt="image-20250206143403672"></p><p> çœºæœ›è¿œæ–¹ï¼ˆä¸‰ï¼‰</p><p>ï¼ˆç”±äºå½“æ—¶çš„å¤©æ°”å¹¶ä¸å¥½ï¼Œä¸Šé¢ä¸‰å¼ ç…§ç‰‡æ‹å¾—å¹¶ä¸æ˜¯å¾ˆæ»¡æ„ï¼ŒåæœŸç‰¹æ•ˆä¹Ÿæ²¡æ³•æŒ½æ•‘ï¼Œç´¢æ€§è£å‰ªäº†ä¸€ä¸‹å°±è´´å‡ºäº†ï¼‰</p><p>æˆ‘è¿‡å»çš„æ—¶å€™ï¼Œæ¹–è¾¹æœ‰ä¸€ä¸ªå¤§å”æ­£è¹²ååœ¨è‡ªå·±çš„å°èˆ¹ä¸Šï¼Œèˆ¹å¤´æ•£è½ç€ä¸€äº›å°é±¼ï¼Œçœ‹ä»–ä¸€ä¸ªäººã€‚æˆ‘å¥½å¥‡ä»–çš„å°é±¼ï¼Œå°±è¿‡å»è·Ÿä»–èŠäº†èŠã€‚åŸæ¥å¤§å”çš„é±¼æ˜¯åˆšä»æ»‡æ± é‡Œé¢æèµ·æ¥çš„ï¼Œè¿™é±¼åå«ç®­é±¼ï¼Œè§é£å°±æ­»ï¼Œä¸èƒ½å…»ã€‚ä»–æ­£åœ¨ç­‰ç€æ¸¸å®¢æ¥ä¹°ä»–çš„é±¼ã€‚æˆ‘ä»¬èŠäº†ä¸ä¸€ä¼šå„¿ï¼Œå°±æ¥äº†ä¸€å¯¹å¸¦å°å­©çš„å®¶é•¿æ¥æ‰“å¬ä»–çš„é±¼æ€ä¹ˆå–ï¼Œåç»­åˆæœ‰ä¸å°‘æ¸¸å®¢å‡‘äº†è¿‡æ¥ï¼Œå¥½ä¸çƒ­é—¹ã€‚å¤§å”ä¹Ÿä¸ç”¨ç§¤ï¼ŒæŠ“èµ·å°é±¼é¢ äº†é¢ ã€‚â€œä¸€å…±35å—é’±â€ å­©å­æ¯äº²çŠ¹è±«äº†ä¸€ä¸‹ï¼Œæ²¡å¤šè¯´å°±ä¹°äº†ä¸‹æ¥ï¼Œå°±è¿™æ ·æˆ‘çœ‹ä»–å¾ˆè½»æ¾å°±å®Œæˆäº†ä¸€ç¬”äº¤æ˜“ã€‚</p><p><img src="https://raw.githubusercontent.com/Skylyong/i/main/20250206143520.png" alt="image-20250206143517964"></p><p>è§é£å°±æ­»çš„ç®­é±¼</p><p><img src="https://raw.githubusercontent.com/Skylyong/i/main/20250206143601.png" alt="image-20250206143559093"></p><p>å‡‘è¿‡æ¥çš„æ¸¸å®¢ å¥½ä¸çƒ­é—¹</p><p>ç„¶åä»–åˆæ»‘ç€å°èˆ¹å‘æ¹–é¢æ¼‚å»äº†ï¼Œåªè§ä»–åœ¨ç¦»å²¸è¾¹åå¤šç±³å¼€å¤–çš„åœ°æ–¹åœäº†ä¸‹æ¥ï¼Œç„¶åå¼€å§‹æ”¶ä¹‹å‰åŸ‹å¥½çš„ç½‘ã€‚è§ä»–ä¸€è¿æ”¶äº†å‡ ä¸ªç½‘éƒ½æ²¡å•¥æ”¶è·ï¼Œæˆ‘æœ‰çš„ä¸è€çƒ¦äº†ï¼Œå°±å¾€è¿œå¤„çš„äº­å­èµ°å»ï¼Œæ­‡äº†æ­‡ï¼Œä¹‹ååœ¨å²¸è¾¹æ‹èµ·äº†æ¹–æ°´ã€‚</p><p><img src="https://raw.githubusercontent.com/Skylyong/i/main/20250206143701.png" alt="image-20250206143659749"></p><p>æ­£åœ¨æ•é±¼çš„å¤§å”</p><p>è™½ç„¶è¿‘å¹´æ¥åœ¨å„æ–¹çš„æ²»ç†ä¹‹ä¸‹ï¼Œæ»‡æ± çš„æ°´è´¨å·²ç»æœ‰äº†å¾ˆå¤§çš„æ”¹å–„ã€‚ä½†æ˜¯æ¯”èµ·æˆ‘ä¹‹å‰è§è¿‡çš„ä¸€äº›æ¹–æ³Šæ¥è¯´ï¼Œè¿˜æ˜¯å·®äº†å¾ˆå¤šï¼Œæ¸…æ¾ˆè§åº•æ›´æ˜¯ä¸èƒ½æã€‚ä¹Ÿè®¸æ˜¯å› ä¸ºè¿™é‡Œæ˜¯å…¬å›­ï¼Œäººçš„æ´»åŠ¨æ¯”è¾ƒé¢‘ç¹ï¼Œæ‰€ä»¥å¯¼è‡´é™„è¿‘åŒºåŸŸæ°´è´¨ä¸å¥½ï¼Œä½†æ„¿æ¹–ä¸­å¿ƒåŒºåŸŸæ°´è´¨æ›´å¥½ç‚¹ã€‚</p><p><img src="https://raw.githubusercontent.com/Skylyong/i/main/20250206143901.png" alt="image-20250206143754522"></p><p>æ»‡æ± çš„æ°´ï¼ˆä¸ºäº†æ‹å‡ºæ³¢æ¶›æ±¹æ¶Œçš„æ„Ÿè§‰ï¼Œæˆ‘æŠŠé•œå¤´æ”¾å¾—å¾ˆä½ï¼‰</p><p>å°±åœ¨æˆ‘å¿™äºæ‹ç…§çš„æ—¶å€™ï¼Œå¤§å”çš„èˆ¹å·²ç»å†æ¬¡é å²¸äº†ã€‚æˆ‘èµ¶å¿™å¤§æ­¥èµ°è¿‡å»ï¼Œçœ‹çœ‹ä»–è¿™æ¬¡æ”¶è·æ€ä¹ˆæ ·ã€‚å¯æ˜¯è¿˜æ˜¯æ™šäº†ï¼Œç­‰æˆ‘èµ°åˆ°è·Ÿå‰ï¼Œä»–çš„é±¼å·²ç»è¢«ä¸€ä¸ªä¸­å¹´äººå…¨éƒ¨ä¹°äº†ï¼Œè¿™æ¬¡æ•ä¸Šæ¥çš„å…¨æ˜¯ç™½é²¦ï¼Œä¸åƒä¸Šæ¬¡çš„ç®­é±¼æ‹¿ä¸Šæ¥å°±æ­»äº†ï¼Œè¿™æ¬¡çš„ç™½é²¦ä¸ªä¸ªæ´»è¹¦ä¹±è·³ï¼Œæ¯”ä¸Šæ¬¡çš„è¿˜å¤šã€‚ä»¤æˆ‘æ„ŸåŠ¨æƒŠè®¶çš„æ˜¯è¿™æ¬¡ä»–ä¸€å…±æ‰ä¹°25å—é’±ã€‚æˆ‘è§‰å¾—å¥½äºï¼Œä¸€æ‰“å¬æ‰çŸ¥é“åŸæ¥ç™½é²¦æ²¡æœ‰ç®­é±¼å€¼é’±ã€‚</p><p>å¤§å”å¾ˆå¥è°ˆï¼Œåé¢è¶ä»–åœ¨ç­‰æ¸¸å®¢ä¹°é±¼çš„é—´éš™æˆ‘ä»¬åˆèŠäº†è®¸å¤šã€‚æ®ä»–è¯´ï¼Œæ»‡æ± é‡Œé¢é™¤äº†ä¸Šé¢çš„ç®­é±¼å’Œç™½é²¦å¤–ï¼Œè¿˜èƒ½æ•åˆ°é²¢é±¼ã€é²¤é±¼ã€é»„é¢¡é±¼ï¼Œå…¶ä¸­é»„é¢¡é±¼å–å¾—æœ€è´µã€‚æ•é±¼ä¹Ÿæ˜¯é å¤©æ°”åƒé¥­ï¼Œä¸‹é›¨å¤©é£å¤§çš„æ—¶å€™ï¼Œä¸€å¤©åˆ°æ™šä¹Ÿç½‘ä¸äº†å‡ æ¡é±¼ï¼›æ™´å¤©é£å¹³æµªé™çš„æ—¶å€™å°±æ¯”è¾ƒå¥½ç½‘åˆ°é±¼äº†ï¼Œåƒè¿™æ ·çš„å¤©æ°”å¤§æ¦‚1å°æ—¶å·¦å³å°±èƒ½æ”¶ä¸€æ¬¡ç½‘ã€‚æˆ‘è·Ÿä»–è¯´ä»–è¿™é±¼åˆšæèµ·æ¥çš„ï¼Œæ¯”å¸‚åœºä¸Šçš„æ–°é²œï¼Œæ¥ç©çš„æ¸¸å®¢ä¹Ÿä¸å¤ªä¼šåœ¨æ„ä»·é’±ï¼Œå¯ä»¥å–è´µç‚¹ã€‚å¤§å”å€’æ˜¯å¾ˆå®åœ¨ï¼Œä»–è¯´ä»–å‡ºå»æ”¶ä¸€æ³¢ç½‘æœ‰å¤šæœ‰å°‘ï¼Œçœ‹ç€å·®ä¸å¤šçš„é’±å°±å–äº†ï¼Œä»–å› ä¸ºå–å¾—ä¾¿å®œï¼Œæœ‰ä¸å°‘å›å¤´å®¢å˜ã€‚</p><p>åœ¨è¿™é‡Œæé±¼é™¤äº†çœ‹å¤©æ°”ï¼Œè¿˜å¾—éšæ—¶æ³¨æ„æœ‰å…³éƒ¨é—¨çš„ç®¡ç†äººå‘˜ï¼Œå¦‚æœä¸å¹¸è¢«é€®åˆ°ä¸€æ¬¡ï¼Œå…­ä¸ƒç™¾å—é’±å°±æ²¡äº†ï¼Œè¿™è¦å¥½å‡ å¤©æ‰æŒ£å¾—å›æ¥ã€‚æŒ‰ä»–çš„è¯´æ³•å°±æ˜¯è·Ÿç›¸å…³äººå‘˜â€œæ‰“æ¸¸å‡»â€ï¼Œæ‰“å¥½äº†å°±èƒ½æŒ£é’±ã€‚æˆ‘è·Ÿä»–ç²—ç•¥ç®—äº†ä¸€ä¸‹å½“å¤©çš„æ”¶å…¥ï¼Œå¤§æ¦‚æœ‰150å·¦å³ï¼Œå¦‚æœæ¯å¤©éƒ½è¿™æ ·ï¼Œä¸€ä¸ªæœˆçš„æ”¶å…¥å°±åœ¨4000ä¸Šä¸‹äº†ã€‚</p><p>é™¤äº†æ•é±¼ä¹‹å¤–ï¼Œæˆ‘å¯¹ä»–çš„ç”Ÿæ´»ä¹Ÿäº§ç”Ÿäº†å…´è¶£ã€‚è¿›ä¸€æ­¥äº¤è°ˆä¸­ï¼Œäº†è§£åˆ°ç”±äºå‘ˆè´¡æ–°åŸå»ºè®¾ï¼Œå¤§å”å®¶å·²ç»åŠç†äº†æ‹†è¿è¡¥å¿æ‰‹ç»­ã€‚æ”¿åºœç»™äº†ä»–ä»¬æ¯äºº100å¹³ç±³çš„å›è¿å®‰ç½®æˆ¿ï¼ˆå‰ææ˜¯åŸä½æˆ¿æœ‰100å¹³ç±³ï¼Œä¸è¶³çš„é¢å¤–èŠ±é’±è´­ä¹°ï¼Œä»·é’±å¤§æ¦‚æ˜¯ç›®å‰å¸‚åœºä»·çš„4æŠ˜ï¼‰ï¼›å¦å¤–ä¸ºäº†è®©ä»–ä»¬èƒ½å°½æ—©æ¬ç¦»åŸä½æˆ¿æ¯äººç»™10ä¸‡å…ƒçš„è¡¥åŠ©ï¼Œå›è¿è¿‡æ¸¡æœŸé—´æ¯äººæ¯å¹´æœ‰1ä¸‡å…ƒçš„ç”Ÿæ´»è¡¥åŠ©ï¼Œæˆ‘å¾ˆç¾¡æ…•å¹¶è¡¨ç¤ºä»–ä»¬ç¢°ä¸Šäº†å¥½æ”¿ç­–ã€‚å¯æ˜¯ä»–å¹¶ä¸ä»¥ä¸ºç„¶ï¼Œè§‰å¾—ä»¥åæ¬å»æ–°æˆ¿è¦äº¤ç‰©ä¸šè´¹ï¼Œæ°´ç”µä¹Ÿæ¯”ç°åœ¨é«˜ï¼Œå¢åŠ äº†ç”Ÿæ´»æˆæœ¬ï¼Œå› ä¸ºæ²¡æœ‰å›ºå®šå·¥ä½œï¼Œä»–è§‰å¾—10ä¸‡å—å¾ˆå¿«ä¹Ÿä¼šèŠ±å®Œï¼Œæ‰€ä»¥ä¸æ— æ‹…å¿ƒã€‚</p><p>ä»–æœ‰ä¸€ä¸ªå„¿å­ï¼Œä»Šå¹´å·²ç»é«˜äºŒäº†ï¼ŒæŒ‰ä»–çš„è¯´æ³•é©¬ä¸Šå°±è¦é«˜è€ƒäº†ï¼Œè¯´åˆ°å­©å­çš„æ•™è‚²é—®é¢˜ï¼Œä»–è¿˜æ˜¯ä¸€ç§æ”¾å…»çŠ¶æ€ï¼ŒæŒ‰ä»–çš„è¯´æ³•ï¼Œèƒ½è¯»çš„ä¸ç®¡ä»–ä¹Ÿè¯»å¾—è¿›å»ï¼Œä¸èƒ½è¯»çš„æ‰“ä¹Ÿæ²¡ç”¨ã€‚ä»–ä»¬è¿™é‡Œå°å­©ä¸Šå­¦ç”Ÿæ´»è´¹æ™®éç»™çš„æ¯”è¾ƒå……è£•ï¼Œä¸€ä¸ªå°å­©æ¯ä¸ªæœˆå…‰ç”Ÿæ´»è´¹å°±è¦ç»™åˆ°ä¸€åƒå¤šã€‚æˆ‘è¯´æˆ‘ç°åœ¨çš„ç”Ÿæ´»è´¹ä¹Ÿæ²¡æœ‰ä¸€åƒï¼Œä»–ç¬‘äº†ç¬‘è¡¨ç¤ºä¸ä¿¡ã€‚</p><p>æœ€åï¼Œçœ‹å¤©å·²ç»å¾ˆæ™šäº†ï¼Œè·Ÿå¤§å”é“åˆ«åï¼Œæˆ‘å°±åŒ†åŒ†éª‘è½¦å›èµ¶äº†ï¼Œå›åˆ°äº‘å¤§å·²ç»æ¥è¿‘21ç‚¹äº†ï¼Œä¸æ— æ”¶è·çš„ä¸€å¤©ã€‚</p><p>åè®°ï¼šè™½ç„¶æˆ‘ä»…åœ¨å‘ˆè´¡å‘†äº†åŠå¹´å¤šï¼Œåœ¨æ—¥å¸¸çš„ç”Ÿæ´»ä¸­ï¼Œæˆ‘ä»¬éƒ½ä¼šè§‰å¾—åŠå¹´å¾ˆå¿«å°±è¿‡å»äº†ã€‚ç›´åˆ°åé¢æˆ‘æ‰å‘ç°ï¼Œè¿™åŠå¹´çš„ç”Ÿæ´»ï¼Œç»™æˆ‘çš„ç²¾ç¥ä¸Šç•™ä¸‹äº†å¾ˆæ·±çš„çƒ™å°ï¼Œä¸€äº›ç»å†å†å†åœ¨ç›®ã€‚ç­‰æœ‰ç©ºçš„æ—¶å€™ï¼Œå†æ…¢æ…¢å†™å§ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> ç”Ÿæ´»æƒ…æ„Ÿ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‘ˆè´¡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>vscodeå¼€å‘æŠ€å·§è®°å½•</title>
      <link href="/2025/01/28/vscode-kai-fa-ji-qiao-ji-lu/"/>
      <url>/2025/01/28/vscode-kai-fa-ji-qiao-ji-lu/</url>
      
        <content type="html"><![CDATA[<p>æ—¥å¸¸ç¼–å†™ä»£ç ä¸­ï¼Œvscodeæ˜¯ç”¨çš„æœ€å¤šçš„ç¼–è¾‘å™¨ï¼Œç»å¸¸ä¼šé‡è§ä¸€äº›é—®é¢˜ï¼Œå®šæœŸæ€»ç»“ä¸€ä¸‹ï¼Œæ–¹ä¾¿ä»¥åæŸ¥é˜…ã€‚<br><br></p><h1 id="åœ¨ä¸èƒ½è¿æ¥å¤–ç½‘çš„è¿œç¨‹æœåŠ¡å™¨ä¸Šç”¨copilot"><a href="#åœ¨ä¸èƒ½è¿æ¥å¤–ç½‘çš„è¿œç¨‹æœåŠ¡å™¨ä¸Šç”¨copilot" class="headerlink" title="åœ¨ä¸èƒ½è¿æ¥å¤–ç½‘çš„è¿œç¨‹æœåŠ¡å™¨ä¸Šç”¨copilot"></a>åœ¨ä¸èƒ½è¿æ¥å¤–ç½‘çš„è¿œç¨‹æœåŠ¡å™¨ä¸Šç”¨copilot</h1><blockquote><p>æ‰“å¼€settings.jsonæ–‡ä»¶åœ¨é‡Œé¢æ·»åŠ å¦‚ä¸‹å†…å®¹ï¼š</p></blockquote><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"remote.extensionKind"</span>: {</span><br><span class="line">       <span class="string">"GitHub.copilot"</span>: [<span class="string">"ui"</span>],</span><br><span class="line">       <span class="string">"GitHub.copilot-chat"</span>: [<span class="string">"ui"</span>],</span><br><span class="line">   },</span><br></pre></td></tr></tbody></table></figure><br><h1 id="å¯ç”¨latexçš„pdfé¢„è§ˆ"><a href="#å¯ç”¨latexçš„pdfé¢„è§ˆ" class="headerlink" title="å¯ç”¨latexçš„pdfé¢„è§ˆ"></a>å¯ç”¨latexçš„pdfé¢„è§ˆ</h1><blockquote><p>æŒ‰ä¸‹ Ctrl+Alt+V å¿«æ·é”®ï¼Œå³å¯ã€‚</p><br></blockquote><h1 id="åˆ‡æ¢å±…ä¸­æ¨¡å¼ï¼Œä»¤æ˜¾ç¤ºå†…å®¹æ›´å¤š"><a href="#åˆ‡æ¢å±…ä¸­æ¨¡å¼ï¼Œä»¤æ˜¾ç¤ºå†…å®¹æ›´å¤š" class="headerlink" title="åˆ‡æ¢å±…ä¸­æ¨¡å¼ï¼Œä»¤æ˜¾ç¤ºå†…å®¹æ›´å¤š"></a>åˆ‡æ¢å±…ä¸­æ¨¡å¼ï¼Œä»¤æ˜¾ç¤ºå†…å®¹æ›´å¤š</h1><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Toggle Centered Layout</span><br></pre></td></tr></tbody></table></figure><br><h1 id="ä½¿ç”¨æ’ä»¶å¿«é€Ÿç”ŸæˆcypheræŸ¥è¯¢è¯­å¥"><a href="#ä½¿ç”¨æ’ä»¶å¿«é€Ÿç”ŸæˆcypheræŸ¥è¯¢è¯­å¥" class="headerlink" title="ä½¿ç”¨æ’ä»¶å¿«é€Ÿç”ŸæˆcypheræŸ¥è¯¢è¯­å¥"></a>ä½¿ç”¨æ’ä»¶å¿«é€Ÿç”ŸæˆcypheræŸ¥è¯¢è¯­å¥</h1><h2 id="å®‰è£…ç›¸å…³æ’ä»¶"><a href="#å®‰è£…ç›¸å…³æ’ä»¶" class="headerlink" title="å®‰è£…ç›¸å…³æ’ä»¶"></a>å®‰è£…ç›¸å…³æ’ä»¶</h2><blockquote><p>é¦–å…ˆå®‰è£…ä¸¤ä¸ªæ’ä»¶ï¼š</p><ul><li>Neo4j for VS Code</li><li>Cypher Query Language</li></ul></blockquote><h2 id="ä½¿ç”¨æ’ä»¶"><a href="#ä½¿ç”¨æ’ä»¶" class="headerlink" title="ä½¿ç”¨æ’ä»¶"></a>ä½¿ç”¨æ’ä»¶</h2><blockquote><p>å®‰è£…å¥½æ’ä»¶ä¹‹åï¼ŒæŒ‰ <code>crl+shift+p</code> å¼¹å‡ºè®¾ç½®ï¼š</p><p><img src="https://raw.githubusercontent.com/Skylyong/i/main/20250128211729.png" alt="image-20250128211727292"></p><p>é€‰æ‹© <code>Manage Connection</code> è¿›è¡Œæ•°æ®åº“é…ç½®ï¼Œä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„é…ç½®ç¤ºä¾‹ï¼š</p><p><img src="https://raw.githubusercontent.com/Skylyong/i/main/20250128211911.png" alt="image-20250128211909556"></p><p>é…ç½®å¥½åï¼Œæ–°å»ºä¸€ä¸ª*.cypheråç¼€çš„æ–‡ä»¶ </p><p><img src="https://raw.githubusercontent.com/Skylyong/i/main/20250128212040.png" alt="image-20250128212037885"></p><p>åœ¨å…¶ä¸­è¾“å…¥<code>cypher</code> å‘½ä»¤ï¼š</p><p><img src="https://raw.githubusercontent.com/Skylyong/i/main/20250128212125.png" alt="image-20250128212122981"></p><p>æŒ‰<code>crl+shift+p</code>å¼¹å‡ºè®¾ç½®ï¼Œé€‰æ‹©<code>Run Cypher Statements</code> å³å¯è¿è¡Œå‘½ä»¤ï¼Œè¿è¡Œå®Œä¹‹åä¼šè¿”å›å­—å…¸å½¢å¼çš„ç»“æœã€‚</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹å¼€å‘ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vscode </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åšå®¢ç»´æŠ¤æ—¥å¿—</title>
      <link href="/2025/01/28/bo-ke-wei-hu-ri-zhi/"/>
      <url>/2025/01/28/bo-ke-wei-hu-ri-zhi/</url>
      
        <content type="html"><![CDATA[<ul><li><p>2025å¹´10æœˆ02æ—¥ eggplant.wiki åŸŸååˆ°æœŸï¼Œä¸å†èŠ±é’±è´­ä¹°åŸŸåï¼Œä½¿ç”¨Githubè£¸å¥”ï¼Œå°†ä¸»è¦ç²¾åŠ›ç”¨äºå†…å®¹è¾“å‡º</p></li><li><p>2025å¹´07æœˆ14æ—¥ æ–°å¢å‹é“¾åŠŸèƒ½ï¼Œæ›´æ”¹main titleä¸º â€œLYâ€™s Spaceâ€</p></li><li><p>2025å¹´03æœˆ09æ—¥ æ–°å¢ç›¸å†ŒåŠŸèƒ½ï¼Œä½¿ç”¨ <a href="https://eggplant.wiki/photography/#photo-19">åœ°å€</a></p></li><li><p>2025å¹´03æœˆ08æ—¥ æ›´æ–° hexo è‡³ 7.3.0ã€‚  æ–°å¢æœç´¢åŠŸèƒ½ï¼Œä½¿ç”¨ <a href="https://dashboard.algolia.com/">algolia</a>ï¼Œ ä¸Šæ¬¡å¤±è´¥åŸå› ä¸ºæ²¡æœ‰åŒæ—¶å®‰è£… <code>hexo-algolia</code> å’Œ <code>hexo-algoliasearch</code>æ’ä»¶  ï¼Œ å‰è€…æ˜¯ä¸»é¢˜æ’ä»¶ï¼Œåè€…å®ç°å…¨æ–‡æœç´¢ã€‚ å‚è€ƒ<a href="https://blog.xiabee.cn/posts/archer-algolia/#/%E6%B3%A8%E5%86%8CAlgolia">æ•™ç¨‹1</a> </p></li><li><p>2025å¹´03æœˆ07æ—¥ å°è¯• å¢åŠ æœç´¢åŠŸèƒ½ <strong>å¤±è´¥</strong>ï¼Œ ä½¿ç”¨ <a href="https://dashboard.algolia.com/">algolia</a> , æ’ä»¶ä¸º <a href="https://github.com/LouisBarranqueiro/hexo-algoliasearch"><code>Hexo-Algoliasearch</code></a> , å‚è€ƒ<a href="https://github.com/theme-next/hexo-theme-next/blob/master/docs/zh-CN/ALGOLIA-SEARCH.md">æ•™ç¨‹1</a> <a href="https://www.linkinstars.com/post/fddf9055.html">æ•™ç¨‹2</a></p></li><li><p>2025å¹´02æœˆ10æ—¥ æ–°å¢ â€œNEWSâ€ æ¨¡å—ï¼Œ è®°å½•æˆé•¿å†ç¨‹</p></li><li><p>2025å¹´02æœˆ04æ—¥ æ”¯æŒè¯„è®ºåŠŸèƒ½, æ·»åŠ <a href="https://hugenye.github.io/2020/07/21/hexo-deploy/">utteranceè¯„è®ºç³»ç»Ÿ</a> </p></li><li><p>2025å¹´02æœˆ02æ—¥ æ›´æ–°åŸŸåä¸º <a href="https://ailyong.cn/">ailyong.cn</a></p></li><li><p>2025å¹´02æœˆ01æ—¥ æ›´æ–°åŸŸåä¸º <a href="https://eggplant.wiki/">eggplant.wiki</a></p></li><li><p>2025å¹´01æœˆ28æ—¥ æ›´æ–°ä¸»é¢˜ä¸º <a href="https://github.com/fi3ework/hexo-theme-archer">Archer</a></p><ul><li>æ”¯æŒæ–‡ç« å­—æ•°ç»Ÿè®¡</li><li>æ”¯æŒæ–‡ç« ç½®é¡¶åŠŸèƒ½</li><li>æ”¯æŒLatexå…¬å¼å’ŒMermaidå›¾è¡¨</li><li>æ›´åä¸º â€èŒ„å­çš„ä¸ªäººç©ºé—´â€œ</li></ul></li><li><p>2025å¹´01æœˆ é‡å¯åšå®¢  æ›´æ–°åŸŸåä¸º <a href="https://ailyong.cn/">ailyong.cn</a> </p></li><li><p>2024å¹´03æœˆ åŸåŸŸååˆ°æœŸï¼Œæš‚åœç»´æŠ¤</p></li><li><p>2022å¹´04æœˆ09æ—¥ æ›´æ–°ä¸»é¢˜ä¸º Matery</p><ul><li>æ”¯æŒæ–‡ç« å­—æ•°ç»Ÿè®¡</li><li>å¼€é€šdonateé¡µé¢</li><li>æ”¯æŒè¯„è®º</li></ul></li><li><p>2021å¹´02æœˆ01æ—¥ é¦–æ¬¡å¼€é€šåšå®¢</p><ul><li>ä½¿ç”¨ <a href="https://hexo.io/">hexo</a> æ­å»º</li><li>ä½¿ç”¨ next ä¸»é¢˜</li></ul></li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> æ—¥å¿— </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ­å»ºWebdavæœåŠ¡å™¨å®ç°Obsidianå’ŒZoteroå¤šç«¯åŒæ­¥</title>
      <link href="/2025/01/26/da-jian-webdav-fu-wu-qi-shi-xian-obsidian-he-zotero-duo-duan-tong-bu/"/>
      <url>/2025/01/26/da-jian-webdav-fu-wu-qi-shi-xian-obsidian-he-zotero-duo-duan-tong-bu/</url>
      
        <content type="html"><![CDATA[<h1 id="å‰-è¨€"><a href="#å‰-è¨€" class="headerlink" title="å‰ è¨€"></a>å‰ è¨€</h1><p>å¾ˆé•¿ä¸€æ®µæ—¶é—´ä»¥æ¥ï¼Œéƒ½æ¯”è¾ƒè‹¦æ¼è‡ªå·±çš„obsidianå’Œzoteroåœ¨å¤šç«¯åŒæ­¥çš„æ—¶å€™ç»å¸¸ç¢°åˆ°é—®é¢˜ï¼Œæœ‰æ—¶å€™æƒ³åœ¨æ‰‹æœºä¸Šé¢æŸ¥çœ‹æŸç¯‡paperçš„æ—¶å€™ï¼Œæ­£å¥½å‘ç°pdfé™„ä»¶æ²¡è¢«åŒæ­¥ï¼Œå¯¼è‡´ä¸èƒ½æŸ¥çœ‹ã€‚åŠ ä¹‹ï¼Œæœ€è¿‘ç»™å¥³æœ‹å‹æ¨èäº†obsidianï¼Œå¥¹è§‰å¾—éå¸¸å¥½ç”¨ï¼Œä½†ç”±äºè®¾å¤‡åŸå› ä¸èƒ½å®ç°å¤šç«¯åŒæ­¥ã€‚å¥¹é‡‡ç”¨å¹•å¸ƒè®°å½•ç¬”è®°ï¼Œå†å¯¼å…¥obsidiançš„æ–¹æ³•ï¼Œä»¥å®ç°å¤šç«¯åŒæ­¥å’Œç¬”è®°æœ¬åœ°ä¿å­˜ï¼Œæˆ‘è®¤ä¸ºè¯¥ç§æ–¹å¼è¾ƒä¸ºç¹çï¼Œä¸ç¬¦åˆæŠ€æœ¯äººçš„æ°”è´¨ã€‚</p><p>æ€è€ƒå†ä¸‰ï¼Œæˆ‘å†³å®šå¥½å¥½è§£å†³å¤šç«¯é…ç½®çš„é—®é¢˜ï¼Œç½‘ç»œä¸Šæœç´¢äº†ä¸€åœˆèµ„æ–™ä¸‹æ¥ï¼Œå‘ç°å¾ˆå¤šæ‰‹æœºç«¯è½¯ä»¶å‡æ”¯æŒä»¥Webdavåè®®è¿›è¡Œæ–‡ä»¶å…±äº«ï¼Œé‚å†³å®šæ­å»ºWebdavåè®®æœåŠ¡å™¨å®ç°å¤šç«¯å…±äº«ã€‚</p><p>è™½æœ‰åšæœäº‘ç­‰æ”¯æŒWebdavåè®®çš„ç°æˆäº‘ç›˜ï¼Œä½†åšæœäº‘é™åˆ¶ä¸å°‘ï¼Œæ—¢ç„¶è¦å½»åº•è§£å†³è¯¥é—®é¢˜ï¼Œè‡ªç„¶ä¸èƒ½å¿å—ã€‚æ‰€ä»¥å†³å®šæ­å»ºä¸€ä¸ªå±äºè‡ªå·±çš„Webdavåè®®æœåŠ¡å™¨ï¼Œä»¥å®ç°å¤šç«¯ä¸æ»‘å…±äº«åŒæ­¥ã€‚</p><p>ç”±äºè¦å’Œå¥³å‹ä¸€èµ·ä½¿ç”¨å…±äº«æœåŠ¡å™¨ï¼Œé‚£ä¹ˆç½‘ä¸Šå¸¸è§çš„å•ä¸€è´¦å·çš„WebdavæœåŠ¡æ•™ç¨‹ï¼Œè‡ªç„¶ä¸èƒ½æ»¡è¶³è¦æ±‚ã€‚æœŸæœ›çš„æ˜¯ï¼Œåˆ†åˆ«è®¾ç½®user1å’Œuser2ï¼Œä»¥è¾¾åˆ°å„è‡ªæœ‰ä¸åŒçš„æ–‡ä»¶å­˜å‚¨ç©ºé—´ï¼Œå¹¶è®¾ç½®ä¸€ä¸ªsharedå­˜å‚¨ç©ºé—´ï¼Œæ–¹ä¾¿å…±äº«æ–‡ä»¶ï¼Œå…±äº«æ–‡ä»¶åªæœ‰user1å’Œuser2èƒ½å¤Ÿè¿›è¡Œç¼–è¾‘ï¼Œä½†å¯ä»¥è¢«guestç”¨æˆ·æŸ¥çœ‹ï¼Œæ–¹ä¾¿æˆ‘ä»¬å…±äº«èµ„æ–™ç»™æœ‹å‹ã€‚</p><p>ç½‘ç»œä¸Šé¢æœå¯»äº†ä¸€åœˆï¼Œå‘ç°Apache2èƒ½å¤Ÿå¾ˆå¥½çš„æ»¡è¶³ä¸Šè¿°éœ€æ±‚ï¼Œå¹¶ä¸”å…·æœ‰æƒ³å¯¹æˆç†Ÿçš„æ•™ç¨‹èµ„æºï¼Œé‚é‡‡ç”¨Apache2è¿›è¡ŒæœåŠ¡æ­å»ºã€‚æœåŠ¡æ­å»ºçš„è¯¦ç»†æ­¥éª¤è®°å½•å¦‚ä¸‹ï¼š</p><h1 id="ç¯å¢ƒåŠè½¯ä»¶ç‰ˆæœ¬-ï¼š"><a href="#ç¯å¢ƒåŠè½¯ä»¶ç‰ˆæœ¬-ï¼š" class="headerlink" title="ç¯å¢ƒåŠè½¯ä»¶ç‰ˆæœ¬ ï¼š"></a>ç¯å¢ƒåŠè½¯ä»¶ç‰ˆæœ¬ ï¼š</h1><ul><li>æœåŠ¡å™¨æ“ä½œç³»ç»Ÿï¼š Ubuntu 22.04.4 LTS</li><li>zoteroç‰ˆæœ¬ï¼š7.0.9</li><li>obsidianç‰ˆæœ¬ï¼šVersion 1.5.8</li></ul><h1 id="å®‰è£…Apache2å¹¶é…ç½®webdavåè®®"><a href="#å®‰è£…Apache2å¹¶é…ç½®webdavåè®®" class="headerlink" title="å®‰è£…Apache2å¹¶é…ç½®webdavåè®®"></a><a href="https://reintech.io/blog/installing-configuring-webdav-server-ubuntu-22">å®‰è£…Apache2å¹¶é…ç½®webdavåè®®</a></h1><p>è¿™é‡Œï¼Œæˆ‘ä»¬å¯¹ä¸€èˆ¬çš„WebDavé…ç½®è¿›è¡Œäº†æ‰©å±•ï¼Œä»¥è¾¾åˆ°å¤šç”¨æˆ·çš„è¦æ±‚ï¼Œè¯¦ç»†å†…å®¹ä½“ç°åœ¨é…ç½®æ–‡ä»¶é‡Œé¢ã€‚</p><ol><li>å®‰è£… Apache2 HTTP æœåŠ¡å¹¶å¼€é€šwebdavåè®®</li></ol><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt update</span><br><span class="line"><span class="built_in">sudo</span> apt install apache2</span><br><span class="line"><span class="built_in">sudo</span> systemctl <span class="built_in">enable</span> apache2</span><br><span class="line"><span class="built_in">sudo</span> systemctl start apache2</span><br><span class="line"><span class="built_in">sudo</span> a2enmod dav dav_fs auth_digest</span><br><span class="line"><span class="built_in">sudo</span> systemctl restart apache2</span><br></pre></td></tr></tbody></table></figure><ol start="2"><li>åˆ›å»ºWebDavæ–‡ä»¶å¤¹ï¼Œè®¾ç½®æƒé™</li></ol><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> <span class="built_in">mkdir</span> -p /var/www/webdav/user1</span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">mkdir</span> -p /var/www/webdav/user2</span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">mkdir</span> -p /var/www/webdav/shared</span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">chown</span> -R www-data:www-data /var/www/webdav</span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">chmod</span> -R 775 /var/www/webdav</span><br></pre></td></tr></tbody></table></figure><p>é€šè¿‡ä¸Šé¢çš„è®¾ç½®ï¼ŒwebdavæœåŠ¡åœ¨æœåŠ¡å™¨ä¸Šé¢çš„è·¯å¾„ä¸º: /var/www/webdav<br>, å¯ä»¥æ”¹ä¸ºè‡ªå·±çš„ã€‚</p><ol start="3"><li>åˆ›å»ºç”¨æˆ·è®¤è¯æ–‡ä»¶<br>æ ¹æ®æç¤ºè¾“å…¥å¯†ç å¹¶ç¡®è®¤</li></ol><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> htdigest -c /etc/apache2/webdav.passwd <span class="string">"WebDAV Realm"</span> user1</span><br><span class="line"><span class="built_in">sudo</span> htdigest /etc/apache2/webdav.passwd <span class="string">"WebDAV Realm"</span> user2</span><br></pre></td></tr></tbody></table></figure><ol start="4"><li><p>è·å–SSLè¯ä¹¦<br>ç”±äºisoè¦æ±‚åªèƒ½ä»¥httpsåè®®æ–¹å¼è¿›è¡Œæ–‡ä»¶ä¼ è¾“ï¼Œæ‰€ä»¥è¦ä½¿å¾—æ­å»ºçš„webdavæœåŠ¡èƒ½å¤Ÿç”¨äºç”µè„‘ç«¯å’ŒiPhoneã€ipadåŒæ­¥ï¼Œå¿…é¡»é…ç½®SSLè¯ä¹¦ï¼Œä»¥å¯ç”¨httpsåè®®ã€‚<br>SSLè¯ä¹¦æœ‰ä¸¤ç§è·å–æ–¹å¼ï¼Œä¸€ç§æ˜¯è‡ªç­¾åè¯ä¹¦ï¼Œè¯¥ç§è¯ä¹¦åªé€‚åˆæµ‹è¯•ç¯å¢ƒï¼Œä¸é€‚åˆç”Ÿäº§ç¯å¢ƒï¼Œå› ä¸ºç®€å•ç¬”è€…ä¸€å¼€å§‹é‡‡ç”¨çš„æ˜¯è¯¥ç§æ–¹å¼ï¼Œä½†ç»è¿‡äº†å¤§é‡å°è¯•ï¼Œæœ€ç»ˆå¾—åˆ°çš„è‡ªç­¾åè¯ä¹¦ï¼Œå¹¶ä¸èƒ½ç”¨äºisoç«¯ã€‚å› æ­¤ï¼Œä¸æ¨èè‡ªç­¾åè¯ä¹¦ã€‚<br>ç½‘ç»œä¸Šçš„SSLè¯ä¹¦é¢å‘æœºæ„ï¼Œä¸€èˆ¬ä»…é’ˆå¯¹äºåŸŸåè¿›è¡Œè¯ä¹¦é¢å‘ï¼Œä½†æ˜¯å›½å†…åŸŸåå¤‡æ¡ˆæµç¨‹ç¹çã€‚ç¬”è€…ç»è¿‡å¤§é‡çš„æŸ¥è¯¢ï¼Œæœ€ç»ˆæ‰¾åˆ°äº†ä¸€å®¶å¯ä»¥ä¸ºipåœ°å€é¢å‘å…è´¹è¯ä¹¦çš„æœºæ„ <a href="https://app.zerossl.com/dashboard">ZeroSSL</a>ï¼Œè™½ç„¶ä¸€æ¬¡ç”³è¯·ä½¿ç”¨æœŸä»…ä¸ºä¸‰ä¸ªæœˆï¼Œä½†æ˜¯è¶³ä»¥è§£å†³ç‡ƒç…¤ä¹‹æ€¥ã€‚<br>ZeroSSLçš„ç½‘ç«™ä¸Šæœ‰è¾ƒä¸ºè¯¦ç»†çš„è¯ä¹¦ç”³è¯·åŠä½¿ç”¨æ–¹æ³•ï¼Œè¿™é‡Œä¸åšèµ˜è¿°ã€‚</p></li><li><p>é…ç½®WebDav<br>å®Œæˆä¸Šè¿°æ“ä½œä¹‹åï¼Œæˆ‘ä»¬å¼€å§‹å¯¹WebDavæœåŠ¡è¿›è¡Œé…ç½®ï¼Œæ‰“å¼€é…ç½®æ–‡ä»¶</p></li></ol><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> vim /etc/apache2/sites-available/000-default.conf</span><br></pre></td></tr></tbody></table></figure><p>   å¾€é…ç½®æ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹å®Œæ•´é…ç½®å†…å®¹</p><pre><code><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line">&lt;VirtualHost *:443&gt;</span><br><span class="line">ServerAdmin webmaster@localhost</span><br><span class="line">DocumentRoot /var/www/webdav</span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¾ç½®sslè¯ä¹¦ï¼Œè·¯å¾„è¡¨ç¤ºè¯ä¹¦çš„å­˜æ”¾ä½ç½®</span></span><br><span class="line"><span class="comment"># ServerName webdav.local</span></span><br><span class="line">SSLEngine on</span><br><span class="line">SSLCertificateFile /etc/ssl/certs/certificate.crt</span><br><span class="line">SSLCertificateKeyFile /etc/ssl/private/private.key</span><br><span class="line">SSLCertificateChainFile /etc/ssl/certs/ca_bundle.crt</span><br><span class="line"></span><br><span class="line">Alias /webdav /var/www/webdav</span><br><span class="line">&lt;Directory /home/webdav&gt;</span><br><span class="line">Options Indexes FollowSymLinks</span><br><span class="line">AllowOverride None</span><br><span class="line"><span class="comment"># Require all granted</span></span><br><span class="line"><span class="comment"># Dav On</span></span><br><span class="line">&lt;/Directory&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;Location /webdav/user1&gt;</span><br><span class="line">AuthType Digest</span><br><span class="line">AuthName <span class="string">"WebDAV Realm"</span></span><br><span class="line">AuthDigestProvider file</span><br><span class="line">AuthUserFile /etc/apache2/webdav.passwd</span><br><span class="line">Require user user1</span><br><span class="line">Dav On</span><br><span class="line">&lt;/Location&gt;</span><br><span class="line"></span><br><span class="line">&lt;Location /webdav/user2&gt;</span><br><span class="line">AuthType Digest</span><br><span class="line">AuthName <span class="string">"WebDAV Realm"</span></span><br><span class="line">AuthDigestProvider file</span><br><span class="line">AuthUserFile /etc/apache2/webdav.passwd</span><br><span class="line">Require user user2</span><br><span class="line">Dav On</span><br><span class="line">&lt;/Location&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¾ç½®å…±äº«è·¯å¾„çš„æƒé™</span></span><br><span class="line">&lt;Location /webdav/shared&gt;</span><br><span class="line">Dav On</span><br><span class="line">Allow from all</span><br><span class="line">&lt;LimitExcept OPTIONS GET&gt;</span><br><span class="line">AuthType Digest</span><br><span class="line">AuthName <span class="string">"WebDAV Realm"</span></span><br><span class="line">AuthDigestProvider file</span><br><span class="line">AuthUserFile /etc/apache2/webdav.passwd</span><br><span class="line">Require valid-user</span><br><span class="line">&lt;/LimitExcept&gt;</span><br><span class="line">&lt;LimitExcept PUT POST DELETE MOVE&gt;</span><br><span class="line">Require all granted</span><br><span class="line">&lt;/LimitExcept&gt;</span><br><span class="line">&lt;/Location&gt;</span><br><span class="line"></span><br><span class="line">ErrorLog <span class="variable">${APACHE_LOG_DIR}</span>/error.log</span><br><span class="line">CustomLog <span class="variable">${APACHE_LOG_DIR}</span>/access.log combined</span><br><span class="line">&lt;/VirtualHost&gt;</span><br><span class="line"><span class="comment"># vim: syntax=apache ts=4 sw=4 sts=4 sr noet</span></span><br></pre></td></tr></tbody></table></figure></code></pre><ol start="6"><li>é‡å¯Apache2å¹¶æµ‹è¯•</li></ol><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl restart apache2</span><br></pre></td></tr></tbody></table></figure><p>å¦‚æœä½¿ç”¨äº‘æœåŠ¡å™¨ï¼Œéœ€è¦åœ¨å®‰å…¨ç»„ä¸­å¼€é€š443ç«¯å£ï¼Œæ‰èƒ½å¤Ÿæ­£å¸¸è®¿é—®æœåŠ¡ã€‚</p><ul><li>è®¿é—®æ–¹å¼<br>  åœ°å€ä¸º <code>http://your-server-ip/webdav</code></li><li>é¢„æœŸæ•ˆæœ<ul><li>ç”¨æˆ· <code>user1</code> åªèƒ½è®¿é—® <code>/webdav/user1</code>ã€‚</li><li>ç”¨æˆ· <code>user2</code> åªèƒ½è®¿é—® <code>/webdav/user2</code>ã€‚</li><li>æ‰€æœ‰äººå‡å¯è®¿é—® <code>/webdav/shared</code>ï¼Œæ— éœ€å¯†ç ï¼Œä½†åªæœ‰æŸ¥çœ‹æƒé™ï¼Œuser1å’Œuser2é€šè¿‡ç™»å½•éªŒè¯ï¼Œæœ‰æŸ¥çœ‹ã€ç¼–è¾‘å’Œåˆ é™¤æƒé™ã€‚</li></ul></li></ul><h1 id="Zotero-é…ç½®"><a href="#Zotero-é…ç½®" class="headerlink" title="Zotero é…ç½®"></a>Zotero é…ç½®</h1><p>zotero ä¸­çš„é…ç½®å¾ˆç®€å•ï¼Œåªè¦æ‰“å¼€è®¾ç½®-&gt;åŒæ­¥ï¼Œé™„ä»¶åŒæ­¥æ–¹å¼é€‰æ‹©â€WebDAVâ€å¡«å…¥åœ¨é…ç½®æ–‡ä»¶ä¸­è®¾ç½®çš„ç½‘å€ã€ç”¨æˆ·åã€å¯†ç å³å¯ï¼Œå¡«å†™å¥½ä¹‹åé€šè¿‡ç‚¹å‡»â€éªŒè¯æœåŠ¡å™¨â€æŒ‰é’®ï¼Œå¯¹æœåŠ¡è¿›è¡ŒéªŒè¯ï¼ŒéªŒè¯é€šè¿‡å³è¡¨ç¤ºzoteroå·²ç»ä¸æœåŠ¡å™¨å»ºç«‹äº†è¿æ¥ã€‚ç„¶åå…³é—­è®¾ç½®ç•Œé¢ï¼Œç‚¹å‡»å³ä¸Šè§’çš„åŒæ­¥å›¾æ ‡å³å¯å°†æ–‡ä»¶é™„ä»¶åŒæ­¥åˆ°è¿œç¨‹æœåŠ¡å™¨ã€‚æ‰‹æœºç«¯å’Œipadç«¯çš„è®¾ç½®ç±»ä¼¼ï¼Œæ­¤å¤„ç•¥ã€‚</p><p>å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœæœåŠ¡å™¨ipæ²¡æœ‰è·å¾—sslè¯ä¹¦ï¼Œæˆ–è€…ä½¿ç”¨è‡ªç­¾åè¯ä¹¦ï¼Œæ­¤å¤„å°†ä¼šæŠ¥é”™ï¼Œåœ¨ç”µè„‘ç«¯çš„è§£å†³æ–¹æ³•åœ¨<a href="https://www.zotero.org/support/kb/cert_override">è¿™é‡Œ</a>, æ‰‹æœºç«¯å’Œipadç«¯ç¬”è€…æš‚æœªæ‰¾åˆ°åˆé€‚çš„è§£å†³æ–¹æ³•ï¼Œç¬”è€…åœ¨é…ç½®çš„æ—¶å€™ï¼Œåœ¨è¿™é‡Œè€—è´¹äº†å¤§é‡å¿ƒåŠ›ï¼Œæœ€ç»ˆæ‰æ‰¾åˆ°äº† <a href="https://app.zerossl.com/dashboard">ZeroSSL</a> è¿™ä¸ªå…è´¹ä¸ºipåœ°å€é¢å‘sslè¯ä¹¦çš„æœºæ„ï¼Œå¹¶è·å¾—äº†sslè¯ä¹¦ã€‚</p><h1 id="Obsidian-é…ç½®"><a href="#Obsidian-é…ç½®" class="headerlink" title="Obsidian é…ç½®"></a>Obsidian é…ç½®</h1><p>obsidian é…ç½®è¿œç¨‹åŒæ­¥ï¼Œä¸»è¦ä½¿ç”¨äº†remotely-saveè¿™ä¸ªæ’ä»¶ï¼Œè¯¥æ’ä»¶çš„é…ç½®ä½¿ç”¨å¯ä»¥å‚è€ƒ<a href="https://forum-zh.obsidian.md/t/topic/5291">è¿™é‡Œ</a> å’Œ <a href="https://forum-zh.obsidian.md/t/topic/16390">è¿™é‡Œ</a>, ç»†èŠ‚è¿™é‡Œä¸èµ˜è¿°ã€‚</p><p>ç”±äºæˆ‘ä»¬åœ¨ä¸Šè¿°é…ç½®ä¸­ï¼Œä½¿ç”¨äº†htdigestç”Ÿæˆç”¨æˆ·å¯†ç ï¼Œå› æ­¤ï¼Œé‰´æƒç±»å‹è¦é€‰æ‹©digestï¼Œå¦åˆ™è¿æ¥å¤±è´¥ã€‚</p><p><img src="https://raw.githubusercontent.com/Skylyong/i/main/20250126211142.png" alt="image-20250126211130501"></p><p>æ­¤å¤–ï¼Œåœ¨obsidianä¸­ä¸‹è½½æ’ä»¶éœ€è¦ç§‘å­¦ä¸Šç½‘ï¼Œç”±äºæ‰‹æœºæˆ–ipadä¸å…·å¤‡ç§‘å­¦ä¸Šç½‘çš„æ¡ä»¶ï¼Œè¿™ä½¿å¾—æ— æ³•åœ¨æ‰‹æœºæˆ–ipadä¸Šçš„obsidianä¸­å®‰è£…remotely-saveã€‚ä¸€ç§ç®€å•çš„è§£å†³æ–¹æ³•æ˜¯ï¼Œå°†æ‰‹æœºæˆ–ipadç«¯obsidianæ ¹ç›®å½•ä¸‹çš„.obsidianæ›¿æ¢æˆç”µè„‘ç«¯obsidianæ ¹ç›®å½•ä¸‹çš„.obsidianï¼Œé‡å¯ä¹‹åå°±ä¼šå‘ç°æ‰‹æœºç«¯çš„é…ç½®å’Œç”µè„‘ä¸Šä¸€æ¨¡ä¸€æ ·äº†ã€‚</p><h1 id="å…¶-ä»–"><a href="#å…¶-ä»–" class="headerlink" title="å…¶ ä»–"></a>å…¶ ä»–</h1><p>åªè¦èƒ½å¤Ÿæ”¯æŒWebDAVåè®®å¤‡ä»½æ–‡ä»¶çš„Appå‡å¯é€šè¿‡ç±»ä¼¼ä¸Šè¿°çš„è®¾ç½®ï¼Œå°†èµ„æ–™å¤‡ä»½åˆ°äº‘ç«¯æœåŠ¡å™¨ï¼Œå¹¶å®ç°å¤šç«¯å…±äº«è®¿é—®ã€‚</p><h1 id="æ€»-ç»“"><a href="#æ€»-ç»“" class="headerlink" title="æ€» ç»“"></a>æ€» ç»“</h1><p>æœ¬æ–‡è¯¦ç»†ä»‹ç»äº†ï¼Œåœ¨ä¸€å°Ubuntu 22.04æœåŠ¡å™¨ä¸Šé€šè¿‡Apache2é…ç½®å¤šç”¨æˆ·çš„webdavæœåŠ¡ï¼Œç»™å‡ºäº†ç»è¿‡ç¬”è€…å®è·µè¿‡çš„è¯¦ç»†é…ç½®æ–‡ä»¶ï¼Œå¹¶æä¾›äº†è·å–å…è´¹ipåœ°å€sslè¯ä¹¦çš„æ–¹æ³•ã€‚åŒæ—¶ï¼Œç»™å‡ºäº†ç®€å•çš„zoteroå’Œobsidiané…ç½®æŒ‡å¯¼ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> æ€»ç»“ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¹²è´§ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>sentence-transformers sampler bug ä¹‹ set ä¸ä¸€å®šæ˜¯æ— åºçš„</title>
      <link href="/2025/01/07/sentence-transformers-sampler-bug-zhi-set-bu-yi-ding-shi-wu-xu-de/"/>
      <url>/2025/01/07/sentence-transformers-sampler-bug-zhi-set-bu-yi-ding-shi-wu-xu-de/</url>
      
        <content type="html"><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>é—®  é¢˜ï¼š æœ€è¿‘å‡†å¤‡è®­ç»ƒä¸€ä¸ªåŸºäºå¯¹æ¯”å­¦ä¹ çš„æ¨¡å‹ï¼Œ ç”¨ huggface çš„ trainer è®­ç»ƒå™¨ï¼Œåœ¨å®˜æ–¹ç»™çš„æºä»£ç ä¸­ï¼Œæœ‰ä¸€ä¸ªç°æˆçš„ sampler ç”¨äºæ•°æ®é‡‡æ ·ï¼Œæˆ‘éœ€è¦æ”¹å†™è¿™ä¸ª sampler ä»¥ä¿è¯èƒ½å¤Ÿç”¨äºè‡ªå·±çš„æ•°æ®ä¸Šã€‚</p><h1 id="å®éªŒ"><a href="#å®éªŒ" class="headerlink" title="å®éªŒ"></a>å®éªŒ</h1><p>æ”¹å®Œä¹‹åï¼Œå‘ç°é‡‡æ ·å‡ºæ¥çš„ indices ç«Ÿç„¶æ˜¯æœ‰åºçš„ï¼Œå®é™…åœ¨ä¸€ä¸ªæ‰¹æ¬¡ä¸­éœ€è¦æ‰“ä¹±æ ·æœ¬çš„é¡ºåºï¼Œä»”ç»†é˜…è¯»äº†å®˜æ–¹ç»™çš„æºç ï¼Œå‘ç°é—®é¢˜å‡ºåœ¨å¦‚ä¸‹å›¾æ‰€ç¤ºçš„ ç¬¬187è¡Œã€‚è¿™é‡Œå…ˆç”¨ torch.randpermç”Ÿæˆäº†ä¸€ä¸ªä¹±åºçš„ä¸‹æ ‡ï¼Œç„¶åè½¬æ¢ä¸ºsetã€‚æŒ‰ç†è¯´setæ˜¯æ— åºçš„ï¼Œè½¬æ¢ä¹‹åä¹Ÿæ˜¯æ— åºçš„ï¼Œçœ‹èµ·æ¥å¾ˆæ­£ç¡®ã€‚</p><p><img src="https://raw.githubusercontent.com/Skylyong/i/main/20250107163459.png"></p><p>å½“æˆ‘åšäº†å°æµ‹è¯•åï¼Œå‘ç°å¹¶ä¸æ˜¯ï¼š</p><p><img src="https://raw.githubusercontent.com/Skylyong/i/main/20250107163527.png"><br>ä»ä¸Šé¢çš„ç»“æœï¼Œå¯ä»¥çœ‹åˆ°ï¼štorch.randperm() ç”Ÿæˆçš„åºåˆ—æ˜¯ä¹±åºçš„ï¼Œä½†ç»è¿‡ set() å¤„ç†ä¹‹åä¼¼ä¹å˜æˆäº†æœ‰åºã€‚</p><p>æˆ‘ä»¬åˆåšäº†ä¸€ç»„æµ‹è¯•ï¼š<br><img src="https://raw.githubusercontent.com/Skylyong/i/main/20250107163635.png"><br>å¯ä»¥çœ‹åˆ°ï¼šå½“listä¸­çš„å…ƒç´ å…¨éƒ¨æ˜¯æ•°å­—ï¼Œä¸”æ²¡æœ‰é‡å¤å€¼çš„æ—¶å€™ï¼Œset()å‡ºæ¥åçš„åºåˆ—å˜æˆäº†æœ‰åºï¼Œè€Œä¸­é—´çš„é‚£ä¸ªè¯•éªŒï¼Œåºåˆ—æ˜¯æ— åºçš„ã€‚</p><p>æ‰€ä»¥å¾ˆå¤špythonçš„æ•™ç¨‹è¯´setçš„æ— åºçš„ï¼Œè¿™ç‚¹å¹¶ä¸å…·ä½“ã€‚æ›´åŠ å…·ä½“çš„è¯´æ³•åº”è¯¥æ˜¯ï¼šsetæ˜¯ä¸€ä¸ªé›†åˆï¼Œå®ƒæ²¡æœ‰åºæƒ¯æ€§è´¨ï¼Œå¦‚æœä»»åŠ¡è¦æ±‚çš„æ•°æ®ç»“æ„éœ€è¦åŒ…å«å…ƒç´ çš„åºåˆ—ï¼Œåˆ™ä¸èƒ½é‡‡ç”¨setä½œä¸ºæ•°æ®ç»“æ„ã€‚ä¸Šé¢çš„bugå°±æ˜¯ä¸€ä¸ªé”™è¯¯ä¾‹å­ã€‚</p><h1 id="åç»­"><a href="#åç»­" class="headerlink" title="åç»­"></a>åç»­</h1><p>æˆ‘æ£€æŸ¥äº†ä¸€ä¸‹æ‰€ä½¿ç”¨çš„åº“æ˜¯æœ€æ–°ç‰ˆï¼Œæ‰¾åˆ°äº†å®˜æ–¹çš„githubåœ°å€ï¼Œå‡†å¤‡æäº¤issueã€‚æ‰å‘ç°å®˜æ–¹2ä¸ªæœˆå‰å°±å·²ç»åœ¨githubæºç ä¸­ä¿®æ”¹è¿™ä¸ª <a href="https://github.com/UKPLab/sentence-transformers/pull/3073">bug</a>ï¼Œä½†æ˜¯ç”±äºä¾èµ–åŸå› ï¼Œå¹¶æ²¡æœ‰æäº¤åˆ°ä»£ç ä»“åº“ã€‚ä¸‹é¢æ˜¯ä¿®æ”¹åçš„ç‰ˆæœ¬çš„å…³é”®ä»£ç (å…³é”®ä»£ç åœ¨190è¡Œ)ï¼š</p><p><img src="https://raw.githubusercontent.com/Skylyong/i/main/20250107164427.png"></p><p>å°ç»“ä¸€ä¸‹ï¼š è¿™æ˜¯ä¸€ä¸ªéå¸¸éšè”½çš„bugï¼Œå¦‚æœä¸æ˜¯å› ä¸ºæˆ‘è¦å®ç°è‡ªå·±çš„samplerï¼Œä¸€å®šä¸ä¼šå‘ç°ä¸åŒepochä¸­ç›¸åŒçš„batchçš„ä¸‹æ ‡æ˜¯ä¸€æ ·çš„ï¼Œæ‰€ä»¥è¯´å½“æ¨¡å‹æ€§èƒ½ä¸å¤Ÿå¥½çš„æ—¶å€™ï¼Œå¯ä»¥å»æº¯æºä¸€ä¸‹ä»£ç ï¼Œçœ‹çœ‹å…·ä½“çš„ä»£ç å®ç°æ˜¯å¦å’Œè‡ªå·±æ‰€è®¾æƒ³çš„ä¸€è‡´ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ubuntuä¸Šå®‰è£…NIVIDIAé©±åŠ¨å’ŒCUDA_Tookit</title>
      <link href="/2023/09/12/ubuntu-shang-an-zhuang-nividia-qu-dong-he-cuda-tookit/"/>
      <url>/2023/09/12/ubuntu-shang-an-zhuang-nividia-qu-dong-he-cuda-tookit/</url>
      
        <content type="html"><![CDATA[<p>æ¯ä¸€æ¬¡å®‰è£…NIVIDIAé©±åŠ¨æˆ–CUDA Tookitæ—¶ï¼Œéƒ½è¦ç»è¿‡ä¸€ç•ªæŠ˜è…¾ï¼Œæ‰èƒ½å¤Ÿå®‰è£…æˆåŠŸï¼Œè¿™é‡ŒæŠŠè¿‡ç¨‹è®°å½•ä¸€ä¸‹ï¼Œä»¥ä¾¿ä»¥åå¯ä»¥å‚è€ƒã€‚</p><p>æœ¬æ¬¡å®‰è£…é‡åˆ°çš„æœ€å¤§é—®é¢˜æ˜¯ï¼špytorchæ‰€èƒ½æ”¯æŒçš„æœ€é«˜cudaç‰ˆæœ¬ä¸º11.8ï¼Œè€Œå®‰è£…åçš„cudaä¸ºæœ€æ–°12.2ç‰ˆæœ¬ï¼Œpytorchæ²¡æ³•è¯†åˆ«cudaã€‚<br>å¯¼è‡´è¿™ä¸€é—®é¢˜çš„ä¸»è¦åŸå› åœ¨äºä¸¤ç‚¹ï¼š</p><ol><li>å®‰è£…çš„NIVIDIAé©±åŠ¨ç‰ˆæœ¬è¿‡é«˜ï¼Œå¯¼è‡´CUDA Tookitç‰ˆæœ¬ä¹Ÿè¿‡é«˜ï¼Œæ— æ³•é™çº§</li><li>ä½¿ç”¨ç½‘ç»œæ–¹å¼å®‰è£…CUDA Tookitï¼Œå®‰è£…ä¹‹åå¾—åˆ°çš„æ˜¯æœ€æ–°ç‰ˆçš„CUDA Tookitï¼Œä¸æ˜¯æˆ‘æƒ³è¦çš„11.8ç‰ˆæœ¬</li></ol><p>æ¥ä¸‹æ¥æ˜¯å®‰è£…è¿‡ç¨‹ï¼š</p><ul><li><p>åˆ é™¤å·²å®‰è£…çš„NIVIDIAé©±åŠ¨æˆ–CUDA Tookit</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> <span class="built_in">rm</span> /etc/apt/sources.list.d/cuda*</span><br><span class="line"><span class="built_in">sudo</span> apt-get --purge remove <span class="string">"*cublas*"</span> <span class="string">"cuda*"</span> <span class="string">"nsight*"</span> </span><br><span class="line"><span class="built_in">sudo</span> apt-get --purge remove <span class="string">"*nvidia*"</span></span><br><span class="line"><span class="built_in">sudo</span> apt-get autoremove</span><br><span class="line"><span class="built_in">sudo</span> apt-get autoclean</span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">rm</span> -rf /usr/local/cuda*</span><br></pre></td></tr></tbody></table></figure></li><li><p>æŸ¥çœ‹ubuntuç³»ç»Ÿç‰ˆæœ¬å’Œé©±åŠ¨å™¨å‹å·ï¼Œå¹¶ä¸‹è½½å¯¹åº”é©±åŠ¨å®‰è£…</p>  <figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cat</span> /etc/os-release <span class="comment"># æŸ¥çœ‹ç³»ç»Ÿç‰ˆæœ¬</span></span><br><span class="line"></span><br><span class="line">lspci | grep VGA    <span class="comment"># æŸ¥çœ‹æ˜¾å¡å‹å·</span></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><p>  æŸ¥çœ‹å¥½ç‰ˆæœ¬ä¹‹åï¼Œåœ¨<a href="https://www.nvidia.com/Download/Find.aspx?lang=en-us">è¿™é‡Œ</a>ä¸‹è½½å¯¹åº”çš„é©±åŠ¨ç¨‹åºå¹¶å®‰è£…ã€‚</p><p>  æœ¬æ¬¡å®‰è£…ï¼ŒæœåŠ¡å™¨çš„ç‰ˆæœ¬ä¸ºUbuntu 22.04.2 LTSï¼Œæ˜¾å¡å‹å·ä¸ºGeForce RTX 3090.</p></li><li><p>æŸ¥çœ‹é©±åŠ¨å®‰è£…ç»“æœ</p><p>  é©±åŠ¨ç¨‹åºå®‰è£…å¥½ä¹‹åï¼Œä½¿ç”¨â€nividia smiâ€å‘½ä»¤æŸ¥çœ‹å®‰è£…ç»“æœï¼Œè¿™é‡Œå¦‚æœæ˜¾ç¤ºé”™è¯¯ä¿¡æ¯ï¼Œé‡å¯ç³»ç»Ÿå°±å¥½äº†ã€‚</p><p>  éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™é‡Œå‡ºæ¥çš„cudaçš„ç‰ˆæœ¬å·ä¸èƒ½å¤§äºpytorchæ‰€èƒ½æ”¯æŒçš„æœ€å¤§cudaç‰ˆæœ¬å·ã€‚</p><p>  æ¯”å¦‚è¿™æ¬¡å®‰è£…çš„æ—¶å€™ï¼Œpytorchæ‰€èƒ½æ”¯æŒçš„æœ€å¤§cudaç‰ˆæœ¬å·ä¸º11.8ï¼Œè€Œæˆ‘å®‰è£…åï¼Œè¿™é‡Œæ˜¾ç¤ºçš„ç‰ˆæœ¬å·æ˜¯12.2ï¼Œæœ€ç»ˆå¯¼è‡´æ— è®ºå¦‚ä½•pytorchéƒ½ä¸èƒ½è¯†åˆ«cudaã€‚åŸå› å°±æ˜¯å› ä¸ºè¿™é‡Œå®‰è£…çš„é©±åŠ¨å¤ªæ–°ï¼Œnividiaè®¾ç½®æˆäº†æœ€æ–°çš„cuda toolkit,åé¢å®‰è£…cuda toolkitè½¯ä»¶åŒ…çš„æ—¶å€™ä¸èƒ½é™çº§ï¼Œå¯¼è‡´pytorchæ²¡æ³•è¯†åˆ«ã€‚</p><p>  åœ¨æœ¬æ¬¡å®‰è£…è¿‡ç¨‹ä¸­ï¼Œæœ€ç»ˆæˆåŠŸå®‰è£…çš„é©±åŠ¨å™¨ç‰ˆæœ¬ä¸º<a href="https://www.nvidia.com/download/driverResults.aspx/194569/en-us/">510</a>ï¼Œå®‰è£…æˆåŠŸä¹‹åæŸ¥è¯¢åˆ°çš„cudaç‰ˆæœ¬ä¸º11.04ï¼Œ ç”±äºæœ€æ–°çš„pytorchæ”¯æŒçš„cudaç‰ˆæœ¬ä¸º11.8ï¼Œæ‰€ä»¥åé¢æˆ‘ä»¬è¿˜éœ€è¦å®‰è£…11.8ç‰ˆæœ¬çš„cuda toolkitï¼Œæ‰èƒ½è®©pytorchä½¿ç”¨cudaã€‚</p></li><li><p>å®‰è£…cuda toolkit</p><p>  åœ¨<a href="https://developer.nvidia.com/cuda-toolkit-archive">è¿™é‡Œ</a>æ‰¾åˆ°å¯¹åº”ç‰ˆæœ¬çš„cuda toolkitï¼Œç‚¹è¿›å»ä¹‹åï¼Œé€‰æ‹©æ“ä½œç³»ç»Ÿã€æ“ä½œç³»ç»Ÿç‰ˆæœ¬ç­‰ä¿¡æ¯ï¼Œä¸‹è½½ç±»å‹é€‰æ‹©ç¬¬ä¸‰ä¸ªï¼Œå®‰è£…åŒ…ä¸‹è½½å¥½ä¹‹åï¼Œæ ¹æ®æç¤ºå®‰è£…å°±å¥½äº†ã€‚</p><p>  å®Œæˆä¹‹åï¼Œå†ç”¨â€nividia smiâ€æŸ¥è¯¢cudaä¿¡æ¯ï¼Œè¿™æ¬¡ç‰ˆæœ¬åº”è¯¥å°±æ˜¯pytorchæ”¯æŒçš„äº†ã€‚</p><p>  è¿™é‡Œæœ‰ä¸ªç–‘é—®ï¼Œè²Œä¼¼ä»¥æœ¬æ¬¡åŒ…æ–¹å¼ï¼Œå®‰è£…cuda toolkitçš„æ—¶å€™å¯ä»¥å‹¾é€‰å®‰è£…nividiaé©±åŠ¨ç¨‹åºï¼Œä¹Ÿå°±æ˜¯è¯´å¯ä»¥çœå»å‰é¢å®‰è£…é©±åŠ¨è¿™ä¸€æ­¥ã€‚</p><p>  è¿™é‡Œé‡åˆ°çš„<strong>å¤§å‘</strong>æ˜¯ï¼Œä¸‹è½½ç±»å‹ä¸€å®šè¦é€‰æ‹©ç¬¬ä¸‰ä¸ªâ€runfile(local)â€,ä¹‹å‰å¥½å‡ æ¬¡é€‰æ‹©ç¬¬äºŒä¸ªâ€deb(network)â€ï¼Œå®‰è£…å®Œï¼Œä¸€æŸ¥è¯¢cudaä¿¡æ¯ï¼Œå¾—åˆ°çš„éƒ½æ˜¯12.2çš„ç‰ˆæœ¬ï¼Œ ä½†æ˜¯pytorchä¸æ”¯æŒ12.2çš„cudaï¼Œæ‰€ä»¥æ²¡æ³•ç”¨ã€‚</p><p>  æœ¬æ¬¡å®‰è£…è¿‡ç¨‹ä¸­ï¼Œä¸‹è½½çš„æ˜¯11.8ç‰ˆæœ¬çš„cuda toolkit,ä¸‹è½½å’Œå®‰è£…è„šæœ¬å¦‚ä¸‹</p>  <figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">wget https://developer.download.nvidia.com/compute/cuda/11.8.0/local_installers/cuda_11.8.0_520.61.05_linux.run</span><br><span class="line"><span class="built_in">sudo</span> sh cuda_11.8.0_520.61.05_linux.run</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure></li><li><p>å®‰è£…å¯¹åº”ç‰ˆæœ¬çš„pytorch</p><p>  åœ¨<a href="https://pytorch.org/get-started/locally/">è¿™é‡Œ</a>æ‰¾åˆ°å¯¹åº”çš„pytorchç‰ˆæœ¬ï¼Œç„¶åå®‰è£…å°±å¥½äº†ã€‚</p></li><li><p>æœ€åï¼ŒæŸ¥çœ‹cudaæ˜¯å¦èƒ½å¤Ÿè¢«pytorchè¯†åˆ«</p>  <figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">import torch</span><br><span class="line"><span class="built_in">print</span>(torch.cuda.is_available())</span><br></pre></td></tr></tbody></table></figure><p>  å¦‚æœæ˜¾ç¤ºä¸ºtureï¼Œåˆ™è¡¨ç¤ºå®‰è£…æˆåŠŸã€‚</p></li></ul>]]></content>
      
      
      <categories>
          
          <category> çˆ¬å‘æ€»ç»“ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> NIVIDIAé©±åŠ¨ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åœ¨macä¸Šä½¿ç”¨pybind11å®ç°c++ä¸pythonäº’é€šçš„demo</title>
      <link href="/2023/07/23/zai-mac-shang-shi-yong-pybind11-shi-xian-c-yu-python-hu-tong-de-demo/"/>
      <url>/2023/07/23/zai-mac-shang-shi-yong-pybind11-shi-xian-c-yu-python-hu-tong-de-demo/</url>
      
        <content type="html"><![CDATA[<h4 id="åœ¨macä¸Šä½¿ç”¨pybind11å®ç°c-ä¸pythonäº’é€šçš„demo"><a href="#åœ¨macä¸Šä½¿ç”¨pybind11å®ç°c-ä¸pythonäº’é€šçš„demo" class="headerlink" title="åœ¨macä¸Šä½¿ç”¨pybind11å®ç°c++ä¸pythonäº’é€šçš„demo"></a>åœ¨macä¸Šä½¿ç”¨pybind11å®ç°c++ä¸pythonäº’é€šçš„demo</h4><h5 id="0-é—®é¢˜æè¿°"><a href="#0-é—®é¢˜æè¿°" class="headerlink" title="0. é—®é¢˜æè¿°"></a>0. é—®é¢˜æè¿°</h5><p>ä¸‹é¢çš„pythonä»£ç å®šä¹‰äº†ä¸€ä¸ªç±»ï¼Œç±»ä¸­æœ‰ä¸€ä¸ªåä¸ºanalyze_dataçš„å‡½æ•°ï¼Œå…¶é‡‡ç”¨é€’å½’çš„æ–¹æ³•è§£æjsonæ ¼å¼çš„dataæ•°æ®ï¼Œç”±äºå¤„ç†é€Ÿåº¦è¾¾ä¸åˆ°è¦æ±‚ï¼Œæˆ‘ä»¬å¸Œæœ›ç”¨c++æ”¹å†™è¯¥ç±»ï¼Œå¹¶å°è£…æˆå¯ä¾›pythonä»£ç è°ƒç”¨çš„åº“ï¼Œä»¥è¾¾åˆ°åŠ é€Ÿçš„æ•ˆæœã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&nbsp;<span class="comment"># å¾…è§£æçš„æ•°æ®deom</span></span><br><span class="line">&nbsp;data_demo = {<span class="string">"resbody"</span>: {<span class="string">"data"</span>: {<span class="string">"name"</span>: <span class="string">"John"</span>, <span class="string">"age"</span>: <span class="number">30</span>, <span class="string">"address"</span>: {<span class="string">"city"</span>: <span class="string">"New York"</span>, <span class="string">"zipcode"</span>: <span class="number">10001</span>}}}}</span><br><span class="line">&nbsp;</span><br><span class="line">&nbsp;<span class="comment"># éœ€è¦è½¬æ¢ä¸ºc++ä»£ç çš„ç±»</span></span><br><span class="line">&nbsp;<span class="keyword">class</span> <span class="title class_">AnalyzeDataUtil</span>:</span><br><span class="line">&nbsp;</span><br><span class="line">&nbsp; &nbsp; &nbsp;<span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, datas</span>):</span><br><span class="line">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="variable language_">self</span>.datas = datas</span><br><span class="line">&nbsp;</span><br><span class="line">&nbsp; &nbsp; &nbsp;<span class="keyword">def</span> <span class="title function_">analyze_data</span>(<span class="params">self, data, result=<span class="string">"resbody"</span>, depth=<span class="number">0</span></span>):</span><br><span class="line">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="keyword">if</span> depth == <span class="number">5</span>:</span><br><span class="line">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="keyword">return</span></span><br><span class="line">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="keyword">if</span> <span class="built_in">isinstance</span>(data, <span class="built_in">dict</span>):</span><br><span class="line">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="keyword">for</span> k, v <span class="keyword">in</span> data.items():</span><br><span class="line">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="variable language_">self</span>.analyze_data(v, result + <span class="string">"$%s"</span> % <span class="built_in">str</span>(k), depth+<span class="number">1</span>)</span><br><span class="line">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="keyword">if</span> <span class="built_in">isinstance</span>(data, (<span class="built_in">list</span>, <span class="built_in">tuple</span>)):</span><br><span class="line">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(data)):</span><br><span class="line">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="variable language_">self</span>.analyze_data(data[i], result, depth+<span class="number">1</span>)</span><br><span class="line">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="keyword">else</span>:</span><br><span class="line">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="variable language_">self</span>.datas[result] = <span class="built_in">str</span>(data)</span><br></pre></td></tr></tbody></table></figure><p><strong>é—®é¢˜åˆ†æ</strong>ï¼š</p><p>æ ¹æ®é—®é¢˜æè¿°ï¼Œé¦–å…ˆï¼Œæˆ‘ä»¬è¦ç”¨c++å¯¹pythonå®šä¹‰çš„ç±»è¿›è¡Œæ”¹å†™ï¼Œç”±äºä¼ å…¥çš„å˜é‡dataç±»å‹ä¸å›ºå®šï¼Œä¸”æ¶‰åŠåˆ°ç±»å‹åˆ¤æ–­ï¼Œä¸€ç§æ¯”è¾ƒç®€å•çš„æ–¹å¼æ˜¯é‡‡ç”¨pybind11ï¼Œå®ƒé’ˆå¯¹pythonçš„å¸¸è§æ•°æ®ç±»å‹ï¼Œéƒ½æœ‰å¯¹åº”çš„c++å®ç°ç‰ˆæœ¬ï¼Œä»£ç æ”¹å†™å·¥ä½œå¤§å¤§å‡å°‘ã€‚å…¶æ¬¡ï¼Œç±»æ”¹å†™å¥½ä¹‹åï¼Œæˆ‘ä»¬éœ€è¦æ‰“é€šc++ä¸pythonä¹‹é—´çš„éš”é˜‚ï¼Œä½¿ç”¨pybind11å®ç°èµ·æ¥ä¹Ÿéå¸¸æ–¹ä¾¿ï¼Œåªéœ€è¦åœ¨c++æºç ä¸­æ·»åŠ å°‘é‡ä»£ç å³å¯ã€‚æœ€åï¼Œæˆ‘ä»¬è¿˜éœ€è¦å°†c++æºç ç¼–è¯‘æˆå…±äº«åº“ï¼Œä¾›ä¸‹æ¸¸ä»£ç è°ƒç”¨ã€‚</p><h5 id="1-å®‰è£…å¿…è¦çš„å·¥å…·å’ŒåŒ…"><a href="#1-å®‰è£…å¿…è¦çš„å·¥å…·å’ŒåŒ…" class="headerlink" title="1. å®‰è£…å¿…è¦çš„å·¥å…·å’ŒåŒ…"></a>1. å®‰è£…å¿…è¦çš„å·¥å…·å’ŒåŒ…</h5><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&nbsp;brew install cmake</span><br><span class="line">&nbsp;conda install pybind11</span><br></pre></td></tr></tbody></table></figure><p>æ³¨æ„ï¼šå®‰è£…pybind11çš„æ—¶å€™è¦ç”¨condaæ¥å®‰è£…ï¼Œç”¨pipæ–¹å¼å®‰è£…ï¼Œç¼–è¯‘çš„æ—¶å€™ä¼šæŠ¥è·¯å¾„é”™è¯¯ã€‚</p><h5 id="2-åˆ›å»ºc-æºæ–‡ä»¶"><a href="#2-åˆ›å»ºc-æºæ–‡ä»¶" class="headerlink" title="2. åˆ›å»ºc++æºæ–‡ä»¶"></a>2. åˆ›å»ºc++æºæ–‡ä»¶</h5><p>ä¸‹é¢çš„ä»£ç å®ç°äº†AnalyzeDataUtilç±»çš„c++ç‰ˆæœ¬ï¼Œç¬¬54è¡Œåˆ°ç¬¬60è¡Œçš„ä½œç”¨æ˜¯æ‰“é€šc++ä¸pythonä¹‹é—´çš„éš”é˜‚ã€‚</p><figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line">&nbsp;<span class="comment">//path: analyze_data_util/analyze_data_util.cpp</span></span><br><span class="line">&nbsp;<span class="meta">#<span class="keyword">include</span> <span class="string">&lt;pybind11/pybind11.h&gt;</span></span></span><br><span class="line">&nbsp;<span class="meta">#<span class="keyword">include</span> <span class="string">&lt;pybind11/stl.h&gt;</span></span></span><br><span class="line">&nbsp;</span><br><span class="line">&nbsp;<span class="keyword">namespace</span> py = pybind11;</span><br><span class="line">&nbsp;</span><br><span class="line">&nbsp;<span class="keyword">struct</span> <span class="title class_">AnalyzeDataUtil</span></span><br><span class="line">&nbsp;{</span><br><span class="line">&nbsp;<span class="keyword">public</span>:</span><br><span class="line">&nbsp; &nbsp; &nbsp;<span class="built_in">AnalyzeDataUtil</span>(py::dict datas) : <span class="built_in">datas</span>(datas) {}</span><br><span class="line">&nbsp;</span><br><span class="line">&nbsp; &nbsp; &nbsp;<span class="function"><span class="type">void</span> <span class="title">analyze_data</span><span class="params">(<span class="type">const</span> py::object &amp;data, std::string result = <span class="string">""</span>, <span class="type">int</span> depth = <span class="number">0</span>)</span></span></span><br><span class="line"><span class="function">&nbsp; &nbsp;  </span>{</span><br><span class="line">&nbsp;</span><br><span class="line">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="keyword">if</span> (depth == <span class="number">5</span>)</span><br><span class="line">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="keyword">return</span>;</span><br><span class="line">&nbsp;</span><br><span class="line">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="keyword">if</span> (py::<span class="built_in">isinstance</span>&lt;py::dict&gt;(data))</span><br><span class="line">&nbsp; &nbsp; &nbsp; &nbsp;  {</span><br><span class="line">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;py::dict dict_data = py::<span class="built_in">cast</span>&lt;py::dict&gt;(data);</span><br><span class="line">&nbsp;</span><br><span class="line">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="keyword">for</span> (<span class="type">const</span> <span class="keyword">auto</span> &amp;item : dict_data)</span><br><span class="line">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  {</span><br><span class="line">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="keyword">auto</span> key = py::<span class="built_in">reinterpret_borrow</span>&lt;py::object&gt;(item.first);</span><br><span class="line">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="keyword">auto</span> value = py::<span class="built_in">reinterpret_borrow</span>&lt;py::object&gt;(item.second);</span><br><span class="line">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="built_in">analyze_data</span>(value, result + <span class="string">"$"</span> + py::<span class="built_in">str</span>(key).<span class="built_in">cast</span>&lt;std::string&gt;(), depth + <span class="number">1</span>);</span><br><span class="line">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  }</span><br><span class="line">&nbsp; &nbsp; &nbsp; &nbsp;  }</span><br><span class="line">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="keyword">if</span> (py::<span class="built_in">isinstance</span>&lt;py::list&gt;(data) || py::<span class="built_in">isinstance</span>&lt;py::tuple&gt;(data))</span><br><span class="line">&nbsp; &nbsp; &nbsp; &nbsp;  {</span><br><span class="line">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;py::list list_data = py::<span class="built_in">cast</span>&lt;py::list&gt;(data);</span><br><span class="line">&nbsp;</span><br><span class="line">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="keyword">for</span> (<span class="type">const</span> <span class="keyword">auto</span> &amp;item : list_data)</span><br><span class="line">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  {</span><br><span class="line">&nbsp;</span><br><span class="line">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="built_in">analyze_data</span>(py::<span class="built_in">cast</span>&lt;py::object&gt;(item), result, depth + <span class="number">1</span>);</span><br><span class="line">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  }</span><br><span class="line">&nbsp; &nbsp; &nbsp; &nbsp;  }</span><br><span class="line">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="keyword">else</span></span><br><span class="line">&nbsp; &nbsp; &nbsp; &nbsp;  {</span><br><span class="line">&nbsp;</span><br><span class="line">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;datas[py::<span class="built_in">str</span>(result)] = py::<span class="built_in">str</span>(data).<span class="built_in">cast</span>&lt;std::string&gt;();</span><br><span class="line">&nbsp; &nbsp; &nbsp; &nbsp;  }</span><br><span class="line">&nbsp; &nbsp;  }</span><br><span class="line">&nbsp;</span><br><span class="line">&nbsp; &nbsp; &nbsp;<span class="function">py::dict <span class="title">get_datas</span><span class="params">()</span></span></span><br><span class="line"><span class="function">&nbsp; &nbsp;  </span>{</span><br><span class="line">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="keyword">return</span> datas;</span><br><span class="line">&nbsp; &nbsp;  }</span><br><span class="line">&nbsp;</span><br><span class="line">&nbsp;<span class="keyword">private</span>:</span><br><span class="line">&nbsp; &nbsp; &nbsp;py::dict datas;</span><br><span class="line">&nbsp;};</span><br><span class="line">&nbsp;</span><br><span class="line">&nbsp;<span class="built_in">PYBIND11_MODULE</span>(analyze_data_util, m)</span><br><span class="line">&nbsp;{</span><br><span class="line">&nbsp; &nbsp; &nbsp;py::<span class="built_in">class_</span>&lt;AnalyzeDataUtil&gt;(m, <span class="string">"AnalyzeDataUtil"</span>)</span><br><span class="line">&nbsp; &nbsp; &nbsp; &nbsp;  .<span class="built_in">def</span>(py::<span class="built_in">init</span>&lt;py::dict&gt;())</span><br><span class="line">&nbsp; &nbsp; &nbsp; &nbsp;  .<span class="built_in">def</span>(<span class="string">"analyze_data"</span>, &amp;AnalyzeDataUtil::analyze_data)</span><br><span class="line">&nbsp; &nbsp; &nbsp; &nbsp;  .<span class="built_in">def</span>(<span class="string">"get_datas"</span>, &amp;AnalyzeDataUtil::get_datas);</span><br><span class="line">&nbsp;}</span><br><span class="line">&nbsp;</span><br></pre></td></tr></tbody></table></figure><h5 id="4-åˆ›å»ºCMakeLists-txtæ–‡ä»¶ç¼–è¯‘C-æ¨¡å—"><a href="#4-åˆ›å»ºCMakeLists-txtæ–‡ä»¶ç¼–è¯‘C-æ¨¡å—" class="headerlink" title="4. åˆ›å»ºCMakeLists.txtæ–‡ä»¶ç¼–è¯‘C++æ¨¡å—"></a>4. åˆ›å»ºCMakeLists.txtæ–‡ä»¶ç¼–è¯‘C++æ¨¡å—</h5><p>åˆ›å»ºæ–‡ä»¶analyze_data_util/CMakeLists.txtï¼Œ ç„¶åå°†ä¸‹é¢çš„è„šæœ¬æ‹·è´åˆ°æ–‡ä»¶ä¸­ã€‚</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&nbsp;cmake_minimum_required(VERSION 3.12)</span><br><span class="line"></span><br><span class="line">&nbsp;project(analyze_data_util LANGUAGES CXX)</span><br><span class="line">&nbsp;</span><br><span class="line">&nbsp;<span class="built_in">set</span>(CMAKE_CXX_STANDARD 14)</span><br><span class="line">&nbsp;</span><br><span class="line">&nbsp;find_package(pybind11 REQUIRED)</span><br><span class="line">&nbsp;</span><br><span class="line">&nbsp;pybind11_add_module(analyze_data_util analyze_data_util.cpp)</span><br></pre></td></tr></tbody></table></figure><h5 id="5-ç¼–è¯‘C-æ¨¡å—"><a href="#5-ç¼–è¯‘C-æ¨¡å—" class="headerlink" title="5. ç¼–è¯‘C++æ¨¡å—"></a>5. ç¼–è¯‘C++æ¨¡å—</h5><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&nbsp;<span class="built_in">mkdir</span> build</span><br><span class="line">&nbsp;<span class="built_in">cd</span> build</span><br><span class="line">&nbsp;cmake ..</span><br><span class="line">&nbsp;cmake --build .</span><br></pre></td></tr></tbody></table></figure><p>å°†å·¥ä½œç›®å½•åˆ‡æ¢åˆ°analyze_data_utilä¸­ï¼Œåˆ†åˆ«æ‰§è¡Œä¸Šé¢çš„ä»£ç ã€‚å°†ä¼šåˆ›å»ºå…±äº«åº“æ–‡ä»¶ï¼Œåœ¨Macæˆ–Linuxä¸­åä¸ºï¼šanalyze_data_util.soï¼Œåœ¨Windowsä¸­ä¸ºanalyze_data_util.pyd</p><h5 id="6-æ„é€ æ¥å£"><a href="#6-æ„é€ æ¥å£" class="headerlink" title="6. æ„é€ æ¥å£"></a>6. æ„é€ æ¥å£</h5><p>å› ä¸ºåœ¨c++ä¸­ä¸å…è®¸ç›´æ¥è®¿é—®ç§æœ‰æˆå‘˜ï¼Œå› æ­¤æˆ‘ä»¬å®ç°äº†get_datas()æ–¹æ³•æ¥é—´æ¥è®¿é—®æˆå‘˜ï¼Œä½†æ˜¯è¿™ä¸ç¬¦åˆpythonçš„ä½¿ç”¨ä¹ æƒ¯ï¼Œå› æ­¤æˆ‘ä»¬æ„é€ ä¸€ä¸ªåŒåçš„AnalyzeDataUtilç±»å°†è¿™ä¸€ç»†èŠ‚éšè—èµ·æ¥ã€‚ä¹Ÿå¯ä»¥çœå»è¯¥æ­¥å¥ï¼Œä½†å¿…é¡»é€šè¿‡get_datas()å‡½æ•°è®¿é—®è§£æåçš„æ•°æ®ã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&nbsp;<span class="comment"># path: demo/analyze_data_tool.py</span></span><br><span class="line">&nbsp;<span class="keyword">import</span> analyze_data_util</span><br><span class="line">&nbsp;</span><br><span class="line">&nbsp;<span class="comment"># Wrapper for AnalyzeDataUtil class</span></span><br><span class="line">&nbsp;<span class="keyword">class</span> <span class="title class_">AnalyzeDataUtil</span>:</span><br><span class="line">&nbsp;</span><br><span class="line">&nbsp; &nbsp; &nbsp;<span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, datas</span>):</span><br><span class="line">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="variable language_">self</span>.analyzer = analyze_data_util.AnalyzeDataUtil(datas)</span><br><span class="line">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="variable language_">self</span>.datas = datas</span><br><span class="line">&nbsp;</span><br><span class="line">&nbsp; &nbsp; &nbsp;<span class="keyword">def</span> <span class="title function_">analyze_data</span>(<span class="params">self, data, result=<span class="string">"resbody"</span>, depth=<span class="number">0</span></span>): &nbsp; </span><br><span class="line">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="variable language_">self</span>.analyzer.analyze_data(data, result, depth)</span><br><span class="line">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="variable language_">self</span>.datas = <span class="variable language_">self</span>.analyzer.get_datas()</span><br></pre></td></tr></tbody></table></figure><h5 id="7-åœ¨pythonä¸­ä½¿ç”¨C-æ¨¡å—"><a href="#7-åœ¨pythonä¸­ä½¿ç”¨C-æ¨¡å—" class="headerlink" title="7. åœ¨pythonä¸­ä½¿ç”¨C++æ¨¡å—"></a>7. åœ¨pythonä¸­ä½¿ç”¨C++æ¨¡å—</h5><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&nbsp;<span class="comment"># path: demo/test.py</span></span><br><span class="line">&nbsp;<span class="keyword">from</span> analyze_data_tool <span class="keyword">import</span> AnalyzeDataUtil</span><br><span class="line">&nbsp;<span class="keyword">import</span> json</span><br><span class="line">&nbsp;<span class="keyword">import</span> time</span><br><span class="line">&nbsp;<span class="keyword">import</span> pprint</span><br><span class="line">&nbsp;</span><br><span class="line">&nbsp;<span class="built_in">print</span>(<span class="string">'ç¤ºä¾‹ç”¨æ³•,c++ç‰ˆæœ¬:'</span>)</span><br><span class="line">&nbsp;json_data = <span class="string">'{"resbody": {"data": {"name": "John", "age": 30, "address": {"city": "New York", "zipcode": 10001}}}}'</span></span><br><span class="line">&nbsp;data_dict = json.loads(json_data)</span><br><span class="line">&nbsp;time1 = time.time()</span><br><span class="line">&nbsp;analyzer2 = AnalyzeDataUtil({})</span><br><span class="line">&nbsp;analyzer2.analyze_data(data_dict, <span class="string">"resbody"</span>, <span class="number">0</span>)</span><br><span class="line">&nbsp;time2 = time.time()</span><br><span class="line">&nbsp;all_keys1 = analyzer2.datas.keys()</span><br><span class="line">&nbsp;keys_list1 = <span class="string">' '</span>.join(<span class="built_in">list</span>(all_keys1))</span><br><span class="line">&nbsp;</span><br><span class="line">&nbsp;result = time2 - time1</span><br><span class="line">&nbsp;formatted_result = <span class="string">f"<span class="subst">{result:<span class="number">.10</span>f}</span>"</span></span><br><span class="line">&nbsp;pp.pprint(all_keys1)</span><br><span class="line">&nbsp;<span class="built_in">print</span>(formatted_result)</span><br></pre></td></tr></tbody></table></figure><p>åˆ›å»ºä»¥ä¸Šä»£ç ï¼Œç„¶åå°†ç”Ÿæˆçš„.so or .pydæ–‡ä»¶æ‹·è´åˆ°demo/ç›®å½•ä¸‹ï¼Œè¿è¡Œpython test.pyã€‚</p><h5 id="8-åè®°"><a href="#8-åè®°" class="headerlink" title="8. åè®°"></a>8. åè®°</h5><p>è™½ç„¶ä¸Šé¢çš„è§£å†³æ–¹æ¡ˆå®ç°äº†c++ä¸pythonçš„äº’é€šï¼Œä½†æˆ‘åœ¨å¯¹å•ä¸ªæ–‡ä»¶è¿›è¡Œæµ‹è¯•æ¯”è¾ƒçš„æ—¶å€™ï¼Œå¾—åˆ°å¦‚ä¸‹ç»“æœï¼š</p><p><img src="https://raw.githubusercontent.com/Skylyong/i/main/20230723015325.png" alt="image-20230723015325241"></p><p>ä»ç»“æœä¸­æˆ‘ä»¬å‘ç°ï¼Œå¯¹äºç›¸åŒçš„jsonæ–‡ä»¶ï¼Œc++ç‰ˆæœ¬ä¸pythonç‰ˆæœ¬å¤„ç†ç»“æœæ˜¯ä¸€è‡´çš„ï¼Œä½†å¯¹äºé€Ÿåº¦çš„æå‡å¹¶ä¸ç†æƒ³ï¼Œå¯¹äºå•ä¸ªæ–‡ä»¶çš„å¤„ç†c++çš„ç‰ˆæœ¬ç”šè‡³æ¯”pythonçš„ä½ï¼Œå¯èƒ½æ˜¯å› ä¸ºpythonè°ƒç”¨c++åŒ…çš„æ—¶å€™å ç”¨äº†æ›´å¤šçš„æ—¶é—´ï¼Œå› æ­¤ï¼Œå¤„ç†é€Ÿåº¦çš„æå‡ä½“ç°ä¸å‡ºæ¥ã€‚é’ˆå¯¹è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬è‡³å°‘å¯ä»¥ä»ä»¥ä¸‹ä¸¤ä¸ªæ–¹é¢è¿›è¡Œè€ƒè™‘ï¼šé¦–å…ˆï¼Œä»ç®—æ³•å±‚é¢ä¸Šæ¥çœ‹ï¼Œæˆ‘ä»¬å¯ä»¥å°†é€’å½’æ”¹ä¸ºåŠ¨æ€è§„åˆ’ï¼Œæˆ–è€…å¯¹é€’å½’è¿‡ç¨‹è¿›è¡Œå‰ªæå¤„ç†ï¼Œå› ä¸ºé€’å½’è™½ç„¶å¥½ç”¨ï¼Œä½†æ˜¯æ•ˆç‡å¾€å¾€ä¸é«˜ï¼Œå®ƒé‡å¤çš„è¿‡ç¨‹å®æ¯”è¾ƒå¤šã€‚å…¶æ¬¡ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥å°è¯•ä½¿ç”¨ä¸€äº›èƒ½å¤Ÿå¿«é€Ÿè§£æjsonæ ¼å¼çš„ä¼˜ç§€åº“(æ¯”å¦‚<a href="https://rapidjson.org/zh-cn/">RapidJSON</a>)ï¼Œè¿™æˆ–è®¸ä¼šæ¯”ä½¿ç”¨æˆ‘ä»¬è‡ªå·±å†™çš„ç²—ç³™ä»£ç æ•ˆç‡æ¥çš„æ›´å¿«ã€‚</p><p>æœ€åï¼Œè™½ç„¶ä¸Šé¢è®²è§£ä¸­æ¶‰åŠåˆ°çš„æ¯ä¸ªè„šæœ¬ï¼Œæˆ‘éƒ½ç»™å‡ºäº†å®ƒæ‰€åœ¨çš„æ–‡ä»¶åå’Œä½ç½®ï¼Œä½†æ˜¯å¹¶ä¸ç›´è§‚ï¼Œä¸ºäº†æ–¹ä¾¿å¤§å®¶æ›´ç›´è§‚çš„ç†è§£(æˆ‘è·‘åˆ«äººåšå®¢ä»£ç çš„æ—¶å€™ï¼Œç»å¸¸å› ä¸ºä½ç½®æ”¾é”™ï¼Œæµªè´¹æ—¶é—´å»è°ƒè¯•)ï¼Œæˆ‘æŠŠå·¥ç¨‹ç›®å½•ç²˜è´´å‡ºæ¥ï¼š</p><p><img src="https://raw.githubusercontent.com/Skylyong/i/main/20230723022224.png" alt="image-20230723022223900"></p><p>ä»¥ä¸Šå°±æ˜¯ä½¿ç”¨pybind11å®ç°c++ä¸pythonäº’é€šçš„demoå•¦ï¼Œå¸Œæœ›èƒ½å¤Ÿå¸®åˆ°ä½ ï¼Œæƒ³è¦äº†è§£æ›´å¤šï¼Œå¯ä»¥å»çœ‹ä¸‹é¢çš„å®˜æ–¹æ–‡æ¡£å–”ã€‚</p><ul><li><strong>å‚è€ƒèµ„æ–™</strong><ul><li><strong>pybind11æ–‡æ¡£ï¼š</strong><a href="https://pybind11.readthedocs.io/en/stable/">https://pybind11.readthedocs.io/en/stable/</a></li><li><strong>pybind11ä¸­æ–‡æ–‡æ¡£ï¼š</strong><a href="https://github.com/charlotteLive/pybind11-Chinese-docs">https://github.com/charlotteLive/pybind11-Chinese-docs</a></li></ul></li></ul>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹ ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python_c++_äº’é€š </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Macç³»ç»Ÿåˆ¶ä½œwin10å¯åŠ¨Uç›˜</title>
      <link href="/2022/09/07/mac-xi-tong-zhi-zuo-win10-qi-dong-u-pan/"/>
      <url>/2022/09/07/mac-xi-tong-zhi-zuo-win10-qi-dong-u-pan/</url>
      
        <content type="html"><![CDATA[<h5 id="Macç³»ç»Ÿä¸‹åˆ¶ä½œwin10å®‰è£…ç›˜"><a href="#Macç³»ç»Ÿä¸‹åˆ¶ä½œwin10å®‰è£…ç›˜" class="headerlink" title="Macç³»ç»Ÿä¸‹åˆ¶ä½œwin10å®‰è£…ç›˜"></a>Macç³»ç»Ÿä¸‹åˆ¶ä½œwin10å®‰è£…ç›˜</h5><h6 id="å‡†å¤‡"><a href="#å‡†å¤‡" class="headerlink" title="å‡†å¤‡"></a>å‡†å¤‡</h6><ul><li><p>ä¸€å°macç”µè„‘</p></li><li><p>ä¸€ä¸ªå¤§äº8Gçš„Uç›˜</p></li><li><p>win10é•œåƒæ–‡ä»¶</p></li><li><p>Boot Camp ISO Converterè½¯ä»¶ï¼ˆè¿™ä¸ªè½¯ä»¶å¯ä»¥è§£å†³FAT32æ ¼å¼çš„uç›˜å•ä¸ªæ–‡ä»¶å¤§å°ä¸èƒ½è¶…è¿‡4GBçš„é—®é¢˜ï¼‰ï¼Œä¸‹è½½<a href="https://macdownload.informer.com/boot-camp-iso-converter/download/">é“¾æ¥</a></p></li></ul><h6 id="åˆ¶ä½œæ­¥éª¤"><a href="#åˆ¶ä½œæ­¥éª¤" class="headerlink" title="åˆ¶ä½œæ­¥éª¤"></a>åˆ¶ä½œæ­¥éª¤</h6><ul><li><p>æ‰“å¼€Boot Camp ISO Converterè½¯ä»¶å¯¹ä¸‹è½½å¥½çš„isoé•œåƒæ–‡ä»¶è¿›è¡Œå¤„ç†ï¼Œç›®çš„æ˜¯å°†é•œåƒæ–‡ä»¶insta.winåˆ†é…ä¸ºå¤§å°å°äº4GBçš„æ–‡ä»¶</p></li><li><p>åœ¨æ’å…¥Uç›˜çš„çŠ¶æ€ä¸‹ï¼Œæ‰“å¼€ç»ˆç«¯ï¼Œè¾“å…¥ï¼š</p>  <figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">diskutil list</span><br></pre></td></tr></tbody></table></figure><p>  æ‰¾åˆ°Uç›˜å¯¹åº”çš„ç›˜ç¬¦ï¼Œæœ¬ä¾‹ä¸­Uç›˜å¯¹åº”çš„ç›˜ç¬¦ä¸ºï¼šdisk2</p></li><li><p>å°†Uç›˜(disk2)æ ¼å¼åŒ–ä¸ºFAT32æ ¼å¼</p>  <figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">diskutil eraseDisk FAT32 <span class="string">"WINDOWS10"</span> MBR disk2</span><br></pre></td></tr></tbody></table></figure></li><li><p>æ‰¾åˆ°ç»è¿‡Boot Camp ISO Converterå¤„ç†åçš„é•œåƒæ–‡ä»¶ï¼Œç„¶ååŒå‡»æŒ‚è½½é•œåƒæ–‡ä»¶</p></li><li><p>è¾“å…¥å‘½ä»¤ï¼Œå°†æŒ‚è½½çš„é•œåƒç›˜æ‹·è´è‡³Uç›˜ä¸­(disk2)</p>  <figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cp</span> -rp /Volumes/CPBA_X64FRE_ZH-CN_DV9/* /Volumes/WINDOWS10/</span><br></pre></td></tr></tbody></table></figure></li></ul><p> è¿™é‡Œçš„CPBA_X64FRE_ZHæ˜¯åˆšåˆšæŒ‚è½½çš„é•œåƒçš„åç§°,å¤§çº¦ç­‰å¾…10åˆ†é’Ÿï¼Œå‘½ä»¤è¿è¡Œç»“æŸä¹‹åï¼Œå¯åŠ¨ç›˜å°±åšå¥½äº†ã€‚</p><h6 id="win10ç³»ç»Ÿå®‰è£…è¿‡ç¨‹ä¸­æŠ¥é”™è§£å†³æ–¹æ³•"><a href="#win10ç³»ç»Ÿå®‰è£…è¿‡ç¨‹ä¸­æŠ¥é”™è§£å†³æ–¹æ³•" class="headerlink" title="win10ç³»ç»Ÿå®‰è£…è¿‡ç¨‹ä¸­æŠ¥é”™è§£å†³æ–¹æ³•"></a>win10ç³»ç»Ÿå®‰è£…è¿‡ç¨‹ä¸­æŠ¥é”™è§£å†³æ–¹æ³•</h6><p>åœ¨ç£ç›˜æ ¼å¼æ­¥éª¤å¯èƒ½ä¼šæŠ¥â€œwindowsæ— æ³•å®‰è£…åˆ°è¿™ä¸ªç£ç›˜ï¼Œé€‰ä¸­çš„ç£ç›˜é‡‡ç”¨çš„GPT/MBRåˆ†åŒºå½¢å¼â€é”™è¯¯ï¼Œè§£å†³æ–¹æ³•æœ‰2ç§ï¼Œè¿™é‡Œåªåˆ—ä¸¾å…¶ä¸­ä¸€ç§æ–¹æ³•ï¼š</p><ul><li><p>è½¬æ¢ç£ç›˜æ ¼å¼ä¸ºMBRï¼Œä½†æ˜¯ä¼šæ¸…é™¤æ‰€æœ‰ç£ç›˜åˆ†åŒº</p><p>  åœ¨é”™è¯¯æç¤ºçš„æ—¶å€™ï¼Œä¸è¦é‡å¯ç”µè„‘ï¼Œç›´æ¥æŒ‰â€Shift+F10â€ç»„åˆé”®ï¼Œè¿™ä¸ªæ—¶å€™ä¼šå¼¹å‡ºCMDæç¤ºæ¡†ï¼Œç„¶åä¾æ¬¡è¾“å…¥å¦‚ä¸‹å‘½ä»¤ï¼š</p>  <figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">list disk <span class="comment"># å›è½¦é”®ç¡®å®šï¼›ï¼ˆä¼šåˆ—å‡ºæ‰€æœ‰çš„ç£ç›˜ï¼Œè®°ä½è‡ªå·±ç¡¬ç›˜çš„ç£ç›˜å·ï¼Œé€šè¿‡å®¹é‡å¤§å°å°±å¯ä»¥åˆ†è¾¨äº†ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œç£ç›˜0å°±æ˜¯æˆ‘ä»¬çš„ç¡¬ç›˜ï¼Œç£ç›˜1å°±æ˜¯Uç›˜ï¼‰</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> disk 0 <span class="comment"># å›è½¦é”®ç¡®å®šï¼›ï¼ˆé€‰æ‹©ç£ç›˜0ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬çš„ç¡¬ç›˜ï¼Œå°±æ˜¯å‡†å¤‡åšç³»ç»Ÿçš„ç¡¬ç›˜ï¼‰</span></span><br><span class="line"></span><br><span class="line">clean <span class="comment"># å›è½¦é”®ç¡®å®šï¼›ï¼ˆæ¸…ç©ºç£ç›˜ï¼Œç›¸å½“äºæ ¼å¼åŒ–å…¨ç›˜ï¼‰</span></span><br><span class="line"></span><br><span class="line">convert mbr <span class="comment"># å›è½¦é”®ç¡®å®šï¼›ï¼ˆå°†è¯¥ç¡¬ç›˜è½¬æ¢ä¸ºmbræ ¼å¼ï¼Œå¦‚æœæƒ³è¦å°†ç¡¬ç›˜è½¬åŒ–ä¸ºgptï¼Œé‚£å°±æ˜¯è¾“å…¥â€œconvert gptâ€ï¼‰</span></span><br></pre></td></tr></tbody></table></figure></li></ul><h6 id="å‚è€ƒé“¾æ¥"><a href="#å‚è€ƒé“¾æ¥" class="headerlink" title="å‚è€ƒé“¾æ¥"></a><a href="https://blog.csdn.net/h21396577548/article/details/125572053">å‚è€ƒé“¾æ¥</a></h6>]]></content>
      
      
      <categories>
          
          <category> çˆ¬å‘æ€»ç»“ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¯åŠ¨Uç›˜ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç”µç£æ¯”èµ›æ€»ç»“</title>
      <link href="/2022/09/05/dian-ci-bi-sai-zong-jie/"/>
      <url>/2022/09/05/dian-ci-bi-sai-zong-jie/</url>
      
        <content type="html"><![CDATA[<p>ç”µç£æ¯”èµ›æ€»ç»“</p><p>ä»£ç æ€»ç»“</p><ol><li>è¦ä¼šé™æ€åˆ†æèµ„æºå æœ‰ç‡ï¼Œç‰¹åˆ«æ˜¯å½“æœåŠ¡å™¨å†…å­˜èµ„æºä¸è¶³çš„æ—¶å€™ï¼Œæå‰åšå¥½é™æ€åˆ†æï¼Œè®¾ç½®åˆç†çš„è¿è¡Œå‚æ•°ï¼Œæ‰èƒ½æå‡æ•ˆç‡ã€‚æ¯”å¦‚æœ¬æ¬¡å®éªŒè¿‡ç¨‹ä¸­ï¼Œåšæ•°æ®å¢å¼ºé¢„å¤„ç†æ•°æ®æ—¶éœ€è¦å ç”¨å¤§é‡å†…å­˜èµ„æºï¼Œå‚æ•°è®¾ç½®è¿‡å¤§ï¼Œä¼šå¯¼è‡´è¿è¡Œä¸€åŠåå› ä¸ºå†…å­˜ä¸è¶³ï¼Œè¿›ç¨‹è¢«killedæ‰ï¼Œå‚æ•°è®¾ç½®è¿‡å°æ•ˆç‡åˆå˜å¾—å¾ˆä½ã€‚</li><li>å½“æ•°æ®å¾ˆå¤šï¼Œéœ€è¦å ç”¨å¤§é‡å†…å­˜æ—¶ï¼Œä¸è¦å°†æ•°æ®è½¬æ¢ä¸ºpandasçš„DataFrameå¯¹è±¡ï¼Œå› ä¸ºå®ƒä¼šåƒæ‰æ›´å¤šçš„å†…å­˜ï¼Œæ­¤å¤–ä½¿ç”¨applyæ–¹æ³•å¯¹æ•°æ®è¿›è¡Œé€è¡Œå¤„ç†çš„æ—¶å€™ï¼Œå³ä½¿ä½¿ç”¨äº†åŠ é€Ÿæ–¹æ³•ï¼Œä¹Ÿæ²¡æœ‰å°†æ•°æ®å­˜å‚¨ä¸ºlistç„¶åä½¿ç”¨å¤šè¿›ç¨‹æ–¹æ³•å¤„ç†é«˜æ•ˆã€‚åœ¨æœ¬æ¬¡å®éªŒä¸­ï¼Œåè€…çš„é€Ÿåº¦è‡³å°‘æ˜¯å‰è€…çš„5å€ã€‚</li><li>å°½é‡ä½¿ç”¨classå¯¹ä»£ç è¿›è¡Œå°è£…ï¼Œè€Œä¸æ˜¯ä½¿ç”¨ä¸€ä¸ªä¸ªå•ç‹¬çš„å‡½æ•°</li><li>å°½é‡ä¿è¯å‡½æ•°çš„åŠŸèƒ½å•ä¸€ï¼Œè¿™æ ·çš„å‡½æ•°æ›´å®¹æ˜“è¢«å¤ç”¨ï¼Œå¤šå†™å‡ ä¸ªå‡½æ•°æ²¡æœ‰å…³ç³»</li><li>å‡ ç§å¸¸ç”¨çš„ä¿å­˜/è¯»å–æ•°æ®æ–¹å¼ï¼š</li></ol><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&nbsp; <span class="keyword">import</span> pickle</span><br><span class="line">&nbsp; <span class="keyword">import</span> json</span><br><span class="line">&nbsp;</span><br><span class="line">&nbsp;<span class="comment"># ä½¿ç”¨pickle </span></span><br><span class="line">&nbsp;pickle.dump(data, file=<span class="built_in">open</span>(file_name,<span class="string">"wb"</span>))</span><br><span class="line">&nbsp;data = pickle.load(file=<span class="built_in">open</span>(file_name, <span class="string">"rb"</span>))</span><br><span class="line">&nbsp;</span><br><span class="line">&nbsp;<span class="comment"># ä½¿ç”¨json</span></span><br><span class="line">&nbsp;json.dump(data, file=<span class="built_in">open</span>(file_name,<span class="string">"w"</span>))</span><br><span class="line">&nbsp;data = json.load(file=<span class="built_in">open</span>(file_name, <span class="string">"r"</span>))</span><br></pre></td></tr></tbody></table></figure><ol start="6"><li>ä½¿ç”¨comentæ¥å¯è§†åŒ–è®­ç»ƒè¿‡ç¨‹</li></ol><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&nbsp; <span class="keyword">from</span> comet_ml <span class="keyword">import</span> Experiment</span><br><span class="line">&nbsp;</span><br><span class="line">&nbsp;experiment = Experiment(project_name=args.project_name,</span><br><span class="line">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;api_key=args.api_key)</span><br><span class="line">&nbsp;</span><br><span class="line">&nbsp;experiment.log_parameters(<span class="built_in">vars</span>(args))</span><br><span class="line">&nbsp;</span><br><span class="line">&nbsp;<span class="keyword">with</span> experiment.train():</span><br><span class="line">&nbsp; &nbsp; &nbsp;experiment.log_metric(<span class="string">'epoch_loss'</span>, train_loss, step=epoch)</span><br><span class="line">&nbsp;</span><br><span class="line">&nbsp;<span class="keyword">with</span> experiment.validate():</span><br><span class="line">&nbsp; &nbsp; &nbsp;experiment.log_metric(<span class="string">'epoch_loss'</span>, val_loss, step=epoch)</span><br><span class="line">&nbsp;</span><br><span class="line">&nbsp;experiment.end()</span><br></pre></td></tr></tbody></table></figure><ol start="7"><li>ä½¿ç”¨argparseæ¥æ„å»ºè¶…å‚æ•°ç®¡ç†å…¥å£</li></ol><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&nbsp; <span class="keyword">import</span> argparse</span><br><span class="line">&nbsp; parser = argparse.ArgumentParser()</span><br><span class="line">&nbsp;</span><br><span class="line">&nbsp; &nbsp;parser.add_argument(<span class="string">"--drop_data_rate"</span>, default=<span class="number">0.9</span>, <span class="built_in">type</span>=<span class="built_in">float</span>,required=<span class="literal">False</span>)</span><br><span class="line">&nbsp;</span><br><span class="line">&nbsp; &nbsp;args = parser.parse_args() <span class="comment">#å°†å‚æ•°å˜æˆå¯è°ƒç”¨å¯¹è±¡</span></span><br><span class="line">&nbsp;</span><br><span class="line">&nbsp; &nbsp;pp.pprint(<span class="built_in">vars</span>(args)) <span class="comment"># æ‰“å°å‚æ•°</span></span><br><span class="line">&nbsp;</span><br><span class="line">&nbsp; &nbsp;<span class="keyword">def</span> <span class="title function_">str2bool</span>(<span class="params">v</span>):</span><br><span class="line">&nbsp; &nbsp; &nbsp;<span class="keyword">if</span> v.lower() <span class="keyword">in</span> (<span class="string">'yes'</span>, <span class="string">'true'</span>, <span class="string">'t'</span>, <span class="string">'y'</span>, <span class="string">'1'</span>):</span><br><span class="line">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">&nbsp; &nbsp; &nbsp;<span class="keyword">elif</span> v.lower() <span class="keyword">in</span> (<span class="string">'no'</span>, <span class="string">'false'</span>, <span class="string">'f'</span>, <span class="string">'n'</span>, <span class="string">'0'</span>):</span><br><span class="line">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">&nbsp; &nbsp; &nbsp;<span class="keyword">else</span>:</span><br><span class="line">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="keyword">raise</span> argparse.ArgumentTypeError(<span class="string">'Unsupported value encountered.'</span>)</span><br></pre></td></tr></tbody></table></figure><p>æ³¨ï¼š ä½¿ç”¨add_argument()æ·»åŠ å‚æ•°çš„æ—¶å€™æœ‰ä¸€ä¸ªå¤§å‘ï¼Œ=å½“æ·»åŠ å‚æ•°çš„typeä¸ºboolçš„æ—¶å€™ï¼Œä¸èƒ½è®¾ç½®type=boolï¼Œéœ€è¦è‡ªå®šä¹‰str2boolå‡½æ•°ï¼Œç„¶åè®¾ç½®type=str2boolã€‚</p><ol start="8"><li>ä½¿ç”¨multiprocessingæé«˜å¤„ç†é€Ÿåº¦ï¼šå‡¡æ˜¯èƒ½å¤Ÿå¹¶è¡Œå¤„ç†ä¸”æ•°æ®é‡å·¨å¤§çš„ä»»åŠ¡ï¼Œåº”å°½é‡ä½¿ç”¨å¤šè¿›ç¨‹ç¼–ç¨‹</li></ol><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&nbsp;<span class="keyword">from</span> multiprocessing <span class="keyword">import</span> Pool</span><br><span class="line">&nbsp;<span class="keyword">from</span> tqdm <span class="keyword">import</span> tqdm</span><br><span class="line">&nbsp;</span><br><span class="line">&nbsp; <span class="keyword">with</span> Pool(n_workers) <span class="keyword">as</span> p: <span class="comment"># n_workersè¡¨ç¤ºè¿›ç¨‹æ•°</span></span><br><span class="line">&nbsp; &nbsp; &nbsp;result = <span class="built_in">list</span>(tqdm(p.imap(function, data), total=<span class="built_in">len</span>(data))) <span class="comment"># è¿™é‡Œä½¿ç”¨tqdmæ˜¾ç¤ºè¿›åº¦æ¡ï¼Œéœ€è¦è°ƒç”¨imapï¼Œå¦‚æœä¸ç”¨æ˜¾ç¤ºè¿›åº¦æ¡è°ƒç”¨mapå‡½æ•°</span></span><br></pre></td></tr></tbody></table></figure><ol start="9"><li>ä½¿ç”¨pltå°†å›¾ç‰‡ä¿å­˜åˆ°å†…å­˜ä¸­ï¼Œæé«˜å¤„ç†æ•ˆç‡</li></ol><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&nbsp;<span class="keyword">from</span> io <span class="keyword">import</span> BytesIO</span><br><span class="line">&nbsp;<span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line">&nbsp;</span><br><span class="line">&nbsp;p_bytes = BytesIO() <span class="comment">#ç”³è¯·å†…å­˜</span></span><br><span class="line">&nbsp;plt.savefig(p_bytes, <span class="built_in">format</span>=<span class="string">'png'</span>)</span><br></pre></td></tr></tbody></table></figure><ol start="10"><li>å…³äºé‡‡æ ·çš„å‡½æ•°</li></ol><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&nbsp;<span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">&nbsp;<span class="keyword">import</span> random</span><br><span class="line">&nbsp;</span><br><span class="line">&nbsp;indents = np.random.choice(<span class="number">2</span>, n,replace=<span class="literal">True</span>,p=[pro1, pro2]) <span class="comment"># æœ‰æ”¾å›çš„ä»[0,1]ä¸­å–nä¸ªå€¼ï¼Œå–0çš„æ¦‚ç‡ä¸ºpro1ï¼Œå–1çš„æ¦‚ç‡ä¸ºpro2</span></span><br><span class="line">&nbsp;</span><br><span class="line">&nbsp;random.shuffle(data)</span><br><span class="line">&nbsp;sample_resulut = random.sample(data, n)</span><br></pre></td></tr></tbody></table></figure><p>11.PILåº“è¯»å–å›¾ç‰‡</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&nbsp;<span class="keyword">import</span> PIL</span><br><span class="line">&nbsp;</span><br><span class="line">&nbsp;img = PIL.Image.<span class="built_in">open</span>(image_byte)</span><br><span class="line">&nbsp;img = img.convert(<span class="string">'RGB'</span>)</span><br></pre></td></tr></tbody></table></figure><ol start="12"><li>plt ç”»æ•£ç‚¹å›¾å’Œå›¾ç‰‡ç”»å¸ƒè®¾ç½®</li></ol><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&nbsp;<span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line">&nbsp;</span><br><span class="line">&nbsp;plt.rcParams[<span class="string">'figure.figsize'</span>] = (<span class="number">4</span>, <span class="number">4</span>) <span class="comment"># è®¾ç½®å›¾ç‰‡å¤§å°</span></span><br><span class="line">&nbsp;</span><br><span class="line">&nbsp;plt.rcParams[<span class="string">'savefig.dpi'</span>] = <span class="number">56</span> <span class="comment">#è®¾ç½®åƒç´ </span></span><br><span class="line">&nbsp;plt.rcParams[<span class="string">'figure.dpi'</span>] = <span class="number">56</span> <span class="comment">#è®¾ç½®åƒç´ </span></span><br><span class="line">&nbsp;plt.axis(<span class="string">'off'</span>) <span class="comment">#å…³é—­åæ ‡</span></span><br><span class="line">&nbsp;</span><br><span class="line">&nbsp;<span class="comment"># å¤šå¼ å­å›¾</span></span><br><span class="line">&nbsp;fig, axs = plt.subplots(n, <span class="number">1</span>)</span><br><span class="line">&nbsp;<span class="keyword">for</span> idx, dim <span class="keyword">in</span> <span class="built_in">enumerate</span>(<span class="built_in">range</span>(n)):</span><br><span class="line">&nbsp; &nbsp; &nbsp;axs[idx].axis(<span class="string">'off'</span>)</span><br><span class="line">&nbsp; &nbsp; &nbsp;axs[idx].scatter(x, y, s=<span class="number">0.1</span>)</span><br><span class="line">&nbsp;</span><br><span class="line">&nbsp;<span class="comment"># å•å¼ å­å›¾</span></span><br><span class="line">&nbsp;fig, axs = plt.subplots(<span class="number">1</span>, <span class="number">1</span>)</span><br><span class="line">&nbsp;axs.axis(<span class="string">'off'</span>)</span><br><span class="line">&nbsp;axs.scatter(x, y, s=<span class="number">0.1</span>)</span><br><span class="line">&nbsp;</span><br><span class="line">&nbsp;plt.savefig(file_name) <span class="comment"># ä¿å­˜åˆ°ç£ç›˜</span></span><br><span class="line">&nbsp;p_bytes = BytesIO()</span><br><span class="line">&nbsp;plt.savefig(p_bytes, <span class="built_in">format</span>=<span class="string">'png'</span>) <span class="comment"># ä¿å­˜åˆ°å†…å­˜</span></span><br><span class="line">&nbsp;plt.cla()</span><br><span class="line">&nbsp;plt.close(<span class="string">'all'</span>) <span class="comment"># æ¸…ç©ºç¼“å­˜</span></span><br></pre></td></tr></tbody></table></figure>]]></content>
      
      
      <categories>
          
          <category> çˆ¬å‘æ€»ç»“ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç«èµ› </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è¿œç¨‹è®¿é—®æœåŠ¡å™¨Jupyter-Notebook</title>
      <link href="/2022/04/29/yuan-cheng-fang-wen-fu-wu-qi-jupyter-notebook/"/>
      <url>/2022/04/29/yuan-cheng-fang-wen-fu-wu-qi-jupyter-notebook/</url>
      
        <content type="html"><![CDATA[<h4 id="æ–¹æ³•ï¼š-sshè¿œç¨‹ä½¿ç”¨jupyter-notebook"><a href="#æ–¹æ³•ï¼š-sshè¿œç¨‹ä½¿ç”¨jupyter-notebook" class="headerlink" title="æ–¹æ³•ï¼š sshè¿œç¨‹ä½¿ç”¨jupyter notebook"></a>æ–¹æ³•ï¼š sshè¿œç¨‹ä½¿ç”¨jupyter notebook</h4><p>åœ¨è¿œç¨‹æœåŠ¡å™¨ä¸Šï¼Œå¯åŠ¨jupyter notebooksæœåŠ¡ï¼š</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jupyter notebook --no-browser --port=8889</span><br></pre></td></tr></tbody></table></figure><p>åœ¨æœ¬åœ°ç»ˆç«¯ä¸­å¯åŠ¨SSHï¼š</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh -N -f -L localhost:8888:localhost:8889 username@serverIP</span><br></pre></td></tr></tbody></table></figure><p>å…¶ä¸­ï¼š -N å‘Šè¯‰SSHæ²¡æœ‰å‘½ä»¤è¦è¢«è¿œç¨‹æ‰§è¡Œï¼› -f å‘Šè¯‰SSHåœ¨åå°æ‰§è¡Œï¼› -L æ˜¯æŒ‡å®šport forwardingçš„é…ç½®ï¼Œè¿œç«¯ç«¯å£æ˜¯8889ï¼Œæœ¬åœ°çš„ç«¯å£å·çš„8888ã€‚</p><p>æ³¨æ„ï¼šusername@serverIPæ›¿æ¢æˆæœåŠ¡å™¨çš„å¯¹åº”è´¦å·ã€‚</p><p>æœ€åæ‰“å¼€æµè§ˆå™¨ï¼Œè®¿é—®ï¼š<a href="http://localhost:8888/">http://localhost:8888/</a></p>]]></content>
      
      
      <categories>
          
          <category> çˆ¬å‘æ€»ç»“ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> jupyter notebook </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>C++å¤šçº¿ç¨‹ç¼–ç¨‹</title>
      <link href="/2021/12/10/c-duo-xian-cheng-bian-cheng/"/>
      <url>/2021/12/10/c-duo-xian-cheng-bian-cheng/</url>
      
        <content type="html"><![CDATA[<h4 id="å¸¸ç”¨çº¿ç¨‹å‡½æ•°"><a href="#å¸¸ç”¨çº¿ç¨‹å‡½æ•°" class="headerlink" title="å¸¸ç”¨çº¿ç¨‹å‡½æ•°"></a>å¸¸ç”¨çº¿ç¨‹å‡½æ•°</h4><ul><li><p>join() :</p><blockquote><p>é˜»å¡ä¸»çº¿ç¨‹ï¼Œè®©ä¸»çº¿ç¨‹ç­‰å¾…å­çº¿ç¨‹æ‰§è¡Œå®Œï¼Œå½“å­çº¿ç¨‹æ‰§è¡Œå®Œæ¯•ï¼Œè¿™ä¸ªjoinï¼ˆï¼‰å°±æ‰§è¡Œå®Œæ¯•ï¼Œä¸»çº¿ç¨‹ç»§ç»­æ‰§è¡Œ</p></blockquote></li><li><p>detach() :</p><blockquote><p>ä»ä¸»çº¿ç¨‹ä¸­å°†å­çº¿ç¨‹åˆ†ç¦»ï¼Œä¸»çº¿ç¨‹ä¸å¿…ç­‰å¾…å­çº¿ç¨‹æ‰§è¡Œå®Œï¼Œä¸€æ—¦detach()ä¹‹åå­çº¿ç¨‹å°†å¤±å»ä¸ä¸»çº¿ç¨‹çš„å…³è”ï¼Œ<br>æ­¤æ—¶è¿™ä¸ªå­çº¿ç¨‹å°±ä¼šé©»ç•™åœ¨åå°è¿è¡Œï¼Œè¢«c++è¿è¡Œæ—¶æ¥ç®¡ï¼Œå½“è¿™ä¸ªå­çº¿ç¨‹æ‰§è¡Œå®Œæˆåï¼Œç”±è¿è¡Œæ—¶åº“è´Ÿè´£æ¸…ç†çº¿ç¨‹ç›¸å…³çš„èµ„æºã€‚</p></blockquote></li></ul><h4 id="çº¿ç¨‹åˆ›å»ºæ–¹æ³•"><a href="#çº¿ç¨‹åˆ›å»ºæ–¹æ³•" class="headerlink" title="çº¿ç¨‹åˆ›å»ºæ–¹æ³•"></a>çº¿ç¨‹åˆ›å»ºæ–¹æ³•</h4><ul><li><p>é€šè¿‡å‡½æ•°åˆ›å»ºçº¿ç¨‹</p><figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;thread&gt;</span></span></span><br><span class="line"><span class="keyword">using</span>  <span class="keyword">namespace</span>  std;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">do_something</span><span class="params">()</span></span>{</span><br><span class="line">    cout &lt;&lt; <span class="string">"çº¿ç¨‹å¼€å§‹"</span>&lt;&lt; endl;</span><br><span class="line">    <span class="comment">//do something</span></span><br><span class="line">    cout &lt;&lt; <span class="string">"çº¿ç¨‹ç»“æŸ"</span> &lt;&lt; endl;</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="function">thread <span class="title">myjob</span> <span class="params">(do_something)</span></span>; </span><br><span class="line">    myjob.<span class="built_in">join</span>(); <span class="comment">//é˜»å¡ä¸»çº¿ç¨‹ï¼Œç­‰å¾…å­çº¿ç¨‹ç»“æŸ</span></span><br><span class="line">    cout &lt;&lt; <span class="string">"The End"</span> &lt;&lt;endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></li><li><p>é€šè¿‡ç±»åˆ›å»ºçº¿ç¨‹</p><figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;thread&gt;</span></span></span><br><span class="line"><span class="keyword">using</span>  <span class="keyword">namespace</span>  std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span>  <span class="title class_">myClass</span>{</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="type">int</span> data;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">myClass</span>(<span class="type">int</span> d):<span class="built_in">data</span>(d){</span><br><span class="line">        cout &lt;&lt; <span class="string">"æ„é€ å‡½æ•°"</span> &lt;&lt;endl;</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">myClass</span>(<span class="type">const</span> myClass&amp;myClass1):<span class="built_in">data</span>(myClass<span class="number">1.</span>data){</span><br><span class="line">        cout &lt;&lt; <span class="string">"æ‹·è´æ„é€ å‡½æ•°"</span> &lt;&lt;endl;</span><br><span class="line">    }</span><br><span class="line">    ~<span class="built_in">myClass</span>(){</span><br><span class="line">        cout &lt;&lt; <span class="string">"ææ„å‡½æ•°"</span> &lt;&lt;endl;</span><br><span class="line">    }</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">operator</span><span class="params">()</span><span class="params">()</span></span>{</span><br><span class="line">        <span class="comment">//çº¿ç¨‹çš„å…¥å£</span></span><br><span class="line">        cout &lt;&lt; <span class="string">"çº¿ç¨‹å¼€å§‹"</span> &lt;&lt;endl;</span><br><span class="line"><span class="comment">//        do something</span></span><br><span class="line">        cout &lt;&lt; <span class="string">"çº¿ç¨‹ç»“æŸ"</span> &lt;&lt; endl;</span><br><span class="line">    }</span><br><span class="line">};</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="type">int</span> a = <span class="number">10</span>;</span><br><span class="line">    <span class="function">myClass <span class="title">myclass</span><span class="params">(a)</span></span>;</span><br><span class="line">    <span class="function">thread <span class="title">myjob</span> <span class="params">(myclass)</span></span>; <span class="comment">// å¤åˆ¶ä¸€æ¬¡myclass</span></span><br><span class="line">    myjob.<span class="built_in">join</span>();</span><br><span class="line">    cout &lt;&lt; <span class="string">"The End"</span> &lt;&lt;endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></li><li><p>é€šè¿‡lambdaè¡¨è¾¾å¼åˆ›å»ºçº¿ç¨‹</p><figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;thread&gt;</span></span></span><br><span class="line"><span class="keyword">using</span>  <span class="keyword">namespace</span>  std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="keyword">auto</span> myLambdaThread = []{</span><br><span class="line">        cout &lt;&lt; <span class="string">"çº¿ç¨‹å¼€å§‹"</span> &lt;&lt; endl;</span><br><span class="line"><span class="comment">//        do something</span></span><br><span class="line">        cout &lt;&lt; <span class="string">"çº¿ç¨‹ç»“æŸ"</span> &lt;&lt; endl;</span><br><span class="line">    };</span><br><span class="line">    <span class="function">thread <span class="title">myjob</span> <span class="params">(myLambdaThread)</span></span>;</span><br><span class="line">    myjob.<span class="built_in">join</span>();</span><br><span class="line">    cout &lt;&lt; <span class="string">"The End"</span> &lt;&lt;endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    </span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></li></ul><h4 id="ä¼ é€’ä¸´æ—¶å¯¹è±¡ä½œä¸ºçº¿ç¨‹å‚æ•°"><a href="#ä¼ é€’ä¸´æ—¶å¯¹è±¡ä½œä¸ºçº¿ç¨‹å‚æ•°" class="headerlink" title="ä¼ é€’ä¸´æ—¶å¯¹è±¡ä½œä¸ºçº¿ç¨‹å‚æ•°"></a>ä¼ é€’ä¸´æ—¶å¯¹è±¡ä½œä¸ºçº¿ç¨‹å‚æ•°</h4><figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;thread&gt;</span></span></span><br><span class="line"><span class="keyword">using</span>  <span class="keyword">namespace</span>  std;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">do_something_with_parameters</span><span class="params">(<span class="type">const</span> <span class="type">int</span>&amp; a, <span class="type">char</span> *buff)</span></span>{</span><br><span class="line">    cout &lt;&lt; a &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; buff &lt;&lt; endl;<span class="comment">//ä¼ æŒ‡é’ˆå±é™©</span></span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="type">int</span> val = <span class="number">1</span>;</span><br><span class="line">    <span class="type">char</span> buff[] = <span class="string">"this is a test!"</span>;</span><br><span class="line">    <span class="function">thread <span class="title">myjob</span> <span class="params">(do_something_with_parameters, val, buff)</span></span>;</span><br><span class="line">    myjob.<span class="built_in">join</span>(); <span class="comment">//é˜»å¡ä¸»çº¿ç¨‹ï¼Œç­‰å¾…å­çº¿ç¨‹ç»“æŸ</span></span><br><span class="line">    cout &lt;&lt; <span class="string">"The End"</span> &lt;&lt;endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h4 id="çº¿ç¨‹id"><a href="#çº¿ç¨‹id" class="headerlink" title="çº¿ç¨‹id"></a>çº¿ç¨‹id</h4><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">è·å–çº¿ç¨‹<span class="built_in">id</span>ï¼šget_idï¼ˆï¼‰</span><br><span class="line">è·å–å½“å‰çº¿ç¨‹<span class="built_in">id</span>ï¼šstd::this_thread::get_id()</span><br></pre></td></tr></tbody></table></figure><h4 id="çº¿ç¨‹é—´çš„å€¼ä¼ é€’"><a href="#çº¿ç¨‹é—´çš„å€¼ä¼ é€’" class="headerlink" title="çº¿ç¨‹é—´çš„å€¼ä¼ é€’"></a>çº¿ç¨‹é—´çš„å€¼ä¼ é€’</h4><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">std::ref()</span><br><span class="line">std::move()</span><br></pre></td></tr></tbody></table></figure><h4 id="æœ€å¤šå¯ä»¥ä½¿ç”¨çš„çº¿ç¨‹æ•°"><a href="#æœ€å¤šå¯ä»¥ä½¿ç”¨çš„çº¿ç¨‹æ•°" class="headerlink" title="æœ€å¤šå¯ä»¥ä½¿ç”¨çš„çº¿ç¨‹æ•°"></a>æœ€å¤šå¯ä»¥ä½¿ç”¨çš„çº¿ç¨‹æ•°</h4><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">std::thread::hardware_concurrency()</span><br></pre></td></tr></tbody></table></figure>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>å°†å¾®ä¿¡èŠå¤©ä¸­çš„è¯­éŸ³è½¬æ¢ä¸ºmp3</title>
      <link href="/2021/09/29/jiang-wei-xin-liao-tian-zhong-de-yu-yin-zhuan-huan-wei-mp3/"/>
      <url>/2021/09/29/jiang-wei-xin-liao-tian-zhong-de-yu-yin-zhuan-huan-wei-mp3/</url>
      
        <content type="html"><![CDATA[<ol><li><p>æ‰¾åˆ°è¯­éŸ³æ–‡ä»¶å°†å…¶å¯¼å‡º</p><ul><li>æ‰¾åˆ°MACå¾®ä¿¡å›¾ç‰‡ï¼Œé¼ æ ‡æ”¾åœ¨å›¾ç‰‡ä¸Šé¢æŒ‰ä¸‹å³é”®è°ƒå‡ºå¦‚ä¸‹å›¾æ‰€ç¤ºçš„æç¤ºæ¡†ï¼Œç„¶åç‚¹å‡»â€œåœ¨Finderä¸­æ˜¾ç¤ºâ€ï¼Œæ‰“å¼€éŸ³é¢‘ã€å›¾ç‰‡ç­‰æ–‡ä»¶åœ¨æœ¬åœ°ä¿å­˜çš„ä½ç½®ã€‚</li></ul> <img src="https://raw.githubusercontent.com/Skylyong/i/main/20210929173234.png" alt="image-20210929173226533" style="zoom:50%;"><p> â€‹            è¿™ä¸ªåœ°æ–¹éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¾®ä¿¡ä¿å­˜åˆ°æœ¬åœ°çš„è®°å½•æ˜¯æŒ‰ç…§èŠå¤©ä¼šè¯å­˜å‚¨çš„ï¼Œä¸åŒä¼šè¯çš„å†…å®¹ä¿å­˜çš„ä½ç½®ä¸ä¸€æ ·ã€‚æˆ‘ä»¬åº”è¯¥å…ˆå®šä½åˆ°è¦è·å–éŸ³é¢‘çš„ä¼šè¯ï¼Œåœ¨è¯¥ä¼šè¯ä¸­è°ƒå‡ºâ€œåœ¨Finderâ€ä¸­æ˜¾ç¤ºæ‰è¡Œã€‚</p><ul><li><p>å¦‚ä¸‹å›¾æ‰€ç¤ºAudioç›®å½•å°±æ˜¯å­˜å‚¨ä¼šè¯è¯­éŸ³</p><img src="https://raw.githubusercontent.com/Skylyong/i/main/20210929173725.png" alt="image-20210929173725735" style="zoom:45%;"></li></ul></li><li><p>å°†silkæ ¼å¼æ–‡ä»¶è½¬æ¢ä¸ºmp3æ ¼å¼æ–‡ä»¶</p><ul><li><p>å®‰è£…silk-v3</p><p>silk-v3ä¾èµ–gccå’ŒFFmpegæ¥è¿è¡Œï¼Œå¦‚æœæ²¡æœ‰è¿™ä¸¤ä¸ªä¾èµ–é¡¹ï¼Œé€šè¿‡å¦‚ä¸‹å‘½ä»¤å®‰è£…ä¾èµ–ï¼š</p><figure class="highlight sh"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">brew install gcc</span><br><span class="line">brew install ffmpeg</span><br></pre></td></tr></tbody></table></figure><p>å®‰è£…å¥½ä¾èµ–ä¹‹åï¼Œåœ¨<a href="https://github.com/kn007/silk-v3-decoder">è¿™é‡Œ</a>å°†silk-v3å…‹éš†åˆ°æœ¬åœ°ç”µè„‘ã€‚</p></li><li><p>ç”¨silk-v3è¿›è¡Œæ ¼å¼è½¬æ¢</p><p>æŒ‰ç…§<a href="https://github.com/Skylyong/silk-v3-decoder">silk-v3é¡¹ç›®è¯´æ˜</a>è¿è¡Œå‘½ä»¤ï¼Œå®Œæˆæ ¼å¼è½¬æ¢ã€‚</p><ul><li><p>è½¬æ¢å•ä¸ªæ–‡ä»¶</p><figure class="highlight sh"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sh converter.sh xxx.slk mp3</span><br></pre></td></tr></tbody></table></figure></li><li><p>æ‰¹é‡è½¬æ¢æ–‡ä»¶å¤¹ä¸­çš„å¤šä¸ªæ–‡ä»¶</p><figure class="highlight sh"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sh converter.sh inputFolder ouputFolder mp3</span><br></pre></td></tr></tbody></table></figure></li></ul></li></ul></li><li><p>å‚è€ƒèµ„æ–™</p></li></ol><p><a href="https://www.jianshu.com/p/fbccd8a52374">å¾®ä¿¡è¯­éŸ³silkæ ¼å¼æ–‡ä»¶è½¬æ¢å¤„ç†è®°å½•</a></p><p><a href="https://blog.csdn.net/henryhu712/article/details/89852514">å°†å¾®ä¿¡è¯­éŸ³æ¶ˆæ¯è½¬æ¢ä¸º mp3</a></p>]]></content>
      
      
      <categories>
          
          <category> ç”Ÿæ´»æ€»ç»“ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¾®ä¿¡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æœºå™¨å­¦ä¹ å‚è€ƒèµ„æ–™</title>
      <link href="/2021/09/19/ji-qi-xue-xi-can-kao-zi-liao/"/>
      <url>/2021/09/19/ji-qi-xue-xi-can-kao-zi-liao/</url>
      
        <content type="html"><![CDATA[<p>æœºå™¨å­¦ä¹ å‚è€ƒèµ„æ–™ï¼š</p><ul><li><p>æœºå™¨å­¦ä¹ å‚è€ƒä¹¦ç±ï¼š</p><ul><li>ã€Šç¥ç»ç½‘ç»œä¸æ·±åº¦å­¦ä¹ ã€‹ä¹¦ç±åŠPPTï¼š<a href="https://nndl.github.io/">https://nndl.github.io/</a></li><li>ã€Šç»Ÿè®¡å­¦ä¹ æ–¹æ³•ã€‹æèˆªè‘—</li><li>ã€Šæœºå™¨å­¦ä¹ ã€‹å‘¨å¿—åè‘—</li><li>ã€Šå—ç“œä¹¦ã€‹ï¼š<a href="https://datawhalechina.github.io/pumpkin-book/%EF%BC%8C">https://datawhalechina.github.io/pumpkin-book/ï¼Œ</a> <a href="https://github.com/datawhalechina/pumpkin-book">https://github.com/datawhalechina/pumpkin-book</a></li><li>ã€Šè¿ç§»å­¦ä¹ ã€‹æ¨å¼ºç­‰è‘—</li><li>ã€Šè”é‚¦å­¦ä¹ ã€‹æ¨å¼ºç­‰è‘—</li><li>Python Machine Learningï¼š <a href="https://github.com/rasbt/python-machine-learning-book">https://github.com/rasbt/python-machine-learning-book</a></li><li>æ·±åº¦å­¦ä¹ ï¼šè‹±æ–‡ç‰ˆï¼ˆ <a href="https://www.deeplearningbook.org/%EF%BC%89%E3%80%81%E4%B8%AD%E6%96%87%E7%89%88%EF%BC%88">https://www.deeplearningbook.org/ï¼‰ã€ä¸­æ–‡ç‰ˆï¼ˆ</a> <a href="https://github.com/exacity/deeplearningbook-chinese%EF%BC%89">https://github.com/exacity/deeplearningbook-chineseï¼‰</a></li><li>ã€Šå¼ºåŒ–å­¦ä¹ Reinforcement Learningï¼ˆç¬¬2ç‰ˆï¼‰ã€‹[åŠ ]Richard S.Sutton [ç¾]Andrew G. Bartoè‘—ï¼Œä¿å‡¯ç­‰è¯‘</li></ul></li><li><p>æ•°å­¦ç±»å‚è€ƒä¹¦ç±ï¼š</p><ul><li>å‡¸ä¼˜åŒ–Convex Optimizationï¼ˆ<a href="http://stanford.edu/~boyd/cvxbook/%EF%BC%89%E3%80%81">http://stanford.edu/~boyd/cvxbook/ï¼‰ã€</a></li><li>çº¿æ€§ä»£æ•° <a href="https://ocw.mit.edu/courses/mathematics/18-06sc-linear-algebra-fall-2011/index.htm">https://ocw.mit.edu/courses/mathematics/18-06sc-linear-algebra-fall-2011/index.htm</a></li><li>æ¦‚ç‡è®ºä¸ç»Ÿè®¡ï¼š1ï¼‰æ–¯å¦ç¦è¯¾ç¨‹CS109 Probability for Computer Scientistsï¼š <a href="http://web.stanford.edu/class/cs109/%EF%BC%9B2%EF%BC%89Introduction">http://web.stanford.edu/class/cs109/ï¼›2ï¼‰Introduction</a> to Probability, Statistics, and Random Processesï¼š <a href="https://www.probabilitycourse.com/">https://www.probabilitycourse.com/</a></li></ul></li><li><p>æœºå™¨å­¦ä¹ åº“/å¹³å°ï¼š</p><ul><li>SKlearnï¼ˆ<a href="https://scikit-learn.org/stable/%EF%BC%89%EF%BC%8CSKlearn%E7%9A%84User">https://scikit-learn.org/stable/ï¼‰ï¼ŒSKlearnçš„User</a> Guideé‡Œæ€»ç»“äº†å¾ˆå¤šæœºå™¨å­¦ä¹ æ¨¡å‹ï¼Œå¯ä»¥å­¦ä¹ ä¸‹<a href="https://scikit-learn.org/stable/user_guide.html%E3%80%82%E4%B8%8A%E9%9D%A2%E6%8F%90%E5%88%B0%E7%9A%84Python">https://scikit-learn.org/stable/user_guide.htmlã€‚ä¸Šé¢æåˆ°çš„Python</a> Machine Learningä¹¦ç±ä¸­å°±å¤§é‡ä½¿ç”¨SKlearnçš„APIã€‚</li><li>Pytorchï¼š <a href="https://pytorch.org/tutorials/">https://pytorch.org/tutorials/</a></li><li>TensorFlow</li><li>Kerasï¼ˆ <a href="https://keras.io/%EF%BC%89%E7%AD%89%E3%80%82">https://keras.io/ï¼‰ç­‰ã€‚</a></li></ul></li><li><p>çº¿ä¸Šè¯¾ç¨‹ï¼š</p><ul><li>å´æ©è¾¾æ•™æˆçš„è§†é¢‘æ•™å­¦è¯¾ç¨‹ï¼ˆ <a href="https://www.coursera.org/learn/machine-learning%EF%BC%89">https://www.coursera.org/learn/machine-learningï¼‰</a></li><li>æå®æ¯…-å°æ¹¾å¤§å­¦ï¼ˆ<a href="http://speech.ee.ntu.edu.tw/~tlkagk/courses_ML20.html%EF%BC%89">http://speech.ee.ntu.edu.tw/~tlkagk/courses_ML20.htmlï¼‰</a></li><li>Googleçš„æ·±åº¦å­¦ä¹ è¯¾ç¨‹ï¼ˆ<a href="https://www.udacity.com/course/intro-to-tensorflow-for-deep-learning--ud187%EF%BC%89">https://www.udacity.com/course/intro-to-tensorflow-for-deep-learning--ud187ï¼‰</a></li><li>æé£é£æ•™æˆçš„è®¡ç®—æœºè§†è§‰è¯¾ç¨‹ï¼ˆ<a href="http://cs231n.stanford.edu)/">http://cs231n.stanford.eduï¼‰</a></li><li>Richard Socher çš„è‡ªç„¶è¯­è¨€å¤„ç†è¯¾ç¨‹ï¼ˆ<a href="http://cs224d.stanford.edu/">http://cs224d.stanford.edu</a>)</li><li>University of Chicago Mathematical Foundations of Machine Learning(<a href="https://voices.uchicago.edu/willett/teaching/mathematical-foundations-of-machine-learning-fall-2020/">https://voices.uchicago.edu/willett/teaching/mathematical-foundations-of-machine-learning-fall-2020/</a>)</li></ul></li><li><p>å…¶ä»–èµ„æ–™ï¼š</p><ul><li>Machine Learning and Artificial Intelligence and their role in networkingï¼š <a href="https://www.bilibili.com/video/av70398058/">https://www.bilibili.com/video/av70398058/</a></li><li>é“¾æ¥ï¼š<a href="https://pan.baidu.com/s/1qgYRbtfCLZE8d0MuCSrRLw">https://pan.baidu.com/s/1qgYRbtfCLZE8d0MuCSrRLw</a>  å¯†ç :1am4</li><li>é“¾æ¥ï¼š<a href="https://pan.baidu.com/s/1YAujUyivMKZcOCUxB9GZlw">https://pan.baidu.com/s/1YAujUyivMKZcOCUxB9GZlw</a> æå–ç ï¼šwru7</li></ul></li></ul><!-- + åšå®¢ï¼š --><blockquote><p>å£°æ˜ï¼š å†…å®¹æ‘˜è‡ª<a href="https://tingwang1122.github.io/">ç‹è€å¸ˆ</a>çš„ä¸ªäººä¸»é¡µã€‚</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹ èµ„æ–™ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æœºå™¨å­¦ä¹  </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æœ‰ç”¨çš„èµ„æº</title>
      <link href="/2021/09/19/you-yong-de-zi-yuan/"/>
      <url>/2021/09/19/you-yong-de-zi-yuan/</url>
      
        <content type="html"><![CDATA[<p>æœ‰ç”¨çš„èµ„æº</p><!-- <br> --><ul><li><p><a href="https://github.com/Skylyong/Skylyong.github.io/tree/main/files/paper-reading.pdf">How to Read a Paper</a>, by <a href="http://blizzard.cs.uwaterloo.ca/keshav/wiki/index.php/Main_Page">Prof. Srinivasan Keshav</a>.</p></li><li><p><a href="http://dustintran.com/blog/a-research-to-engineering-workflow">A Research to Engineering Workflow</a>, by <a href="http://dustintran.com/">Dr. Dustin Tran</a>.</p></li><li><p><a href="https://github.com/Skylyong/Skylyong.github.io/tree/main/files/mathwriting.pdf">Mathematical Writing</a>, by <a href="https://www-cs-faculty.stanford.edu/~knuth/">Donald E. Knuth</a>,<a href="https://larrabee.soe.ucsc.edu/">Tracy Larrabee</a> and <a href="http://www.math.utah.edu/~roberts/">Paul M. Roberts</a>.</p></li></ul><!-- + [Whitesides' Group: Writing a Paper](), by [George M. Whitesides](https://gmwgroup.harvard.edu/people/george-m-whitesides). --><ul><li><p><a href="https://github.com/Skylyong/Skylyong.github.io/tree/main/files/review-writing.pdf">Writing reviews for systems conferences</a>, by <a href="http://people.inf.ethz.ch/troscoe/">Timothy Roscoe</a>.</p></li><li><p><a href="https://github.com/Skylyong/Skylyong.github.io/tree/main/files/how-to-write-a-paper.pdf">How to write a paper</a>, by <a href="http://www-edc.eng.cam.ac.uk/people/mfa2.html">Mike Ashby</a>.</p></li><li><p><a href="https://github.com/Skylyong/Skylyong.github.io/tree/main/files/Leading_Paper_Discussions.pdf">Pointers for Leading Paper Discussions</a>, by <a href="https://www2.eecs.berkeley.edu/Faculty/Homepages/katz.html">Randy H. Katz</a>.</p></li><li><p><a href="https://ailyong.cn/2021/09/19/ji-qi-xue-xi-can-kao-zi-liao/">Machine Learning Materials for Beginners</a>.</p></li></ul>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹ èµ„æ–™ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> èµ„æº </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¾®ä¿¡æ ‡ç­¾æ•´ç†</title>
      <link href="/2021/08/14/wei-xin-biao-qian-zheng-li/"/>
      <url>/2021/08/14/wei-xin-biao-qian-zheng-li/</url>
      
        <content type="html"><![CDATA[<blockquote><p>æœ€è¿‘å¯¹å¾®ä¿¡é€šè®¯å½•åšäº†ä¸€æ¬¡æ¯”è¾ƒå½»åº•çš„æ•´ç†ï¼Œè®°å½•ä¸€ä¸‹ã€‚</p></blockquote><p>æˆ‘æ ¹æ®å…´è¶£ã€äººç”Ÿé˜¶æ®µã€äº²ç–å…³ç³»å’Œç”Ÿæ´»å››ä¸ªç»´åº¦æ¥åˆ†ç±»ï¼Œæ¯ä¸ªç»´åº¦çš„å…·ä½“åˆ†ç±»æ ‡ç­¾å¦‚ä¸‹ï¼š</p><ul><li>æŒ‰å…´è¶£ï¼š å…´è¶£-æˆ·å¤–ï¼Œå…´è¶£-è·‘æ­¥ï¼Œå…´è¶£-é˜…è¯»ï¼Œå…´è¶£-ç¾é£Ÿç­‰</li><li>æŒ‰äººç”Ÿé˜¶æ®µåˆ’åˆ†ä¸ºï¼šä¸­å­¦ï¼Œæœ¬ç§‘ï¼Œç ”ç©¶ç”Ÿï¼Œå…¼èŒç­‰ï¼Œæ¯ä¸€ä¸ªé˜¶æ®µåˆå¯ä»¥åšè¿›ä¸€æ­¥åˆ’åˆ†ã€‚<ul><li>ä¸­å­¦-åŒå­¦ï¼Œä¸­å­¦-æ ¡å‹ï¼Œä¸­å­¦-è€å¸ˆ</li><li>æœ¬ç§‘-åŒå­¦ï¼Œæœ¬ç§‘-æ ¡å‹ï¼Œæœ¬ç§‘-è€å¸ˆ</li><li>ç ”ç©¶ç”Ÿ-åŒå­¦ï¼Œç ”ç©¶ç”Ÿ-æ ¡å‹ï¼Œç ”ç©¶ç”Ÿ-è€å¸ˆ</li><li>å…¼èŒ-åŒäº‹ï¼Œå…¼èŒ-åŒè¡Œ</li></ul></li><li>æŒ‰äº²ç–å…³ç³»å¯åˆ†ä¸ºï¼š<ul><li>å®¶äºº</li><li>äº²æˆš</li><li>æœ‹å‹</li><li>æœ‰ç¼˜ç›¸é€¢</li></ul></li><li>ç”Ÿæ´»æ¶‰åŠçš„ä¸œè¥¿æ¯”è¾ƒæ‚ï¼Œæˆ‘æ˜¯æŠŠâ€œç…§ç›¸ã€æ‰“å°å’Œæ°´ç”µç­‰â€éƒ½æ”¾åœ¨äº†â€œç”Ÿæ´»ä¾¿åˆ©â€è¿™ä¸€ä¸ªæ ‡ç­¾é‡Œé¢ï¼Œç„¶ååœ¨åå­—ä¸Šé¢åšå¤‡æ³¨ï¼Œæ¯”å¦‚â€œå¼ ä¸‰|æ‰“å°â€ã€‚æ­¤å¤–ï¼Œæˆ‘æŠŠåŒ»ç”Ÿã€æ³•å¾‹äººå£«åšäº†å•ç‹¬çš„æ ‡ç­¾ï¼Œæœ€ååŠ äº†ä¸€ä¸ªâ€œå¤§ä½¬â€æ ‡ç­¾ï¼Œæ–¹ä¾¿æ—¶åˆ»å…³æ³¨å¤§ä½¬çš„åŠ¨æ€ã€å‘å¤§ä½¬é é½ã€‚<ul><li>ç”Ÿæ´»ä¾¿åˆ©</li><li>ç”Ÿæ´»-åŒ»åŠ¡</li><li>ç”Ÿæ´»-æ³•å¾‹</li><li>å¤§ä½¬</li></ul></li></ul><p>åˆ†å¥½ä¹‹åæ‰æ„Ÿè§‰è¿™ç§äºŒçº§åˆ†ç±»æœ‰ç‚¹ç¹çï¼Œå…ˆç”¨ä¸€æ®µæ—¶é—´çœ‹çœ‹ï¼Œä¸è¡Œçš„è¯å†åšä¼˜åŒ–ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> æ€»ç»“ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¾®ä¿¡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å·¥å…·ç®±</title>
      <link href="/2021/08/14/gong-ju-xiang/"/>
      <url>/2021/08/14/gong-ju-xiang/</url>
      
        <content type="html"><![CDATA[<ul><li><a href="https://www.jibing57.com/2019/03/24/share-ShadowsocksX-NG-to-iOS/">Macä¸‹å…±äº«ShadowsocksX-NGçš„æ¢¯å­ç»™iOS</a></li><li><a href="https://www.cnblogs.com/jserhub/p/11770585.html">GitHub è®¾ç½®å’Œå–æ¶ˆä»£ç†ï¼ŒåŠ é€Ÿ git clone</a></li><li><a href="https://www.zxgj.cn/g/rznl">åœ¨çº¿æ™ºå•†æµ‹è¯•</a></li></ul><ul><li><a href="https://ailyong.cn/2022/09/07/mac-xi-tong-zhi-zuo-win10-qi-dong-u-pan/">Macç³»ç»Ÿåˆ¶ä½œwin10å¯åŠ¨Uç›˜</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> æ”¶è— </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¹²è´§ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Googleè®¿é—®åŠ©æ‰‹å®‰è£…</title>
      <link href="/2021/08/13/google-fang-wen-zhu-shou-an-zhuang/"/>
      <url>/2021/08/13/google-fang-wen-zhu-shou-an-zhuang/</url>
      
        <content type="html"><![CDATA[<h3 id="Googleè®¿é—®åŠ©æ‰‹å®‰è£…"><a href="#Googleè®¿é—®åŠ©æ‰‹å®‰è£…" class="headerlink" title="Googleè®¿é—®åŠ©æ‰‹å®‰è£…"></a>Googleè®¿é—®åŠ©æ‰‹å®‰è£…</h3><p>ä»Šå¤©ç”¨å›¾ä¹¦é¦†ç”µè„‘çš„æ—¶å€™å‘ç°ä¸èƒ½è®¿é—®googleï¼Œéå¸¸ä¸æ–¹ä¾¿æœç´¢æ–‡çŒ®ï¼Œå› æ­¤ç ”ç©¶äº†ä¸€ä¸‹googleä¸Šç½‘åŠ©æ‰‹ï¼Œè®°å½•ä¸€ä¸‹ã€‚</p><ul><li><h3 id="IGGè°·æ­Œè®¿é—®åŠ©æ‰‹"><a href="#IGGè°·æ­Œè®¿é—®åŠ©æ‰‹" class="headerlink" title="IGGè°·æ­Œè®¿é—®åŠ©æ‰‹"></a><a href="https://iguge.app/">IGGè°·æ­Œè®¿é—®åŠ©æ‰‹</a></h3><blockquote><p>è¯¥åŠ©æ‰‹å…·æœ‰å¦‚ä¸‹ç‰¹ç‚¹ï¼š</p><ul><li>å…è´¹æä¾›è°·æ­Œæœç´¢</li><li>å¾®è½¯onedriveåŠ é€Ÿ</li><li>ä¸åŒ…å«YouTubeï¼Œè°·æ­Œç½‘ç›˜</li></ul></blockquote></li><li><h3 id="googleä¸Šç½‘åŠ©æ‰‹"><a href="#googleä¸Šç½‘åŠ©æ‰‹" class="headerlink" title="googleä¸Šç½‘åŠ©æ‰‹"></a><a href="https://chrome.google.com/webstore/detail/%E8%B0%B7%E6%AD%8C%E4%B8%8A%E7%BD%91%E5%8A%A9%E6%89%8B/nonmafimegllfoonjgplbabhmgfanaka?utm_source=chrome-ntp-icon">googleä¸Šç½‘åŠ©æ‰‹</a></h3><blockquote><p>è¯¥åŠ©æ‰‹å…·å¤‡IGGè°·æ­Œè®¿é—®åŠ©æ‰‹çš„ç‰¹ç‚¹ï¼Œä½†æ˜¯å®‰è£…çš„æ—¶å€™éœ€è¦ç™»å½•Chromeå•†åº—æ‰èƒ½å¤Ÿä¸‹è½½ï¼Œå¦‚æœæ²¡æœ‰KXä¸Šç½‘ï¼Œå»ºè®®è¯»è€…é€‰æ‹©å®‰è£…â€œIGGè°·æ­Œè®¿é—®åŠ©æ‰‹â€æ–¹å¼è®¿é—®è°·æ­Œã€‚</p></blockquote></li></ul>]]></content>
      
      
      <categories>
          
          <category> å¹²è´§ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Googleè®¿é—®åŠ©æ‰‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¸¸ç”¨æ•°æ®é›†æ•´ç†</title>
      <link href="/2021/08/13/chang-yong-shu-ju-ji-zheng-li/"/>
      <url>/2021/08/13/chang-yong-shu-ju-ji-zheng-li/</url>
      
        <content type="html"><![CDATA[<h3 id="å¸¸ç”¨æ•°æ®é›†æ•´ç†"><a href="#å¸¸ç”¨æ•°æ®é›†æ•´ç†" class="headerlink" title="å¸¸ç”¨æ•°æ®é›†æ•´ç†"></a>å¸¸ç”¨æ•°æ®é›†æ•´ç†</h3><p>å‰æ²¿ï¼šæ‰€è°“â€å·§å¦‡éš¾ä¸ºæ— ç±³ä¹‹ç‚Šâ€œï¼Œä½œä¸ºäººå·¥æ™ºèƒ½é¢†åŸŸçš„å­¦ä¹ è€…ï¼Œå…ä¸äº†è¦è·Ÿæ•°æ®æ‰“äº¤é“ï¼Œæœ‰æ—¶å€™æˆ‘ä»¬ä¸å¾—ä¸è€—è´¹å¤§é‡çš„ç²¾åŠ›æ¥æ”¶é›†ç›¸å…³æ•°æ®é›†ã€‚å› æ­¤ï¼Œ æ•´ç†ä¸€äº›å¸¸ç”¨çš„æ•°æ®é›†ï¼Œä»¥ä¾¿ä¸æ—¶ä¹‹éœ€ã€‚</p><h4 id="å¯¹è¯æ•°æ®é›†"><a href="#å¯¹è¯æ•°æ®é›†" class="headerlink" title="å¯¹è¯æ•°æ®é›†"></a>å¯¹è¯æ•°æ®é›†</h4><h4 id="nlpæ–¹å‘çš„ç”Ÿç‰©åŒ»å­¦"><a href="#nlpæ–¹å‘çš„ç”Ÿç‰©åŒ»å­¦" class="headerlink" title="nlpæ–¹å‘çš„ç”Ÿç‰©åŒ»å­¦"></a>nlpæ–¹å‘çš„ç”Ÿç‰©åŒ»å­¦</h4><ul><li>Symcatâ€™s database</li><li>mz database</li><li>dxy database</li></ul>]]></content>
      
      
      <categories>
          
          <category> æ•°æ®é›† </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æœºå™¨å­¦ä¹  </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€è¯¾ç¨‹è®¾è®¡ã€‘å›¾çš„åˆ›å»ºå’Œéå†</title>
      <link href="/2021/08/13/tu-de-chuang-jian-he-bian-li/"/>
      <url>/2021/08/13/tu-de-chuang-jian-he-bian-li/</url>
      
        <content type="html"><![CDATA[<h3 id="é—®é¢˜æè¿°"><a href="#é—®é¢˜æè¿°" class="headerlink" title="é—®é¢˜æè¿°"></a>é—®é¢˜æè¿°</h3><p>æœ¬è¯¾ç¨‹è®¾è®¡ä¸»è¦å®Œæˆé‚»æ¥çŸ©é˜µå’Œé‚»æ¥è¡¨ä¸¤ç§ä¸åŒå­˜å‚¨æ–¹å¼çš„å›¾çš„å»ºç«‹å’Œéå†ï¼Œå…¶ä¸­éå†éƒ¨åˆ†åˆ†åˆ«è¿›è¡Œäº†DFSå’ŒBFSä¸¤ç§ä¸åŒå½¢å¼çš„éå†ã€‚</p><h3 id="å®ç°ä»£ç "><a href="#å®ç°ä»£ç " class="headerlink" title="å®ç°ä»£ç "></a>å®ç°ä»£ç </h3><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#include&lt;stdio.h&gt;</span></span><br><span class="line"><span class="comment">#include&lt;stdlib.h&gt;</span></span><br><span class="line"><span class="comment">#include&lt;string.h&gt; </span></span><br><span class="line"><span class="comment">#include&lt;stack&gt;</span></span><br><span class="line"><span class="comment">#include&lt;queue&gt;</span></span><br><span class="line">using namespace std;</span><br><span class="line"> </span><br><span class="line">/********************************å›¾çš„å­˜å‚¨ç»“æ„å®šä¹‰***********************/</span><br><span class="line"><span class="comment">#define MaxVerNum 30           </span></span><br><span class="line"><span class="comment">#define Vextype char</span></span><br><span class="line"><span class="comment">#define EdgeInfoType int</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">#define INF 999      //æ— ç©·å¤§ </span></span><br><span class="line"><span class="comment">#define MAXSIZE 100</span></span><br><span class="line"> </span><br><span class="line">typedef  struct</span><br><span class="line">{</span><br><span class="line">    Vextype  vexs[MaxVerNum];</span><br><span class="line">    EdgeInfoType edges[MaxVerNum][MaxVerNum];</span><br><span class="line">    <span class="built_in">int</span> n, e;</span><br><span class="line">}MGragh;</span><br><span class="line"> </span><br><span class="line">typedef  struct node</span><br><span class="line">{</span><br><span class="line">    <span class="built_in">int</span> adjvex;</span><br><span class="line">    EdgeInfoType  Info;</span><br><span class="line">    struct node * <span class="built_in">next</span>;</span><br><span class="line">}EdgeNode;</span><br><span class="line"> </span><br><span class="line">typedef struct vnode</span><br><span class="line">{</span><br><span class="line">    Vextype  vertex;</span><br><span class="line">    EdgeNode *firstedge;</span><br><span class="line">}VertexNode;</span><br><span class="line"> </span><br><span class="line">typedef  struct</span><br><span class="line">{</span><br><span class="line">    VertexNode  adjlist[MaxVerNum];</span><br><span class="line">    <span class="built_in">int</span>   n, e;</span><br><span class="line">}ALGraph;</span><br><span class="line"> </span><br><span class="line"><span class="built_in">int</span> visited[MaxVerNum];   //é¡¶ç‚¹è®¿é—®æ ‡è®° </span><br><span class="line"> </span><br><span class="line">/*å»ºç«‹å›¾Gçš„é‚»æ¥çŸ©é˜µ  */</span><br><span class="line"><span class="built_in">int</span> returnId(MGragh *g, char c){</span><br><span class="line">//è¿”å›cåœ¨æ•°ç»„ä¸­çš„ä¸‹æ ‡</span><br><span class="line">    <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i&lt;MaxVerNum; ++i)</span><br><span class="line">    {</span><br><span class="line">        <span class="keyword">if</span> (g-&gt;vexs[i] == c) <span class="keyword">return</span> i;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">}</span><br><span class="line">void CreateGraph(MGragh *g)</span><br><span class="line">{</span><br><span class="line">    scanf(<span class="string">"%d %d\n"</span>, &amp;(g-&gt;n), &amp;(g-&gt;e));</span><br><span class="line"> </span><br><span class="line">    char c;</span><br><span class="line">    <span class="built_in">int</span> i = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (<span class="number">1</span>)</span><br><span class="line">    {</span><br><span class="line">        <span class="keyword">while</span> ((c = getchar()) == <span class="string">' '</span>);</span><br><span class="line">        <span class="keyword">if</span> (c == <span class="string">'\n'</span>) <span class="keyword">break</span>;</span><br><span class="line">        g-&gt;vexs[i++] = c;</span><br><span class="line">    }</span><br><span class="line">    Vextype s, e;</span><br><span class="line">    EdgeInfoType cost;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i&lt;g-&gt;n; i++)</span><br><span class="line">    {</span><br><span class="line">        <span class="keyword">for</span> (<span class="built_in">int</span> j = <span class="number">0</span>; j&lt;g-&gt;n; j++)</span><br><span class="line">        {</span><br><span class="line">            g-&gt;edges[i][j] = <span class="number">0</span>;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i&lt;g-&gt;e; ++i)</span><br><span class="line">    {</span><br><span class="line">        scanf(<span class="string">"%c %c %d\n"</span>, &amp;s, &amp;e, &amp;cost);</span><br><span class="line">        g-&gt;edges[returnId(g, s)][returnId(g, e)] = cost;</span><br><span class="line">    }</span><br><span class="line"> </span><br><span class="line">}</span><br><span class="line"> </span><br><span class="line">/* æ ¹æ®å›¾çš„é‚»æ¥çŸ©é˜µå»ºç«‹å›¾çš„é‚»æ¥è¡¨ */</span><br><span class="line">void CreateALGraph(MGragh *mg, ALGraph *alg)</span><br><span class="line">{</span><br><span class="line">    alg-&gt;n = mg-&gt;n; alg-&gt;e = mg-&gt;e;</span><br><span class="line">    <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i&lt;alg-&gt;n; ++i)</span><br><span class="line">    {</span><br><span class="line">        alg-&gt;adjlist[i].vertex = mg-&gt;vexs[i];</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">int</span> i, j;</span><br><span class="line">    EdgeNode *s;</span><br><span class="line">    <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; alg-&gt;n; ++i)</span><br><span class="line">    {</span><br><span class="line">        <span class="keyword">for</span> (<span class="built_in">int</span> j = <span class="number">0</span>; j &lt; alg-&gt;n; ++j)</span><br><span class="line">        {</span><br><span class="line">            <span class="keyword">if</span> (mg-&gt;edges[i][j] != <span class="number">0</span>)</span><br><span class="line">            {</span><br><span class="line">                s = (EdgeNode*)malloc(sizeof(EdgeNode));</span><br><span class="line">                s-&gt;adjvex = j;</span><br><span class="line">                s-&gt;Info = mg-&gt;edges[i][j];</span><br><span class="line">                s-&gt;<span class="built_in">next</span> = NULL;</span><br><span class="line">                EdgeNode*p = alg-&gt;adjlist[i].firstedge;</span><br><span class="line">                s-&gt;<span class="built_in">next</span> = p;</span><br><span class="line">                alg-&gt;adjlist[i].firstedge = s;</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"> </span><br><span class="line">//æ‰“å°å›¾(é‚»æ¥çŸ©é˜µ) </span><br><span class="line">void printGragh(MGragh *g)</span><br><span class="line">{</span><br><span class="line">    printf(<span class="string">"\nå›¾Gçš„é‚»æ¥çŸ©é˜µ\n"</span>);</span><br><span class="line">    printf(<span class="string">"é¡¶ç‚¹ï¼š\n"</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i&lt;g-&gt;n; i++)</span><br><span class="line">    {</span><br><span class="line">        printf(<span class="string">"%c\t"</span>, g-&gt;vexs[i]);</span><br><span class="line">    }</span><br><span class="line">    printf(<span class="string">"\né‚»æ¥çŸ©é˜µï¼š\n"</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i&lt;g-&gt;n; i++)</span><br><span class="line">    {</span><br><span class="line">        <span class="keyword">for</span> (<span class="built_in">int</span> j = <span class="number">0</span>; j&lt;g-&gt;n; j++)</span><br><span class="line">        {</span><br><span class="line">            printf(<span class="string">"%d\t"</span>, g-&gt;edges[i][j]);</span><br><span class="line">        }</span><br><span class="line">        printf(<span class="string">"\n"</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"> </span><br><span class="line">//æ‰“å°å›¾(é‚»æ¥è¡¨) </span><br><span class="line">void printALGragh(ALGraph *g)</span><br><span class="line">{</span><br><span class="line">    printf(<span class="string">"\nå›¾Gçš„é‚»æ¥è¡¨\n"</span>);</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i&lt;g-&gt;n; i++)</span><br><span class="line">    {</span><br><span class="line">        printf(<span class="string">"%c:"</span>, g-&gt;adjlist[i].vertex);</span><br><span class="line"> </span><br><span class="line">        EdgeNode* edge = g-&gt;adjlist[i].firstedge;</span><br><span class="line">        <span class="keyword">while</span> (edge)</span><br><span class="line">        {</span><br><span class="line">            printf(<span class="string">"--&gt;"</span>);</span><br><span class="line">            printf(<span class="string">"%d:%d\t"</span>, edge-&gt;adjvex, edge-&gt;Info);</span><br><span class="line">            edge = edge-&gt;<span class="built_in">next</span>;</span><br><span class="line">        }</span><br><span class="line">        printf(<span class="string">"%\n"</span>);</span><br><span class="line">    }</span><br><span class="line"> </span><br><span class="line">}</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">/**********************DFS*********************/</span><br><span class="line">//ä»é¡¶ç‚¹vå¼€å§‹å›¾(é‚»æ¥çŸ©é˜µ)çš„æ·±åº¦éå† </span><br><span class="line">void DFS_MG(MGragh *g, <span class="built_in">int</span> v)</span><br><span class="line">{</span><br><span class="line">    <span class="built_in">int</span> j;</span><br><span class="line">    visited[v] = <span class="number">1</span>;</span><br><span class="line">    printf(<span class="string">"%c "</span>, g-&gt;vexs[v]);</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">for</span> (j = <span class="number">0</span>; j&lt;g-&gt;n; ++j)</span><br><span class="line">    {</span><br><span class="line">        <span class="keyword">if</span> (g-&gt;edges[v][j] != <span class="number">0</span>  &amp;&amp;  !visited[j])</span><br><span class="line">            DFS_MG(g, j);</span><br><span class="line">    }</span><br><span class="line"> </span><br><span class="line">}</span><br><span class="line"> </span><br><span class="line">//å›¾çš„(é‚»æ¥çŸ©é˜µ)çš„æ·±åº¦éå† </span><br><span class="line">void DFSTranverse_MG(MGragh *g)</span><br><span class="line">{</span><br><span class="line">    <span class="built_in">int</span> i;</span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i&lt;g-&gt;n; ++i){</span><br><span class="line">        visited[i] = <span class="number">0</span>;  //åˆå§‹åŒ–è®¿é—®æ•°ç»„visitedçš„å…ƒç´ å€¼ä¸ºfalse</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i&lt;g-&gt;n; ++i){</span><br><span class="line">        <span class="keyword">if</span> (!visited[i]){ //èŠ‚ç‚¹å°šæœªè®¿é—®</span><br><span class="line">            DFS_MG(g, i);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"> </span><br><span class="line">//ä»é¡¶ç‚¹vå¼€å§‹å›¾(é‚»æ¥è¡¨)çš„æ·±åº¦éå†</span><br><span class="line">void DFS_ALG(ALGraph *g, <span class="built_in">int</span> v)</span><br><span class="line">{</span><br><span class="line">    visited[v] = <span class="number">1</span>;</span><br><span class="line">    printf(<span class="string">"%c "</span>, g-&gt;adjlist[v].vertex);</span><br><span class="line"> </span><br><span class="line">    EdgeNode *p =g-&gt;adjlist[v].firstedge;</span><br><span class="line">    <span class="keyword">while</span> (p){</span><br><span class="line">        <span class="keyword">if</span> (!visited[p-&gt;adjvex]){</span><br><span class="line">            DFS_ALG(g, p-&gt;adjvex); //é€’å½’æ·±åº¦éå†</span><br><span class="line">        }</span><br><span class="line">        p = p-&gt;<span class="built_in">next</span>;</span><br><span class="line">    }</span><br><span class="line"> </span><br><span class="line">}</span><br><span class="line"> </span><br><span class="line">//å›¾(é‚»æ¥è¡¨)çš„æ·±åº¦éå†</span><br><span class="line">void DFSTranverse_ALG(ALGraph *g)</span><br><span class="line">{</span><br><span class="line">    <span class="built_in">int</span> i;</span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i&lt;g-&gt;n; ++i){</span><br><span class="line">        visited[i] = <span class="number">0</span>;  //åˆå§‹åŒ–è®¿é—®æ•°ç»„visitedçš„å…ƒç´ å€¼ä¸ºfalse</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i&lt;g-&gt;n; ++i){</span><br><span class="line">        <span class="keyword">if</span> (!visited[i]){ //èŠ‚ç‚¹å°šæœªè®¿é—®</span><br><span class="line">            DFS_ALG(g, i);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"> </span><br><span class="line">/**************************BFS****************************/</span><br><span class="line"> </span><br><span class="line">//ä»é¡¶ç‚¹vå¼€å§‹å›¾(é‚»æ¥çŸ©é˜µ)çš„å¹¿åº¦éå† </span><br><span class="line">void BFS_MG(MGragh *g, <span class="built_in">int</span> v)</span><br><span class="line">{</span><br><span class="line"> </span><br><span class="line">    <span class="built_in">int</span> j;</span><br><span class="line">    queue&lt;<span class="built_in">int</span>&gt; Q;</span><br><span class="line">    visited[v] = <span class="number">1</span>;</span><br><span class="line">    printf(<span class="string">"%c "</span>, g-&gt;vexs[v]);</span><br><span class="line"> </span><br><span class="line">    Q.push(v);</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">while</span> (!Q.empty())</span><br><span class="line">    {</span><br><span class="line">            </span><br><span class="line">        v = Q.front();</span><br><span class="line">        Q.pop();</span><br><span class="line"> </span><br><span class="line">        <span class="keyword">for</span> (j = <span class="number">0</span>; j&lt;g-&gt;n; ++j)</span><br><span class="line">        {</span><br><span class="line">            <span class="keyword">if</span> (!visited[j] &amp;&amp; g-&gt;edges[v][j] !=<span class="number">0</span>)// INFINITY)</span><br><span class="line">            {</span><br><span class="line">                visited[j] = <span class="number">1</span>;</span><br><span class="line">                printf(<span class="string">"%c "</span>, g-&gt;vexs[j]);</span><br><span class="line">                Q.push(j);</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"> </span><br><span class="line">//å›¾(é‚»æ¥çŸ©é˜µ)çš„å¹¿åº¦éå†</span><br><span class="line">void BFSTranverse_MG(MGragh *g)</span><br><span class="line">{</span><br><span class="line">    <span class="built_in">int</span> i;</span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i&lt;g-&gt;n; ++i){</span><br><span class="line">        visited[i] = <span class="number">0</span>;  //åˆå§‹åŒ–è®¿é—®æ•°ç»„visitedçš„å…ƒç´ å€¼ä¸ºfalse</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i&lt;g-&gt;n; ++i){</span><br><span class="line">        <span class="keyword">if</span> (!visited[i]){ //èŠ‚ç‚¹å°šæœªè®¿é—®</span><br><span class="line">            BFS_MG(g, i);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"> </span><br><span class="line">//ä»é¡¶ç‚¹vå¼€å§‹å›¾(é‚»æ¥è¡¨)çš„å¹¿åº¦éå† </span><br><span class="line">void BFS_ALG(ALGraph *g, <span class="built_in">int</span> v)</span><br><span class="line">{</span><br><span class="line">    queue&lt;<span class="built_in">int</span> &gt; Q;</span><br><span class="line">    visited[v] = <span class="number">1</span>;</span><br><span class="line">    printf(<span class="string">"%c "</span>, g-&gt;adjlist[v].vertex);</span><br><span class="line">            </span><br><span class="line">    Q.push(v);</span><br><span class="line">    <span class="keyword">while</span> (!Q.empty()){     </span><br><span class="line">        v = Q.front();</span><br><span class="line">        Q.pop();</span><br><span class="line">        EdgeNode *p = g-&gt;adjlist[v].firstedge;</span><br><span class="line">        <span class="keyword">while</span> (p){</span><br><span class="line">            <span class="keyword">if</span> (!visited[p-&gt;adjvex]){</span><br><span class="line">            visited[p-&gt;adjvex] = <span class="number">1</span>;</span><br><span class="line">            printf(<span class="string">"%c "</span>, g-&gt;adjlist[p-&gt;adjvex].vertex);            </span><br><span class="line">            Q.push(p-&gt;adjvex);</span><br><span class="line">            }</span><br><span class="line">            p = p-&gt;<span class="built_in">next</span>;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line"> </span><br><span class="line">}</span><br><span class="line"> </span><br><span class="line">//å›¾(é‚»æ¥è¡¨)çš„å¹¿åº¦éå† </span><br><span class="line">void BFSTranverse_ALG(ALGraph *g)</span><br><span class="line">{</span><br><span class="line">    <span class="built_in">int</span> i;</span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i&lt;g-&gt;n; ++i){</span><br><span class="line">        visited[i] = <span class="number">0</span>;  //åˆå§‹åŒ–è®¿é—®æ•°ç»„visitedçš„å…ƒç´ å€¼ä¸ºfalse</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i&lt;g-&gt;n; ++i){</span><br><span class="line">        <span class="keyword">if</span> (!visited[i]){ //èŠ‚ç‚¹å°šæœªè®¿é—®</span><br><span class="line">            BFS_ALG(g, i);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"> </span><br><span class="line">/************************åˆå§‹åŒ–ä¸é”€æ¯********************************/</span><br><span class="line">MGragh *init_MGraph()</span><br><span class="line">{</span><br><span class="line">    MGragh *mg = (MGragh *)malloc(sizeof(MGragh));</span><br><span class="line">    <span class="keyword">if</span> (mg)</span><br><span class="line">    {</span><br><span class="line">        mg-&gt;n = <span class="number">0</span>;</span><br><span class="line">        mg-&gt;e = <span class="number">0</span>;</span><br><span class="line">    }</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">return</span> mg;</span><br><span class="line">}</span><br><span class="line"> </span><br><span class="line">ALGraph *init_ALGraph()</span><br><span class="line">{</span><br><span class="line">    ALGraph *alg = (ALGraph *)malloc(sizeof(ALGraph));</span><br><span class="line">    <span class="keyword">if</span> (alg)</span><br><span class="line">    {</span><br><span class="line">        alg-&gt;n = <span class="number">0</span>;</span><br><span class="line">        alg-&gt;e = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i&lt;MaxVerNum; i++)</span><br><span class="line">            alg-&gt;adjlist[i].firstedge = NULL;</span><br><span class="line">    }</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">return</span> alg;</span><br><span class="line">}</span><br><span class="line"> </span><br><span class="line">void destroy_MGraph(MGragh **g)</span><br><span class="line">{</span><br><span class="line">    <span class="keyword">if</span> (*g)</span><br><span class="line">    {</span><br><span class="line">        free(*g);</span><br><span class="line">        *g = NULL;</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"> </span><br><span class="line">void destroy_ALGraph(ALGraph **g)</span><br><span class="line">{</span><br><span class="line">    <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; (*g)-&gt;n; ++i)</span><br><span class="line">    {</span><br><span class="line">        EdgeNode *p = (*g)-&gt;adjlist[i].firstedge;</span><br><span class="line">        <span class="keyword">while</span> (p)</span><br><span class="line">        {</span><br><span class="line">            EdgeNode *q = p-&gt;<span class="built_in">next</span>;</span><br><span class="line">            free(p);</span><br><span class="line">            p = q;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">if</span> (*g)</span><br><span class="line">    {</span><br><span class="line">        free(*g);</span><br><span class="line">        *g = NULL;</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"> </span><br><span class="line">/****mainå‡½æ•°*************/</span><br><span class="line"><span class="built_in">int</span> main()</span><br><span class="line">{</span><br><span class="line">    freopen(<span class="string">"æ•°æ®.txt"</span>, <span class="string">"r"</span>, stdin);</span><br><span class="line">    //åˆ›å»ºå›¾ï¼ˆé‚»æ¥çŸ©é˜µï¼‰ </span><br><span class="line">    MGragh *mG = init_MGraph();</span><br><span class="line">    CreateGraph(mG);</span><br><span class="line">    printGragh(mG);</span><br><span class="line"> </span><br><span class="line">    //åˆ›å»ºå›¾ï¼ˆé‚»æ¥è¡¨ï¼‰ </span><br><span class="line">    ALGraph *alG = init_ALGraph();</span><br><span class="line">    CreateALGraph(mG, alG);</span><br><span class="line">    printALGragh(alG);</span><br><span class="line"> </span><br><span class="line">    </span><br><span class="line">    //DFSéå†</span><br><span class="line">    printf(<span class="string">"\nDFSéå†:\n"</span>);</span><br><span class="line">    printf(<span class="string">"é‚»æ¥çŸ©é˜µ:\n"</span>);</span><br><span class="line">    DFSTranverse_MG(mG);</span><br><span class="line">    printf(<span class="string">"\né‚»æ¥è¡¨:\n"</span>);</span><br><span class="line">    DFSTranverse_ALG(alG);</span><br><span class="line"> </span><br><span class="line">    //BFSéå†</span><br><span class="line">    printf(<span class="string">"\n\nBFSéå†:\n"</span>);</span><br><span class="line">    printf(<span class="string">"é‚»æ¥çŸ©é˜µ:\n"</span>);</span><br><span class="line">    BFSTranverse_MG(mG);</span><br><span class="line">    printf(<span class="string">"\né‚»æ¥è¡¨:\n"</span>);</span><br><span class="line">    BFSTranverse_ALG(alG);</span><br><span class="line"> </span><br><span class="line">    //é”€æ¯å›¾</span><br><span class="line">    destroy_MGraph(&amp;mG);</span><br><span class="line">    destroy_ALGraph(&amp;alG);</span><br><span class="line">    </span><br><span class="line">}</span><br><span class="line">//è¿è¡ŒæˆåŠŸ <span class="number">2019</span>å¹´<span class="number">5</span>æœˆ<span class="number">14</span>æ—¥<span class="number">0</span>:<span class="number">19</span>:<span class="number">36</span></span><br></pre></td></tr></tbody></table></figure><h3 id="è¿è¡Œç»“æœ"><a href="#è¿è¡Œç»“æœ" class="headerlink" title="è¿è¡Œç»“æœ"></a>è¿è¡Œç»“æœ</h3><img src="https://raw.githubusercontent.com/Skylyong/i/main/20210813224449.png" alt="img" style="zoom: 67%;">]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å›¾ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è®ºæ–‡å†™ä½œ</title>
      <link href="/2021/08/13/li-bao-chun-writing-perfect-papers/"/>
      <url>/2021/08/13/li-bao-chun-writing-perfect-papers/</url>
      
        <content type="html"><![CDATA[<h3 id="æè‘†æ˜¥â€”â€”Writing-Perfect-Papers"><a href="#æè‘†æ˜¥â€”â€”Writing-Perfect-Papers" class="headerlink" title="æè‘†æ˜¥â€”â€”Writing Perfect Papers"></a>æè‘†æ˜¥â€”â€”<a href="https://www.bilibili.com/video/BV18v411n7mr?share_source=copy_web">Writing Perfect Papers</a></h3><img src="https://raw.githubusercontent.com/Skylyong/i/main/20210720225101.png" alt="WechatIMG19487" style="zoom:200%;">]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹ ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è®ºæ–‡å†™ä½œ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SVMå­¦ä¹ ç¬”è®°</title>
      <link href="/2021/08/09/svm-xue-xi-bi-ji/"/>
      <url>/2021/08/09/svm-xue-xi-bi-ji/</url>
      
        <content type="html"><![CDATA[<h2 id="SVMå­¦ä¹ ç¬”è®°"><a href="#SVMå­¦ä¹ ç¬”è®°" class="headerlink" title="SVMå­¦ä¹ ç¬”è®°"></a>SVMå­¦ä¹ ç¬”è®°</h2><p><a href="https://www.deeplearningbook.org/">https://www.deeplearningbook.org/</a></p><p><a href="http://page.mi.fu-berlin.de/rojas/neural/neuron.pdf">http://page.mi.fu-berlin.de/rojas/neural/neuron.pdf</a></p><p><a href="https://www.svm-tutorial.com/2014/11/svm-understanding-math-part-1/">https://www.svm-tutorial.com/2014/11/svm-understanding-math-part-1/</a></p>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹ ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> svm </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Pandaså­¦ä¹ </title>
      <link href="/2021/08/06/pandas-xue-xi/"/>
      <url>/2021/08/06/pandas-xue-xi/</url>
      
        <content type="html"><![CDATA[<blockquote><p>Video url: <a href="https://www.youtube.com/watch?v=vmEHCJofslg">https://www.youtube.com/watch?v=vmEHCJofslg</a></p><p>Pandas document: <a href="https://pandas.pydata.org/pandas-docs/stable/reference/index.html#api">https://pandas.pydata.org/pandas-docs/stable/reference/index.html#api</a></p><p>Pracice Pandas:   <a href="https://stratascratch.com/?via=keith">https://stratascratch.com/?via=keith</a></p></blockquote><h3 id="1-Loading-data-into-Pandas"><a href="#1-Loading-data-into-Pandas" class="headerlink" title="1. Loading data into Pandas"></a>1. Loading data into Pandas</h3><blockquote><p>1.1 Loading data from csv format file</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># read data from csv format file</span></span><br><span class="line">df = pd.read_csv(<span class="string">'pokemon_data.csv'</span>)</span><br><span class="line"><span class="built_in">print</span>(df.head(<span class="number">3</span>))</span><br></pre></td></tr></tbody></table></figure></blockquote><blockquote><p> 1.2 Loading data from txt format file</p></blockquote><blockquote><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># read data from txt format file</span></span><br><span class="line">df_txt = pd.read_csv(<span class="string">'pokemon_data.txt'</span>, delimiter=<span class="string">'\t'</span>)</span><br><span class="line"><span class="built_in">print</span>(df_txt.head(<span class="number">3</span>))</span><br></pre></td></tr></tbody></table></figure></blockquote><h3 id="2-Read-Data-in-Pandas"><a href="#2-Read-Data-in-Pandas" class="headerlink" title="2. Read Data in Pandas"></a>2. Read Data in Pandas</h3><blockquote><p>2.1 Read head</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(df.columns)</span><br></pre></td></tr></tbody></table></figure><p>2.2 Read each Column</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(df[<span class="string">'Name'</span>][<span class="number">0</span>:<span class="number">5</span>])</span><br><span class="line"><span class="built_in">print</span>(df.Name[<span class="number">0</span>:<span class="number">5</span>])</span><br><span class="line"><span class="built_in">print</span>(df[[<span class="string">'Name'</span>, <span class="string">'Type 1'</span>, <span class="string">'HP'</span>]][<span class="number">0</span>:<span class="number">5</span>])</span><br></pre></td></tr></tbody></table></figure><p>2.3 Read each Row</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># print the top 4 rows</span></span><br><span class="line"><span class="built_in">print</span>(df.head(<span class="number">4</span>))</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(df.iloc[<span class="number">0</span>])</span><br><span class="line"><span class="keyword">for</span> index, row <span class="keyword">in</span> df.iterrows():</span><br><span class="line">    <span class="built_in">print</span>(index, row[<span class="string">'Name'</span>])</span><br></pre></td></tr></tbody></table></figure><p>2.4 Read a specific location(R,C)</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(df.iloc[<span class="number">2</span>,<span class="number">1</span>])</span><br></pre></td></tr></tbody></table></figure></blockquote><h3 id="3-Sorting-Describing-Data"><a href="#3-Sorting-Describing-Data" class="headerlink" title="3. Sorting/Describing Data"></a>3. Sorting/Describing Data</h3><blockquote><p> 3.1 View data describe</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(df.describe())</span><br></pre></td></tr></tbody></table></figure><p>3.2 Sorting</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sort_res = df.sort_values([<span class="string">'Name'</span>,<span class="string">'HP'</span>], ascending=[<span class="number">1</span>, <span class="number">0</span>])</span><br></pre></td></tr></tbody></table></figure></blockquote><h3 id="4-Making-changes-to-the-data"><a href="#4-Making-changes-to-the-data" class="headerlink" title="4. Making changes to the data"></a>4. Making changes to the data</h3><blockquote><p>4.1 Create a new column</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">df[<span class="string">'Total'</span>] = df[<span class="string">'HP'</span>] + df[<span class="string">'Attack'</span>]</span><br><span class="line">df[<span class="string">'Total'</span>] = df.iloc[:,<span class="number">4</span>:<span class="number">10</span>].<span class="built_in">sum</span>(axis=<span class="number">1</span>)</span><br></pre></td></tr></tbody></table></figure><p>4.2 Delete one column</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df = df.drop(columns=[<span class="string">'Total'</span>])</span><br></pre></td></tr></tbody></table></figure></blockquote><h3 id="5-Save-data-to-file"><a href="#5-Save-data-to-file" class="headerlink" title="5. Save data to file"></a>5. Save data to file</h3><blockquote><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df.to_csv(<span class="string">'new_data.csv'</span>, index=<span class="literal">False</span>, sep=<span class="string">'\t'</span>)</span><br></pre></td></tr></tbody></table></figure></blockquote><h3 id="6-Filtering-Data"><a href="#6-Filtering-Data" class="headerlink" title="6. Filtering Data"></a>6. Filtering Data</h3><blockquote><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è¿‡æ»¤å‡ºæ»¡è¶³æ¡ä»¶çš„æ•°æ®ï¼Œè¿‡æ»¤å‡ºæ¥çš„æ•°æ®ä¼šä¿ç•™åŸæ¥çš„åºå·</span></span><br><span class="line">new_df = df.loc[(df[<span class="string">'Type 1'</span>] == <span class="string">'Grass'</span>) &amp; (df[<span class="string">'Type 2'</span>] == <span class="string">'Poison'</span>)]</span><br><span class="line"></span><br><span class="line"><span class="comment"># å°†è¿‡æ»¤å‡ºæ¥çš„æ•°æ®çš„åºå·è¿›è¡Œé‡ç½®</span></span><br><span class="line">new_df.reset_index(drop=<span class="literal">True</span>, inplace=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># è¿‡æ»¤å‡ºâ€œNameâ€åˆ—ä¸­åŒ…å«â€œMegaâ€å­—æ®µçš„æ•°æ®</span></span><br><span class="line">new_df = df.loc[~df[<span class="string">'Name'</span>].<span class="built_in">str</span>.contains(<span class="string">'Mega'</span>)]</span><br><span class="line"></span><br><span class="line"><span class="comment"># è¿‡æ»¤å‡ºâ€œType 1â€åˆ—ä¸­åŒ…å«â€œfirstâ€å’Œâ€œgrassâ€å­—æ®µæ˜¯æ•°æ®ï¼Œå¹¶ä¸”ä¸åŒºåˆ«å¤§å°å†™</span></span><br><span class="line">df.loc[df[<span class="string">'Type 1'</span>].<span class="built_in">str</span>.contains(<span class="string">'fire|Grass'</span>,flags=re.I, regex=<span class="literal">True</span>)] <span class="comment"># Ignore case</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ç”¨æ­£åˆ™è¡¨è¾¾å¼è¿‡æ»¤â€œNameâ€åˆ—ä¸­æ»¡è¶³æ¡ä»¶çš„æ•°æ®</span></span><br><span class="line">df.loc[df[<span class="string">'Name'</span>].<span class="built_in">str</span>.contains(<span class="string">'^pi[a-z]*'</span>, flags=re.I, regex=<span class="literal">True</span>)]</span><br></pre></td></tr></tbody></table></figure></blockquote><h3 id="7-Conditional-changes"><a href="#7-Conditional-changes" class="headerlink" title="7. Conditional changes"></a>7. Conditional changes</h3><blockquote><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æŠŠtype 1 åˆ—ä¸­æ»¡è¶³æ¡ä»¶(ç­‰äº'Fire')çš„å†…å®¹æ”¹ä¸ºFlamer</span></span><br><span class="line">df.loc[df[<span class="string">'Type 1'</span>] == <span class="string">'Fire'</span>, <span class="string">'Type 1'</span>] = <span class="string">'Flamer'</span></span><br></pre></td></tr></tbody></table></figure></blockquote><h3 id="8-Aggregate-Statistics-Groupby"><a href="#8-Aggregate-Statistics-Groupby" class="headerlink" title="8. Aggregate Statistics(Groupby)"></a>8. Aggregate Statistics(Groupby)</h3><blockquote><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">res = df.groupby([<span class="string">'Type 1'</span>]).mean().sort_values(<span class="string">'HP'</span>, ascending=<span class="literal">False</span>)</span><br></pre></td></tr></tbody></table></figure></blockquote><h3 id="9-Working-with-large-amounts-of-data"><a href="#9-Working-with-large-amounts-of-data" class="headerlink" title="9. Working with large amounts of data"></a>9. Working with large amounts of data</h3><blockquote><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆ†æ‰¹è¯»å–æ•°æ®ï¼Œä¸€æ¬¡è¯»100è¡Œ</span></span><br><span class="line"><span class="keyword">for</span> df <span class="keyword">in</span> pd.read_csv(<span class="string">'pokemon_data.csv'</span>, chunk_size=<span class="number">100</span>):</span><br><span class="line">    <span class="built_in">print</span>(df)</span><br></pre></td></tr></tbody></table></figure></blockquote>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹ ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Pandas </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Pytorchå­¦ä¹ </title>
      <link href="/2021/08/05/pytorch-xue-xi/"/>
      <url>/2021/08/05/pytorch-xue-xi/</url>
      
        <content type="html"><![CDATA[<p>è¯¾ç¨‹[é“¾æ¥](https: // <a href="http://www.youtube.com/">www.youtube.com</a> / watch?v = c36lUUr864M)</p><h3 id="1-Tensor"><a href="#1-Tensor" class="headerlink" title="1. Tensor"></a>1. Tensor</h3><h4 id="1-1-How-to-create-tensor"><a href="#1-1-How-to-create-tensor" class="headerlink" title="1.1 How to create tensor"></a>1.1 How to create tensor</h4><blockquote><p>æ„é€ tensorçš„æ–¹æ³•ä¸»è¦æœ‰å…­ç§ï¼Œåˆ†åˆ«å¦‚ä¸‹ï¼š</p><ol><li><p>x = torch.ones(3, 5, dtype=torch.float, requires_grad = True )</p></li><li><p>x = torch.zeros(3, 5, dtype=torch.float, requires_grad = True )</p></li><li><p>x = torch.rand(3, 5, dtype=torch.float, requires_grad = True )</p></li><li><p>x = torch.empty(3, 5, dtype=torch.float, requires_grad = True )</p></li><li><p>x = torch.tensor([1,2,3], dtype=torch.float, requires_grad = True )</p></li><li><p>x_numpy = np.array([1,2,3])<br>x = torch.from_numpy(x_numpy)</p></li></ol></blockquote><h4 id="1-2-å¯¹Tensorçš„å„ç§æ“ä½œ"><a href="#1-2-å¯¹Tensorçš„å„ç§æ“ä½œ" class="headerlink" title="1.2 å¯¹Tensorçš„å„ç§æ“ä½œ"></a>1.2 å¯¹Tensorçš„å„ç§æ“ä½œ</h4><blockquote><ol><li><p>æŸ¥çœ‹æ•°æ®ç±»å‹ï¼šx.dtype</p></li><li><p>æŸ¥çœ‹sizeï¼šx.size()</p></li><li><p>å¦‚æœtensoråªæœ‰ä¸€ä¸ªå€¼ï¼ŒæŸ¥çœ‹å®æ•°å€¼ï¼šx.item()</p></li><li><p>æ”¹å˜tensorçš„å½¢çŠ¶å¤§å°ï¼šx = x.view(num_row, num_col)</p></li><li><p>å°†tensorè½¬ä¸ºnumpy: z = x.detach().numpy()</p></li></ol><p> â€‹       æ³¨æ„ï¼šnumpyåªèƒ½å­˜æ”¾åˆ°cpuä¸Šé¢,å¹¶ä¸”ä¸èƒ½æ˜¯åŒ…å«æ¢¯åº¦çš„tensorï¼Œè½¬æ¢ä¹‹åå…±äº«ç›¸åŒçš„å†…å­˜</p><ol start="6"><li>æ„é€ æ–°çš„ä¸åŒ…å«æ¢¯åº¦çš„tensorï¼šz = x.detach()</li></ol><ol start="7"><li>å¯¹tensorè¿›è¡Œå„ç§è½¬æ¢ï¼š .to() eg: x.to(int)</li></ol></blockquote><h4 id="1-3-åŸºæœ¬è¿ç®—"><a href="#1-3-åŸºæœ¬è¿ç®—" class="headerlink" title="1.3 åŸºæœ¬è¿ç®—"></a>1.3 åŸºæœ¬è¿ç®—</h4><blockquote><ol><li>add: z = x+y</li><li>minus: z = x-y</li><li>multi: z = x*y</li><li>div: z = x/y</li><li>åˆ‡ç‰‡æ“ä½œï¼šåˆ‡ç‰‡æ“ä½œååˆ†çµæ´»ï¼Œç”¨åˆ°çš„æ—¶å€™æŸ¥è¯¢æ–‡æ¡£</li></ol></blockquote><h3 id="2-Autograd"><a href="#2-Autograd" class="headerlink" title="2. Autograd"></a>2. Autograd</h3><h4 id="2-1-Calculate-the-gradients"><a href="#2-1-Calculate-the-gradients" class="headerlink" title="2.1 Calculate the gradients"></a>2.1 Calculate the gradients</h4><blockquote><p>ç”¨ z.backward() æ¥è®¡ç®—zå…³äºå˜é‡çš„æ¢¯åº¦ï¼Œå¦‚æœæ­£å‘è®¡ç®—å‡ºæ¥çš„zæ˜¯ä¸€ä¸ªå®æ•°å€¼ï¼Œåˆ™backwardçš„å‚æ•°ä¸ºé»˜è®¤å€¼å°±å¥½ï¼Œå¦‚æœzæ˜¯ä¸€ä¸ªå‘é‡ï¼Œåˆ™è°ƒç”¨backward()çš„æ—¶å€™éœ€è¦ä¼ å…¥ä¸€ä¸ªä¸zçš„sizeç›¸åŒçš„å‘é‡.</p><p>  å¦‚ä¸‹é¢çš„ç¤ºä¾‹æ‰€ç¤ºã€‚  </p>  <figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">x = torch.randn(<span class="number">3</span>, dtype=<span class="built_in">float</span>, requires_grad = <span class="literal">True</span>)</span><br><span class="line">y=x*x+<span class="number">2</span>*x+<span class="number">5</span></span><br><span class="line">z = torch.mean(y)</span><br><span class="line">z.backward() <span class="comment"># dz/dx jacobian matrix to get the grad</span></span><br><span class="line"><span class="comment"># z.backward()è¿™ä¸€æ­¥æ˜¯ç”¨é›…å¯æ¯”çŸ©é˜µæ¥è®¡ç®—æ¢¯åº¦ï¼Œå¦‚æœæ­£å‘è®¡ç®—å‡ºæ¥çš„zæ˜¯</span></span><br><span class="line"><span class="comment"># ä¸€ä¸ªå®æ•°å€¼ï¼Œåˆ™backwardçš„å‚æ•°ä¸ºé»˜è®¤å€¼å°±å¥½ï¼Œå¦‚æœzæ˜¯ä¸€ä¸ªå‘é‡ï¼Œåˆ™è°ƒç”¨</span></span><br><span class="line"><span class="comment"># backward()çš„æ—¶å€™éœ€è¦ä¼ å…¥ä¸€ä¸ªä¸zçš„sizeç›¸åŒçš„å‘é‡</span></span><br><span class="line"><span class="comment"># </span></span><br><span class="line"><span class="comment"># y = x*x*2+x</span></span><br><span class="line"><span class="comment"># v = torch.tensor([1.00,0.10,0.200], dtype=torch.float32)</span></span><br><span class="line"><span class="comment"># y.backward(v)</span></span><br><span class="line"><span class="comment"># </span></span><br><span class="line"><span class="built_in">print</span>(x.grad)</span><br></pre></td></tr></tbody></table></figure></blockquote><h4 id="2-2-How-to-prevent-pytorch-from-tracking-the-history-and-calculating-this-grad-fn-attribute"><a href="#2-2-How-to-prevent-pytorch-from-tracking-the-history-and-calculating-this-grad-fn-attribute" class="headerlink" title="2.2 How to prevent pytorch from tracking the history and calculating this grad fn attribute."></a>2.2 How to prevent pytorch from tracking the history and calculating this grad fn attribute.</h4><blockquote><p>ä¸€å…±æœ‰ä¸‰ç§æ–¹æ³•è®©tensorä¸è¢«è®¡ç®—å›¾è¿½è¸ªæ¢¯åº¦ï¼Œåˆ†åˆ«æ˜¯ï¼š</p><p>1ï¼‰ x.requires_grad_(False)</p><p>2ï¼‰ x.detach()</p><p>3ï¼‰ with torch.no_grad(): pass</p><p>å…·ä½“ç¤ºä¾‹å¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">x = torch.randn(<span class="number">3</span>, requires_grad = <span class="literal">True</span>)</span><br><span class="line"><span class="built_in">print</span>(x)</span><br><span class="line"><span class="comment"># è®©å¼ é‡xä¸åœ¨è¿½è¸ªæ¢¯åº¦çš„æ–¹æ³•æœ‰ä¸‰ç§</span></span><br><span class="line"><span class="comment"># x.requires_grad_(False)</span></span><br><span class="line"><span class="comment"># x.detach()</span></span><br><span class="line"><span class="comment"># with torch.no_grad():</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> torch.no_grad():</span><br><span class="line">    y = x+<span class="number">2</span></span><br><span class="line">    <span class="built_in">print</span>(x) <span class="comment"># x with grad</span></span><br><span class="line">    <span class="built_in">print</span>(y) <span class="comment"># y without grad</span></span><br></pre></td></tr></tbody></table></figure></blockquote><h4 id="2-3-æ¢¯åº¦ç´¯ç§¯"><a href="#2-3-æ¢¯åº¦ç´¯ç§¯" class="headerlink" title="2.3 æ¢¯åº¦ç´¯ç§¯"></a>2.3 æ¢¯åº¦ç´¯ç§¯</h4><blockquote><p>è°ƒç”¨backward()æ¥è®¡ç®—æ¢¯åº¦çš„æ—¶å€™ï¼Œå½“å‰è½®æ¬¡çš„æ¢¯åº¦ï¼Œæ˜¯ä¹‹å‰æ‰€æœ‰è½®æ¬¡æ¢¯åº¦çš„ç´¯ç§¯å’Œï¼Œåœ¨æ¢¯åº¦ä¸‹é™å­¦ä¹ ä¸­è¿™æ˜¯æˆ‘ä»¬ä¸æƒ³çœ‹åˆ°çš„ï¼Œå¯ä»¥è°ƒç”¨zero_()å‡½æ•°æ¥å°†æ¢¯åº¦å˜ä¸º0.</p><p>ç¤ºä¾‹å¦‚ä¸‹ï¼š</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">weights = torch.ones(<span class="number">3</span>, requires_grad=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> epoch <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">2</span>):</span><br><span class="line">    model_output = (weights*<span class="number">3</span>).<span class="built_in">sum</span>()</span><br><span class="line">    model_output.backward()</span><br><span class="line">    <span class="built_in">print</span>(weights.grad)</span><br><span class="line"><span class="comment">#     weights.grad.zero_()</span></span><br><span class="line">    </span><br><span class="line"><span class="comment"># è¾“å‡ºç»“æœä¸ºï¼š</span></span><br><span class="line"><span class="comment"># tensor([3., 3., 3.])</span></span><br><span class="line"><span class="comment"># tensor([6., 6., 6.])</span></span><br><span class="line"><span class="comment"># ç¬¬ä¸€ä¸ªepochä¸º3ï¼Œç¬¬äºŒä¸ªepochä¸º6ï¼Œè¯´æ˜æ¢¯åº¦åœ¨ç´¯åŠ </span></span><br><span class="line"><span class="comment"># å› ä¸ºæ¢¯åº¦ç´¯ç§¯æ˜¯æˆ‘ä»¬ä¸å¸Œæœ›çœ‹åˆ°çš„ï¼Œæ‰€ä»¥æ¯æ¬¡è¿­ä»£çš„æ—¶å€™æˆ‘ä»¬å¸Œæœ›æ¢¯åº¦</span></span><br><span class="line"><span class="comment"># èƒ½å¤Ÿæ¸…é›¶ï¼Œæ¢¯åº¦æ¸…é›¶ç”¨.grad.zero_()å‡½æ•°</span></span><br></pre></td></tr></tbody></table></figure></blockquote><h3 id="3-Backpropagation"><a href="#3-Backpropagation" class="headerlink" title="3. Backpropagation"></a>3. Backpropagation</h3><blockquote><p>è°ƒç”¨backward()å‡½æ•°æ¥è¿›è¡Œåå‘ä¼ æ’­ï¼Œè®¡ç®—æ¢¯åº¦ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">x = torch.tensor(<span class="number">1</span>, dtype=torch.float32, requires_grad=<span class="literal">False</span>)</span><br><span class="line">y = torch.tensor(<span class="number">2</span>, dtype=torch.float32, requires_grad=<span class="literal">False</span>)</span><br><span class="line">w = torch.tensor(<span class="number">1</span>, dtype=torch.float32, requires_grad=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">loss = (x*w-y)**<span class="number">2</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(loss)</span><br><span class="line"></span><br><span class="line">loss.backward()</span><br><span class="line"><span class="built_in">print</span>(w.grad)</span><br><span class="line"></span><br><span class="line"><span class="comment">## output:</span></span><br><span class="line"><span class="comment"># tensor(1., grad_fn=&lt;PowBackward0&gt;)</span></span><br><span class="line"><span class="comment"># tensor(-2.)</span></span><br></pre></td></tr></tbody></table></figure></blockquote><h3 id="4-Optimize-model-with-automatic-gradient-computation"><a href="#4-Optimize-model-with-automatic-gradient-computation" class="headerlink" title="4. Optimize model with automatic gradient computation"></a>4. Optimize model with automatic gradient computation</h3><h4 id="4-1-ç”¨numpyå®ç°å›å½’ç®—æ³•"><a href="#4-1-ç”¨numpyå®ç°å›å½’ç®—æ³•" class="headerlink" title="4.1 ç”¨numpyå®ç°å›å½’ç®—æ³•"></a>4.1 ç”¨numpyå®ç°å›å½’ç®—æ³•</h4><blockquote><p>å®ç°å›å½’ç®—æ³•åˆ†ä¸ºå¦‚ä¸‹å‡ æ­¥ï¼š</p><p>â€‹1ï¼‰ æ•°æ®å‡†å¤‡</p><p>â€‹2ï¼‰å®šä¹‰function</p><p>â€‹3ï¼‰å®šä¹‰loss function</p><p>â€‹4ï¼‰ å®šä¹‰æ¢¯åº¦è®¡ç®—å…¬å¼</p><p>â€‹5ï¼‰ ç¼–å†™training loopéƒ¨åˆ†ä»£ç </p><p>å®ç°ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># f = w * x </span></span><br><span class="line"></span><br><span class="line"><span class="comment"># f = 2 * x</span></span><br><span class="line"><span class="comment"># 1. ç”¨numpyæ‰‹åŠ¨å®ç°</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># prepare dataset</span></span><br><span class="line">X = np.array([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>], dtype=np.float32)</span><br><span class="line">y = np.array([<span class="number">2</span>,<span class="number">4</span>,<span class="number">6</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">13</span>,<span class="number">20</span>], dtype=np.float32)</span><br><span class="line"></span><br><span class="line">w = <span class="number">0.0</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># model prediction</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">forward</span>(<span class="params">x</span>):</span><br><span class="line">    <span class="keyword">return</span> w*x</span><br><span class="line"></span><br><span class="line"><span class="comment"># loss = MSE</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">loss</span>(<span class="params">y, y_pred</span>):</span><br><span class="line">    <span class="keyword">return</span> ((y_pred - y)**<span class="number">2</span>).mean()</span><br><span class="line"></span><br><span class="line"><span class="comment"># gradient</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">gradient</span>(<span class="params">x,y,y_pred</span>):</span><br><span class="line">    <span class="keyword">return</span> (<span class="number">2</span>*x*(y_pred - y)).mean()</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f'Prediction before training: f(5) = <span class="subst">{forward(<span class="number">5</span>):<span class="number">.5</span>f}</span>'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Training</span></span><br><span class="line">learning_rate = <span class="number">0.1</span></span><br><span class="line">n_iters = <span class="number">10</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(n_iters):</span><br><span class="line">    y_pred = forward(X)</span><br><span class="line">    l = loss(y, y_pred)</span><br><span class="line">    dw = gradient(x, y, y_pred)</span><br><span class="line">    w -= learning_rate*dw</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f'epoch <span class="subst">{i+<span class="number">1</span>}</span>: w = <span class="subst">{w:<span class="number">.3</span>f}</span>, loss = <span class="subst">{l:<span class="number">.10</span>f}</span>'</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f'Prediction after training: f(5) = <span class="subst">{forward(<span class="number">5</span>):<span class="number">.5</span>f}</span>'</span>)</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure></blockquote><h4 id="4-2-ç”¨pytorchæ›¿æ¢æ•°æ®ç±»å‹å’Œæ¢¯åº¦è®¡ç®—"><a href="#4-2-ç”¨pytorchæ›¿æ¢æ•°æ®ç±»å‹å’Œæ¢¯åº¦è®¡ç®—" class="headerlink" title="4.2 ç”¨pytorchæ›¿æ¢æ•°æ®ç±»å‹å’Œæ¢¯åº¦è®¡ç®—"></a>4.2 ç”¨pytorchæ›¿æ¢æ•°æ®ç±»å‹å’Œæ¢¯åº¦è®¡ç®—</h4><blockquote><p>ä»£ç å®ç°æ€è·¯ä¸4.1ä¸€æ ·ï¼Œæ²¡æœ‰åšä»»ä½•å˜åŒ–ã€‚</p><p>ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 2. Do with pytorch</span></span><br><span class="line">X = torch.tensor([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">10</span>], dtype=torch.float32)</span><br><span class="line">y = torch.tensor([<span class="number">2</span>,<span class="number">4</span>,<span class="number">6</span>,<span class="number">8</span>,<span class="number">10</span>,<span class="number">12</span>,<span class="number">20</span>], dtype=torch.float32)</span><br><span class="line"></span><br><span class="line">w = torch.tensor(<span class="number">0.0</span>, dtype=torch.float32, requires_grad = <span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># model prediction</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">forward</span>(<span class="params">x</span>):</span><br><span class="line">    <span class="keyword">return</span> w*x</span><br><span class="line"></span><br><span class="line"><span class="comment"># loss = MSE</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">loss</span>(<span class="params">y, y_pred</span>):</span><br><span class="line">    <span class="keyword">return</span> ((y_pred - y)**<span class="number">2</span>).mean()</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f'Prediction before training: f(5) = <span class="subst">{forward(<span class="number">5</span>):<span class="number">.5</span>f}</span>'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Training</span></span><br><span class="line">learning_rate = <span class="number">0.0001</span></span><br><span class="line">n_iters = <span class="number">10000</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(n_iters):</span><br><span class="line">    y_pred = forward(X)</span><br><span class="line">    </span><br><span class="line">    l = loss(y, y_pred)</span><br><span class="line">    </span><br><span class="line">    l.backward()</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">with</span> torch.no_grad():</span><br><span class="line">        w -= learning_rate*w.grad</span><br><span class="line">    </span><br><span class="line">    w.grad.zero_()</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> (i+<span class="number">1</span>) %<span class="number">1000</span> == <span class="number">0</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f'epoch <span class="subst">{i+<span class="number">1</span>}</span>: w = <span class="subst">{w:<span class="number">.3</span>f}</span>, loss = <span class="subst">{l:<span class="number">.10</span>f}</span>'</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f'Prediction after training: f(5) = <span class="subst">{forward(<span class="number">5</span>):<span class="number">.5</span>f}</span>'</span>)</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure></blockquote><h4 id="4-3-ç”¨pytorchæ¥åšæ¢¯åº¦è®¡ç®—å’Œä¼˜åŒ–"><a href="#4-3-ç”¨pytorchæ¥åšæ¢¯åº¦è®¡ç®—å’Œä¼˜åŒ–" class="headerlink" title="4.3 ç”¨pytorchæ¥åšæ¢¯åº¦è®¡ç®—å’Œä¼˜åŒ–"></a>4.3 ç”¨pytorchæ¥åšæ¢¯åº¦è®¡ç®—å’Œä¼˜åŒ–</h4><blockquote><p>4.2 æˆ‘ä»¬ç”¨äº†backward()å‡½æ•°æ¥è‡ªåŠ¨è®¡ç®—æ¢¯åº¦ï¼Œä½†æ˜¯æ¢¯åº¦ä¸‹é™ä¼˜åŒ–ç®—æ³•ä¾ç„¶æ˜¯æˆ‘ä»¬åœ¨4.1ç‰ˆæœ¬ä¸­çš„æ‰‹å·¥ç¼–å†™çš„å…¬å¼ï¼Œè¿™é‡Œæˆ‘ä»¬åœ¨ä¹‹å‰çš„åŸºç¡€ä¸Šé¢æ›´è¿›ä¸€æ­¥ï¼Œç”¨pytorchæ¡†æ¶ä¸­çš„optimizeræ¥æ›¿æ¢æ‰æ‰‹å·¥ç¼–å†™çš„æ¢¯åº¦ä¸‹é™æ–¹æ³•ï¼Œä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1ï¼‰ Design model (input, output size, forward pass)</span></span><br><span class="line"><span class="comment"># 2) Construct loss and optimizer</span></span><br><span class="line"><span class="comment"># 3) Training loop</span></span><br><span class="line"><span class="comment">#    - forward pass: compute prediction</span></span><br><span class="line"><span class="comment">#    - backward pass: gradients</span></span><br><span class="line"><span class="comment">#    - update weight</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> torch.nn <span class="keyword">as</span> nn</span><br><span class="line"></span><br><span class="line">X = torch.tensor([[<span class="number">1</span>],[<span class="number">2</span>],[<span class="number">3</span>],[<span class="number">4</span>],[<span class="number">5</span>],[<span class="number">6</span>],[<span class="number">10</span>]], dtype=torch.float32)</span><br><span class="line">y = torch.tensor([[<span class="number">2</span>],[<span class="number">4</span>],[<span class="number">6</span>],[<span class="number">8</span>],[<span class="number">10</span>],[<span class="number">12</span>],[<span class="number">20</span>]], dtype=torch.float32)</span><br><span class="line">x_test = torch.tensor([<span class="number">5</span>], dtype=torch.float32)</span><br><span class="line"></span><br><span class="line">n_samples, n_features = X.shape</span><br><span class="line"><span class="built_in">print</span>(n_samples, n_features)</span><br><span class="line"></span><br><span class="line">input_size = n_features</span><br><span class="line">output_size = n_features</span><br><span class="line"></span><br><span class="line">model = nn.Linear(input_size, output_size)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f'Prediction before training: f(5) = <span class="subst">{model(x_test).item():<span class="number">.5</span>f}</span>'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Training</span></span><br><span class="line">learning_rate = <span class="number">0.01</span></span><br><span class="line">n_iters = <span class="number">1000</span></span><br><span class="line"></span><br><span class="line">loss = nn.MSELoss()</span><br><span class="line">optimizer = torch.optim.SGD(model.parameters(), lr=learning_rate)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(n_iters):</span><br><span class="line">    y_pred = model(X)</span><br><span class="line">    </span><br><span class="line">    l = loss(y, y_pred)</span><br><span class="line">    </span><br><span class="line">    l.backward()</span><br><span class="line">    optimizer.step()</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line"><span class="comment">#     w.grad.zero_()</span></span><br><span class="line">    optimizer.zero_grad()</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> (i+<span class="number">1</span>) %<span class="number">1000</span> == <span class="number">0</span>:</span><br><span class="line">        [w, b] = model.parameters()</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f'epoch <span class="subst">{i+<span class="number">1</span>}</span>: w = <span class="subst">{w[<span class="number">0</span>][<span class="number">0</span>].item():<span class="number">.3</span>f}</span>, loss = <span class="subst">{l:<span class="number">.10</span>f}</span>'</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f'Prediction after training: f(5) = <span class="subst">{model(x_test).item():<span class="number">.5</span>f}</span>'</span>)</span><br></pre></td></tr></tbody></table></figure></blockquote><h4 id="4-4-å®šä¹‰æ›´åŠ å¤æ‚çš„æ¨¡å‹"><a href="#4-4-å®šä¹‰æ›´åŠ å¤æ‚çš„æ¨¡å‹" class="headerlink" title="4.4 å®šä¹‰æ›´åŠ å¤æ‚çš„æ¨¡å‹"></a>4.4 å®šä¹‰æ›´åŠ å¤æ‚çš„æ¨¡å‹</h4><blockquote><p>4.3 åŠå…¶ä¹‹å‰çš„å·¥ä½œï¼Œæˆ‘ä»¬å¯¹modelçš„å®šä¹‰éƒ½åŠå…¶çš„ç®€å•ï¼Œè¿™é‡Œæˆ‘ä»¬å¯¹modelè¿›è¡Œæ”¹è¿›ï¼Œé€šè¿‡è‡ªå®šä¹‰ä¸€ä¸ªLinearRegresså¯¹è±¡æ¥å®šä¹‰ä¸€ä¸ªåŒ…å«ä¸¤å±‚å…¨è¿æ¥çš„ç½‘ç»œå»ºæ¨¡æˆ‘ä»¬çš„modelï¼Œéšè—å±‚çš„æ¿€æ´»å‡½æ•°æˆ‘ä»¬é€‰ç”¨äº†relu()æ¿€æ´»å‡½æ•°ã€‚ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1ï¼‰ Design model (input, output size, forward pass)</span></span><br><span class="line"><span class="comment"># 2) Construct loss and optimizer</span></span><br><span class="line"><span class="comment"># 3) Training loop</span></span><br><span class="line"><span class="comment">#    - forward pass: compute prediction</span></span><br><span class="line"><span class="comment">#    - backward pass: gradients</span></span><br><span class="line"><span class="comment">#    - update weight</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> torch.nn <span class="keyword">as</span> nn</span><br><span class="line"></span><br><span class="line">X = torch.tensor([[<span class="number">1</span>],[<span class="number">2</span>],[<span class="number">3</span>],[<span class="number">4</span>],[<span class="number">5</span>],[<span class="number">6</span>],[<span class="number">10</span>]], dtype=torch.float32)</span><br><span class="line">y = torch.tensor([[<span class="number">2</span>],[<span class="number">4</span>],[<span class="number">6</span>],[<span class="number">8</span>],[<span class="number">10</span>],[<span class="number">12</span>],[<span class="number">20</span>]], dtype=torch.float32)</span><br><span class="line">x_test = torch.tensor([<span class="number">5</span>], dtype=torch.float32)</span><br><span class="line"></span><br><span class="line">n_samples, n_features = X.shape</span><br><span class="line"><span class="built_in">print</span>(n_samples, n_features)</span><br><span class="line"></span><br><span class="line">input_size = n_features</span><br><span class="line">output_size = n_features</span><br><span class="line"></span><br><span class="line"><span class="comment"># model = nn.Linear(input_size, output_size)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">LinearRegress</span>(nn.Module):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, input_size, output_size</span>):</span><br><span class="line">        <span class="built_in">super</span>(LinearRegress, <span class="variable language_">self</span>).__init__()</span><br><span class="line">        <span class="comment"># define layers</span></span><br><span class="line">        <span class="variable language_">self</span>.lin1 = nn.Linear(input_size, <span class="number">2</span>)</span><br><span class="line">        <span class="variable language_">self</span>.lin2 = nn.Linear(<span class="number">2</span>, output_size)</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">forward</span>(<span class="params">self, x</span>):</span><br><span class="line">        x =  <span class="variable language_">self</span>.lin1(x)</span><br><span class="line">        x = torch.relu(x)</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">self</span>.lin2(x)</span><br><span class="line">        </span><br><span class="line"></span><br><span class="line">model = LinearRegress(input_size, output_size)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f'Prediction before training: f(5) = <span class="subst">{model(x_test).item():<span class="number">.5</span>f}</span>'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Training</span></span><br><span class="line">learning_rate = <span class="number">0.01</span></span><br><span class="line">n_iters = <span class="number">1000</span></span><br><span class="line"></span><br><span class="line">loss = nn.MSELoss()</span><br><span class="line">optimizer = torch.optim.SGD(model.parameters(), lr=learning_rate)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(n_iters):</span><br><span class="line">    y_pred = model(X)</span><br><span class="line">    </span><br><span class="line">    l = loss(y, y_pred)</span><br><span class="line">    </span><br><span class="line">    l.backward()</span><br><span class="line">    optimizer.step()</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line"><span class="comment">#     w.grad.zero_()</span></span><br><span class="line">    optimizer.zero_grad()</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> (i+<span class="number">1</span>) %<span class="number">1000</span> == <span class="number">0</span>:</span><br><span class="line"><span class="comment">#         [w, b] = model.parameters()</span></span><br><span class="line"><span class="comment">#         print(f'epoch {i+1}: parameters = {model.parameters()}, loss = {l:.10f}')</span></span><br><span class="line">        <span class="keyword">for</span> parameters <span class="keyword">in</span> model.parameters():</span><br><span class="line">            <span class="built_in">print</span>(parameters)</span><br><span class="line">        </span><br><span class="line"><span class="built_in">print</span>(<span class="string">f'Prediction after training: f(5) = <span class="subst">{model(x_test).item():<span class="number">.5</span>f}</span>'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Now pytorch can do most of the work for us, of course we still have to design our model</span></span><br><span class="line"><span class="comment"># and have to know which loss and optimizer we want to use but we don't have to worry about</span></span><br><span class="line"><span class="comment"># the underlying algorithms anymore.</span></span><br></pre></td></tr></tbody></table></figure></blockquote><h4 id="4-5-ç»¼åˆç¤ºä¾‹1"><a href="#4-5-ç»¼åˆç¤ºä¾‹1" class="headerlink" title="4.5 ç»¼åˆç¤ºä¾‹1"></a>4.5 ç»¼åˆç¤ºä¾‹1</h4><blockquote><p>å­¦ä¹ å®Œäº†4.1-4.3çš„å†…å®¹ï¼Œæˆ‘ä»¬å¯¹å¦‚ä½•æ‰‹å·¥å»ºæ¨¡ä¸€ä¸ªæ¨¡å‹æœ‰äº†åˆæ­¥çš„äº†è§£ï¼Œå¹¶ä¸”çŸ¥é“äº†pytorchå»ºæ¨¡æ·±åº¦å­¦ä¹ çš„ä¸€èˆ¬è¿‡ç¨‹ï¼Œä»¥åŠå®ƒå¯¹åº”çš„æ¯ä¸€ä¸ªéƒ¨åˆ†çš„ä½œç”¨ï¼Œä¸‹é¢æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªç»¼åˆçš„ç¤ºä¾‹æ¥åŠ æ·±å¯¹æ‰€å­¦çŸ¥è¯†çš„ç†è§£ã€‚</p><p>åœ¨è¯¥ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬é¦–å…ˆè°ƒç”¨sklearnçš„datasetsåº“æ¥æ„å»ºå¸¦å™ªå£°çš„é€»è¾‘å›å½’æ•°æ®é›†ï¼Œç„¶åæ„é€ ä¸€ä¸ªçº¿æ€§æ¨¡å‹ï¼Œå¹¶å¯¹çº¿æ€§æ¨¡å‹è¿›è¡Œè®­ç»ƒã€‚ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 5. ç»¼åˆç¤ºä¾‹1</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"><span class="keyword">import</span> torch.nn <span class="keyword">as</span> nn</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">from</span> sklearn <span class="keyword">import</span> datasets</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line"><span class="comment"># 0) create data</span></span><br><span class="line">x_numpy, y_numpy = datasets.make_regression(n_samples=<span class="number">500</span>, n_features=<span class="number">1</span>, noise=<span class="number">20</span>, random_state=<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">x,y = torch.from_numpy(x_numpy.astype(np.float32)), torch.from_numpy(y_numpy.astype(np.float32))</span><br><span class="line"><span class="comment"># print(x.shape)</span></span><br><span class="line"><span class="comment"># print(y.shape)</span></span><br><span class="line">y = y.view(y.shape[<span class="number">0</span>], -<span class="number">1</span>)</span><br><span class="line"><span class="comment"># print(y.shape)</span></span><br><span class="line">n_sample, n_features = x.shape</span><br><span class="line"></span><br><span class="line"><span class="comment"># 1) model</span></span><br><span class="line">input_size = n_features</span><br><span class="line">output_size = <span class="number">1</span></span><br><span class="line">model = nn.Linear(input_size, output_size)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2ï¼‰loss and optimizer</span></span><br><span class="line">learning_rate = <span class="number">0.01</span></span><br><span class="line">criterion = nn.MSELoss()</span><br><span class="line">optimizer = torch.optim.SGD(model.parameters(), lr=learning_rate)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3) training loop</span></span><br><span class="line">num_epochs = <span class="number">1000</span></span><br><span class="line">num_iter = <span class="number">100</span></span><br><span class="line"><span class="keyword">for</span> epoch <span class="keyword">in</span> <span class="built_in">range</span>(num_epochs):</span><br><span class="line"> <span class="comment"># foreard pass and loss</span></span><br><span class="line"> y_pred = model(x)</span><br><span class="line"> loss = criterion(y_pred, y)</span><br><span class="line"> <span class="comment"># backward pass</span></span><br><span class="line"> loss.backward()</span><br><span class="line"> <span class="comment"># updata</span></span><br><span class="line"> optimizer.step()</span><br><span class="line"></span><br><span class="line"> optimizer.zero_grad()</span><br><span class="line"></span><br><span class="line"> <span class="keyword">if</span>(epoch+<span class="number">1</span>)%num_iter == <span class="number">0</span>:</span><br><span class="line">     <span class="built_in">print</span>(<span class="string">f'epoch:<span class="subst">{epoch+<span class="number">1</span>}</span>, loss=<span class="subst">{loss.item():<span class="number">.4</span>f}</span>'</span>)</span><br><span class="line"><span class="comment"># plot</span></span><br><span class="line">predicted = model(x).detach().numpy()</span><br><span class="line">plt.plot(x_numpy, y_numpy, <span class="string">'ro'</span>)</span><br><span class="line">plt.plot(x_numpy, predicted, <span class="string">'b'</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></tbody></table></figure><p>è¿è¡Œç»“æœå¦‚ä¸‹ï¼š</p><img src="https://raw.githubusercontent.com/Skylyong/i/main/20210805210347.png" alt="image-20210805210341931" style="zoom:50%;"></blockquote><h4 id="4-6-ç»¼åˆç¤ºä¾‹2"><a href="#4-6-ç»¼åˆç¤ºä¾‹2" class="headerlink" title="4.6  ç»¼åˆç¤ºä¾‹2"></a>4.6  ç»¼åˆç¤ºä¾‹2</h4><blockquote><p>ä¹‹å‰çš„ç¤ºä¾‹ä¸­æˆ‘ä»¬æ²¡æœ‰å¯¹è®­ç»ƒåçš„æ¨¡å‹è¿›è¡Œæµ‹è¯•ï¼Œåœ¨è¿™ä¸ªä¾‹å­ä¸­æˆ‘ä»¬å¢åŠ äº†æ¨¡å‹æµ‹è¯•ï¼Œå¹¶ä¸”è°ƒç”¨sklearnä¸­å†…ç½®çš„â€œä¹³è…ºç™Œâ€æ•°æ®é›†æ¥å®Œæˆç¤ºä¾‹ï¼Œå¹¶ä¸”å¯¹è¾“å…¥ç‰¹å¾åšäº†å½’ä¸€åŒ–å¤„ç†ã€‚</p><p>ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 5. ç»¼åˆç¤ºä¾‹2</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"><span class="keyword">import</span> torch.nn <span class="keyword">as</span> nn</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">from</span> sklearn <span class="keyword">import</span> datasets</span><br><span class="line"><span class="keyword">from</span> sklearn.preprocessing <span class="keyword">import</span> StandardScaler</span><br><span class="line"><span class="keyword">from</span> sklearn.model_selection <span class="keyword">import</span> train_test_split</span><br><span class="line"></span><br><span class="line"><span class="comment"># 0) prepare data</span></span><br><span class="line">bc = datasets.load_breast_cancer()</span><br><span class="line">X,y = bc.data, bc.target</span><br><span class="line"></span><br><span class="line">n_samples, n_features = X.shape</span><br><span class="line"><span class="comment"># print(X.shape)</span></span><br><span class="line"><span class="comment"># print(y.shape)</span></span><br><span class="line"></span><br><span class="line">X_train, X_test, y_train, y_test = train_test_split(X,y,test_size=<span class="number">0.2</span>, random_state=<span class="number">1234</span>)</span><br><span class="line"><span class="comment"># scale å¯¹æ¯ä¸€åˆ—çš„ç‰¹å¾åšå‡å€¼æ–¹å·®å½’ä¸€åŒ–å¤„ç†ï¼Œå¦‚æœä¸åšçš„è¯å­¦ä¹ å‡ºæ¥çš„æ¨¡å‹çš„å‡†ç¡®ç‡å¤§å¤§é™ä½</span></span><br><span class="line">sc = StandardScaler()</span><br><span class="line"><span class="comment"># print('X_test before transform:', X_test)</span></span><br><span class="line">X_train = sc.fit_transform(X_train)</span><br><span class="line">X_test = sc.fit_transform(X_test)</span><br><span class="line"><span class="comment"># print('X_test after transform:', X_test.mean(), X_test.std())</span></span><br><span class="line"></span><br><span class="line">X_train = torch.from_numpy(X_train.astype(np.float32))</span><br><span class="line">X_test = torch.from_numpy(X_test.astype(np.float32))</span><br><span class="line">y_train = torch.from_numpy(y_train.astype(np.float32))</span><br><span class="line">y_test = torch.from_numpy(y_test.astype(np.float32))</span><br><span class="line"></span><br><span class="line">y_train = y_train.view(y_train.shape[<span class="number">0</span>], <span class="number">1</span>)</span><br><span class="line">y_test = y_test.view(y_test.shape[<span class="number">0</span>], <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 1) model</span></span><br><span class="line"><span class="comment"># f = wx + b, sigmoid at the end</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">LogisticRegression</span>(nn.Module):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, n_input_features</span>):</span><br><span class="line">        <span class="built_in">super</span>(LogisticRegression, <span class="variable language_">self</span>).__init__()</span><br><span class="line">        <span class="variable language_">self</span>.linear = nn.Linear(n_input_features, <span class="number">1</span>)</span><br><span class="line">        </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">forward</span>(<span class="params">self, x</span>):</span><br><span class="line">        y_pred = torch.sigmoid(<span class="variable language_">self</span>.linear(x))</span><br><span class="line">        <span class="keyword">return</span> y_pred</span><br><span class="line">    </span><br><span class="line">model = LogisticRegression(n_features)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2) loss and optimizer</span></span><br><span class="line">learning_rate = <span class="number">0.001</span></span><br><span class="line"></span><br><span class="line">criterion = nn.BCELoss()</span><br><span class="line">optimizer = torch.optim.SGD(model.parameters(), lr = learning_rate)</span><br><span class="line"><span class="comment"># 3) training loop</span></span><br><span class="line">num_epochs = <span class="number">1000</span></span><br><span class="line"><span class="keyword">for</span> epoch <span class="keyword">in</span> <span class="built_in">range</span>(num_epochs):</span><br><span class="line">    <span class="comment"># foreard pass and loss</span></span><br><span class="line">    y_pred = model(X_train)</span><br><span class="line">    loss = criterion(y_pred, y_train)</span><br><span class="line">    <span class="comment"># backward pass</span></span><br><span class="line">    loss.backward()</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># updates</span></span><br><span class="line">    optimizer.step()</span><br><span class="line">    </span><br><span class="line">    optimizer.zero_grad()</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span>(epoch+<span class="number">1</span>) % <span class="number">100</span> == <span class="number">0</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f'epoch:<span class="subst">{epoch+<span class="number">1</span>}</span>, loss = <span class="subst">{loss.item():<span class="number">.4</span>f}</span>'</span>)</span><br><span class="line">        </span><br><span class="line"><span class="keyword">with</span> torch.no_grad():</span><br><span class="line">    y_pred = model(X_test)</span><br><span class="line">    y_pred_cls = y_pred.<span class="built_in">round</span>() <span class="comment"># å¯¹sigmoidå‡ºæ¥çš„å€¼è¿›è¡Œå››èˆäº”å…¥</span></span><br><span class="line"><span class="comment">#     print(f'y_pred={y_pred}, y_pred_cls={y_pred_cls}')</span></span><br><span class="line">    acc = y_pred_cls.eq(y_test).<span class="built_in">sum</span>()/<span class="built_in">float</span>(y_test.shape[<span class="number">0</span>])</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f'acc = <span class="subst">{acc:<span class="number">.4</span>f}</span>'</span>)</span><br></pre></td></tr></tbody></table></figure></blockquote><h3 id="5-Dataset-and-Dataload-Class"><a href="#5-Dataset-and-Dataload-Class" class="headerlink" title="5. Dataset and Dataload Class"></a>5. Dataset and Dataload Class</h3><h4 id="5-1-Dataset-and-Dataload"><a href="#5-1-Dataset-and-Dataload" class="headerlink" title="5.1 Dataset and Dataload"></a>5.1 Dataset and Dataload</h4><blockquote><p>pytorchä¸­ç”±datasetç±»ç®¡ç†æ•°æ®é›†ï¼Œå¯ä»¥é€šè¿‡ç»§æ‰¿datasetç±»æ¥è‡ªå®šä¹‰æ•°æ®é›†ï¼Œä»£ç æ¨¡æ¿å¦‚ä¸‹ï¼š</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MyDataset</span>(<span class="title class_ inherited__">Dataset</span>):</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line"> <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">__getitem__</span>(<span class="params">self, index</span>):</span><br><span class="line"> <span class="keyword">return</span> a signel data</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">__len__</span>(<span class="params">self</span>):</span><br><span class="line"> <span class="keyword">return</span> length of dataset</span><br></pre></td></tr></tbody></table></figure><p>å®šä¹‰å¥½datasetä¹‹åï¼Œå¯ä»¥é€šè¿‡DataLoaderæ¥æ„é€ å¯ä¾›è®­ç»ƒçš„è¿­ä»£å™¨ï¼Œä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dataloader = DataLoader(dataset=dataset, batch_size=<span class="number">4</span>, shuffle=<span class="literal">True</span>, num_workers=<span class="number">2</span>)</span><br></pre></td></tr></tbody></table></figure><p>ç¤ºä¾‹å¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">epoch = 1 forward and backward pass of ALL training samples</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">bach_size = number of training samples in one forward &amp; backward pass</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">number of iterations = number of passes, each pass using [batch_size] number of samples</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">e.g. 100 samples, batch_size = 20 --&gt; 100/20 = 5 iterations for 1 epoch</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"><span class="keyword">import</span> torchvision</span><br><span class="line"><span class="keyword">from</span> torch.utils.data <span class="keyword">import</span> Dataset, DataLoader</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> math</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> <span class="keyword">not</span> os.getcwd().endswith(<span class="string">'pytorchLearning'</span>):</span><br><span class="line"> os.chdir(os.getcwd()+<span class="string">'/Desktop/pytorchLearning'</span>)</span><br><span class="line"><span class="comment"># print (os.getcwd())</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">WineDataset</span>(<span class="title class_ inherited__">Dataset</span>):</span><br><span class="line"></span><br><span class="line"> <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">     <span class="comment"># data loading</span></span><br><span class="line">     xy = np.loadtxt(<span class="string">'./data/wine/wine.csv'</span>, delimiter=<span class="string">','</span>, dtype=np.float32, skiprows=<span class="number">1</span>)</span><br><span class="line">     <span class="variable language_">self</span>.x = torch.from_numpy(xy[:,<span class="number">1</span>:])</span><br><span class="line">     <span class="variable language_">self</span>.y = torch.from_numpy(xy[:, [<span class="number">0</span>]])</span><br><span class="line">     <span class="variable language_">self</span>.n_samples = xy.shape[<span class="number">0</span>]</span><br><span class="line"></span><br><span class="line"> <span class="keyword">def</span> <span class="title function_">__getitem__</span>(<span class="params">self, index</span>):</span><br><span class="line">     <span class="keyword">return</span> <span class="variable language_">self</span>.x[index], <span class="variable language_">self</span>.y[index]</span><br><span class="line"></span><br><span class="line"> <span class="keyword">def</span> <span class="title function_">__len__</span>(<span class="params">self</span>):</span><br><span class="line">     <span class="keyword">return</span> <span class="variable language_">self</span>.n_samples</span><br><span class="line"><span class="comment"># # How we can use dataset</span></span><br><span class="line"><span class="comment"># dataset = WineDataset()</span></span><br><span class="line"><span class="comment"># first_data = dataset[0]</span></span><br><span class="line"><span class="comment"># features, label = first_data</span></span><br><span class="line"><span class="comment"># print(features, label)</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># # How we can use dataload</span></span><br><span class="line"><span class="comment"># dataloader = DataLoader(dataset=dataset, batch_size=4, shuffle=True, num_workers=2)</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># dataiter = iter(dataloader)</span></span><br><span class="line"><span class="comment"># data = dataiter.next()</span></span><br><span class="line"><span class="comment"># features, label = data</span></span><br><span class="line"><span class="comment"># print(features, label)</span></span><br><span class="line"></span><br><span class="line">dataset = WineDataset()</span><br><span class="line">dataloader = DataLoader(dataset=dataset, batch_size=<span class="number">4</span>, shuffle=<span class="literal">True</span>, num_workers=<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># training loop</span></span><br><span class="line">num_epochs=<span class="number">2</span></span><br><span class="line">total_samples = <span class="built_in">len</span>(dataset)</span><br><span class="line">n_iterations = math.ceil(total_samples/<span class="number">4</span>)</span><br><span class="line"><span class="built_in">print</span>(total_samples, n_iterations)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> epoch <span class="keyword">in</span> <span class="built_in">range</span>(num_epochs):</span><br><span class="line"> <span class="keyword">for</span> i,(inputs, label) <span class="keyword">in</span> <span class="built_in">enumerate</span>(dataloader):</span><br><span class="line">     <span class="comment"># forward backward, update</span></span><br><span class="line">     <span class="keyword">if</span> (i+<span class="number">1</span>) % <span class="number">5</span> == <span class="number">0</span>:</span><br><span class="line">         <span class="built_in">print</span>(<span class="string">f'epoch <span class="subst">{epoch+<span class="number">1</span>}</span>/<span class="subst">{num_epochs}</span>, step <span class="subst">{i+<span class="number">1</span>}</span>/<span class="subst">{n_iterations}</span>, inputs <span class="subst">{inputs.shape}</span>'</span>)</span><br></pre></td></tr></tbody></table></figure></blockquote><h4 id="5-2-Transforms-for-the-dataset"><a href="#5-2-Transforms-for-the-dataset" class="headerlink" title="5.2 Transforms for the dataset"></a>5.2 Transforms for the dataset</h4><blockquote><p>pytorché€šè¿‡ä¼ å…¥transformsç±»æ¥å¯¹è¾“å…¥çš„æ•°æ®è¿›è¡ŒæŸç§å˜åŒ–ï¼Œtransformsç±»å¯ä»¥è°ƒç”¨åº“å®šä¹‰å¥½çš„ï¼Œä¹Ÿå¯ä»¥æ ¹æ®éœ€è¦è‡ªå®šä¹‰ã€‚</p><p>ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">Transforms can be applied to PIL images, tensor, ndarrays, or custom data</span></span><br><span class="line"><span class="string">during criterion of the dataset</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">complete list of built-in transforms:</span></span><br><span class="line"><span class="string">https://pytorch.org/docs/stable/torchvision/transforms.html</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">On images</span></span><br><span class="line"><span class="string">---------</span></span><br><span class="line"><span class="string">CenterCrop, Grayscale, Pad, RandomAffine,</span></span><br><span class="line"><span class="string">RandomCrop, RandomHorizontalFlip, RandomHorizon</span></span><br><span class="line"><span class="string">Resize, scale</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">On Tensors</span></span><br><span class="line"><span class="string">----------</span></span><br><span class="line"><span class="string">LinearTransformation, Normalize, RandomErasing</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Conversion</span></span><br><span class="line"><span class="string">----------</span></span><br><span class="line"><span class="string">ToPILIamage: from tensor or ndarray</span></span><br><span class="line"><span class="string">ToTensor: from numpy.ndarray or PILImage</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Generic</span></span><br><span class="line"><span class="string">-------</span></span><br><span class="line"><span class="string">Use Lambda</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Custom</span></span><br><span class="line"><span class="string">------</span></span><br><span class="line"><span class="string">Write own Class</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Compose mutiple Transforms</span></span><br><span class="line"><span class="string">--------------------------</span></span><br><span class="line"><span class="string">composed = transforms.Compose([Rescale(256),</span></span><br><span class="line"><span class="string">                                RandomCrop(224)])</span></span><br><span class="line"><span class="string">torchvision.transforms.Rescale(256)</span></span><br><span class="line"><span class="string">torchvision.transforms.ToTensor()</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"><span class="keyword">import</span> torchvision</span><br><span class="line"><span class="keyword">from</span> torch.utils.data <span class="keyword">import</span> Dataset</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">WineDataset</span>(<span class="title class_ inherited__">Dataset</span>):</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, transform=<span class="literal">None</span></span>):</span><br><span class="line">        xy = np.loadtxt(<span class="string">'./data/wine/wine.csv'</span>, delimiter=<span class="string">','</span>, dtype=np.float32, skiprows=<span class="number">1</span>)</span><br><span class="line">        <span class="variable language_">self</span>.n_samples = xy.shape[<span class="number">0</span>]</span><br><span class="line"></span><br><span class="line">        <span class="comment"># note that we do not convert to tensor here</span></span><br><span class="line">        <span class="variable language_">self</span>.x = xy[:,<span class="number">1</span>:]</span><br><span class="line">        <span class="variable language_">self</span>.y = xy[:, [<span class="number">0</span>]]</span><br><span class="line"></span><br><span class="line">        <span class="variable language_">self</span>.transform = transform</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__getitem__</span>(<span class="params">self, index</span>):</span><br><span class="line">        sample = <span class="variable language_">self</span>.x[index], <span class="variable language_">self</span>.y[index]</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> <span class="variable language_">self</span>.transform:</span><br><span class="line">            sample = <span class="variable language_">self</span>.transform(sample)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> sample</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__len__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">self</span>.n_samples</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ToTensor</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__call__</span>(<span class="params">self, sample</span>):</span><br><span class="line">        inputs, targets = sample</span><br><span class="line">        <span class="keyword">return</span> torch.from_numpy(inputs), torch.from_numpy(targets)</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MulTransform</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, factor</span>):</span><br><span class="line">        <span class="variable language_">self</span>.factor = factor</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__call__</span>(<span class="params">self, sample</span>):</span><br><span class="line">        inputs, target = sample</span><br><span class="line">        inputs *= <span class="variable language_">self</span>.factor</span><br><span class="line">        <span class="keyword">return</span> inputs, target</span><br><span class="line"></span><br><span class="line">dataset = WineDataset(transform=ToTensor())</span><br><span class="line">first_data = dataset[<span class="number">0</span>]</span><br><span class="line">features, label = first_data</span><br><span class="line"><span class="built_in">print</span>(features)</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(features), <span class="built_in">type</span>(label))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">composed = torchvision.transforms.Compose([ToTensor(), MulTransform(<span class="number">2</span>)]) <span class="comment"># æŠŠä¸¤ä¸ªtransformsåˆå¹¶ä¸€èµ·åº”ç”¨</span></span><br><span class="line">dataset = WineDataset(transform=composed)</span><br><span class="line">first_data = dataset[<span class="number">0</span>]</span><br><span class="line">features, label = first_data</span><br><span class="line"><span class="built_in">print</span>(features)</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(features), <span class="built_in">type</span>(label))</span><br></pre></td></tr></tbody></table></figure></blockquote><h3 id="6-Softmax-and-Cross-Entropy"><a href="#6-Softmax-and-Cross-Entropy" class="headerlink" title="6. Softmax and Cross-Entropy"></a>6. Softmax and Cross-Entropy</h3><h4 id="6-1-Softmax"><a href="#6-1-Softmax" class="headerlink" title="6.1 Softmax"></a>6.1 Softmax</h4><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Softmax</span></span><br><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"><span class="keyword">import</span> torch.nn <span class="keyword">as</span> nn</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">softmax</span>(<span class="params">x</span>):</span><br><span class="line">    <span class="keyword">return</span> np.exp(x) / np.<span class="built_in">sum</span>(np.exp(x), axis=<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">x = np.array([-<span class="number">2</span>, <span class="number">1</span>, <span class="number">0.1</span>])</span><br><span class="line">outputs = softmax(x)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">'softmax numpy:'</span>, outputs)</span><br><span class="line"></span><br><span class="line">x = torch.from_numpy(x)</span><br><span class="line">outputs = torch.softmax(x, axis=<span class="number">0</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">'softmax torch:'</span>, outputs)</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><h4 id="6-2-Cross-entropy"><a href="#6-2-Cross-entropy" class="headerlink" title="6.2 Cross entropy"></a>6.2 Cross entropy</h4><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Cross entropy</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">cross_entropy</span>(<span class="params">actual, predicted</span>):</span><br><span class="line">    <span class="keyword">return</span> -np.<span class="built_in">sum</span>(actual*np.log(predicted)).mean()</span><br><span class="line"></span><br><span class="line"><span class="comment"># y must be one hot encoded</span></span><br><span class="line"><span class="comment"># if class 0: [1 0 0]</span></span><br><span class="line"><span class="comment"># if class 1: [0 1 0]</span></span><br><span class="line"><span class="comment"># if class 2: [0 0 1]</span></span><br><span class="line">Y = np.array([<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># y_pred has probabilities</span></span><br><span class="line">y_pred_good = np.array([<span class="number">0.7</span>,<span class="number">0.2</span>,<span class="number">0.1</span>])</span><br><span class="line">y_pred_bad = np.array([<span class="number">0.1</span>, <span class="number">0.3</span>, <span class="number">0.6</span>])</span><br><span class="line">l1 = cross_entropy(Y, y_pred_good)</span><br><span class="line">l2 = cross_entropy(Y, y_pred_bad)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f'Loss1 numpy:<span class="subst">{l1:<span class="number">.4</span>f}</span>'</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f'Loss2 numpy:<span class="subst">{l2:<span class="number">.4</span>f}</span>'</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># cross entropy by pytorch</span></span><br><span class="line"><span class="comment"># in pytorch: Use nn.CrossEntropyLoss()</span></span><br><span class="line"><span class="comment"># No softmax at the end!</span></span><br><span class="line">loss = nn.CrossEntropyLoss()</span><br><span class="line"></span><br><span class="line"><span class="comment"># nsamples x nclasses = 1x3</span></span><br><span class="line">y = torch.tensor([<span class="number">0</span>])</span><br><span class="line">y_pred_good = torch.tensor([[<span class="number">2.0</span>, <span class="number">1.0</span>, <span class="number">0.1</span>]])</span><br><span class="line">y_pred_bad = torch.tensor([[<span class="number">0.5</span>, <span class="number">2.0</span>, <span class="number">0.3</span>]])</span><br><span class="line"></span><br><span class="line">l1 = loss(y_pred_good, y)</span><br><span class="line">l2 = loss(y_pred_bad, y)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f'Loss1 numpy:<span class="subst">{l1:<span class="number">.4</span>f}</span>'</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f'Loss2 numpy:<span class="subst">{l2:<span class="number">.4</span>f}</span>'</span>)</span><br><span class="line"></span><br><span class="line">_, prediction1 = torch.<span class="built_in">max</span>(y_pred_good, <span class="number">1</span>)</span><br><span class="line">_, prediction2 = torch.<span class="built_in">max</span>(y_pred_bad, <span class="number">1</span>)</span><br><span class="line"><span class="built_in">print</span>(prediction1)</span><br><span class="line"><span class="built_in">print</span>(prediction2)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 3 samples</span></span><br><span class="line">y = torch.tensor([<span class="number">2</span>,<span class="number">0</span>,<span class="number">1</span>])</span><br><span class="line">y_pred_good = torch.tensor([[<span class="number">0.1</span>, <span class="number">1.0</span>, <span class="number">2.0</span>],</span><br><span class="line">                            [<span class="number">2.0</span>, <span class="number">1.0</span>, <span class="number">0.5</span> ],</span><br><span class="line">                            [<span class="number">0.1</span>, <span class="number">2.0</span>, <span class="number">1.0</span>]])</span><br><span class="line">y_pred_bad = torch.tensor([[<span class="number">2.0</span>, <span class="number">1.0</span>, <span class="number">0.1</span>],</span><br><span class="line">                            [<span class="number">1.0</span>, <span class="number">0.1</span>, <span class="number">2.0</span> ],</span><br><span class="line">                            [<span class="number">0.1</span>, <span class="number">1.0</span>, <span class="number">2.0</span>]])</span><br><span class="line"></span><br><span class="line">l1 = loss(y_pred_good, y)</span><br><span class="line">l2 = loss(y_pred_bad, y)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f'Loss1 numpy:<span class="subst">{l1.item():<span class="number">.4</span>f}</span>'</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f'Loss2 numpy:<span class="subst">{l2.item():<span class="number">.4</span>f}</span>'</span>)</span><br><span class="line"></span><br><span class="line">_, prediction1 = torch.<span class="built_in">max</span>(y_pred_good, <span class="number">1</span>)</span><br><span class="line">_, prediction2 = torch.<span class="built_in">max</span>(y_pred_bad, <span class="number">1</span>)</span><br><span class="line"><span class="built_in">print</span>(prediction1)</span><br><span class="line"><span class="built_in">print</span>(prediction2)</span><br></pre></td></tr></tbody></table></figure><h3 id="7-Activation-function"><a href="#7-Activation-function" class="headerlink" title="7. Activation function"></a>7. Activation function</h3><blockquote><p>Activation functions apply a non-linear transform and decide whether a neural should be activated or not.</p><h4 id="Most-popular-activation-functions"><a href="#Most-popular-activation-functions" class="headerlink" title="Most popular activation functions"></a>Most popular activation functions</h4><ol><li>Step function â€“&gt; Not used in practice</li><li>Sigmoid</li><li>TanH</li><li>ReLU</li><li>Leaky ReLU</li><li>Softmax</li></ol></blockquote><h3 id="8-ç»¼åˆç»ƒä¹ -MNIST"><a href="#8-ç»¼åˆç»ƒä¹ -MNIST" class="headerlink" title="8. ç»¼åˆç»ƒä¹  MNIST"></a>8. ç»¼åˆç»ƒä¹  MNIST</h3><blockquote><ol><li><p>MNIST</p></li><li><p>DataLoader, Transformation</p></li><li><p>Multilayer Neural Net, activation function</p></li><li><p>Loss and Optimizer</p></li><li><p>Tra</p><p>ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"><span class="keyword">import</span> torch.nn <span class="keyword">as</span> nn</span><br><span class="line"><span class="keyword">import</span> torchvision</span><br><span class="line"><span class="keyword">import</span> torchvision.transforms <span class="keyword">as</span> transforms</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> torch.nn.functional <span class="keyword">as</span> F</span><br><span class="line"><span class="keyword">import</span> math</span><br><span class="line">                                 </span><br><span class="line"><span class="comment"># device config</span></span><br><span class="line"><span class="keyword">from</span> torch.optim <span class="keyword">import</span> optimizer</span><br><span class="line">                                 </span><br><span class="line">device =torch.device(<span class="string">'cuda'</span> <span class="keyword">if</span> torch.cuda.is_available() <span class="keyword">else</span> <span class="string">'cpu'</span>)</span><br><span class="line">                                 </span><br><span class="line"><span class="comment"># hyper parameters</span></span><br><span class="line">input_size = <span class="number">784</span> <span class="comment"># 28x28</span></span><br><span class="line">hidden_size = <span class="number">128</span></span><br><span class="line">num_classes = <span class="number">10</span></span><br><span class="line">num_epochs = <span class="number">2</span></span><br><span class="line">batch_size = <span class="number">100</span></span><br><span class="line">learning_rate = <span class="number">0.001</span></span><br><span class="line">                                 </span><br><span class="line"><span class="comment"># MNIST DataSet</span></span><br><span class="line">train_dataset = torchvision.datasets.MNIST(root=<span class="string">'./data'</span>, train=<span class="literal">True</span>,</span><br><span class="line">                                           transform=transforms.ToTensor(),download=<span class="literal">True</span>)</span><br><span class="line">test_dataset = torchvision.datasets.MNIST(root=<span class="string">'./data'</span>, train=<span class="literal">False</span>,</span><br><span class="line">                                           transform=transforms.ToTensor())</span><br><span class="line">train_loader = torch.utils.data.DataLoader(dataset=train_dataset,batch_size=batch_size,</span><br><span class="line">                                           shuffle=<span class="literal">True</span>)</span><br><span class="line">test_loader = torch.utils.data.DataLoader(dataset=test_dataset,batch_size=batch_size,</span><br><span class="line">                                           shuffle=<span class="literal">False</span>)</span><br><span class="line">examples = <span class="built_in">iter</span>(train_loader)</span><br><span class="line">features, label = examples.<span class="built_in">next</span>()</span><br><span class="line"><span class="built_in">print</span>(features.shape)</span><br><span class="line"><span class="built_in">print</span>(label.shape)</span><br><span class="line">                                 </span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">6</span>):</span><br><span class="line">    plt.subplot(<span class="number">2</span>,<span class="number">3</span>, i+<span class="number">1</span>)</span><br><span class="line">    plt.imshow(features[i][<span class="number">0</span>], cmap=<span class="string">'gray'</span>)</span><br><span class="line">plt.show()</span><br><span class="line">                                 </span><br><span class="line"><span class="comment"># model</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">NeuralNet</span>(nn.Module):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, input_size, hidden_size, num_classes</span>):</span><br><span class="line">        <span class="built_in">super</span>(NeuralNet, <span class="variable language_">self</span>).__init__()</span><br><span class="line">        <span class="variable language_">self</span>.l1 = nn.Linear(input_size, hidden_size)</span><br><span class="line">        <span class="variable language_">self</span>.l2 = nn.Linear(hidden_size, num_classes)</span><br><span class="line">                                 </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">forward</span>(<span class="params">self, x</span>):</span><br><span class="line">        out = F.relu(<span class="variable language_">self</span>.l1(x))</span><br><span class="line">        out = <span class="variable language_">self</span>.l2(out)</span><br><span class="line">        <span class="keyword">return</span> out</span><br><span class="line">                                 </span><br><span class="line">model = NeuralNet(input_size, hidden_size, num_classes)</span><br><span class="line"><span class="comment"># loss and optimizer</span></span><br><span class="line">criterion = nn.CrossEntropyLoss()</span><br><span class="line">optimizer = torch.optim.Adam(model.parameters(), lr=learning_rate)</span><br><span class="line">                                 </span><br><span class="line"><span class="comment"># training loop</span></span><br><span class="line">n_total_steps = <span class="built_in">len</span>(train_loader)</span><br><span class="line"><span class="keyword">for</span> epoch <span class="keyword">in</span> <span class="built_in">range</span>(num_epochs):</span><br><span class="line">    <span class="keyword">for</span> i, (images, label) <span class="keyword">in</span> <span class="built_in">enumerate</span>(train_loader):</span><br><span class="line">        <span class="comment"># 100, 1, 28, 28</span></span><br><span class="line">        <span class="comment"># 100, 784</span></span><br><span class="line">        images = images.reshape(-<span class="number">1</span>, <span class="number">28</span>*<span class="number">28</span>).to(device)</span><br><span class="line">        label = label.to(device)</span><br><span class="line">                                 </span><br><span class="line">        <span class="comment"># forward</span></span><br><span class="line">        outputs = model(images)</span><br><span class="line">        loss = criterion(outputs, label)</span><br><span class="line">                                 </span><br><span class="line">        <span class="comment"># backward</span></span><br><span class="line">        loss.backward()</span><br><span class="line">        optimizer.step()</span><br><span class="line">        optimizer.zero_grad()</span><br><span class="line">                                 </span><br><span class="line">        <span class="keyword">if</span> (i+<span class="number">1</span>) % <span class="number">100</span> ==<span class="number">0</span>:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f'epoch <span class="subst">{epoch+<span class="number">1</span>}</span> / <span class="subst">{num_epochs}</span>, step <span class="subst">{i+<span class="number">1</span>}</span> / <span class="subst">{n_total_steps}</span>, loss <span class="subst">{loss.item():<span class="number">.4</span>f}</span>'</span>)</span><br><span class="line">                                 </span><br><span class="line"><span class="comment"># test</span></span><br><span class="line"><span class="keyword">with</span> torch.no_grad():</span><br><span class="line">    n_correct = <span class="number">0</span></span><br><span class="line">    n_sample = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> images, label <span class="keyword">in</span> test_loader:</span><br><span class="line">        images = images.reshape(-<span class="number">1</span>, <span class="number">28</span>*<span class="number">28</span>).to(device)</span><br><span class="line">        label = label.to(device)</span><br><span class="line">        outputs = model(images)</span><br><span class="line">        <span class="comment"># print(outputs)</span></span><br><span class="line">                                 </span><br><span class="line">        <span class="comment"># value, index</span></span><br><span class="line">        _, prdiction = torch.<span class="built_in">max</span>(outputs, <span class="number">1</span>)</span><br><span class="line">        n_correct += torch.<span class="built_in">sum</span>(torch.eq(prdiction, label)).item()</span><br><span class="line">        n_sample += label.shape[<span class="number">0</span>]</span><br><span class="line">                                 </span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f'Acc: <span class="subst">{<span class="number">100.0</span>*n_correct / n_sample}</span>'</span>)</span><br><span class="line">                                 </span><br></pre></td></tr></tbody></table></figure><p>è¿è¡Œç»“æœï¼š</p><img src="https://raw.githubusercontent.com/Skylyong/i/main/20210805213343.png" alt="image-20210805213343033" style="zoom:50%;"></li></ol></blockquote><h3 id="9-Convolutional-Neural-Net-CNN"><a href="#9-Convolutional-Neural-Net-CNN" class="headerlink" title="9.  Convolutional Neural Net(CNN)"></a>9.  Convolutional Neural Net(CNN)</h3><blockquote><p>è¿™é‡Œæˆ‘ä»¬é€šè¿‡æ„é€ CNNæ¨¡å‹å¹¶å¯¹å›¾ç‰‡è¿›è¡Œåˆ†ç±»ï¼Œé‡‡ç”¨â€œCIFAR10â€æ•°æ®é›†ï¼Œç„¶åè‡ªå®šä¹‰Modelï¼Œè°ƒç”¨â€œäº¤å‰ç†µæŸå¤±å‡½æ•°â€å’Œâ€œSGDâ€ä¼˜åŒ–å™¨æ¥å¯¹æ¨¡å‹è®­ç»ƒï¼Œæ¨¡å‹è®­ç»ƒç»“æŸä¹‹åå¯¹åˆ†ç±»å™¨çš„åˆ†ç±»å‡†ç¡®ç‡è¿›è¡Œäº†æµ‹è¯•ã€‚</p><p>å®éªŒä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"><span class="keyword">import</span> torch.nn <span class="keyword">as</span> nn</span><br><span class="line"><span class="keyword">import</span> torchvision</span><br><span class="line"><span class="keyword">import</span> torchvision.transforms <span class="keyword">as</span> transforms</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> torch.nn.functional <span class="keyword">as</span> F</span><br><span class="line"></span><br><span class="line"><span class="comment"># device config</span></span><br><span class="line">device =torch.device(<span class="string">'cuda'</span> <span class="keyword">if</span> torch.cuda.is_available() <span class="keyword">else</span> <span class="string">'cpu'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># hyper parameters</span></span><br><span class="line">num_epochs = <span class="number">4</span></span><br><span class="line">batch_size = <span class="number">4</span></span><br><span class="line">learning_rate =<span class="number">0.001</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># dataset has PILImage images of range[0,1]</span></span><br><span class="line"><span class="comment"># We transform them to Tensor of normalised range[-1, 1]</span></span><br><span class="line">transform = transforms.Compose(</span><br><span class="line">    [</span><br><span class="line">        transforms.ToTensor(),</span><br><span class="line">        transforms.Normalize((<span class="number">0.5</span>, <span class="number">0.5</span>, <span class="number">0.5</span>),(<span class="number">0.5</span>, <span class="number">0.5</span>, <span class="number">0.5</span>))</span><br><span class="line">    ]</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">train_dataset = torchvision.datasets.CIFAR10(root=<span class="string">'./data'</span>, train=<span class="literal">True</span>,</span><br><span class="line">                                             download=<span class="literal">True</span>, transform=transform)</span><br><span class="line">test_dataset = torchvision.datasets.CIFAR10(root=<span class="string">'./data'</span>, train=<span class="literal">False</span>,</span><br><span class="line">                                             download=<span class="literal">True</span>, transform=transform)</span><br><span class="line">train_loader = torch.utils.data.DataLoader(dataset=train_dataset, batch_size=batch_size,</span><br><span class="line">                                           shuffle=<span class="literal">True</span>)</span><br><span class="line">test_loader = torch.utils.data.DataLoader(dataset=test_dataset, batch_size=batch_size,</span><br><span class="line">                                           shuffle=<span class="literal">False</span>)</span><br><span class="line"></span><br><span class="line">classes =(<span class="string">'plane'</span>, <span class="string">'car'</span>,<span class="string">'bird'</span>,<span class="string">'cat'</span>,<span class="string">'deer'</span>,<span class="string">'dog'</span>,<span class="string">'frog'</span>,</span><br><span class="line">          <span class="string">'horse'</span>,<span class="string">'ship'</span>,<span class="string">'truck'</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">imshow</span>(<span class="params">img</span>):</span><br><span class="line">    img = img / <span class="number">2</span> + <span class="number">0.5</span>  <span class="comment"># unnormalize</span></span><br><span class="line">    npimg = img.numpy()</span><br><span class="line">    plt.imshow(np.transpose(npimg, (<span class="number">1</span>, <span class="number">2</span>, <span class="number">0</span>)))</span><br><span class="line">    plt.show()</span><br><span class="line"></span><br><span class="line"><span class="comment"># model</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ConvNet</span>(nn.Module):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">super</span>(ConvNet, <span class="variable language_">self</span>).__init__()</span><br><span class="line">        <span class="variable language_">self</span>.conv1 = nn.Conv2d(<span class="number">3</span>,<span class="number">6</span>,<span class="number">5</span>)</span><br><span class="line">        <span class="variable language_">self</span>.pool = nn.MaxPool2d(<span class="number">2</span>,<span class="number">2</span>)</span><br><span class="line">        <span class="variable language_">self</span>.conv2 = nn.Conv2d(<span class="number">6</span>,<span class="number">16</span>,<span class="number">5</span>)</span><br><span class="line">        <span class="variable language_">self</span>.fc1 = nn.Linear(<span class="number">16</span>*<span class="number">5</span>*<span class="number">5</span>, <span class="number">120</span>)</span><br><span class="line">        <span class="variable language_">self</span>.fc2 = nn.Linear(<span class="number">120</span>, <span class="number">84</span>)</span><br><span class="line">        <span class="variable language_">self</span>.fc3 = nn.Linear(<span class="number">84</span>, <span class="number">10</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">forward</span>(<span class="params">self,x</span>):</span><br><span class="line">        x = <span class="variable language_">self</span>.pool( F.relu(<span class="variable language_">self</span>.conv1(x)))</span><br><span class="line">        x = <span class="variable language_">self</span>.pool(F.relu(<span class="variable language_">self</span>.conv2(x)))</span><br><span class="line">        x = x.view(-<span class="number">1</span>,<span class="number">16</span>*<span class="number">5</span>*<span class="number">5</span>)</span><br><span class="line">        x = F.relu(<span class="variable language_">self</span>.fc1(x))</span><br><span class="line">        x = F.relu(<span class="variable language_">self</span>.fc2(x))</span><br><span class="line">        x = <span class="variable language_">self</span>.fc3(x)</span><br><span class="line">        <span class="keyword">return</span> x</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">model = ConvNet().to(device)</span><br><span class="line">criterion = nn.CrossEntropyLoss()</span><br><span class="line">optimizer = torch.optim.SGD(model.parameters(), lr=learning_rate)</span><br><span class="line"></span><br><span class="line">n_total_steps = <span class="built_in">len</span>(train_loader)</span><br><span class="line"><span class="keyword">for</span> epoch <span class="keyword">in</span> <span class="built_in">range</span>(num_epochs):</span><br><span class="line">    <span class="keyword">for</span> i,(images, labels) <span class="keyword">in</span> <span class="built_in">enumerate</span>(train_loader):</span><br><span class="line">        <span class="comment"># origin shape:[4,3,32,32] = 4,3, 1024</span></span><br><span class="line">        <span class="comment"># input_layer:3 input channels, 6 output channels, 5 kernel size</span></span><br><span class="line">        images = images.to(device)</span><br><span class="line">        labels = labels.to(device)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># Forward pass</span></span><br><span class="line">        outputs = model(images)</span><br><span class="line">        loss = criterion(outputs, labels)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># Backward and optimizer</span></span><br><span class="line">        optimizer.zero_grad()</span><br><span class="line">        loss.backward()</span><br><span class="line">        optimizer.step()</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (i+<span class="number">1</span>) % <span class="number">2000</span> == <span class="number">0</span>:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f'Epoch [<span class="subst">{epoch+<span class="number">1</span>}</span>/<span class="subst">{num_epochs}</span>], Step [<span class="subst">{i+<span class="number">1</span>}</span>/<span class="subst">{n_total_steps}</span>], Loss: <span class="subst">{loss.item():<span class="number">.4</span>f}</span>'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># test</span></span><br><span class="line"><span class="keyword">with</span> torch.no_grad():</span><br><span class="line">    n_correct = <span class="number">0</span></span><br><span class="line">    n_samples = <span class="number">0</span></span><br><span class="line">    n_class_correct = [<span class="number">0</span> <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>)]</span><br><span class="line">    n_class_samples = [<span class="number">0</span> <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>)]</span><br><span class="line">    <span class="keyword">for</span> images, labels <span class="keyword">in</span> test_loader:</span><br><span class="line">        images = images.to(device)</span><br><span class="line">        labels = labels.to(device)</span><br><span class="line">        outputs = model(images)</span><br><span class="line">        <span class="comment"># max returns (value ,index)</span></span><br><span class="line">        _, predicted = torch.<span class="built_in">max</span>(outputs, <span class="number">1</span>)</span><br><span class="line">        n_samples += labels.size(<span class="number">0</span>)</span><br><span class="line">        n_correct += (predicted == labels).<span class="built_in">sum</span>().item()</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(batch_size):</span><br><span class="line">            label = labels[i]</span><br><span class="line">            pred = predicted[i]</span><br><span class="line">            <span class="keyword">if</span> (label == pred):</span><br><span class="line">                n_class_correct[label] += <span class="number">1</span></span><br><span class="line">            n_class_samples[label] += <span class="number">1</span></span><br><span class="line"></span><br><span class="line">    acc = <span class="number">100.0</span> * n_correct / n_samples</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f'Accuracy of the network: <span class="subst">{acc}</span> %'</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>):</span><br><span class="line">        acc = <span class="number">100.0</span> * n_class_correct[i] / n_class_samples[i]</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f'Accuracy of <span class="subst">{classes[i]}</span>: <span class="subst">{acc}</span> %'</span>)</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure></blockquote><h3 id="10-Transfer-Learning"><a href="#10-Transfer-Learning" class="headerlink" title="10. Transfer Learning"></a>10. Transfer Learning</h3><blockquote><p>è¿™é‡Œæˆ‘ä»¬å­¦ä¹ è¿ç§»å­¦ä¹ ï¼Œä¸»è¦å­¦ä¹ å¦‚ä¸‹ä¸‰ä¸ªçŸ¥è¯†ç‚¹ï¼š</p><ol><li><p>ImageFolder: how we can use ImageFolder</p></li><li><p>Scheduler: how we use a scheduler to change the learning rate</p></li><li><p>Transfer Learning</p><p>è¿ç§»å­¦ä¹ æ˜¯æŒ‡åœ¨æŸä¸€ä¸ªä»»åŠ¡ä¸Šè®­ç»ƒå¥½æ¨¡å‹ï¼Œç„¶åå°†è®­ç»ƒå¥½çš„æ¨¡å‹è¿ç§»åˆ°å¦å¤–ä¸€ä¸ªä»»åŠ¡ä¸­ï¼Œå›ºå®šæ¨¡å‹çš„æŸäº›å‚æ•°ï¼Œå¯¹å¦å¤–ä¸€äº›å‚æ•°è¿›è¡Œå­¦ä¹ ï¼Œä»¥ä¾¿æ¨¡å‹èƒ½å¤Ÿé€‚åº”æ–°çš„ä»»åŠ¡ã€‚</p><p>å®éªŒä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Transfer Learning</span></span><br><span class="line">                                 </span><br><span class="line"><span class="comment"># 1) ImageFolder: how we can use ImageFolder</span></span><br><span class="line"><span class="comment"># 2) Scheduler: how we use a scheduler to change the learning rate</span></span><br><span class="line"><span class="comment"># 3) Transfer Learning:</span></span><br><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"><span class="keyword">import</span> torch.nn <span class="keyword">as</span> nn</span><br><span class="line"><span class="keyword">import</span> torch.optim <span class="keyword">as</span> optim</span><br><span class="line"><span class="keyword">from</span> torch.optim <span class="keyword">import</span> lr_scheduler</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> torchvision</span><br><span class="line"><span class="keyword">from</span> torchvision <span class="keyword">import</span> datasets, models, transforms</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> copy</span><br><span class="line">                                 </span><br><span class="line"><span class="comment"># device config</span></span><br><span class="line">device =torch.device(<span class="string">'cuda'</span> <span class="keyword">if</span> torch.cuda.is_available() <span class="keyword">else</span> <span class="string">'cpu'</span>)</span><br><span class="line">                                 </span><br><span class="line">mean = np.array([<span class="number">0.485</span>, <span class="number">0.456</span>, <span class="number">0.406</span>])</span><br><span class="line">std = np.array([<span class="number">0.229</span>, <span class="number">0.224</span>, <span class="number">0.225</span>])</span><br><span class="line">                                 </span><br><span class="line">data_transforms = {</span><br><span class="line">    <span class="string">'train'</span>:transforms.Compose([</span><br><span class="line">        transforms.RandomResizedCrop(<span class="number">224</span>),</span><br><span class="line">        transforms.RandomHorizontalFlip(),</span><br><span class="line">        transforms.ToTensor(),</span><br><span class="line">        transforms.Normalize(mean, std)</span><br><span class="line">    ]),</span><br><span class="line">    <span class="string">'val'</span>:transforms.Compose([</span><br><span class="line">        transforms.Resize(<span class="number">256</span>),</span><br><span class="line">        transforms.CenterCrop(<span class="number">224</span>),</span><br><span class="line">        transforms.ToTensor(),</span><br><span class="line">        transforms.Normalize(mean, std)</span><br><span class="line">    ])</span><br><span class="line">}</span><br><span class="line">                                 </span><br><span class="line"><span class="comment"># import data</span></span><br><span class="line">data_dir = <span class="string">'data/hymenoptera_data'</span></span><br><span class="line">sets = [<span class="string">'train'</span>, <span class="string">'val'</span>]</span><br><span class="line">image_datasets = {x:datasets.ImageFolder(os.path.join(data_dir, x),</span><br><span class="line">                                         data_transforms[x])</span><br><span class="line">                    <span class="keyword">for</span> x <span class="keyword">in</span> sets}</span><br><span class="line">dataloaders = {x: torch.utils.data.DataLoader(image_datasets[x], batch_size=<span class="number">4</span>,</span><br><span class="line">                                            shuffle=<span class="literal">True</span>, num_workers=<span class="number">0</span>)</span><br><span class="line">               <span class="keyword">for</span> x <span class="keyword">in</span> sets}</span><br><span class="line">dataset_sizes = {x: <span class="built_in">len</span>(image_datasets[x]) <span class="keyword">for</span> x <span class="keyword">in</span> sets}</span><br><span class="line">class_names = image_datasets[<span class="string">'train'</span>].classes</span><br><span class="line"><span class="built_in">print</span>(class_names)</span><br><span class="line">                             </span><br><span class="line"><span class="keyword">def</span> <span class="title function_">imshow</span>(<span class="params">inp, title</span>):</span><br><span class="line">    <span class="string">"""Imshow for Tensor."""</span></span><br><span class="line">    inp = inp.numpy().transpose((<span class="number">1</span>, <span class="number">2</span>, <span class="number">0</span>))</span><br><span class="line">    inp = std * inp + mean</span><br><span class="line">    inp = np.clip(inp, <span class="number">0</span>, <span class="number">1</span>)</span><br><span class="line">    plt.imshow(inp)</span><br><span class="line">    plt.title(title)</span><br><span class="line">    plt.show()</span><br><span class="line">                              </span><br><span class="line"><span class="comment"># Get a batch of training data</span></span><br><span class="line">inputs, classes = <span class="built_in">next</span>(<span class="built_in">iter</span>(dataloaders[<span class="string">'train'</span>]))</span><br><span class="line">                              </span><br><span class="line"><span class="comment"># Make a grid from batch</span></span><br><span class="line">out = torchvision.utils.make_grid(inputs)</span><br><span class="line">                              </span><br><span class="line">imshow(out, title=[class_names[x] <span class="keyword">for</span> x <span class="keyword">in</span> classes])</span><br><span class="line">                              </span><br><span class="line"><span class="keyword">def</span> <span class="title function_">train_model</span>(<span class="params">model, criterion, optimizer, scheduler, num_epochs=<span class="number">25</span></span>):</span><br><span class="line">    since = time.time()</span><br><span class="line">                              </span><br><span class="line">    best_model_wts = copy.deepcopy(model.state_dict())</span><br><span class="line">    best_acc = <span class="number">0.0</span></span><br><span class="line">                                  </span><br><span class="line">    <span class="keyword">for</span> epoch <span class="keyword">in</span> <span class="built_in">range</span>(num_epochs):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f'Epoch <span class="subst">{epoch+<span class="number">1</span>}</span> / <span class="subst">{num_epochs}</span>'</span>)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">'-'</span>*<span class="number">15</span>)</span><br><span class="line">                                  </span><br><span class="line">        <span class="comment"># Each epoch has a training and validation phase</span></span><br><span class="line">        <span class="keyword">for</span> phase <span class="keyword">in</span> sets:</span><br><span class="line">            <span class="keyword">if</span> phase ==<span class="string">'train'</span>:</span><br><span class="line">                model.train()</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                model.<span class="built_in">eval</span>()</span><br><span class="line">                                  </span><br><span class="line">            running_loss = <span class="number">0.0</span></span><br><span class="line">            running_correct = <span class="number">0.0</span></span><br><span class="line">                                  </span><br><span class="line">            <span class="comment"># Iterate over data.</span></span><br><span class="line">            <span class="keyword">for</span> inputs, labels <span class="keyword">in</span> dataloaders[phase]:</span><br><span class="line">                inputs = inputs.to(device)</span><br><span class="line">                labels = labels.to(device)</span><br><span class="line">                                  </span><br><span class="line">                <span class="comment"># forward</span></span><br><span class="line">                <span class="comment"># track history if only training</span></span><br><span class="line">                <span class="keyword">with</span> torch.set_grad_enabled(phase == <span class="string">'train'</span>):</span><br><span class="line">                    outputs = model(inputs)</span><br><span class="line">                    loss = criterion(outputs, labels)</span><br><span class="line">                    _, preds = torch.<span class="built_in">max</span>(outputs, <span class="number">1</span>)</span><br><span class="line">                                  </span><br><span class="line">                    <span class="comment"># backward + optimizer only if in training phase</span></span><br><span class="line">                    <span class="keyword">if</span> phase == <span class="string">'train'</span>:</span><br><span class="line">                        optimizer.zero_grad()</span><br><span class="line">                        loss.backward()</span><br><span class="line">                        optimizer.step()</span><br><span class="line">                                  </span><br><span class="line">                <span class="comment"># statistics</span></span><br><span class="line">                running_loss += loss.item()*inputs.size(<span class="number">0</span>)</span><br><span class="line">                running_correct += torch.<span class="built_in">sum</span>(preds == labels.data)</span><br><span class="line">                                  </span><br><span class="line">            <span class="keyword">if</span> phase == <span class="string">'train'</span>:</span><br><span class="line">                scheduler.step()</span><br><span class="line">                                  </span><br><span class="line">            epoch_loss = running_loss / dataset_sizes[phase]</span><br><span class="line">            epoch_acc = running_correct.double() / dataset_sizes[phase]</span><br><span class="line">                                  </span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f'<span class="subst">{phase}</span> Loss: <span class="subst">{epoch_loss:<span class="number">.4</span>f}</span> Acc: <span class="subst">{epoch_acc:<span class="number">.4</span>f}</span>'</span>)</span><br><span class="line">                                  </span><br><span class="line">            <span class="comment"># deep copy the model to</span></span><br><span class="line">            <span class="keyword">if</span> phase == <span class="string">'val'</span> <span class="keyword">and</span> epoch_acc &gt; best_acc:</span><br><span class="line">                best_acc = epoch_acc</span><br><span class="line">                best_model_wts = copy.deepcopy(model.state_dict())</span><br><span class="line">                                  </span><br><span class="line">    time_elapsed = time.time()-since</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f'Training complete in <span class="subst">{time_elapsed//<span class="number">60</span>:<span class="number">.0</span>f}</span>m <span class="subst">{time_elapsed%<span class="number">60</span>:<span class="number">.0</span>fs}</span>'</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f'Best val Acc: <span class="subst">{best_acc:4f}</span>'</span>)</span><br><span class="line">                                  </span><br><span class="line">    <span class="comment">#load best model weights</span></span><br><span class="line">    model.load_state_dic(best_model_wts)</span><br><span class="line">    <span class="keyword">return</span> model</span><br><span class="line">                              </span><br><span class="line">model = models.resnet18(pretrained=<span class="literal">True</span>)</span><br><span class="line">                              </span><br><span class="line"><span class="comment"># Here, we need to freeze all the network except the final layer.</span></span><br><span class="line"><span class="comment"># We need to set requires_grad == False to freeze the parameters so that the gradients are not computed in backward()</span></span><br><span class="line"><span class="keyword">for</span> param <span class="keyword">in</span> model.parameters():</span><br><span class="line">    param.requires_grad = <span class="literal">False</span></span><br><span class="line">                              </span><br><span class="line">num_ftrs = model.fc.in_features</span><br><span class="line">                              </span><br><span class="line">model.fc = nn.Linear(num_ftrs, <span class="number">2</span>)</span><br><span class="line">model.to(device)</span><br><span class="line">                              </span><br><span class="line">criterion = nn.CrossEntropyLoss()</span><br><span class="line">                              </span><br><span class="line"><span class="comment"># Observe that all parameters are being optimized</span></span><br><span class="line">optimizer = optim.SGD(model.parameters(), lr=<span class="number">0.001</span>)</span><br><span class="line">                              </span><br><span class="line"><span class="comment"># scheduler</span></span><br><span class="line">step_lr_schedule = lr_scheduler.StepLR(optimizer, step_size=<span class="number">7</span>, gamma=<span class="number">0.1</span>) <span class="comment"># Every 7 stepï¼Œ learning rate multiple by 0.1</span></span><br><span class="line">                              </span><br><span class="line">model = train_model(model, criterion, optimizer, step_lr_schedule, num_epochs=<span class="number">7</span>)</span><br></pre></td></tr></tbody></table></figure></li></ol></blockquote><h3 id="11-Tensorboard"><a href="#11-Tensorboard" class="headerlink" title="11. Tensorboard"></a>11. Tensorboard</h3><blockquote><p>Tensorbardæ˜¯å¾ˆå¥½çš„å¯è§†åŒ–å·¥å…·ï¼Œå…·ä½“å¯ä»¥å‚è€ƒå¦‚ä¸‹çš„ä»£ç ã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Tensorboard</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"><span class="keyword">import</span> torch.nn <span class="keyword">as</span> nn</span><br><span class="line"><span class="keyword">import</span> torchvision</span><br><span class="line"><span class="keyword">import</span> torchvision.transforms <span class="keyword">as</span> transforms</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line"><span class="comment">############## TENSORBOARD ########################</span></span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">import</span> torch.nn.functional <span class="keyword">as</span> F</span><br><span class="line"><span class="keyword">from</span> torch.utils.tensorboard <span class="keyword">import</span> SummaryWriter</span><br><span class="line"></span><br><span class="line"><span class="comment"># default `log_dir` is "runs" - we'll be more specific here</span></span><br><span class="line">writer = SummaryWriter(<span class="string">'runs/mnist1'</span>)</span><br><span class="line"><span class="comment">###################################################</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Device configuration</span></span><br><span class="line">device = torch.device(<span class="string">'cuda'</span> <span class="keyword">if</span> torch.cuda.is_available() <span class="keyword">else</span> <span class="string">'cpu'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Hyper-parameters</span></span><br><span class="line">input_size = <span class="number">784</span>  <span class="comment"># 28x28</span></span><br><span class="line">hidden_size = <span class="number">500</span></span><br><span class="line">num_classes = <span class="number">10</span></span><br><span class="line">num_epochs = <span class="number">1</span></span><br><span class="line">batch_size = <span class="number">64</span></span><br><span class="line">learning_rate = <span class="number">0.001</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># MNIST dataset</span></span><br><span class="line">train_dataset = torchvision.datasets.MNIST(root=<span class="string">'./data'</span>,</span><br><span class="line">                                           train=<span class="literal">True</span>,</span><br><span class="line">                                           transform=transforms.ToTensor(),</span><br><span class="line">                                           download=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">test_dataset = torchvision.datasets.MNIST(root=<span class="string">'./data'</span>,</span><br><span class="line">                                          train=<span class="literal">False</span>,</span><br><span class="line">                                          transform=transforms.ToTensor())</span><br><span class="line"></span><br><span class="line"><span class="comment"># Data loader</span></span><br><span class="line">train_loader = torch.utils.data.DataLoader(dataset=train_dataset,</span><br><span class="line">                                           batch_size=batch_size,</span><br><span class="line">                                           shuffle=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">test_loader = torch.utils.data.DataLoader(dataset=test_dataset,</span><br><span class="line">                                          batch_size=batch_size,</span><br><span class="line">                                          shuffle=<span class="literal">False</span>)</span><br><span class="line"></span><br><span class="line">examples = <span class="built_in">iter</span>(test_loader)</span><br><span class="line">example_data, example_targets = examples.<span class="built_in">next</span>()</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">6</span>):</span><br><span class="line">    plt.subplot(<span class="number">2</span>, <span class="number">3</span>, i + <span class="number">1</span>)</span><br><span class="line">    plt.imshow(example_data[i][<span class="number">0</span>], cmap=<span class="string">'gray'</span>)</span><br><span class="line"><span class="comment"># plt.show()</span></span><br><span class="line"></span><br><span class="line"><span class="comment">############## TENSORBOARD ########################</span></span><br><span class="line">img_grid = torchvision.utils.make_grid(example_data)</span><br><span class="line">writer.add_image(<span class="string">'mnist_images'</span>, img_grid)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># writer.close()</span></span><br><span class="line"><span class="comment"># sys.exit()</span></span><br><span class="line"><span class="comment">###################################################</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Fully connected neural network with one hidden layer</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">NeuralNet</span>(nn.Module):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, input_size, hidden_size, num_classes</span>):</span><br><span class="line">        <span class="built_in">super</span>(NeuralNet, <span class="variable language_">self</span>).__init__()</span><br><span class="line">        <span class="variable language_">self</span>.input_size = input_size</span><br><span class="line">        <span class="variable language_">self</span>.l1 = nn.Linear(input_size, hidden_size)</span><br><span class="line">        <span class="variable language_">self</span>.relu = nn.ReLU()</span><br><span class="line">        <span class="variable language_">self</span>.l2 = nn.Linear(hidden_size, num_classes)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">forward</span>(<span class="params">self, x</span>):</span><br><span class="line">        out = <span class="variable language_">self</span>.l1(x)</span><br><span class="line">        out = <span class="variable language_">self</span>.relu(out)</span><br><span class="line">        out = <span class="variable language_">self</span>.l2(out)</span><br><span class="line">        <span class="comment"># no activation and no softmax at the end</span></span><br><span class="line">        <span class="keyword">return</span> out</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">model = NeuralNet(input_size, hidden_size, num_classes).to(device)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Loss and optimizer</span></span><br><span class="line">criterion = nn.CrossEntropyLoss()</span><br><span class="line">optimizer = torch.optim.Adam(model.parameters(), lr=learning_rate)</span><br><span class="line"></span><br><span class="line"><span class="comment">############## TENSORBOARD ########################</span></span><br><span class="line">writer.add_graph(model, example_data.reshape(-<span class="number">1</span>, <span class="number">28</span> * <span class="number">28</span>))</span><br><span class="line"><span class="comment"># writer.close()</span></span><br><span class="line"><span class="comment"># sys.exit()</span></span><br><span class="line"><span class="comment">###################################################</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Train the model</span></span><br><span class="line">running_loss = <span class="number">0.0</span></span><br><span class="line">running_correct = <span class="number">0</span></span><br><span class="line">n_total_steps = <span class="built_in">len</span>(train_loader)</span><br><span class="line"><span class="keyword">for</span> epoch <span class="keyword">in</span> <span class="built_in">range</span>(num_epochs):</span><br><span class="line">    <span class="keyword">for</span> i, (images, labels) <span class="keyword">in</span> <span class="built_in">enumerate</span>(train_loader):</span><br><span class="line">        <span class="comment"># origin shape: [100, 1, 28, 28]</span></span><br><span class="line">        <span class="comment"># resized: [100, 784]</span></span><br><span class="line">        images = images.reshape(-<span class="number">1</span>, <span class="number">28</span> * <span class="number">28</span>).to(device)</span><br><span class="line">        labels = labels.to(device)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># Forward pass</span></span><br><span class="line">        outputs = model(images)</span><br><span class="line">        loss = criterion(outputs, labels)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># Backward and optimize</span></span><br><span class="line">        optimizer.zero_grad()</span><br><span class="line">        loss.backward()</span><br><span class="line">        optimizer.step()</span><br><span class="line"></span><br><span class="line">        running_loss += loss.item()</span><br><span class="line"></span><br><span class="line">        _, predicted = torch.<span class="built_in">max</span>(outputs.data, <span class="number">1</span>)</span><br><span class="line">        running_correct += (predicted == labels).<span class="built_in">sum</span>().item()</span><br><span class="line">        <span class="keyword">if</span> (i + <span class="number">1</span>) % <span class="number">100</span> == <span class="number">0</span>:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f'Epoch [<span class="subst">{epoch + <span class="number">1</span>}</span>/<span class="subst">{num_epochs}</span>], Step [<span class="subst">{i + <span class="number">1</span>}</span>/<span class="subst">{n_total_steps}</span>], Loss: <span class="subst">{loss.item():<span class="number">.4</span>f}</span>'</span>)</span><br><span class="line">            <span class="comment">############## TENSORBOARD ########################</span></span><br><span class="line">            writer.add_scalar(<span class="string">'training loss'</span>, running_loss / <span class="number">100</span>, epoch * n_total_steps + i)</span><br><span class="line">            running_accuracy = running_correct / <span class="number">100</span> / predicted.size(<span class="number">0</span>)</span><br><span class="line">            writer.add_scalar(<span class="string">'accuracy'</span>, running_accuracy, epoch * n_total_steps + i)</span><br><span class="line">            running_correct = <span class="number">0</span></span><br><span class="line">            running_loss = <span class="number">0.0</span></span><br><span class="line">            <span class="comment">###################################################</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Test the model</span></span><br><span class="line"><span class="comment"># In test phase, we don't need to compute gradients (for memory efficiency)</span></span><br><span class="line">class_labels = []</span><br><span class="line">class_preds = []</span><br><span class="line"><span class="keyword">with</span> torch.no_grad():</span><br><span class="line">    n_correct = <span class="number">0</span></span><br><span class="line">    n_samples = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> images, labels <span class="keyword">in</span> test_loader:</span><br><span class="line">        images = images.reshape(-<span class="number">1</span>, <span class="number">28</span> * <span class="number">28</span>).to(device)</span><br><span class="line">        labels = labels.to(device)</span><br><span class="line">        outputs = model(images)</span><br><span class="line">        <span class="comment"># max returns (value ,index)</span></span><br><span class="line">        values, predicted = torch.<span class="built_in">max</span>(outputs.data, <span class="number">1</span>)</span><br><span class="line">        n_samples += labels.size(<span class="number">0</span>)</span><br><span class="line">        n_correct += (predicted == labels).<span class="built_in">sum</span>().item()</span><br><span class="line"></span><br><span class="line">        class_probs_batch = [F.softmax(output, dim=<span class="number">0</span>) <span class="keyword">for</span> output <span class="keyword">in</span> outputs]</span><br><span class="line"></span><br><span class="line">        class_preds.append(class_probs_batch)</span><br><span class="line">        class_labels.append(predicted)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 10000, 10, and 10000, 1</span></span><br><span class="line">    <span class="comment"># stack concatenates tensors along a new dimension</span></span><br><span class="line">    <span class="comment"># cat concatenates tensors in the given dimension</span></span><br><span class="line">    class_preds = torch.cat([torch.stack(batch) <span class="keyword">for</span> batch <span class="keyword">in</span> class_preds])</span><br><span class="line">    class_labels = torch.cat(class_labels)</span><br><span class="line"></span><br><span class="line">    acc = <span class="number">100.0</span> * n_correct / n_samples</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f'Accuracy of the network on the 10000 test images: <span class="subst">{acc}</span> %'</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">############## TENSORBOARD ########################</span></span><br><span class="line">    classes = <span class="built_in">range</span>(<span class="number">10</span>)</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> classes:</span><br><span class="line">        labels_i = class_labels == i</span><br><span class="line">        preds_i = class_preds[:, i]</span><br><span class="line">        writer.add_pr_curve(<span class="built_in">str</span>(i), labels_i, preds_i, global_step=<span class="number">0</span>)</span><br><span class="line">        writer.close()</span><br><span class="line">    <span class="comment">###################################################</span></span><br></pre></td></tr></tbody></table></figure></blockquote><h3 id="12-Saving-and-Loading-model"><a href="#12-Saving-and-Loading-model" class="headerlink" title="12. Saving and Loading model"></a>12. Saving and Loading model</h3><blockquote> <figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">2 DIFFERENT WAYS OF SAVING</span><br><span class="line"># 1) lazy way: save whole model</span><br><span class="line">torch.save(model, PATH)</span><br><span class="line"></span><br><span class="line"># model class must be defined somewhere</span><br><span class="line">model = torch.load(PATH)</span><br><span class="line">model.eval()</span><br><span class="line"></span><br><span class="line"># 2) recommended way: save only the state_dict</span><br><span class="line">torch.save(model.state_dict(), PATH)</span><br><span class="line"></span><br><span class="line"># model must be created again with parameters</span><br><span class="line">model = Model(*args, **kwargs)</span><br><span class="line">model.load_state_dict(torch.load(PATH))</span><br><span class="line">model.eval()</span><br></pre></td></tr></tbody></table></figure><p> ç¤ºä¾‹ä»£ç å¦‚ä¸‹:</p> <figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"><span class="keyword">import</span> torch.nn <span class="keyword">as</span> nn</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Model</span>(nn.Module):</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, n_input_features</span>):</span><br><span class="line">    <span class="built_in">super</span>(Model, <span class="variable language_">self</span>).__init__()</span><br><span class="line">    <span class="variable language_">self</span>.linear = nn.Linear(n_input_features, <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">forward</span>(<span class="params">self, x</span>):</span><br><span class="line">    y_pred = torch.sigmoid(<span class="variable language_">self</span>.linear(x))</span><br><span class="line">    <span class="keyword">return</span> y_pred</span><br><span class="line"></span><br><span class="line">model = Model(n_input_features=<span class="number">6</span>)</span><br><span class="line"><span class="comment"># train your model...</span></span><br><span class="line"></span><br><span class="line"><span class="comment">####################save all ######################################</span></span><br><span class="line"><span class="keyword">for</span> param <span class="keyword">in</span> model.parameters():</span><br><span class="line"><span class="built_in">print</span>(param)</span><br><span class="line"></span><br><span class="line"><span class="comment"># save and load entire model</span></span><br><span class="line"></span><br><span class="line">FILE = <span class="string">"model.pth"</span></span><br><span class="line">torch.save(model, FILE)</span><br><span class="line"></span><br><span class="line">loaded_model = torch.load(FILE)</span><br><span class="line">loaded_model.<span class="built_in">eval</span>()</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> param <span class="keyword">in</span> loaded_model.parameters():</span><br><span class="line"><span class="built_in">print</span>(param)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">############save only state dict #########################</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># save only state dict</span></span><br><span class="line">FILE = <span class="string">"model.pth"</span></span><br><span class="line">torch.save(model.state_dict(), FILE)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(model.state_dict())</span><br><span class="line">loaded_model = Model(n_input_features=<span class="number">6</span>)</span><br><span class="line">loaded_model.load_state_dict(torch.load(FILE)) <span class="comment"># it takes the loaded dictionary, not the path file itself</span></span><br><span class="line">loaded_model.<span class="built_in">eval</span>()</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(loaded_model.state_dict())</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">###########load checkpoint#####################</span></span><br><span class="line">learning_rate = <span class="number">0.01</span></span><br><span class="line">optimizer = torch.optim.SGD(model.parameters(), lr=learning_rate)</span><br><span class="line"></span><br><span class="line">checkpoint = {</span><br><span class="line"><span class="string">"epoch"</span>: <span class="number">90</span>,</span><br><span class="line"><span class="string">"model_state"</span>: model.state_dict(),</span><br><span class="line"><span class="string">"optim_state"</span>: optimizer.state_dict()</span><br><span class="line">}</span><br><span class="line"><span class="built_in">print</span>(optimizer.state_dict())</span><br><span class="line">FILE = <span class="string">"checkpoint.pth"</span></span><br><span class="line">torch.save(checkpoint, FILE)</span><br><span class="line"></span><br><span class="line">model = Model(n_input_features=<span class="number">6</span>)</span><br><span class="line">optimizer = optimizer = torch.optim.SGD(model.parameters(), lr=<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">checkpoint = torch.load(FILE)</span><br><span class="line">model.load_state_dict(checkpoint[<span class="string">'model_state'</span>])</span><br><span class="line">optimizer.load_state_dict(checkpoint[<span class="string">'optim_state'</span>])</span><br><span class="line">epoch = checkpoint[<span class="string">'epoch'</span>]</span><br><span class="line"></span><br><span class="line">model.<span class="built_in">eval</span>()</span><br><span class="line"><span class="comment"># - or -</span></span><br><span class="line"><span class="comment"># model.train()</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(optimizer.state_dict())</span><br><span class="line"></span><br><span class="line"><span class="comment"># Remember that you must call model.eval() to set dropout and batch normalization layers </span></span><br><span class="line"><span class="comment"># to evaluation mode before running inference. Failing to do this will yield </span></span><br><span class="line"><span class="comment"># inconsistent inference results. If you wish to resuming training, </span></span><br><span class="line"><span class="comment"># call model.train() to ensure these layers are in training mode.</span></span><br><span class="line"></span><br><span class="line"><span class="string">""" SAVING ON GPU/CPU </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># 1) Save on GPU, Load on CPU</span></span><br><span class="line"><span class="string">device = torch.device("cuda")</span></span><br><span class="line"><span class="string">model.to(device)</span></span><br><span class="line"><span class="string">torch.save(model.state_dict(), PATH)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">device = torch.device('cpu')</span></span><br><span class="line"><span class="string">model = Model(*args, **kwargs)</span></span><br><span class="line"><span class="string">model.load_state_dict(torch.load(PATH, map_location=device))</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># 2) Save on GPU, Load on GPU</span></span><br><span class="line"><span class="string">device = torch.device("cuda")</span></span><br><span class="line"><span class="string">model.to(device)</span></span><br><span class="line"><span class="string">torch.save(model.state_dict(), PATH)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">model = Model(*args, **kwargs)</span></span><br><span class="line"><span class="string">model.load_state_dict(torch.load(PATH))</span></span><br><span class="line"><span class="string">model.to(device)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># Note: Be sure to use the .to(torch.device('cuda')) function </span></span><br><span class="line"><span class="string"># on all model inputs, too!</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># 3) Save on CPU, Load on GPU</span></span><br><span class="line"><span class="string">torch.save(model.state_dict(), PATH)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">device = torch.device("cuda")</span></span><br><span class="line"><span class="string">model = Model(*args, **kwargs)</span></span><br><span class="line"><span class="string">model.load_state_dict(torch.load(PATH, map_location="cuda:0"))  # Choose whatever GPU device number you want</span></span><br><span class="line"><span class="string">model.to(device)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># This loads the model to a given GPU device. </span></span><br><span class="line"><span class="string"># Next, be sure to call model.to(torch.device('cuda')) to convert the modelâ€™s parameter tensors to CUDA tensors</span></span><br><span class="line"><span class="string">"""</span></span><br></pre></td></tr></tbody></table></figure></blockquote><h3 id="13-Summary"><a href="#13-Summary" class="headerlink" title="13. Summary"></a>13. Summary</h3><img src="https://raw.githubusercontent.com/Skylyong/i/main/20210805230250.png" alt="pytorch" style="zoom:50%;">]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹ ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> pytorch </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Huggingface é¢„è®­ç»ƒæ¨¡å‹æƒé‡ä¸‹è½½çš„é—®é¢˜</title>
      <link href="/2021/07/01/huggingface-yu-xun-lian-mo-xing-quan-chong-xia-zai-de-wen-ti/"/>
      <url>/2021/07/01/huggingface-yu-xun-lian-mo-xing-quan-chong-xia-zai-de-wen-ti/</url>
      
        <content type="html"><![CDATA[<blockquote><p>æœ¬æ–‡è½¬è‡ª<a href="https://www.bilibili.com/read/cv8231417">Hugging faceé¢„è®­ç»ƒæ¨¡å‹</a>å’Œ<a href="https://cloud.tencent.com/developer/article/1745037">Huggingface é¢„è®­ç»ƒæ¨¡å‹æƒé‡ä¸‹è½½çš„é—®é¢˜</a></p></blockquote><p>Hugging faceæ˜¯ä¸€ä¸ªä¸“æ³¨äºNLPçš„å…¬å¸ï¼Œæ‹¥æœ‰ä¸€ä¸ªå¼€æºçš„é¢„è®­ç»ƒæ¨¡å‹åº“&nbsp;Transformers&nbsp;ï¼Œé‡Œé¢å›Šæ‹¬äº†éå¸¸å¤šçš„æ¨¡å‹ä¾‹å¦‚&nbsp;BERT&nbsp;GPT&nbsp;ç­‰.</p><h4 id="æ¨¡å‹åº“"><a href="#æ¨¡å‹åº“" class="headerlink" title="æ¨¡å‹åº“"></a>æ¨¡å‹åº“</h4><p>å®˜ç½‘çš„æ¨¡å‹åº“çš„åœ°å€å¦‚ä¸‹ï¼š<a href="https://huggingface.co/models">https://huggingface.co/models</a> </p><h4 id="ä½¿ç”¨æ¨¡å‹"><a href="#ä½¿ç”¨æ¨¡å‹" class="headerlink" title="ä½¿ç”¨æ¨¡å‹"></a>ä½¿ç”¨æ¨¡å‹</h4><p>é¦–å…ˆéœ€è¦å®‰è£…transformersåº“ï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å®‰è£…ï¼š</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install transformers</span><br></pre></td></tr></tbody></table></figure><p>æ¥ä¸‹æ¥åœ¨ä»£ç ä¸­è°ƒç”¨ <font color="red"> AutoTokenizer.from_pretrained</font> å’Œ <font color="red"> AutoModel.from_pretrained </font>å³å¯, ä¾‹å¦‚ï¼š</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> transformers <span class="keyword">import</span> *</span><br><span class="line">model_name = <span class="string">'hfl/chinese-xlnet-base'</span></span><br><span class="line">tokenizer = AutoTokenizer.from_pretrained(model_name)</span><br><span class="line">model = AutoModel.from_pretrained(model_name)</span><br></pre></td></tr></tbody></table></figure><p>è¿è¡Œåç³»ç»Ÿä¼šè‡ªåŠ¨ä¸‹è½½ç›¸å…³çš„æ¨¡å‹æ–‡ä»¶å¹¶å­˜æ”¾åœ¨ç”µè„‘ä¸­ã€‚ä½¿ç”¨Windowsæ¨¡å‹ä¿å­˜çš„è·¯å¾„åœ¨ <font color="red"> C:\Users[ç”¨æˆ·å].cache\torch\transformers</font>ç›®å½•ä¸‹ï¼Œæ ¹æ®æ¨¡å‹çš„ä¸åŒä¸‹è½½çš„ä¸œè¥¿ä¹Ÿä¸ç›¸åŒ</p><p>ä½¿ç”¨Linuxæ¨¡å‹ä¿å­˜çš„è·¯å¾„åœ¨ <font color="red"> ~/.cache/torch/transformers/ </font>ç›®å½•ä¸‹ã€‚</p><h4 id="å­˜åœ¨çš„é—®é¢˜"><a href="#å­˜åœ¨çš„é—®é¢˜" class="headerlink" title="å­˜åœ¨çš„é—®é¢˜"></a>å­˜åœ¨çš„é—®é¢˜</h4><p>è¿™äº›å‰ææ˜¯ä½ çš„ç”µè„‘æœ‰ç½‘ç»œå¯ä»¥ç›´æ¥ä½¿ç”¨ä»£ç ä¸‹è½½ç›¸åº”çš„æ¨¡å‹æ–‡ä»¶ï¼Œä½†æ˜¯é—®é¢˜æ˜¯æœ‰äº›æœºå™¨æ˜¯æ²¡æœ‰å¤–ç½‘è¿æ¥æƒé™æˆ–è€…ä¸‹è½½é€Ÿåº¦éå¸¸æ…¢ã€‚</p><p>è¿™æ—¶å€™å°±éœ€è¦æŠŠæ¨¡å‹æ–‡ä»¶ä¸‹è½½ååœ¨å¯¼å…¥ä»£ç ä¸­ï¼Œè¿˜æ˜¯ä»¥åˆšæ‰çš„  <font color="red"> hfl/chinese-xlnet-base </font>æ¨¡å‹ä¸ºä¾‹ï¼Œç›´æ¥åœ¨å®˜ç½‘æœç´¢æ¨¡å‹ï¼Œç‚¹å‡»è¿›å…¥æ¨¡å‹çš„è¯¦æƒ…ç•Œé¢</p><p><img src="https://raw.githubusercontent.com/Skylyong/i/main/20210701024119.png" alt="20210701024119"></p><p>åœ¨ç•Œé¢ä¸­æ‰¾åˆ° Files</p><p><img src="https://raw.githubusercontent.com/Skylyong/i/main/20210701024235.png" alt="20210701024235"></p><p>æŠŠå¼¹çª—å†…çš„æ–‡ä»¶å…¨éƒ¨ä¸‹è½½ä¸‹æ¥</p><p>æˆ‘ä»¬å‡è®¾æ–‡ä»¶ä¿å­˜åœ¨<font color="red"> E:\models\hfl\chinese-xlnet-base\ </font>ç›®å½•ä¸‹</p><p>æˆ‘ä»¬åªéœ€è¦æŠŠ<font color="red">model_name </font>ä¿®æ”¹ä¸ºä¸‹è½½çš„æ–‡ä»¶å¤¹å³å¯</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> transformers <span class="keyword">import</span> *</span><br><span class="line">model_name = <span class="string">'E:/models/hfl/chinese-xlnet-base/'</span></span><br><span class="line">tokenizer = AutoTokenizer.from_pretrained(model_name)</span><br><span class="line">model = AutoModel.from_pretrained(model_name)</span><br></pre></td></tr></tbody></table></figure><p>è¿™æ ·é—®é¢˜å°±è§£å†³äº†ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> äººå·¥æ™ºèƒ½ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> é¢„è®­ç»ƒæ¨¡å‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>jupyter notebook æœ¬åœ°æœåŠ¡å™¨æ­å»º</title>
      <link href="/2021/06/21/jupyter-notebook-ben-di-fu-wu-qi-da-jian/"/>
      <url>/2021/06/21/jupyter-notebook-ben-di-fu-wu-qi-da-jian/</url>
      
        <content type="html"><![CDATA[<p>ä»Šå¤©åœ¨å®éªŒå®¤çš„æœåŠ¡å™¨ä¸»æœºä¸Šé¢æ­å»ºäº†jupyter notebookæœåŠ¡å™¨ï¼Œè®°å½•ä¸€ä¸‹æ­å»ºæ­¥éª¤ï¼Œæ–¹ä¾¿ä»¥åæŸ¥çœ‹ã€‚</p><h4 id="æœåŠ¡å™¨ç«¯æ“ä½œ"><a href="#æœåŠ¡å™¨ç«¯æ“ä½œ" class="headerlink" title="æœåŠ¡å™¨ç«¯æ“ä½œ"></a>æœåŠ¡å™¨ç«¯æ“ä½œ</h4><h5 id="ç”ŸæˆJupyter-Notebooké…ç½®æ–‡ä»¶"><a href="#ç”ŸæˆJupyter-Notebooké…ç½®æ–‡ä»¶" class="headerlink" title="ç”ŸæˆJupyter Notebooké…ç½®æ–‡ä»¶"></a>ç”ŸæˆJupyter Notebooké…ç½®æ–‡ä»¶</h5><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ jupyter notebook --generate-config</span><br></pre></td></tr></tbody></table></figure><h5 id="è®¾ç½®ç™»å½•å¯†ç "><a href="#è®¾ç½®ç™»å½•å¯†ç " class="headerlink" title="è®¾ç½®ç™»å½•å¯†ç "></a>è®¾ç½®ç™»å½•å¯†ç </h5><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åœ¨å‘½ä»¤è¡Œè¾“å…¥pythonå‘½ä»¤ï¼Œè¿›å…¥pythonäº¤äº’ç•Œé¢ï¼Œè¾“å…¥å¦‚ä¸‹å‘½ä»¤</span></span><br><span class="line">from notebook.auth import passwd</span><br><span class="line">passwd()</span><br><span class="line">Enter password:</span><br><span class="line">Verify password:</span><br><span class="line">Out[2]: <span class="string">'sha1:67c9e60bb8b6:9ffede0825894254b2e042ea597d771089e11aed'</span></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><p>å°†ç”Ÿæˆçš„ä»£ç æ·»åŠ åˆ°é…ç½®æ–‡ä»¶ä¸­</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">c.NotebookApp.password = u<span class="string">'sha1:67c9e60bb8b6:9ffede0825894254b2e042ea597d771089e11aed'</span></span><br></pre></td></tr></tbody></table></figure><h5 id="ä¿®æ”¹é…ç½®æ–‡ä»¶"><a href="#ä¿®æ”¹é…ç½®æ–‡ä»¶" class="headerlink" title="ä¿®æ”¹é…ç½®æ–‡ä»¶"></a>ä¿®æ”¹é…ç½®æ–‡ä»¶</h5><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ vim ~/.jupyter/jupyter_notebook_config.py</span><br></pre></td></tr></tbody></table></figure><p>åœ¨é…ç½®æ–‡ä»¶ä¸­æ·»åŠ å¦‚ä¸‹å†…å®¹</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">c.NotebookApp.allow_origin = <span class="string">'*'</span></span><br><span class="line">c.NotebookApp.ip = <span class="string">'0.0.0.0'</span> <span class="comment">#æ‰€æœ‰ç»‘å®šæœåŠ¡å™¨çš„IPéƒ½èƒ½è®¿é—®ï¼Œè‹¥æƒ³åªåœ¨ç‰¹å®šipè®¿é—®ï¼Œè¾“å…¥ipåœ°å€å³å¯</span></span><br><span class="line">c.NotebookApp.port = 2021 <span class="comment">#å°†ç«¯å£è®¾ç½®ä¸ºè‡ªå·±å–œæ¬¢çš„å§ï¼Œé»˜è®¤æ˜¯8888</span></span><br><span class="line">c.NotebookApp.open_browser = False <span class="comment">#æˆ‘ä»¬å¹¶ä¸æƒ³åœ¨æœåŠ¡å™¨ä¸Šç›´æ¥æ‰“å¼€Jupyter Notebookï¼Œæ‰€ä»¥è®¾ç½®æˆFalse</span></span><br><span class="line">c.NotebookApp.notebook_dir = <span class="string">'/home/jupyter_projects'</span> <span class="comment">#è¿™é‡Œæ˜¯è®¾ç½®Jupyterçš„æ ¹ç›®å½•ï¼Œè‹¥ä¸è®¾ç½®å°†é»˜è®¤rootçš„æ ¹ç›®å½•ï¼Œä¸å®‰å…¨</span></span><br><span class="line">c.NotebookApp.allow_root = True <span class="comment"># ä¸ºäº†å®‰å…¨ï¼ŒJupyteré»˜è®¤ä¸å…è®¸ä»¥rootæƒé™å¯åŠ¨jupyter</span></span><br><span class="line">c.NotebookApp.allow_remote_access = True</span><br><span class="line">c.NotebookApp.password = u<span class="string">'sha1:67c9e60bb8b6:9ffede0825894254b2e042ea597d771089e11aed'</span></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><h5 id="å¯åŠ¨jupyter-notebook"><a href="#å¯åŠ¨jupyter-notebook" class="headerlink" title="å¯åŠ¨jupyter notebook"></a>å¯åŠ¨jupyter notebook</h5><p>åœ¨ç»ˆç«¯è¾“å…¥å¦‚ä¸‹å‘½ä»¤å¯åŠ¨jupyter notebookï¼š</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jupyter notebook</span><br></pre></td></tr></tbody></table></figure><h4 id="å®¢æœç«¯ç”µè„‘æ“ä½œ"><a href="#å®¢æœç«¯ç”µè„‘æ“ä½œ" class="headerlink" title="å®¢æœç«¯ç”µè„‘æ“ä½œ"></a>å®¢æœç«¯ç”µè„‘æ“ä½œ</h4><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">ssh username@ipaddress -L 2021:127.0.0.1:2021</span><br></pre></td></tr></tbody></table></figure><p>æœ€ååœ¨æœ¬åœ°æµè§ˆå™¨è¾“å…¥åœ°å€ï¼š127.0.0.1:2021 è®¿é—®</p>]]></content>
      
      
      <categories>
          
          <category> çˆ¬å‘æ€»ç»“ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> jupyter notebook </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æœºå™¨å­¦ä¹ ä¸­çš„å„ç§ç†µ</title>
      <link href="/2021/04/16/ji-qi-xue-xi-zhong-de-ge-chong-shang/"/>
      <url>/2021/04/16/ji-qi-xue-xi-zhong-de-ge-chong-shang/</url>
      
        <content type="html"><![CDATA[<h3 id="æ¦‚å¿µå’Œå®šä¹‰"><a href="#æ¦‚å¿µå’Œå®šä¹‰" class="headerlink" title="æ¦‚å¿µå’Œå®šä¹‰"></a>æ¦‚å¿µå’Œå®šä¹‰</h3><h4 id="ç†µ"><a href="#ç†µ" class="headerlink" title="ç†µ"></a>ç†µ</h4><h4 id="æ¡ä»¶ç†µ"><a href="#æ¡ä»¶ç†µ" class="headerlink" title="æ¡ä»¶ç†µ"></a>æ¡ä»¶ç†µ</h4><h4 id="äº¤å‰ç†µ"><a href="#äº¤å‰ç†µ" class="headerlink" title="äº¤å‰ç†µ"></a>äº¤å‰ç†µ</h4><h3 id="ä»£ç å®ç°"><a href="#ä»£ç å®ç°" class="headerlink" title="ä»£ç å®ç°"></a>ä»£ç å®ç°</h3><h3 id="å‚è€ƒé“¾æ¥ï¼š"><a href="#å‚è€ƒé“¾æ¥ï¼š" class="headerlink" title="å‚è€ƒé“¾æ¥ï¼š"></a>å‚è€ƒé“¾æ¥ï¼š</h3><ul><li><p><a href="https://www.cnblogs.com/Arborday/p/10727147.html">https://www.cnblogs.com/Arborday/p/10727147.html</a></p></li><li><p><a href="https://zhuanlan.zhihu.com/p/35379531">https://zhuanlan.zhihu.com/p/35379531</a></p></li></ul>]]></content>
      
      
      <categories>
          
          <category> æœºå™¨å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç†µ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>gitå¸¸ç”¨å‘½ä»¤</title>
      <link href="/2021/04/08/git-chang-yong-ming-ling/"/>
      <url>/2021/04/08/git-chang-yong-ming-ling/</url>
      
        <content type="html"><![CDATA[<h4 id="gitåŸºäºå†å²commitåˆ›å»ºåˆ†æ”¯"><a href="#gitåŸºäºå†å²commitåˆ›å»ºåˆ†æ”¯" class="headerlink" title="gitåŸºäºå†å²commitåˆ›å»ºåˆ†æ”¯"></a>gitåŸºäºå†å²commitåˆ›å»ºåˆ†æ”¯</h4><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">log</span></span><br><span class="line">git branch &lt;branch name&gt; &lt;SHA1&gt; </span><br><span class="line">git checkout &lt;branch name&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">#ä¹Ÿå¯ä»¥ç›´æ¥æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤</span></span><br><span class="line">git checkout -b &lt;branch name&gt; &lt;SHA1&gt; </span><br></pre></td></tr></tbody></table></figure><h4 id="gitå¯¹åˆ†æ”¯çš„æ“ä½œ"><a href="#gitå¯¹åˆ†æ”¯çš„æ“ä½œ" class="headerlink" title="gitå¯¹åˆ†æ”¯çš„æ“ä½œ"></a>gitå¯¹åˆ†æ”¯çš„æ“ä½œ</h4><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#æŸ¥çœ‹è¿œç¨‹åˆ†æ”¯</span></span><br><span class="line">git branch -a</span><br><span class="line"></span><br><span class="line"><span class="comment">#æŸ¥çœ‹æœ¬åœ°åˆ†æ”¯</span></span><br><span class="line">git branch</span><br><span class="line"></span><br><span class="line"><span class="comment">#åˆ›å»ºåˆ†æ”¯</span></span><br><span class="line">git branch branch_name</span><br><span class="line"></span><br><span class="line"><span class="comment">#åˆ‡æ¢åˆ°åˆ†æ”¯</span></span><br><span class="line">git checkout branch_name</span><br><span class="line"></span><br><span class="line"><span class="comment">#åˆ é™¤æœ¬åœ°åˆ†æ”¯</span></span><br><span class="line">git branch -d branch_name</span><br><span class="line"></span><br><span class="line"><span class="comment">#é‡å‘½åæœ¬åœ°åˆ†æ”¯</span></span><br><span class="line">git branch -m old new</span><br><span class="line"></span><br><span class="line"><span class="comment">#é‡å‘½åè¿œç¨‹åˆ†æ”¯ï¼šå°†è¿œç¨‹åˆ†æ”¯åˆ é™¤ï¼Œç„¶åå°†æœ¬åœ°åˆ†æ”¯é‡å‘½åï¼Œæœ€åå°†æœ¬åœ°åˆ†æ”¯æ¨åˆ°è¿œç¨‹</span></span><br><span class="line">git push --delete origin old <span class="comment">#åˆ é™¤è¿œç¨‹åˆ†æ”¯</span></span><br><span class="line">git branch -m old new <span class="comment">#é‡å‘½åæœ¬åœ°åˆ†æ”¯</span></span><br><span class="line">git push origin new <span class="comment">#å°†æœ¬åœ°åˆ†æ”¯æ¨é€åˆ°è¿œç¨‹</span></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><h4 id="gitå¯¹æ¯”ä¸¤ä¸ªåˆ†æ”¯å·®å¼‚"><a href="#gitå¯¹æ¯”ä¸¤ä¸ªåˆ†æ”¯å·®å¼‚" class="headerlink" title="gitå¯¹æ¯”ä¸¤ä¸ªåˆ†æ”¯å·®å¼‚"></a><a href="https://www.jianshu.com/p/bb97fabb475e">gitå¯¹æ¯”ä¸¤ä¸ªåˆ†æ”¯å·®å¼‚</a></h4>]]></content>
      
      
      <categories>
          
          <category> çˆ¬å‘æ€»ç»“ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>NLPçŸ¥è¯†ä½“ç³»</title>
      <link href="/2021/04/08/nlp-zhi-shi-ti-xi/"/>
      <url>/2021/04/08/nlp-zhi-shi-ti-xi/</url>
      
        <content type="html"><![CDATA[<h3 id="ç¬¬ä¸€éƒ¨åˆ†ï¼šæœºå™¨å­¦ä¹ åŸºç¡€ç¯‡"><a href="#ç¬¬ä¸€éƒ¨åˆ†ï¼šæœºå™¨å­¦ä¹ åŸºç¡€ç¯‡" class="headerlink" title="ç¬¬ä¸€éƒ¨åˆ†ï¼šæœºå™¨å­¦ä¹ åŸºç¡€ç¯‡"></a>ç¬¬ä¸€éƒ¨åˆ†ï¼šæœºå™¨å­¦ä¹ åŸºç¡€ç¯‡</h3><h4 id="ç¬¬ä¸€ç« ï¼šè‡ªç„¶è¯­è¨€å¤„ç†æ¦‚è¿°"><a href="#ç¬¬ä¸€ç« ï¼šè‡ªç„¶è¯­è¨€å¤„ç†æ¦‚è¿°" class="headerlink" title="ç¬¬ä¸€ç« ï¼šè‡ªç„¶è¯­è¨€å¤„ç†æ¦‚è¿°"></a>ç¬¬ä¸€ç« ï¼šè‡ªç„¶è¯­è¨€å¤„ç†æ¦‚è¿°</h4><ul><li><p>è‡ªç„¶è¯­è¨€å¤„ç†çš„ç°çŠ¶ä¸å‰æ™¯</p></li><li><p>è‡ªç„¶è¯­è¨€å¤„ç†åº”ç”¨</p></li><li><p>è‡ªç„¶è¯­è¨€å¤„ç†ç»å…¸ä»»åŠ¡</p></li></ul><h4 id="ç¬¬äºŒç« ï¼šæ•°æ®ç»“æ„ä¸ç®—æ³•åŸºç¡€"><a href="#ç¬¬äºŒç« ï¼šæ•°æ®ç»“æ„ä¸ç®—æ³•åŸºç¡€" class="headerlink" title="ç¬¬äºŒç« ï¼šæ•°æ®ç»“æ„ä¸ç®—æ³•åŸºç¡€"></a>ç¬¬äºŒç« ï¼šæ•°æ®ç»“æ„ä¸ç®—æ³•åŸºç¡€</h4><ul><li><p>æ—¶é—´å¤æ‚åº¦ã€ç©ºé—´å¤æ‚åº¦</p></li><li><p>åŠ¨æ€è§„åˆ’</p></li><li><p>è´ªå¿ƒç®—æ³•</p></li><li><p>å„ç§æ’åºç®—æ³•</p></li></ul><h4 id="ç¬¬ä¸‰ç« ï¼šåˆ†ç±»ä¸é€»è¾‘å›å½’"><a href="#ç¬¬ä¸‰ç« ï¼šåˆ†ç±»ä¸é€»è¾‘å›å½’" class="headerlink" title="ç¬¬ä¸‰ç« ï¼šåˆ†ç±»ä¸é€»è¾‘å›å½’"></a>ç¬¬ä¸‰ç« ï¼šåˆ†ç±»ä¸é€»è¾‘å›å½’</h4><ul><li><p>é€»è¾‘å›å½’</p></li><li><p>æœ€å¤§ä¼¼ç„¶ä¼°è®¡</p></li><li><p>ä¼˜åŒ–ä¸æ¢¯åº¦ä¸‹é™æ³•</p></li><li><p>éšæœºæ¢¯åº¦ä¸‹é™æ³•</p></li></ul><h4 id="ç¬¬å››ç« ï¼šæ¨¡å‹æ³›åŒ–ä¸è°ƒå‚"><a href="#ç¬¬å››ç« ï¼šæ¨¡å‹æ³›åŒ–ä¸è°ƒå‚" class="headerlink" title="ç¬¬å››ç« ï¼šæ¨¡å‹æ³›åŒ–ä¸è°ƒå‚"></a>ç¬¬å››ç« ï¼šæ¨¡å‹æ³›åŒ–ä¸è°ƒå‚</h4><ul><li><p>ç†è§£è¿‡æ‹Ÿåˆã€é˜²æ­¢è¿‡æ‹Ÿåˆ</p></li><li><p>L1ä¸L2æ­£åˆ™</p></li><li><p>äº¤å‰éªŒè¯</p></li><li><p>æ­£åˆ™ä¸MAPä¼°è®¡</p></li></ul><h3 id="ç¬¬äºŒéƒ¨åˆ†ï¼šæ–‡æœ¬å¤„ç†ç¯‡"><a href="#ç¬¬äºŒéƒ¨åˆ†ï¼šæ–‡æœ¬å¤„ç†ç¯‡" class="headerlink" title="ç¬¬äºŒéƒ¨åˆ†ï¼šæ–‡æœ¬å¤„ç†ç¯‡"></a>ç¬¬äºŒéƒ¨åˆ†ï¼šæ–‡æœ¬å¤„ç†ç¯‡</h3><h4 id="ç¬¬äº”ç« ï¼šæ–‡æœ¬é¢„å¤„ç†ä¸è¡¨ç¤º"><a href="#ç¬¬äº”ç« ï¼šæ–‡æœ¬é¢„å¤„ç†ä¸è¡¨ç¤º" class="headerlink" title="ç¬¬äº”ç« ï¼šæ–‡æœ¬é¢„å¤„ç†ä¸è¡¨ç¤º"></a>ç¬¬äº”ç« ï¼šæ–‡æœ¬é¢„å¤„ç†ä¸è¡¨ç¤º</h4><ul><li><p>å„ç±»åˆ†è¯ç®—æ³•</p></li><li><p>è¯çš„æ ‡å‡†åŒ–</p></li><li><p>æ‹¼å†™çº é”™ã€åœç”¨è¯</p></li><li><p>ç‹¬çƒ­ç¼–ç è¡¨ç¤º</p></li><li><p>tf-idfä¸ç›¸ä¼¼åº¦</p></li><li><p>åˆ†å¸ƒå¼è¡¨ç¤ºä¸è¯å‘é‡</p></li><li><p>è¯å‘é‡å¯è§†åŒ–ä¸è¯„ä¼°</p></li></ul><h4 id="ç¬¬å…­ç« ï¼šè¯å‘é‡æŠ€æœ¯"><a href="#ç¬¬å…­ç« ï¼šè¯å‘é‡æŠ€æœ¯" class="headerlink" title="ç¬¬å…­ç« ï¼šè¯å‘é‡æŠ€æœ¯"></a>ç¬¬å…­ç« ï¼šè¯å‘é‡æŠ€æœ¯</h4><ul><li><p>ç‹¬çƒ­ç¼–ç çš„ä¼˜ç¼ºç‚¹</p></li><li><p>åˆ†å¸ƒå¼è¡¨ç¤ºçš„ä¼˜ç‚¹</p></li><li><p>é™æ€è¯å‘é‡ä¸åŠ¨æ€è¯å‘é‡</p></li><li><p>SkipGramä¸CBOW</p></li><li><p>SkipGramè¯¦è§£</p></li><li><p>Negative  Sampling</p></li></ul><h4 id="ç¬¬ä¸ƒç« ï¼šè¯­è¨€æ¨¡å‹"><a href="#ç¬¬ä¸ƒç« ï¼šè¯­è¨€æ¨¡å‹" class="headerlink" title="ç¬¬ä¸ƒç« ï¼šè¯­è¨€æ¨¡å‹"></a>ç¬¬ä¸ƒç« ï¼šè¯­è¨€æ¨¡å‹</h4><ul><li><p>è¯­è¨€æ¨¡å‹çš„ä½œç”¨</p></li><li><p>é©¬å°”ç§‘å¤«å‡è®¾</p></li><li><p>UniGram, BiGram, NGramæ¨¡å‹</p></li><li><p>è¯­è¨€æ¨¡å‹çš„è¯„ä¼°</p></li><li><p>è¯­è¨€æ¨¡å‹çš„å¹³æ»‘æŠ€æœ¯</p></li></ul><h3 id="ç¬¬ä¸‰éƒ¨åˆ†ï¼šåºåˆ—æ¨¡å‹ç¯‡"><a href="#ç¬¬ä¸‰éƒ¨åˆ†ï¼šåºåˆ—æ¨¡å‹ç¯‡" class="headerlink" title="ç¬¬ä¸‰éƒ¨åˆ†ï¼šåºåˆ—æ¨¡å‹ç¯‡"></a>ç¬¬ä¸‰éƒ¨åˆ†ï¼šåºåˆ—æ¨¡å‹ç¯‡</h3><h4 id="ç¬¬å…«ç« ï¼šéšé©¬å°”ç§‘å¤«æ¨¡å‹"><a href="#ç¬¬å…«ç« ï¼šéšé©¬å°”ç§‘å¤«æ¨¡å‹" class="headerlink" title="ç¬¬å…«ç« ï¼šéšé©¬å°”ç§‘å¤«æ¨¡å‹"></a>ç¬¬å…«ç« ï¼šéšé©¬å°”ç§‘å¤«æ¨¡å‹</h4><ul><li><p>HMMçš„åº”ç”¨</p></li><li><p>HMMçš„Inference</p></li><li><p>ç»´ç‰¹æ¯”ç®—æ³•</p></li><li><p>å‰å‘ã€åå‘ç®—æ³•</p></li><li><p>HMMçš„å‚æ•°ä¼°è®¡è¯¦è§£</p></li></ul><h4 id="ç¬¬ä¹ç« ï¼šçº¿æ€§æ¡ä»¶éšæœºåœº"><a href="#ç¬¬ä¹ç« ï¼šçº¿æ€§æ¡ä»¶éšæœºåœº" class="headerlink" title="ç¬¬ä¹ç« ï¼šçº¿æ€§æ¡ä»¶éšæœºåœº"></a>ç¬¬ä¹ç« ï¼šçº¿æ€§æ¡ä»¶éšæœºåœº</h4><ul><li><p>æœ‰å‘å›¾ä¸æ— å‘å›¾</p></li><li><p>ç”Ÿæˆæ¨¡å‹ä¸åˆ¤åˆ«æ¨¡å‹</p></li><li><p>ä»HMMä¸MEMM</p></li><li><p>MEMMä¸­çš„æ ‡ç­¾åç½®</p></li><li><p>Log-Linearæ¨¡å‹ä»‹ç»</p></li><li><p>ä»Log-Linearåˆ°LinearCRF</p></li><li><p>LinearCRFçš„å‚æ•°ä¼°è®¡</p></li></ul><h3 id="ç¬¬å››éƒ¨åˆ†ï¼šæ·±åº¦å­¦ä¹ ä¸é¢„è®­ç»ƒç¯‡"><a href="#ç¬¬å››éƒ¨åˆ†ï¼šæ·±åº¦å­¦ä¹ ä¸é¢„è®­ç»ƒç¯‡" class="headerlink" title="ç¬¬å››éƒ¨åˆ†ï¼šæ·±åº¦å­¦ä¹ ä¸é¢„è®­ç»ƒç¯‡"></a>ç¬¬å››éƒ¨åˆ†ï¼šæ·±åº¦å­¦ä¹ ä¸é¢„è®­ç»ƒç¯‡</h3><h4 id="ç¬¬åç« ï¼šæ·±åº¦å­¦ä¹ åŸºç¡€"><a href="#ç¬¬åç« ï¼šæ·±åº¦å­¦ä¹ åŸºç¡€" class="headerlink" title="ç¬¬åç« ï¼šæ·±åº¦å­¦ä¹ åŸºç¡€"></a>ç¬¬åç« ï¼šæ·±åº¦å­¦ä¹ åŸºç¡€</h4><ul><li><p>ç†è§£ç¥ç»ç½‘ç»œ</p></li><li><p>å„ç§å¸¸è§çš„æ¿€æ´»å‡½æ•°</p></li><li><p>åå‘ä¼ æ’­ç®—æ³•</p></li><li><p>æµ…å±‚æ¨¡å‹ä¸æ·±åº¦æ¨¡å‹å¯¹æ¯”</p></li><li><p>æ·±åº¦å­¦ä¹ ä¸­çš„å±‚æ¬¡è¡¨ç¤º</p></li><li><p>æ·±åº¦å­¦ä¹ ä¸­çš„è¿‡æ‹Ÿåˆ</p></li></ul><h4 id="ç¬¬åä¸€ç« ï¼šRNNä¸LSTM"><a href="#ç¬¬åä¸€ç« ï¼šRNNä¸LSTM" class="headerlink" title="ç¬¬åä¸€ç« ï¼šRNNä¸LSTM"></a>ç¬¬åä¸€ç« ï¼šRNNä¸LSTM</h4><ul><li><p>ä»HMMåˆ°RNNæ¨¡å‹</p></li><li><p>RNNä¸­çš„æ¢¯åº¦é—®é¢˜</p></li><li><p>æ¢¯åº¦æ¶ˆå¤±ä¸LSTM</p></li><li><p>LSTMåˆ°GRU</p></li><li><p>åŒå‘LSTM</p></li><li><p>åŒå‘æ·±åº¦LSTM</p></li></ul><h4 id="ç¬¬åäºŒç« ï¼šSeq2Seqæ¨¡å‹ä¸æ³¨æ„åŠ›æœºåˆ¶"><a href="#ç¬¬åäºŒç« ï¼šSeq2Seqæ¨¡å‹ä¸æ³¨æ„åŠ›æœºåˆ¶" class="headerlink" title="ç¬¬åäºŒç« ï¼šSeq2Seqæ¨¡å‹ä¸æ³¨æ„åŠ›æœºåˆ¶"></a>ç¬¬åäºŒç« ï¼šSeq2Seqæ¨¡å‹ä¸æ³¨æ„åŠ›æœºåˆ¶</h4><ul><li><p>Seq2Seqæ¨¡å‹</p></li><li><p>Greedy Decoding</p></li><li><p>Beam Search</p></li><li><p>é•¿ä¾èµ–æ‰€å­˜åœ¨çš„é—®é¢˜</p></li><li><p>æ³¨æ„åŠ›æœºåˆ¶çš„å®ç°</p></li></ul><h4 id="ç¬¬åä¸‰ç« ï¼šåŠ¨æ€è¯å‘é‡ä¸ELMoæŠ€æœ¯"><a href="#ç¬¬åä¸‰ç« ï¼šåŠ¨æ€è¯å‘é‡ä¸ELMoæŠ€æœ¯" class="headerlink" title="ç¬¬åä¸‰ç« ï¼šåŠ¨æ€è¯å‘é‡ä¸ELMoæŠ€æœ¯"></a>ç¬¬åä¸‰ç« ï¼šåŠ¨æ€è¯å‘é‡ä¸ELMoæŠ€æœ¯</h4><ul><li><p>åŸºäºä¸Šä¸‹æ–‡çš„è¯å‘é‡æŠ€æœ¯</p></li><li><p>å›¾åƒè¯†åˆ«ä¸­çš„å±‚æ¬¡è¡¨ç¤º</p></li><li><p>æ–‡æœ¬é¢†åŸŸä¸­çš„å±‚æ¬¡è¡¨ç¤º</p></li><li><p>ELMoæ¨¡å‹</p></li><li><p>ELMoçš„é¢„è®­ç»ƒä¸æµ‹è¯•</p></li><li><p>ELMoçš„ä¼˜ç¼ºç‚¹</p></li></ul><h4 id="ç¬¬åå››ç« ï¼šè‡ªæ³¨æ„åŠ›æœºåˆ¶ä¸Transformer"><a href="#ç¬¬åå››ç« ï¼šè‡ªæ³¨æ„åŠ›æœºåˆ¶ä¸Transformer" class="headerlink" title="ç¬¬åå››ç« ï¼šè‡ªæ³¨æ„åŠ›æœºåˆ¶ä¸Transformer"></a>ç¬¬åå››ç« ï¼šè‡ªæ³¨æ„åŠ›æœºåˆ¶ä¸Transformer</h4><ul><li><p>LSTMæ¨¡å‹çš„ç¼ºç‚¹</p></li><li><p>Transformeræ¦‚è¿°</p></li><li><p>ç†è§£è‡ªæ³¨æ„åŠ›æœºåˆ¶</p></li><li><p>ä½ç½®ä¿¡æ¯çš„ç¼–ç </p></li><li><p>ç†è§£Encoderå’ŒDecoderåŒºåˆ«</p></li><li><p>ç†è§£Transformerçš„è®­ç»ƒä¸é¢„æµ‹</p></li><li><p>Transformerçš„ç¼ºç‚¹</p></li></ul><h4 id="ç¬¬åäº”ç« ï¼šBERTä¸ALBERT"><a href="#ç¬¬åäº”ç« ï¼šBERTä¸ALBERT" class="headerlink" title="ç¬¬åäº”ç« ï¼šBERTä¸ALBERT"></a>ç¬¬åäº”ç« ï¼šBERTä¸ALBERT</h4><ul><li><p>è‡ªç¼–ç ä»‹ç»</p></li><li><p>Transformer Encoder</p></li><li><p>Maskedè¯­è¨€æ¨¡å‹</p></li><li><p>BERTæ¨¡å‹</p></li><li><p>BERTçš„ä¸åŒè®­ç»ƒæ–¹å¼</p></li><li><p>ALBERT</p></li></ul><h4 id="ç¬¬åå…­ç« ï¼šBERTçš„å…¶ä»–å˜ç§"><a href="#ç¬¬åå…­ç« ï¼šBERTçš„å…¶ä»–å˜ç§" class="headerlink" title="ç¬¬åå…­ç« ï¼šBERTçš„å…¶ä»–å˜ç§"></a>ç¬¬åå…­ç« ï¼šBERTçš„å…¶ä»–å˜ç§</h4><ul><li><p>RoBERTaæ¨¡å‹</p></li><li><p>SpanBERTæ¨¡å‹</p></li><li><p>FinBERTæ¨¡å‹</p></li><li><p>å¼•å…¥å…ˆéªŒçŸ¥è¯†</p></li><li><p>K-BERT</p></li><li><p>KG-BERT</p></li></ul><h4 id="ç¬¬åä¸ƒç« ï¼šGPTä¸XLNet"><a href="#ç¬¬åä¸ƒç« ï¼šGPTä¸XLNet" class="headerlink" title="ç¬¬åä¸ƒç« ï¼šGPTä¸XLNet"></a>ç¬¬åä¸ƒç« ï¼šGPTä¸XLNet</h4><ul><li><p>Transformer Encoderå›é¡¾</p></li><li><p>GPT-1, GPT-2,  GPT-3</p></li><li><p>ELMoçš„ç¼ºç‚¹</p></li><li><p>è¯­è¨€æ¨¡å‹ä¸‹åŒæ—¶è€ƒè™‘ä¸Šä¸‹æ–‡</p></li><li><p>Permutation LM</p></li><li><p>åŒæµè‡ªæ³¨æ„åŠ›æœºåˆ¶</p></li></ul><h3 id="ç¬¬äº”éƒ¨åˆ†ï¼šä¿¡æ¯æŠ½å–ä¸çŸ¥è¯†å›¾è°±ç¯‡"><a href="#ç¬¬äº”éƒ¨åˆ†ï¼šä¿¡æ¯æŠ½å–ä¸çŸ¥è¯†å›¾è°±ç¯‡" class="headerlink" title="ç¬¬äº”éƒ¨åˆ†ï¼šä¿¡æ¯æŠ½å–ä¸çŸ¥è¯†å›¾è°±ç¯‡"></a>ç¬¬äº”éƒ¨åˆ†ï¼šä¿¡æ¯æŠ½å–ä¸çŸ¥è¯†å›¾è°±ç¯‡</h3><h4 id="ç¬¬åå…«ç« ï¼šå‘½åè¯†åˆ«ä¸å®ä½“æ¶ˆæ­§"><a href="#ç¬¬åå…«ç« ï¼šå‘½åè¯†åˆ«ä¸å®ä½“æ¶ˆæ­§" class="headerlink" title="ç¬¬åå…«ç« ï¼šå‘½åè¯†åˆ«ä¸å®ä½“æ¶ˆæ­§"></a>ç¬¬åå…«ç« ï¼šå‘½åè¯†åˆ«ä¸å®ä½“æ¶ˆæ­§</h4><ul><li><p>ä¿¡æ¯æŠ½å–çš„åº”ç”¨å’Œå…³é”®æŠ€æœ¯</p></li><li><p>å‘½åå®ä½“è¯†åˆ«</p></li><li><p>NERè¯†åˆ«å¸¸ç”¨æŠ€æœ¯</p></li><li><p>å®ä½“ç»Ÿä¸€æŠ€æœ¯</p></li><li><p>å®ä½“æ¶ˆæ­§æŠ€æœ¯</p></li><li><p>æŒ‡ä»£æ¶ˆè§£</p></li></ul><h4 id="ç¬¬åä¹ç« ï¼šå…³ç³»æŠ½å–"><a href="#ç¬¬åä¹ç« ï¼šå…³ç³»æŠ½å–" class="headerlink" title="ç¬¬åä¹ç« ï¼šå…³ç³»æŠ½å–"></a>ç¬¬åä¹ç« ï¼šå…³ç³»æŠ½å–</h4><ul><li><p>å…³ç³»æŠ½å–çš„åº”ç”¨</p></li><li><p>åŸºäºè§„åˆ™çš„æ–¹æ³•</p></li><li><p>åŸºäºç›‘ç£å­¦ä¹ çš„æ–¹æ³•</p></li><li><p>Bootstrapæ–¹æ³•</p></li><li><p>Distant Supervisionæ–¹æ³•</p></li></ul><h4 id="ç¬¬äºŒåç« ï¼šå¥æ³•åˆ†æ"><a href="#ç¬¬äºŒåç« ï¼šå¥æ³•åˆ†æ" class="headerlink" title="ç¬¬äºŒåç« ï¼šå¥æ³•åˆ†æ"></a>ç¬¬äºŒåç« ï¼šå¥æ³•åˆ†æ</h4><ul><li><p>å¥æ³•åˆ†æçš„åº”ç”¨</p></li><li><p>CFGä»‹ç»</p></li><li><p>ä»CFGåˆ°PCFG</p></li><li><p>è¯„ä¼°è¯­æ³•æ ‘</p></li><li><p>å¯»æ‰¾æœ€å¥½çš„è¯­æ³•æ ‘</p></li><li><p>CKYç®—æ³•</p></li></ul><h4 id="ç¬¬äºŒåä¸€ç« ï¼šä¾å­˜æ–‡æ³•åˆ†æ"><a href="#ç¬¬äºŒåä¸€ç« ï¼šä¾å­˜æ–‡æ³•åˆ†æ" class="headerlink" title="ç¬¬äºŒåä¸€ç« ï¼šä¾å­˜æ–‡æ³•åˆ†æ"></a>ç¬¬äºŒåä¸€ç« ï¼šä¾å­˜æ–‡æ³•åˆ†æ</h4><ul><li><p>ä»è¯­æ³•åˆ†æåˆ°ä¾å­˜æ–‡æ³•åˆ†æ</p></li><li><p>ä¾å­˜æ–‡æ³•åˆ†æçš„åº”ç”¨</p></li><li><p>åŸºäºå›¾ç®—æ³•çš„ä¾å­˜æ–‡æ³•åˆ†æ</p></li><li><p>åŸºäºTransition-basedçš„ä¾å­˜æ–‡æ³•åˆ†æ</p></li><li><p>ä¾å­˜æ–‡æ³•çš„åº”ç”¨æ¡ˆä¾‹</p></li></ul><h4 id="ç¬¬äºŒåäºŒç« ï¼šçŸ¥è¯†å›¾è°±"><a href="#ç¬¬äºŒåäºŒç« ï¼šçŸ¥è¯†å›¾è°±" class="headerlink" title="ç¬¬äºŒåäºŒç« ï¼šçŸ¥è¯†å›¾è°±"></a>ç¬¬äºŒåäºŒç« ï¼šçŸ¥è¯†å›¾è°±</h4><ul><li><p>çŸ¥è¯†å›¾è°±çš„é‡è¦æ€§</p></li><li><p>çŸ¥è¯†å›¾è°±ä¸­çš„å®ä½“ä¸å…³ç³»</p></li><li><p>éç»“æ„åŒ–æ•°æ®ä¸æ„é€ çŸ¥è¯†å›¾è°±</p></li><li><p>çŸ¥è¯†å›¾è°±è®¾è®¡</p></li><li><p>å›¾ç®—æ³•çš„åº”ç”¨</p></li></ul><h3 id="ç¬¬å…­éƒ¨åˆ†ï¼šæ¨¡å‹å‹ç¼©ä¸å›¾ç¥ç»ç½‘ç»œç¯‡"><a href="#ç¬¬å…­éƒ¨åˆ†ï¼šæ¨¡å‹å‹ç¼©ä¸å›¾ç¥ç»ç½‘ç»œç¯‡" class="headerlink" title="ç¬¬å…­éƒ¨åˆ†ï¼šæ¨¡å‹å‹ç¼©ä¸å›¾ç¥ç»ç½‘ç»œç¯‡"></a>ç¬¬å…­éƒ¨åˆ†ï¼šæ¨¡å‹å‹ç¼©ä¸å›¾ç¥ç»ç½‘ç»œç¯‡</h3><h4 id="ç¬¬äºŒåä¸‰ç« ï¼šæ¨¡å‹çš„å‹ç¼©"><a href="#ç¬¬äºŒåä¸‰ç« ï¼šæ¨¡å‹çš„å‹ç¼©" class="headerlink" title="ç¬¬äºŒåä¸‰ç« ï¼šæ¨¡å‹çš„å‹ç¼©"></a>ç¬¬äºŒåä¸‰ç« ï¼šæ¨¡å‹çš„å‹ç¼©</h4><ul><li><p>æ¨¡å‹å‹ç¼©é‡è¦æ€§</p></li><li><p>å¸¸è§çš„æ¨¡å‹å‹ç¼©æ€»è§ˆ</p></li><li><p>åŸºäºçŸ©é˜µåˆ†è§£çš„å‹ç¼©æŠ€æœ¯</p></li><li><p>åŸºäºè’¸é¦çš„å‹ç¼©æŠ€æœ¯</p></li><li><p>åŸºäºè´å¶æ–¯æ¨¡å‹çš„å‹ç¼©æŠ€æœ¯</p></li><li><p>æ¨¡å‹çš„é‡åŒ–</p></li></ul><h4 id="ç¬¬äºŒåå››ç« ï¼šåŸºäºå›¾çš„å­¦ä¹ "><a href="#ç¬¬äºŒåå››ç« ï¼šåŸºäºå›¾çš„å­¦ä¹ " class="headerlink" title="ç¬¬äºŒåå››ç« ï¼šåŸºäºå›¾çš„å­¦ä¹ "></a>ç¬¬äºŒåå››ç« ï¼šåŸºäºå›¾çš„å­¦ä¹ </h4><ul><li><p>å›¾çš„è¡¨ç¤º</p></li><li><p>å›¾ä¸çŸ¥è¯†å›¾è°±</p></li><li><p>å…³äºå›¾çš„å¸¸è§ç®—æ³•</p></li><li><p>Deepwalkå’ŒNode2vec</p></li><li><p>TransEå›¾åµŒå…¥ç®—æ³•</p></li><li><p>DSNEå›¾åµŒå…¥ç®—æ³•</p></li></ul><h4 id="ç¬¬äºŒåäº”ç« ï¼šå›¾ç¥ç»ç½‘ç»œ"><a href="#ç¬¬äºŒåäº”ç« ï¼šå›¾ç¥ç»ç½‘ç»œ" class="headerlink" title="ç¬¬äºŒåäº”ç« ï¼šå›¾ç¥ç»ç½‘ç»œ"></a>ç¬¬äºŒåäº”ç« ï¼šå›¾ç¥ç»ç½‘ç»œ</h4><ul><li><p>å·ç§¯ç¥ç»ç½‘ç»œå›é¡¾</p></li><li><p>åœ¨å›¾ä¸­è®¾è®¡å·ç§¯æ“ä½œ</p></li><li><p>å›¾ä¸­çš„ä¿¡æ¯ä¼ é€’</p></li><li><p>å›¾å·ç§¯ç¥ç»ç½‘ç»œ</p></li><li><p>å›¾å·ç§¯ç¥ç»ç½‘ç»œçš„ç»å…¸åº”ç”¨</p></li></ul><h4 id="ç¬¬äºŒåå…­ç« ï¼šGraphSageä¸GAT"><a href="#ç¬¬äºŒåå…­ç« ï¼šGraphSageä¸GAT" class="headerlink" title="ç¬¬äºŒåå…­ç« ï¼šGraphSageä¸GAT"></a>ç¬¬äºŒåå…­ç« ï¼šGraphSageä¸GAT</h4><ul><li><p>ä»GCNåˆ°GraphSAge</p></li><li><p>æ³¨æ„åŠ›æœºåˆ¶å›å½’</p></li><li><p>GATæ¨¡å‹è¯¦è§£</p></li><li><p>GATä¸GCNæ¯”è¾ƒ</p></li><li><p>å¯¹äºå¼‚æ„æ•°æ®çš„å¤„ç†</p></li></ul><h4 id="ç¬¬äºŒåä¸ƒç« ï¼šå›¾ç¥ç»ç½‘ç»œçš„å…¶ä»–åº”ç”¨"><a href="#ç¬¬äºŒåä¸ƒç« ï¼šå›¾ç¥ç»ç½‘ç»œçš„å…¶ä»–åº”ç”¨" class="headerlink" title="ç¬¬äºŒåä¸ƒç« ï¼šå›¾ç¥ç»ç½‘ç»œçš„å…¶ä»–åº”ç”¨"></a>ç¬¬äºŒåä¸ƒç« ï¼šå›¾ç¥ç»ç½‘ç»œçš„å…¶ä»–åº”ç”¨</h4><ul><li><p>Node Classification</p></li><li><p>Graph Classification</p></li><li><p>Link Prediction</p></li><li><p>ç¤¾åŒºæŒ–æ˜</p></li><li><p>æ¨èç³»ç»Ÿ</p></li><li><p>å›¾ç¥ç»ç½‘ç»œçš„æœªæ¥å‘å±•</p></li></ul><h3 id="éƒ¨åˆ†å¯ç»ƒä¹ çš„æ¡ˆä¾‹"><a href="#éƒ¨åˆ†å¯ç»ƒä¹ çš„æ¡ˆä¾‹" class="headerlink" title="éƒ¨åˆ†å¯ç»ƒä¹ çš„æ¡ˆä¾‹"></a>éƒ¨åˆ†å¯ç»ƒä¹ çš„æ¡ˆä¾‹</h3><ol><li>å®ç°ä¸€ä¸ªæ‹¼å†™çº é”™å™¨</li><li>ä»é›¶å®ç°Word2Vecè¯å‘é‡</li><li>åˆ©ç”¨SkipGramåšæ¨è</li><li>ä»é›¶å®ç°HMMæ¨¡å‹</li><li>åŸºäºLinear-CRFçš„è¯æ€§åˆ†ç±»å™¨å®ç°</li><li>ä»é›¶å®ç°æ·±åº¦å­¦ä¹ åå‘ä¼ æ’­ç®—æ³•</li><li>å®ç°AIç¨‹åºå¸®åŠ©å†™ç¨‹åº</li><li>å®ç°AIç¨‹åºå¸®åŠ©å†™æ–‡ç« </li><li>åŸºäºTransformerçš„æœºå™¨ç¿»è¯‘</li><li>åŸºäºKG-BERTçš„çŸ¥è¯†å›¾è°±å­¦ä¹ </li><li>åŸºäºçŸ¥è¯†å›¾è°±çš„é£æ§ç³»ç»Ÿ</li><li>åŸºäºçŸ¥è¯†å›¾è°±çš„ä¸ªæ€§åŒ–æ•™å­¦</li><li>åˆ©ç”¨è’¸é¦ç®—æ³•å‹ç¼©Transformer</li><li>åˆ©ç”¨GCNå®ç°ç¤¾äº¤æ¨è</li><li>åŸºäºGATçš„è™šå‡æ–°é—»æ£€æµ‹</li></ol><h3 id="é¡¹ç›®ä½œä¸š"><a href="#é¡¹ç›®ä½œä¸š" class="headerlink" title="é¡¹ç›®ä½œä¸š"></a>é¡¹ç›®ä½œä¸š</h3><ol><li><p>è±†ç“£ç”µå½±è¯„åˆ†é¢„æµ‹</p><p> æ¶‰åŠåˆ°çš„çŸ¥è¯†ç‚¹ï¼š</p><ul><li><p>ä¸­æ–‡åˆ†è¯æŠ€æœ¯</p></li><li><p>ç‹¬çƒ­ç¼–ç ã€tf-idf</p></li><li><p>åˆ†å¸ƒå¼è¡¨ç¤ºä¸Word2Vec</p></li><li><p>BERTå‘é‡ã€å¥å­å‘é‡</p></li></ul></li><li><p>æ™ºèƒ½å®¢æœé—®ç­”ç³»ç»Ÿ</p><p> æ¶‰åŠåˆ°çš„çŸ¥è¯†ç‚¹ï¼š</p><ul><li><p>é—®ç­”ç³»ç»Ÿæ­å»ºæµç¨‹</p></li><li><p>æ–‡æœ¬çš„å‘é‡åŒ–è¡¨ç¤º</p></li><li><p>FastText</p></li><li><p>å€’æ’è¡¨</p></li><li><p>é—®ç­”ç³»ç»Ÿä¸­çš„å¬å›ã€æ’åº</p></li></ul></li><li><p>åŸºäºLinear-CRFçš„åŒ»ç–—å®ä½“è¯†åˆ«</p><p> æ¶‰åŠåˆ°çš„çŸ¥è¯†ç‚¹ï¼š</p><ul><li><p>å‘½åå®ä½“è¯†åˆ«</p></li><li><p>ç‰¹å¾å·¥ç¨‹</p></li><li><p>è¯„ä¼°æ ‡å‡†</p></li><li><p>è¿‡æ‹Ÿåˆ</p></li></ul></li><li><p>åŸºäºé—²èŠçš„å¯¹è¯ç³»ç»Ÿæ­å»º</p><p> æ¶‰åŠåˆ°çš„çŸ¥è¯†ç‚¹ï¼š</p><ul><li><p>å¸¸è§çš„å¯¹è¯ç³»ç»ŸæŠ€æœ¯</p></li><li><p>é—²èŠå‹å¯¹è¯ç³»ç»Ÿæ¡†æ¶</p></li><li><p>æ•°æ®çš„å¤„ç†æŠ€æœ¯</p></li><li><p>BERTçš„ä½¿ç”¨</p></li><li><p>Transformerçš„ä½¿ç”¨</p></li></ul></li><li><p>æ­å»ºåŸºäºåŒ»ç–—çŸ¥è¯†å›¾è°±çš„é—®ç­”ç³»ç»Ÿ</p><p> æ¶‰åŠåˆ°çš„çŸ¥è¯†ç‚¹ï¼š</p><ul><li><p>åŒ»ç–—ä¸“ä¸šè¯æ±‡çš„ä½¿ç”¨</p></li><li><p>è·å–é—®å¥çš„æ„å›¾</p></li><li><p>é—®å¥çš„è§£é‡Šã€æå–å…³é”®å®ä½“</p></li><li><p>è½¬åŒ–ä¸ºæŸ¥è¯¢è¯­å¥</p></li></ul></li><li><p>æ­å»ºåŸºäºåŒ»ç–—çŸ¥è¯†å›¾è°±çš„é—®ç­”ç³»ç»Ÿ</p><p> æ¶‰åŠåˆ°çš„çŸ¥è¯†ç‚¹ï¼š</p><ul><li><p>æ–‡æœ¬æ‘˜è¦ç”Ÿæˆä»‹ç»</p></li><li><p>å…³é”®è¯æå–æŠ€æœ¯</p></li><li><p>å›¾ç¥ç»ç½‘ç»œçš„æ‘˜è¦ç”Ÿæˆ</p></li><li><p>åŸºäºç”Ÿæˆå¼çš„æ‘˜è¦æå–æŠ€æœ¯</p></li><li><p>æ–‡æœ¬æ‘˜è¦è´¨é‡çš„è¯„ä¼°</p></li></ul></li></ol><h3 id="è®ºæ–‡"><a href="#è®ºæ–‡" class="headerlink" title="è®ºæ–‡"></a>è®ºæ–‡</h3><table><thead><tr><th>ä¸»é¢˜</th><th>è®ºæ–‡åç§°</th></tr></thead><tbody><tr><td>æœºå™¨å­¦ä¹ </td><td>XGBoost: A Scalable Tree Boosting System</td></tr><tr><td>æœºå™¨å­¦ä¹ </td><td>Regularization and Variable Selection via the Elastic Net</td></tr><tr><td>è¯å‘é‡</td><td>Evaluation methods for unsupervised word embeddings</td></tr><tr><td>è¯å‘é‡</td><td>Evaluation methods for unsupervised word embeddings</td></tr><tr><td>è¯å‘é‡</td><td>GloVe: Global Vectors for Word Representation</td></tr><tr><td>è¯å‘é‡</td><td>Deep Contexualized Word Representations</td></tr><tr><td>è¯å‘é‡</td><td>Attention is All You Need</td></tr><tr><td>è¯å‘é‡</td><td>BERT: Pretraining of Deep Bidirectional Transformers for Language Understanding</td></tr><tr><td>è¯å‘é‡</td><td>XLNet: Generalized Autoregressive Pretraining for Language Understanding</td></tr><tr><td>è¯å‘é‡</td><td>KG-BERT: BERT for Knowledge Graph Completion</td></tr><tr><td>è¯å‘é‡</td><td>Language Models are Few-shot Learners</td></tr><tr><td>å›¾å­¦ä¹ </td><td>Semi-supervised Classification with Graph Convolutional Networks</td></tr><tr><td>å›¾å­¦ä¹ </td><td>Graph Attention Networks</td></tr><tr><td>å›¾å­¦ä¹ </td><td>GraphSAGE: Inductive Representation Learning on Large Graphs</td></tr><tr><td>å›¾å­¦ä¹ </td><td>Node2Vec: Scalable Feature Learning for Networks</td></tr></tbody></table><p>å‚è€ƒé“¾æ¥: <a href="https://mp.weixin.qq.com/s/GPCmLavk7NjHVwgWIb02-g">https://mp.weixin.qq.com/s/GPCmLavk7NjHVwgWIb02-g</a></p>]]></content>
      
      
      <categories>
          
          <category> çŸ¥è¯†æ¡†æ¶ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> nlp </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€æ¯æ—¥ç®—æ³•ã€‘2021å¹´03æœˆ31æ—¥ å°é›¨ æœ€å°è·¯å¾„å’Œ</title>
      <link href="/2021/04/01/zui-xiao-lu-jing-he/"/>
      <url>/2021/04/01/zui-xiao-lu-jing-he/</url>
      
        <content type="html"><![CDATA[<p>è¿™é“é¢˜æ˜¯LeeCodeç¬¬<a href="https://leetcode-cn.com/problems/minimum-path-sum/">64</a>é¢˜ï¼Œå’Œä¹‹å‰çš„ç¬¬62é¢˜ä¸€æ ·ï¼Œå±äºåŠ¨æ€è§„åˆ’ä¸­çš„ä¸­ç­‰éš¾åº¦é¢˜ç›®ã€‚</p><span id="more"></span><h4 id="é¢˜ç›®"><a href="#é¢˜ç›®" class="headerlink" title="é¢˜ç›®"></a>é¢˜ç›®</h4><p><img src="https://raw.githubusercontent.com/Skylyong/i/main/20210401021549.png"></p><h4 id="è§£é¢˜æ€è·¯"><a href="#è§£é¢˜æ€è·¯" class="headerlink" title="è§£é¢˜æ€è·¯"></a>è§£é¢˜æ€è·¯</h4><p>æœ¬é¢˜çš„è§£é¢˜æ€è·¯å’Œä¹‹å‰çš„ç¬¬<a href="https://ailyong.cn/2021/03/30/bu-tong-lu-jing/">62é¢˜</a>å¾ˆç›¸ä¼¼ï¼Œå®šä¹‰dp[i][j]ä¸ºä»ç¬¬(i, j)ç‚¹èµ°åˆ°å³ä¸‹è§’çš„æœ€çŸ­è·¯å¾„ï¼Œåˆ™æœ‰dp[i][j] = dp[i+1][j] + dp[i][j+1].</p><p>ç„¶åæˆ‘ä»¬æ¥è€ƒè™‘è¾¹ç•Œæ¡ä»¶ï¼Œæ­¤é¢˜çš„è¾¹é™…å’Œç¬¬62é¢˜çš„è¾¹é™…ä¸€æ ·ï¼Œä¸åŒçš„æ˜¯è¾¹ç•Œä¸Šé¢dpå€¼ï¼Œå½“åœ¨ä¸‹è¾¹ç•Œçš„æ—¶å€™dp[m-1][j] = sum(gird[m-1][j:-1]), åœ¨å·¦è¾¹ç•Œçš„æ—¶å€™<br>dp[i][n-1] = sum(grid[i:-1][n-1])ï¼Œ dp[m-1][n-1] = grid[m-1][n-1].</p><p>æœ€ç»ˆç­”æ¡ˆä¸º: dp[0][0]</p><h4 id="å®ç°ä»£ç "><a href="#å®ç°ä»£ç " class="headerlink" title="å®ç°ä»£ç "></a>å®ç°ä»£ç </h4><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">minPathSum</span>(<span class="params">self, grid: <span class="type">List</span>[<span class="type">List</span>[<span class="built_in">int</span>]]</span>) -&gt; <span class="built_in">int</span>:</span><br><span class="line">        m = <span class="built_in">len</span>(grid)</span><br><span class="line">        n = <span class="built_in">len</span>(grid[<span class="number">0</span>])</span><br><span class="line">        dp = [[<span class="number">0</span> <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(n)] <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(m)] <span class="comment">#è¿™é‡Œçº ç»“äº†ä¸å°‘æ—¶é—´</span></span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(n-<span class="number">1</span>, -<span class="number">1</span>, -<span class="number">1</span>):</span><br><span class="line">            dp[m-<span class="number">1</span>][j] = <span class="built_in">sum</span>(grid[m-<span class="number">1</span>]) - <span class="built_in">sum</span>(grid[m-<span class="number">1</span>][<span class="number">0</span>:j]) </span><br><span class="line">        col = [x[n-<span class="number">1</span>] <span class="keyword">for</span> x <span class="keyword">in</span> grid]</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(m-<span class="number">1</span>, -<span class="number">1</span>, -<span class="number">1</span>):</span><br><span class="line">            dp[i][n-<span class="number">1</span>] = <span class="built_in">sum</span>(col)-<span class="built_in">sum</span>(col[<span class="number">0</span>:i])</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(m-<span class="number">2</span>, -<span class="number">1</span>, -<span class="number">1</span>):</span><br><span class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(n-<span class="number">2</span>, -<span class="number">1</span>, -<span class="number">1</span>):</span><br><span class="line">                dp[i][j] = grid[i][j] + <span class="built_in">min</span>(dp[i+<span class="number">1</span>][j], dp[i][j+<span class="number">1</span>])</span><br><span class="line">        <span class="keyword">return</span> dp[<span class="number">0</span>][<span class="number">0</span>]</span><br></pre></td></tr></tbody></table></figure><h4 id="æ„Ÿæƒ³"><a href="#æ„Ÿæƒ³" class="headerlink" title="æ„Ÿæƒ³"></a>æ„Ÿæƒ³</h4><p>ä¸€å¼€å§‹å£°æ˜äºŒç»´æ•°ç»„çš„æ—¶å€™ç”¨äº†æµ…æ‹·è´ï¼Œæ”¹å˜æŸä¸€è¡Œçš„å€¼çš„æ—¶å€™ï¼Œå…¶ä»–è¡Œçš„å€¼ä¹Ÿä¼šè·Ÿç€æ”¹å˜ï¼Œä½†æ˜¯æˆ‘è¿™ä¹ˆæï¼Œç«Ÿç„¶é€šè¿‡äº†60å¤šä¸ªæ ·ä¾‹ï¼Œå¥½åƒæ˜¯åœ¨ç¬¬63ä¸ªæ ·ä¾‹çš„æ—¶å€™å¡ä½äº†ï¼ˆæŒ å¤´ï¼‰ï¼Œåé¢ä¸€ä¸ªä¸ªçš„æŠŠdpé‡Œé¢çš„å€¼æ‰“å°å‡ºæ¥çœ‹ï¼Œæ‰å‘ç°åŸæ¥æ˜¯ç”¨äº†æµ…æ‹·è´ï¼Œå¯¼è‡´è¿™æ ·çš„é—®é¢˜ï¼Œæ¢æˆäº†è¿­ä»£ç”Ÿæˆå¼åï¼Œç»ˆäºACäº†ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³•ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åŠ¨æ€è§„åˆ’ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>GitLabæ­å»ºç¬”è®°</title>
      <link href="/2021/03/31/gitlab-da-jian-bi-ji/"/>
      <url>/2021/03/31/gitlab-da-jian-bi-ji/</url>
      
        <content type="html"><![CDATA[<h4 id="å®‰è£…gitlabï¼š"><a href="#å®‰è£…gitlabï¼š" class="headerlink" title="å®‰è£…gitlabï¼š"></a><a href="https://packages.gitlab.com/gitlab/gitlab-ee/packages/ubuntu/focal/gitlab-ee_13.8.7-ee.0_amd64.deb">å®‰è£…gitlab</a>ï¼š</h4><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">curl -s https://packages.gitlab.com/install/repositories/gitlab/gitlab-ee/</span><br><span class="line">script.deb.sh | <span class="built_in">sudo</span> bash</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><h4 id="é˜²ç«å¢™è®¾ç½®"><a href="#é˜²ç«å¢™è®¾ç½®" class="headerlink" title="é˜²ç«å¢™è®¾ç½®"></a>é˜²ç«å¢™è®¾ç½®</h4><p> ä¹‹å‰å·²ç»é…ç½®å¥½äº†ï¼Œç•¥</p><h4 id="gitlabé…ç½®"><a href="#gitlabé…ç½®" class="headerlink" title="gitlabé…ç½®"></a><a href="https://docs.gitlab.com/omnibus/settings/configuration.html#configuring-the-external-url-for-gitlab">gitlabé…ç½®</a></h4><p>æ‰“å¼€/etc/gitlab/gitlab.rb</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">external_url <span class="string">'http://gitlab.bytenlp.site'</span></span><br><span class="line"><span class="comment"># ç³»ç»Ÿç«¯å£å†²çªï¼Œæˆ‘æŠŠç«¯å£æ”¹ä¸ºäº†85</span></span><br><span class="line">nginx[<span class="string">'listen_port'</span>] = 85</span><br></pre></td></tr></tbody></table></figure><h4 id="è®©é…ç½®ç”Ÿæ•ˆï¼Œå¹¶é‡å¯gitlabæœåŠ¡"><a href="#è®©é…ç½®ç”Ÿæ•ˆï¼Œå¹¶é‡å¯gitlabæœåŠ¡" class="headerlink" title="è®©é…ç½®ç”Ÿæ•ˆï¼Œå¹¶é‡å¯gitlabæœåŠ¡"></a>è®©é…ç½®ç”Ÿæ•ˆï¼Œå¹¶é‡å¯gitlabæœåŠ¡</h4><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># é‡æ–°é…ç½®gitlab</span></span><br><span class="line"><span class="built_in">sudo</span> gitlab-ctl reconfigure</span><br><span class="line"><span class="comment"># é‡å¯gitlab</span></span><br><span class="line">gitlab-ctl restart </span><br></pre></td></tr></tbody></table></figure><h4 id="åœ¨æµè§ˆå™¨è¾“å…¥â€ip-ç«¯å£å·â€æŸ¥çœ‹æ•ˆæœï¼Œè¯¦ç»†å‚è€ƒè¿™é‡Œ"><a href="#åœ¨æµè§ˆå™¨è¾“å…¥â€ip-ç«¯å£å·â€æŸ¥çœ‹æ•ˆæœï¼Œè¯¦ç»†å‚è€ƒè¿™é‡Œ" class="headerlink" title="åœ¨æµè§ˆå™¨è¾“å…¥â€ip:ç«¯å£å·â€æŸ¥çœ‹æ•ˆæœï¼Œè¯¦ç»†å‚è€ƒè¿™é‡Œ"></a>åœ¨æµè§ˆå™¨è¾“å…¥â€ip:ç«¯å£å·â€æŸ¥çœ‹æ•ˆæœï¼Œè¯¦ç»†å‚è€ƒ<a href="https://www.jianshu.com/p/ade38a53b1ac">è¿™é‡Œ</a></h4><p>å‚è€ƒæ•™ç¨‹ï¼š</p><ul><li><a href="https://www.jianshu.com/p/bf7b09e234c8">https://www.jianshu.com/p/bf7b09e234c8</a></li><li><a href="https://lil-xing.top/2019/08/26/GitLab%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B/">https://lil-xing.top/2019/08/26/GitLab%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B/</a><br>sudo apt-get install gitlab-ee=13.8.7-ee.0</li><li><a href="https://www.jianshu.com/p/ade38a53b1ac">https://www.jianshu.com/p/ade38a53b1ac</a></li></ul><p>æµ‹è¯•ä¸€ä¸‹</p>]]></content>
      
      
      <categories>
          
          <category> çˆ¬å‘æ€»ç»“ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> GitLab </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è‹±è¯­å£è¯­ç»ƒä¹ ç”µå½±æ¨è</title>
      <link href="/2021/03/31/ying-yu-kou-yu-lian-xi-dian-ying-tui-jian/"/>
      <url>/2021/03/31/ying-yu-kou-yu-lian-xi-dian-ying-tui-jian/</url>
      
        <content type="html"><![CDATA[<p>æˆ‘æ˜¯ä»å–œé©¬æ‹‰é›…è·¯è½¬ç²‰è¿‡æ¥å¬è¯¾çš„ï¼Œ<a href="https://www.ximalaya.com/waiyu/19111514/">å¼ è€å¸ˆ</a>æ¨èçš„ä¸œè¥¿å¿…ç„¶æ˜¯å¹²è´§ã€‚å› æ­¤åˆ©ç”¨å‘¨æœ«æ—¶é—´æœé›†æ•´ç†äº†ä¸€äº›è€å¸ˆè¯¾ä¸Šæ¨èçš„è§†é¢‘èµ„æºï¼Œæ–¹ä¾¿è‡ªå·±ä¹Ÿåˆ†äº«ç»™å¤§å®¶ã€‚</p><h4 id="ç”µå½±æ¨è"><a href="#ç”µå½±æ¨è" class="headerlink" title="ç”µå½±æ¨è"></a>ç”µå½±æ¨è</h4><ul><li><p><a href="https://pan.baidu.com/s/1f1MKRhiGnhXPakdql9BFcQ">The Queen</a> (æå–ç :gysn)</p></li><li><p><a href="https://pan.baidu.com/s/1thHrc_mUaHD8pFyZwI4g2g">The Kingâ€™s Speech</a> (æå–ç :gr42ï¼‰</p></li><li><p><a href="https://pan.baidu.com/s/1hIyXIJ53H-p_rsCxR0f22Q">Downton Abbey</a> (æå–ç :cyb9)</p></li><li><p><a href="https://pan.baidu.com/s/1cFcyl3ZZ5TomwZnk0IbbTg">The Holiday</a> (æå–ç :48ks) å­—å¹• (æå–ç :4vix)</p></li><li><p><a href="https://pan.baidu.com/s/1PjDRYpgfXw557lkICTZiWQ">Coco</a> (æå–ç :tkwx)</p></li><li><p><a href="https://pan.baidu.com/s/10o4jLTT9etBVNlhE9pLgEQ">Darkest Hours</a> (æå–ç :okwz)</p></li><li><p><a href="https://pan.baidu.com/s/1s406g4lKsv2YPreZ3egBPw">Wonder</a> (æå–ç :yjog)</p></li><li><p><a href="https://pan.baidu.com/s/1cygoZKcHhtBgF3wA46LXHg">Harry Potter</a> (æå–ç :cg1w)</p></li><li><p><a href="https://pan.baidu.com/s/1Nptp0lnqBEsoWiGygB7Qgw">Big Hero 6</a> (æå–ç :g4q4)</p></li><li><p><a href="https://pan.baidu.com/s/1iLHz4MQpkWRUAz6ApnM_yA">Zootopia</a>ï¼ˆæå–ç :8tmm)</p></li><li><p><a href="https://ddrk.me/frozen-2013/">Frozen 1</a></p></li><li><p><a href="https://ddrk.me/frozen-2/">Frozen 2</a></p></li></ul><h4 id="ç”µè§†å‰§æ¨è"><a href="#ç”µè§†å‰§æ¨è" class="headerlink" title="ç”µè§†å‰§æ¨è"></a>ç”µè§†å‰§æ¨è</h4><ul><li><p><a href="https://pan.baidu.com/s/1oLZdVtC2dxQsntKqFpYGzA">Miranda</a> (æå–ç :ogrp)</p></li><li><p><a href="https://ddrk.me/the-it-crowd/">The IT Crowd</a></p></li><li><p><a href="https://pan.baidu.com/s/1urGHdiTmz4STpnXnGgnw9Q">Friends ç£åŠ›é“¾æ¥</a> (æå–ç : ldlu)ï¼ˆç£åŠ›é“¾æ¥å¯ç”¨è¿…é›·ä¸‹è½½ï¼Œå…·ä½“æ“ä½œå¯è‡ªè¡Œæœç´¢ï¼‰</p></li><li><p><a href="https://www.zxzj.me/vodsearch/-------------.html?wd=%E6%91%A9%E7%99%BB%E5%AE%B6%E5%BA%AD">Modern Family</a></p></li><li><p><a href="https://www.zxzj.me/vodsearch/-------------.html?wd=%E7%94%9F%E6%B4%BB%E5%A4%A7%E7%88%86%E7%82%B8">TBBT ç”Ÿæ´»å¤§çˆ†ç‚¸</a>ï¼ˆé«˜æ¸…ä¸‹è½½ç£åŠ›<a href="magnet:?xt=urn:btih:49CF1C0B0305D8F5031CB99840C09F06EABB79F6&amp;dn=The+Big+Bang+Theory+Season+1-11+Complete+720p&amp;tr=udp://tracker.coppersurfer.tk:6969/announce&amp;tr=udp://9.rarbg.to:2920/announce&amp;tr=udp://tracker.opentrackr.org:1337&amp;tr=udp://tracker.internetwarriors.net:1337/announce&amp;tr=udp://tracker.leechers-paradise.org:6969/announce&amp;tr=udp://tracker.coppersurfer.tk:6969/announce&amp;tr=udp://tracker.pirateparty.gr:6969/announce&amp;tr=udp://tracker.cyberia.is:6969/announce">é“¾æ¥</a>ï¼‰</p></li></ul><h4 id="ç§‘æ™®è®°å½•ç‰‡æ¨è"><a href="#ç§‘æ™®è®°å½•ç‰‡æ¨è" class="headerlink" title="ç§‘æ™®è®°å½•ç‰‡æ¨è"></a>ç§‘æ™®è®°å½•ç‰‡æ¨è</h4><ul><li><a href="https://www.bilibili.com/video/av70632732?p=2&amp;spm_id_from=pageDriver">å›½å®¶åœ°ç†ç§‘æ™®101</a></li></ul><p>èµ„æ–™æ•´ç†ä¸æ˜“ï¼Œå¦‚æœè§‰å¾—å¥½çš„è¯ï¼Œè®°å¾—æ‰“èµæ”¯æŒä¸€æ³¢ï¼Œä¸€å—é’±ä¹Ÿæ˜¯å¥–åŠ±ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹ èµ„æ–™ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç”µå½± </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å­¦ä¹ è§†é¢‘æ•´ç†</title>
      <link href="/2021/03/31/xue-xi-shi-pin-zheng-li/"/>
      <url>/2021/03/31/xue-xi-shi-pin-zheng-li/</url>
      
        <content type="html"><![CDATA[<h4 id="MITè®¡ç®—æœºç§‘å­¦å¯¼è®º"><a href="#MITè®¡ç®—æœºç§‘å­¦å¯¼è®º" class="headerlink" title="MITè®¡ç®—æœºç§‘å­¦å¯¼è®º"></a>MITè®¡ç®—æœºç§‘å­¦å¯¼è®º</h4><p>MITè®¡ç®—æœºç§‘å­¦å¯¼è®ºæ•™å­¦è§†é¢‘ï¼Œä¸­è‹±æ–‡å­—å¹•å¯ä»¥éšæ„åˆ‡æ¢ï¼Œè€å¸ˆå‘éŸ³å¾ˆå¥½ï¼Œå¼ºæ¨</p><ul><li><p><a href="https://www.bilibili.com/video/BV1sJ411n7aJ?from=search&amp;seid=18376503429056860180">6.0001åŸºç¡€</a></p></li><li><p><a href="https://www.bilibili.com/video/av83124797?spm_id_from=333.788.b_636f6d6d656e74.4">6.0002è¿›ä»·</a></p></li><li><p><a href="https://book.douban.com/subject/30155590/">æ•™æ</a></p></li><li><p><a href="https://ocw.mit.edu/courses/electrical-engineering-and-computer-science/6-0002-introduction-to-computational-thinking-and-data-science-fall-2016/index.htm">6.0002è¯¾åç»ƒä¹ </a></p></li><li><p><a href="https://pan.baidu.com/s/1hqxh8ag#list/path=%2F">é…å¥—ppt</a></p></li></ul><p>æ²¡æœ‰æ‰¾åˆ°ä¸æœ€æ–°è§†é¢‘é…å¥—çš„slideï¼Œåªæ‰¾åˆ°15å¹´çš„.</p><h4 id="çº¿æ€§ä»£æ•°"><a href="#çº¿æ€§ä»£æ•°" class="headerlink" title="çº¿æ€§ä»£æ•°"></a>çº¿æ€§ä»£æ•°</h4>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹ èµ„æ–™ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç¼–ç¨‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€è¯¾ç¨‹è®¾è®¡ã€‘æœ€å°ç”Ÿæˆæ ‘åº”ç”¨</title>
      <link href="/2021/03/31/ke-cheng-she-ji-zui-xiao-sheng-cheng-shu-ying-yong/"/>
      <url>/2021/03/31/ke-cheng-she-ji-zui-xiao-sheng-cheng-shu-ying-yong/</url>
      
        <content type="html"><![CDATA[<h4 id="éœ€æ±‚æè¿°"><a href="#éœ€æ±‚æè¿°" class="headerlink" title="éœ€æ±‚æè¿°"></a>éœ€æ±‚æè¿°</h4><p>æœ¬æ¬¡è¯¾ç¨‹è®¾è®¡è¦æ±‚åœ¨nä¸ªåŸå¸‚ä¹‹é—´æ¶è®¾n-1æ¡çº¿è·¯ï¼Œå®ç°è¿™å‡ ä¸ªåŸå¸‚ä¹‹é—´çš„ç½‘ç»œé€šä¿¡ï¼Œè¦æ±‚ç½‘ç»œç»æµä»£ä»·æœ€ä½ã€‚å…·ä½“è¦æ±‚å¦‚ä¸‹ï¼š<br><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy8xNzc4Njc2Mi1iN2U3M2JhMjE3ODgyMWVmLmpwZw?x-oss-process=image/format,png"></p><p>é—®é¢˜åˆ†æ<br>æ ¹æ®è®¾è®¡è¦æ±‚ï¼Œæˆ‘ä»¬å‡è®¾åŸå¸‚ä¹‹é—´çš„è·ç¦»è¶Šå¤§æ¶è®¾ç½‘çº¿çš„ç»æµä»£ä»·è¶Šå¤§ï¼Œå› æ­¤å¯ä»¥ç”¨ä¸¤ä¸ªåŸå¸‚ä¹‹é—´çš„è·ç¦»ä½œä¸ºè¾¹çš„æƒé‡ã€‚</p><p>nä¸ªåŸå¸‚ä¹‹é—´æœ€å¤šå¯ä»¥ç”Ÿæˆ 1+2+â€¦+(n-1)æ¡è¾¹ï¼Œåˆ†åˆ«è®¡ç®—å‡ºæ¯æ¡è¾¹çš„é•¿åº¦ç„¶åå¯¹ä»–ä»¬è¿›è¡Œå‡åºæ’åºï¼Œåˆ©ç”¨å¹¶æŸ¥é›†å¾—åˆ°ç”±n-1æ¡è¾¹ç»„æˆçš„æœ€å°ç”Ÿæˆæ ‘ï¼Œé—®é¢˜ä¾¿å¾—åˆ°è§£å†³ã€‚</p><p>ä¸ºäº†è§£å†³ä¸Šè¿°é—®é¢˜ï¼Œéœ€è¦æ„å»ºä¸€ä¸ªåŸå¸‚ç»“æ„ä½“CITYæ¥è¡¨ç¤ºåŸå¸‚ï¼Œå¹¶ä¸”è¿˜éœ€è¦æ„å»ºEDGEç»“æ„ä½“æ¥è¡¨ç¤ºåŸå¸‚ä¸åŸå¸‚çš„è¾¹ï¼Œå¹¶åˆ©ç”¨éšæœºå‡½æ•°ç”ŸæˆåŸå¸‚çš„åæ ‡ã€‚</p><h4 id="å®ç°ä»£ç "><a href="#å®ç°ä»£ç " class="headerlink" title="å®ç°ä»£ç "></a>å®ç°ä»£ç </h4><figure class="highlight c"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;time.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;math.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> MaxSize (10000)<span class="comment">//nçš„å–å€¼æœ€å¤§ä¸ºMaxSize</span></span></span><br><span class="line"><span class="comment">/*---------------------ç»“æ„ä½“å®šä¹‰---------------------*/</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">City</span>{</span></span><br><span class="line">    <span class="comment">//åŸå¸‚ç»“æ„ä½“</span></span><br><span class="line">    <span class="type">int</span> id;<span class="comment">//åŸå¸‚ID</span></span><br><span class="line">    <span class="type">int</span> x, y;<span class="comment">//åŸå¸‚çš„åæ ‡</span></span><br><span class="line">}CITY;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">edges</span>{</span></span><br><span class="line">    <span class="comment">//è¾¹ç»“æ„ä½“</span></span><br><span class="line">    <span class="type">int</span> s, e;<span class="comment">//sä¸ºèµ·å§‹é¡¶ç‚¹ eä¸ºç»ˆæ­¢é¡¶ç‚¹</span></span><br><span class="line">    <span class="type">double</span> cost;<span class="comment">//è¾¹çš„æƒå€¼ï¼Œå³ä¸¤ä¸ªé¡¶ç‚¹ä¹‹é—´çš„è·ç¦»</span></span><br><span class="line">}EDGE;</span><br><span class="line"> </span><br><span class="line"><span class="comment">/*---------------------ç”ŸæˆåŸå¸‚å¹¶æ˜¾ç¤º---------------------*/</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">CreateCityPos</span><span class="params">(CITY *&amp; city, <span class="type">int</span> n)</span>{</span><br><span class="line">    <span class="comment">//éšæœºç”ŸæˆåŸå¸‚åæ ‡</span></span><br><span class="line">    city = (CITY*)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(CITY)* n);</span><br><span class="line">    srand((<span class="type">unsigned</span>)time(<span class="literal">NULL</span>));<span class="comment">//è®¾ç½®éšæœºæ•°çš„ç§å­</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; ++i)</span><br><span class="line">    {<span class="comment">//éšæœºç”Ÿæˆnä¸ªåŸå¸‚çš„x,yåæ ‡å€¼</span></span><br><span class="line">        city[i].id = i + <span class="number">1</span>;</span><br><span class="line">        city[i].x = rand() % <span class="number">100</span>;</span><br><span class="line">        city[i].y = rand() % <span class="number">100</span>;</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"><span class="type">void</span> <span class="title function_">ShowCityPos</span><span class="params">(CITY*city, <span class="type">int</span> n)</span></span><br><span class="line">{<span class="comment">//æ˜¾ç¤ºåŸå¸‚ä¿¡æ¯ï¼ŒåŸå¸‚åºå·ã€xåæ ‡å’Œyåæ ‡</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"\nå„åŸå¸‚çš„ç¼–å·åŠåæ ‡:\n"</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; ++i)</span><br><span class="line">    {</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%d:[%d, %d]\n"</span>, city[i].id, city[i].x, city[i].y);</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"> </span><br><span class="line"><span class="comment">/*---------------------è®¡ç®—åŸå¸‚ä¸¤ä¸¤ä¹‹é—´çš„è·ç¦»ï¼Œç”Ÿæˆè¾¹æ•°ç»„---------------------*/</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">Sum</span><span class="params">(<span class="type">int</span> n)</span></span><br><span class="line">{<span class="comment">//è®¡ç®—nçš„å‰né¡¹å’Œï¼Œç”¨äºæ ¹æ®é¡¶ç‚¹ç¡®å®šè¾¹çš„æ•°ç›® å½“é¡¶ç‚¹ä¸ºnæ—¶ åˆ™æœ€å¤šå¯ä»¥äº§ç”ŸSum(n-1)æ¡è¾¹</span></span><br><span class="line">    <span class="type">int</span> sum = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; ++i)</span><br><span class="line">        sum += i;</span><br><span class="line">    <span class="keyword">return</span> sum;</span><br><span class="line">}</span><br><span class="line"> </span><br><span class="line"><span class="type">double</span> <span class="title function_">CityDist</span><span class="params">(<span class="type">const</span> CITY*a, <span class="type">const</span> CITY*b)</span></span><br><span class="line">{<span class="comment">//è®¡ç®—ä¸¤ä¸ªåŸå¸‚ä¹‹é—´çš„è·ç¦»</span></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">sqrt</span>(<span class="type">double</span>((a-&gt;x - b-&gt;x)*(a-&gt;x - b-&gt;x) + (a-&gt;y - b-&gt;y)*(a-&gt;y - b-&gt;y)));</span><br><span class="line">}</span><br><span class="line"><span class="type">void</span> <span class="title function_">CreateEdges</span><span class="params">(EDGE* &amp; e, CITY* city, <span class="type">int</span> n)</span></span><br><span class="line">{<span class="comment">//æ ¹æ®åŸå¸‚ä¿¡æ¯ç”ŸæˆåŸå¸‚ä¹‹é—´çš„è¾¹</span></span><br><span class="line">    e = (EDGE*)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(EDGE)*Sum(n - <span class="number">1</span>));<span class="comment">//è¾¹çš„æ€»æ•°ä¸ºSum(n-1)</span></span><br><span class="line">    <span class="type">int</span> cnt = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; ++i)</span><br><span class="line">    {</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> k = i + <span class="number">1</span>; k &lt; n; ++k)</span><br><span class="line">        {</span><br><span class="line">            (e + cnt)-&gt;s = city[i].id;<span class="comment">//èµ·å§‹é¡¶ç‚¹</span></span><br><span class="line">            (e + cnt)-&gt;e = city[k].id;<span class="comment">//ç»ˆæ­¢é¡¶ç‚¹</span></span><br><span class="line">            (e + cnt)-&gt;cost = CityDist(&amp;city[i], &amp;city[k]);<span class="comment">//è¾¹çš„æƒå€¼</span></span><br><span class="line">            ++cnt;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"><span class="type">void</span> <span class="title function_">ShowCityEdges</span><span class="params">(EDGE*edges, <span class="type">int</span> n)</span></span><br><span class="line">{<span class="comment">//æ‰“å°è¾¹ä¿¡æ¯</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"\nå„åŸå¸‚é—´çš„è·ç¦»(åŸå¸‚1-åŸå¸‚2:è¾¹æƒå€¼ï¼ˆè·ç¦»ï¼‰)\n"</span>);</span><br><span class="line">    <span class="comment">//show edges:</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; Sum(n<span class="number">-1</span>); ++i)</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%d-%d : %f\n"</span>, edges[i].s, edges[i].e, edges[i].cost);</span><br><span class="line">}</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="comment">/*--------------------KrusKalæ±‚æœ€å°ç”Ÿæˆæ ‘----------------------*/</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">cmp</span><span class="params">(<span class="type">const</span> <span class="type">void</span>*a, <span class="type">const</span> <span class="type">void</span> *b)</span></span><br><span class="line">{<span class="comment">//æ¯”è¾ƒå‡½æ•° æ¯”è¾ƒä¸¤æ¡è¾¹çš„æƒå€¼ ç”¨äºæ’åº</span></span><br><span class="line">    EDGE* aa, *bb;</span><br><span class="line">    aa = (EDGE*)a; bb = (EDGE*)b;</span><br><span class="line">    <span class="keyword">if</span> ((aa-&gt;cost - bb-&gt;cost )&gt; <span class="number">0</span>) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">}</span><br><span class="line"> </span><br><span class="line"><span class="comment">//æœ€å°ç”Ÿæˆæ ‘</span></span><br><span class="line"><span class="type">int</span> v[MaxSize];</span><br><span class="line"><span class="type">int</span> <span class="title function_">getRoot</span><span class="params">(<span class="type">int</span> a)</span></span><br><span class="line">{<span class="comment">//æ‰¾åˆ°æ ¹èŠ‚ç‚¹</span></span><br><span class="line">    <span class="keyword">while</span> (a != v[a]) a = v[a];</span><br><span class="line">    <span class="keyword">return</span> a;</span><br><span class="line">}</span><br><span class="line"> </span><br><span class="line"><span class="type">void</span> <span class="title function_">KrusKal</span><span class="params">(EDGE* edges, <span class="type">int</span> n)</span></span><br><span class="line">{<span class="comment">//KrusKalç®—æ³•ç”Ÿæˆæœ€å°ç”Ÿæˆæ ‘</span></span><br><span class="line">    <span class="type">int</span> i;</span><br><span class="line">    <span class="type">int</span> e, a, b;</span><br><span class="line">    </span><br><span class="line">    <span class="type">double</span> sum = <span class="number">0.0</span>;</span><br><span class="line">    e = Sum(n - <span class="number">1</span>);</span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; n; ++i) <span class="comment">//åˆå§‹åŒ–å¹¶æŸ¥é›†</span></span><br><span class="line">        v[i] = i;</span><br><span class="line"> </span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"\næœ€å°ç”Ÿæˆæ ‘çš„è¾¹åŠæƒå€¼:\n"</span>);</span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; e; ++i)</span><br><span class="line">    {</span><br><span class="line">        a = getRoot(edges[i].s);</span><br><span class="line">        b = getRoot(edges[i].e);</span><br><span class="line">        <span class="keyword">if</span> (a != b)</span><br><span class="line">        {<span class="comment">//å°†è¾¹å¹¶å…¥ç”Ÿæˆæ ‘</span></span><br><span class="line">            v[a] = b;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">"%d-%d: %f\n"</span>, edges[i].s, edges[i].e, edges[i].cost);<span class="comment">//æ‰“å°å¹¶å…¥ç”Ÿæˆæ ‘çš„è¾¹çš„ä¸¤ä¸ªé¡¶ç‚¹å’Œæƒå€¼</span></span><br><span class="line">            sum += edges[i].cost;<span class="comment">//è®¡ç®—ç”Ÿæˆæ ‘çš„æ€»æƒå€¼</span></span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"\nç”Ÿæˆæ ‘æ€»æƒå€¼sum =%f\n"</span>, sum);</span><br><span class="line">}</span><br><span class="line"> </span><br><span class="line"><span class="comment">/*------------------------------KrusKal END-------------------------------------*/</span></span><br><span class="line"> </span><br><span class="line"><span class="type">void</span> <span class="title function_">solve</span><span class="params">(<span class="type">int</span> n)</span></span><br><span class="line">{</span><br><span class="line">    CITY*city;</span><br><span class="line">    EDGE* edges;</span><br><span class="line">    CreateCityPos(city, n);<span class="comment">//åˆ›å»ºåŸå¸‚</span></span><br><span class="line">    ShowCityPos(city, n);<span class="comment">//æ˜¾ç¤ºåŸå¸‚</span></span><br><span class="line"> </span><br><span class="line">    CreateEdges(edges, city, n);<span class="comment">//åˆ›å»ºè¾¹ï¼ˆæ ¹æ®æ‰€æœ‰åŸå¸‚ä¸¤ä¸¤ä¹‹é—´çš„è·ç¦»æ¥åˆ›å»ºï¼‰</span></span><br><span class="line">    qsort(edges, Sum(n - <span class="number">1</span>), <span class="keyword">sizeof</span>(EDGE), cmp);<span class="comment">//å¯¹è¾¹æŒ‰æƒå€¼è¿›è¡Œå‡åºæ’åº</span></span><br><span class="line">    ShowCityEdges(edges, n);<span class="comment">//æ˜¾ç¤ºæ’åºåçš„è¾¹</span></span><br><span class="line"> </span><br><span class="line">    KrusKal(edges, n);<span class="comment">//ç”¨KrusKalç®—æ³•ç”Ÿæˆæœ€å°ç”Ÿæˆæ ‘</span></span><br><span class="line">}</span><br><span class="line"> </span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">{</span><br><span class="line">    <span class="type">int</span> n;</span><br><span class="line"> </span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"è¯·è¾“å…¥n:"</span>);</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;n);</span><br><span class="line">    <span class="keyword">if</span> (n &lt; <span class="number">2</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    solve(n);</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}<span class="comment">//è¿è¡ŒæˆåŠŸ 2019å¹´5æœˆ21æ—¥10:53:07</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">/*ç¨‹åºè¯´æ˜ï¼š</span></span><br><span class="line"><span class="comment">åŸºæœ¬æ€æƒ³ï¼š1ã€é¦–å…ˆç”Ÿæˆnä¸ªåŸå¸‚ï¼Œæ¯ä¸ªåŸå¸‚çš„åæ ‡éšæœºç”Ÿæˆï¼Œè¿™éƒ¨åˆ†ç”±CreateCityPosï¼ˆï¼‰å‡½æ•°å®ç°ï¼›</span></span><br><span class="line"><span class="comment">    </span></span><br><span class="line"><span class="comment">         2ã€è®¡ç®—nä¸ªåŸå¸‚ä¸¤ä¸¤ä¹‹é—´çš„è·ç¦»ï¼ˆè·ç¦»è®¡ç®—ç”±CityDist()å®Œæˆï¼‰ï¼Œå¹¶ä¿å­˜åˆ°è¾¹æ•°ç»„ä¸­ï¼Œè¿™éƒ¨åˆ†ç”±CreateEdgesï¼ˆï¼‰å‡½æ•°å®ç°ï¼›</span></span><br><span class="line"><span class="comment">         3ã€ç”±è¾¹æ•°ç»„(edges[])æ ¹æ®KrusKalç®—æ³•æ±‚æœ€å°ç”Ÿæˆæ ‘ï¼Œè¿™éƒ¨åˆ†ç”±KrusKalï¼ˆï¼‰å‡½æ•°å®ç°ï¼Œè¦æ³¨æ„çš„æ˜¯è¿›è¡ŒKrusKalç®—æ³•ä¹‹å‰ï¼Œéœ€è¦å¯¹edges[]ä¸­çš„å…ƒç´ æŒ‰ç…§</span></span><br><span class="line"><span class="comment">         æƒå€¼è¿›è¡Œå‡åºæ’åºï¼Œå› æ­¤è°ƒç”¨äº†stdlib.hå¤´æ–‡ä»¶ä¸­çš„qsort()å‡½æ•°æ¥è¿›è¡Œæ’åºã€‚</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></tbody></table></figure><h4 id="è¿è¡Œç»“æœ"><a href="#è¿è¡Œç»“æœ" class="headerlink" title="è¿è¡Œç»“æœ"></a>è¿è¡Œç»“æœ</h4><p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy8xNzc4Njc2Mi03MjhiZjIyMGNkYzY5NTIyLnBuZw?x-oss-process=image/format,png"></p><p>nä¸ºåŸå¸‚çš„æ•°é‡ï¼Œç”±ç”¨æˆ·ä»ç»ˆç«¯è¾“å…¥ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹ ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ ‘ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€æ¯æ—¥ç®—æ³•ã€‘2021å¹´03æœˆ30æ—¥ å¤šäº‘ ä¸åŒè·¯å¾„</title>
      <link href="/2021/03/30/bu-tong-lu-jing/"/>
      <url>/2021/03/30/bu-tong-lu-jing/</url>
      
        <content type="html"><![CDATA[<p>è¿™é“é¢˜æ˜¯LeeCodeç¬¬<a href="https://leetcode-cn.com/problems/unique-paths/">62</a>é¢˜ï¼Œå±äºåŠ¨æ€è§„åˆ’ä¸­çš„ä¸­ç­‰éš¾åº¦é¢˜ç›®ã€‚</p><span id="more"></span><h4 id="é¢˜ç›®"><a href="#é¢˜ç›®" class="headerlink" title="é¢˜ç›®"></a>é¢˜ç›®</h4><img src="https://raw.githubusercontent.com/Skylyong/i/main/20210330183906.png" style="zoom: 67%;"><img src="https://raw.githubusercontent.com/Skylyong/i/main/20210330184245.png" style="zoom:67%;"><h4 id="è§£é¢˜æ€è·¯"><a href="#è§£é¢˜æ€è·¯" class="headerlink" title="è§£é¢˜æ€è·¯"></a>è§£é¢˜æ€è·¯</h4><p>æ ¹æ®é¢˜é¢ï¼Œå‡è®¾æœºå™¨äººåœ¨ä½ç½®(i, j), ä¸è€ƒè™‘è¾¹ç•Œæ¡ä»¶ï¼Œåˆ™å®ƒå¯ä»¥é‡‡å–çš„åŠ¨ä½œæœ‰ä¸¤ä¸ªï¼šå‘ä¸‹(i+1)æˆ–è€…å‘å³(j+1),å®šä¹‰dp[i][j]ä¸ºæœºå™¨äººä»(i,j)ç‚¹èµ°åˆ°ç‚¹(m-1, n-1)çš„è·¯å¾„æ•°ï¼Œåˆ™æœ‰ï¼šdp[i][j] = dp[i+1][j] + dp[i][j+1],<br><img src="https://raw.githubusercontent.com/Skylyong/i/main/20210330191859.png" style="zoom:67%;"><br>ç„¶åæˆ‘ä»¬å†æ¥è€ƒè™‘è¾¹ç•Œæ¡ä»¶ï¼Œå½“æœºå™¨äººåœ¨çº¢æ¡†åŒºåŸŸ(æ­¤æ—¶ $i =m-1,  j \in [0 ~, n-2]$ )ã€è“æ¡†åŒºåŸŸï¼ˆæ­¤æ—¶ $ i \in [0, m-2] , j=n-1$ )å’Œç‚¹(m-1, n-2)æ—¶ä¸ºè¾¹ç•Œï¼Œå½“æœºå™¨äººåœ¨è¾¹ç•Œä¸Šæ—¶ï¼Œå®ƒåˆ°ç»ˆç‚¹çš„è·ç¦»éƒ½ä¸º1.</p><p>æœ€ç»ˆç­”æ¡ˆä¸ºdp[0][0]ã€‚</p><h4 id="å®ç°ä»£ç "><a href="#å®ç°ä»£ç " class="headerlink" title="å®ç°ä»£ç "></a>å®ç°ä»£ç </h4><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">uniquePaths</span>(<span class="params">self, m: <span class="built_in">int</span>, n: <span class="built_in">int</span></span>) -&gt; <span class="built_in">int</span>:</span><br><span class="line">        dp = [[<span class="number">1</span>]*n]*m</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(m-<span class="number">1</span>, -<span class="number">1</span>, -<span class="number">1</span>):</span><br><span class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(n-<span class="number">1</span>, -<span class="number">1</span>,-<span class="number">1</span>):</span><br><span class="line">                <span class="keyword">if</span> i == m-<span class="number">1</span> <span class="keyword">or</span> j == n-<span class="number">1</span>:</span><br><span class="line">                    <span class="keyword">continue</span></span><br><span class="line">                dp[i][j] = dp[i+<span class="number">1</span>][j] + dp[i][j+<span class="number">1</span>]</span><br><span class="line">        <span class="keyword">return</span> dp[<span class="number">0</span>][<span class="number">0</span>]</span><br></pre></td></tr></tbody></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³•ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åŠ¨æ€è§„åˆ’ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å˜åˆ†å­¦ä¹ ç¬”è®°</title>
      <link href="/2021/03/29/bian-fen-xue-xi-bi-ji/"/>
      <url>/2021/03/29/bian-fen-xue-xi-bi-ji/</url>
      
        <content type="html"><![CDATA[<h1 id="å˜åˆ†æ¨æ–­"><a href="#å˜åˆ†æ¨æ–­" class="headerlink" title="å˜åˆ†æ¨æ–­"></a>å˜åˆ†æ¨æ–­</h1><h3 id="åº”ç”¨ä¸¾ä¾‹"><a href="#åº”ç”¨ä¸¾ä¾‹" class="headerlink" title="åº”ç”¨ä¸¾ä¾‹"></a>åº”ç”¨ä¸¾ä¾‹</h3><ul><li>æ–‡ç« LADé¢˜ç›®åˆ†æ</li></ul><span id="more"></span><p>  å¯¹æ–‡æœ¬è¿›è¡Œè‡ªåŠ¨åˆ†æï¼Œç„¶åè‡ªåŠ¨ä»ä¸­æ‰¾å‡ºtopic<br><img src="https://raw.githubusercontent.com/Skylyong/i/main/20210325161624.png" style="zoom:50%;"></p><ul><li><p>äº¤é€šæ•°æ®åˆ†æ</p><p>ç¾å›½æ¹¾åŒºå‡ºç§Ÿè½¦æ•°æ®åˆ†æï¼Œç”¨å˜åˆ†æ¨æ–­çš„æ–¹æ³•å¯ä»¥åœ¨ä¸€å°ç¬”è®°æœ¬ç”µè„‘ä¸Šé¢å®Œæˆå¤§é‡æ•°æ®çš„è®¡ç®—</p><img src="https://raw.githubusercontent.com/Skylyong/i/main/20210325162352.png" style="zoom:50%;"></li></ul><h3 id="è´å¶æ–¯æ¨æ–­æ¦‚è¿°"><a href="#è´å¶æ–¯æ¨æ–­æ¦‚è¿°" class="headerlink" title="è´å¶æ–¯æ¨æ–­æ¦‚è¿°"></a>è´å¶æ–¯æ¨æ–­æ¦‚è¿°</h3><h4 id="ç›®æ ‡ä¼˜ç¼ºç‚¹"><a href="#ç›®æ ‡ä¼˜ç¼ºç‚¹" class="headerlink" title="ç›®æ ‡ä¼˜ç¼ºç‚¹"></a>ç›®æ ‡ä¼˜ç¼ºç‚¹</h4><p><img src="https://raw.githubusercontent.com/Skylyong/i/main/20210325162622.png"></p><h4 id="Roadmap"><a href="#Roadmap" class="headerlink" title="Roadmap"></a>Roadmap</h4><img src="https://raw.githubusercontent.com/Skylyong/i/main/20210325162730.png" style="zoom:67%;"><blockquote><p>æ¥ä¸‹æ¥ä¸»è¦è®²è§£å˜åˆ†è´å¶æ–¯æ–¹æ³•ï¼Œå˜åˆ†è´å¶æ–¯æ–¹æ³•æ˜¯è¿‘ä¼¼è´å¶æ–¯æ¨æ–­çš„ä¸€å¤§ç±»æ–¹æ³•ï¼Œå˜åˆ†è´å¶æ–¯æ–¹æ³•åˆæœ‰å¾ˆå¤šå­ç±»ï¼ŒMean-fieldå˜åˆ†æ¨æ–­æ˜¯å…¶ä¸­æ¯”è¾ƒæœ‰ä»£è¡¨æ€§çš„ä¸€ç±»ã€‚æ¥ä¸‹æ¥ç»“åˆè®²è§£çš„æ–¹æ³•è®²ä¸‰ä¸ªä¾‹å­ï¼šunivariate Gaussianã€Mixture of Gaussianså’ŒLDA</p></blockquote><h3 id="è´å¶æ–¯æ¨æ–­"><a href="#è´å¶æ–¯æ¨æ–­" class="headerlink" title="è´å¶æ–¯æ¨æ–­"></a><a href="https://www.bilibili.com/video/BV1Qf4y1e7jN?from=search&amp;seid=14715651649240686105">è´å¶æ–¯æ¨æ–­</a></h3> <img src="https://raw.githubusercontent.com/Skylyong/i/main/20210325164141.png" style="zoom:67%;"><blockquote><p>Dataæ˜¯è§‚æµ‹å˜é‡ï¼ŒParametersæ˜¯æ¨¡å‹çš„å‚æ•°ï¼Œé€šè¿‡å¯¹è§‚æµ‹å˜é‡$x$å–å€¼çš„è§‚æµ‹ï¼Œæˆ‘ä»¬å¯ä»¥æ›´æ–°å‚æ•°$z$, è¿™é‡Œ$p(x) = \int_{z}^{}{p(x,z)dz}$ï¼Œå®é™…åº”ç”¨ä¸­$z$æ˜¯ä¸€ä¸ªé«˜ç»´çš„åˆ†å¸ƒï¼Œå¾ˆéš¾è®¡ç®—$p(z|x)$</p></blockquote><h3 id="è¿‘ä¼¼è´å¶æ–¯æ¨æ–­"><a href="#è¿‘ä¼¼è´å¶æ–¯æ¨æ–­" class="headerlink" title="è¿‘ä¼¼è´å¶æ–¯æ¨æ–­_"></a><a href="https://www.bilibili.com/video/BV1a5411H7eW?from=search&amp;seid=14715651649240686105">è¿‘ä¼¼è´å¶æ–¯æ¨æ–­</a>_</h3><p><img src="https://raw.githubusercontent.com/Skylyong/i/main/20210325210910.png"></p><blockquote><p>ç›´æ¥è®¡ç®—$p(z|x)$å¤æ‚åº¦å¾ˆé«˜å¾ˆéš¾ï¼Œç„¶åå°±æœ‰äº†è¿‘ä¼¼è®¡ç®—ï¼ˆæ¨æ–­ï¼‰ã€‚å¸¸ç”¨çš„è¿‘ä¼¼è®¡ç®—æœ‰ï¼šMCMCæ–¹æ³•å’ŒåŸºäºä¼˜åŒ–çš„æ–¹æ³•ï¼ŒMCMCæ–¹æ³•è™½ç„¶ç²¾åº¦é«˜ä½†æ˜¯æ•°æ®é‡å¤§æ—¶è®¡ç®—å¾ˆæ…¢ï¼ŒåŸºäºéšæœºæ¢¯åº¦çš„ä¼˜åŒ–æ–¹æ³•å¯ä»¥ä½¿ç”¨å¹¶è¡ŒåŠ é€Ÿï¼Œå› æ­¤å¯ä»¥å¤§å¤§çš„åŠ é€Ÿè®¡ç®—é€Ÿåº¦ã€‚<br>åŸºäºéšæœºæ¢¯åº¦ä¼˜åŒ–æ–¹æ³•çš„æ€è·¯ä¸ºï¼šæ‰¾åˆ°ä¸€ä¸ªç®€å•çš„åˆ†å¸ƒ$q^<em>(z) \in Q$æ¥è¿‘ä¼¼p(z|x), ç›®æ ‡$q^</em>(z)$åº”è¯¥æ˜¯$Q$ä¸­ï¼Œä¸$p(z|x)$æŸç§è·ç¦»æœ€å°çš„é‚£ä¸ªã€‚<br><img src="https://raw.githubusercontent.com/Skylyong/i/main/20210325212515.png"><br>ä¸ºä»€ä¹ˆè¦ç”¨KLæ•£æ­¥æ¥åº¦é‡ä¸¤ä¸ªåˆ†å¸ƒçš„è·ç¦»å‘¢ï¼Ÿ<br>KLæ»¡è¶³å¯å¯¼å’Œå‡¸æ€§ï¼Œä½¿å¾—å®ƒçš„è®¡ç®—æ›´å¿«ï¼›<br>æˆ‘ä»¬æ²¡æ³•é€šè¿‡ä¸Šå¼æ±‚å¾—$q^*(z)$ï¼Œéœ€è¦é€šè¿‡ä¸‹é¢çš„è½¬æ¢æŠŠä¼˜åŒ–KLæœ€å°é—®é¢˜è¿›è¡Œè½¬æ¢ä¸ºæ±‚$q(z)$ä½¿å¾—ELBOæœ€å¤§çš„é—®é¢˜.<br><img src="https://raw.githubusercontent.com/Skylyong/i/main/20210325214048.png"></p></blockquote><p><img src="https://raw.githubusercontent.com/Skylyong/i/main/20210325214709.png"></p><blockquote><p>è¿™é‡Œçš„$log p(x)$æ˜¯ä¸€ä¸ªå›ºå®šçš„å¸¸æ•°ã€‚</p></blockquote><h3 id="å¹³å‡åœºæ¨æ–­"><a href="#å¹³å‡åœºæ¨æ–­" class="headerlink" title="å¹³å‡åœºæ¨æ–­"></a><a href="https://www.bilibili.com/video/BV1Ki4y1w7Z9/?spm_id_from=autoNext">å¹³å‡åœºæ¨æ–­</a></h3><p><img src="https://raw.githubusercontent.com/Skylyong/i/main/20210325223324.png"></p>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹ ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æœºå™¨å­¦ä¹  </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>GitHubåŠ é€Ÿæ–¹æ³•</title>
      <link href="/2021/03/28/github-jia-su-fang-fa/"/>
      <url>/2021/03/28/github-jia-su-fang-fa/</url>
      
        <content type="html"><![CDATA[<h3 id="è®¾ç½®ä»£ç†åŠ é€ŸGitHub"><a href="#è®¾ç½®ä»£ç†åŠ é€ŸGitHub" class="headerlink" title="è®¾ç½®ä»£ç†åŠ é€ŸGitHub"></a>è®¾ç½®ä»£ç†åŠ é€ŸGitHub</h3><p>ç”±äºgithubç½‘ç«™æœåŠ¡å™¨åœ¨å›½å¤–ï¼Œå›½å†…ä¸Šä¼ å’Œä¸‹è½½æ•°æ®é€Ÿåº¦è¾ƒæ…¢ï¼Œå‡å¦‚ä½ å·²ç»æœ‰å…·å¤‡äº†ç§‘å­¦ä¸Šç½‘çš„æ¡ä»¶ï¼Œå¯ä»¥é€šè¿‡è®¾ç½®ä»£ç†çš„æ–¹å¼æ¥æé«˜æ•°æ®ä¼ è¾“é€Ÿåº¦ã€‚</p><p>ä»¥ä¸‹è®¾ç½®å‡å»ºç«‹åœ¨å…·å¤‡ç§‘å­¦ä¸Šç½‘çš„å‰æä¸‹ï¼Œä¸‹æ–‡ä¸­çš„å°é£æœºæŒ‡æŸæ¬¾ç”¨äºç§‘å­¦ä¸Šç½‘çš„å·¥å…·ã€‚</p><h4 id="è®¾ç½®httpä»£ç†"><a href="#è®¾ç½®httpä»£ç†" class="headerlink" title="è®¾ç½®httpä»£ç†"></a>è®¾ç½®httpä»£ç†</h4><p>åœ¨å‘½ä»¤è¡Œè¾“å…¥å¦‚ä¸‹çš„å‘½ä»¤</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> http_proxy=http://127.0.0.1:1087</span><br><span class="line"><span class="built_in">export</span> https_proxy=http://127.0.0.1:1087</span><br><span class="line"></span><br><span class="line"><span class="comment">#è®¾ç½®httpä»£ç†ï¼Œç«¯å£å·å¯¹åº”çš„æ˜¯å°é£æœºçš„httpä»£ç†ç«¯å£å·</span></span><br><span class="line">git config --global http.proxy http://127.0.0.1:1087</span><br><span class="line">git config --global https.proxy http://127.0.0.1:1087</span><br><span class="line"></span><br><span class="line"><span class="comment">#é…ç½®githubç”¨æˆ·åå’Œé‚®ç®±</span></span><br><span class="line">git config --global user.name github_id</span><br><span class="line">git config --global user.email github_email</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#å–æ¶ˆä»£ç†è®¾ç½®</span></span><br><span class="line">git config --global --<span class="built_in">unset</span> http.proxy</span><br><span class="line">git config --global --<span class="built_in">unset</span> https.proxy</span><br><span class="line"></span><br><span class="line"><span class="comment">#æŸ¥çœ‹ä»£ç†è®¾ç½®</span></span><br><span class="line">git config --list</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><p>httpä»£ç†ç«¯å£æŸ¥è¯¢ï¼š</p><blockquote><p>åœ¨å°é£æœºä¸­æ‰¾åˆ°â€œhttpä»£ç† è®¾ç½®â€é€‰é¡¹ï¼Œç„¶åç‚¹å‡»æ‰“å¼€ï¼Œæ‰¾åˆ°å¦‚ä¸‹å›¾æ‰€ç¤ºçš„ç›‘å¬çª—å£ã€‚</p></blockquote><img src="https://raw.githubusercontent.com/Skylyong/i/main/20210319193849.png" style="zoom:67%;"><h4 id="è®¾ç½®sshåŠ é€Ÿ"><a href="#è®¾ç½®sshåŠ é€Ÿ" class="headerlink" title="è®¾ç½®sshåŠ é€Ÿ"></a><a href="https://gist.github.com/chuyik/02d0d37a49edc162546441092efae6a1">è®¾ç½®ssh</a>åŠ é€Ÿ</h4><p><code>åœ¨~/.ssh/config</code> æ–‡ä»¶ï¼ˆä¸å­˜åœ¨åˆ™æ–°å»ºï¼‰æ·»åŠ å¦‚ä¸‹å†…å®¹ï¼š</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Host github.com</span><br><span class="line">   HostName github.com</span><br><span class="line">   User git</span><br><span class="line">   <span class="comment"># èµ° HTTP ä»£ç†ï¼Œéœ€è¦ brew install socat</span></span><br><span class="line">   <span class="comment"># ProxyCommand socat - PROXY:127.0.0.1:%h:%p,proxyport=1087</span></span><br><span class="line">   <span class="comment"># èµ° socks5 ä»£ç†ï¼ˆå¦‚ Shadowsocksï¼‰</span></span><br><span class="line">   ProxyCommand nc -v -x 127.0.0.1:1086 %h %p</span><br><span class="line">   <span class="comment">#ä¸Šé¢1086è¿™ä¸ªç«¯å£å·å¯ä»¥åœ¨â€œå°é£æœºâ€çš„é«˜çº§è®¾ç½®ä¸­æŸ¥çœ‹</span></span><br><span class="line">   <span class="comment"># èµ° socks5 ä»£ç†ï¼ˆå¦‚ Shadowsocksï¼‰ï¼ŒWindows å¹³å°æ²¡æœ‰ nc å‘½ä»¤</span></span><br><span class="line">   <span class="comment"># ProxyCommand connect -S 127.0.0.1:1086 %h %p</span></span><br></pre></td></tr></tbody></table></figure><p>æœ¬åœ°Socks5ç›‘å¬çª—å£æŸ¥è¯¢ï¼š</p><blockquote><p>åœ¨å°é£æœºä¸­æ‰¾åˆ°â€œé«˜çº§è®¾ç½®â€ï¼Œç‚¹å‡»æ‰“å¼€å°±å¯ä»¥æ‰¾åˆ°å¦‚ä¸‹å›¾æ‰€ç¤ºçš„ç›‘å¬çª—å£ã€‚</p></blockquote><img src="https://raw.githubusercontent.com/Skylyong/i/main/20210319194610.png" style="zoom:50%;"><h3 id="é€šè¿‡ä¿®æ”¹hostsè§£å†³æµè§ˆå™¨æ‰“ä¸å¼€githubç½‘ç«™çš„æ–¹æ³•"><a href="#é€šè¿‡ä¿®æ”¹hostsè§£å†³æµè§ˆå™¨æ‰“ä¸å¼€githubç½‘ç«™çš„æ–¹æ³•" class="headerlink" title="é€šè¿‡ä¿®æ”¹hostsè§£å†³æµè§ˆå™¨æ‰“ä¸å¼€githubç½‘ç«™çš„æ–¹æ³•"></a>é€šè¿‡ä¿®æ”¹hostsè§£å†³æµè§ˆå™¨æ‰“ä¸å¼€githubç½‘ç«™çš„æ–¹æ³•</h3><blockquote><p>å‡å¦‚ä¸å…·å¤‡ç§‘å­¦ä¸Šç½‘çš„æ¡ä»¶ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ä¿®æ”¹hostsæ–‡ä»¶æ¥è§£å†³æµè§ˆå™¨æ‰“ä¸å¼€GitHubçš„é—®é¢˜ï¼Œä½†æ˜¯é€šè¿‡è¿™ç§æ–¹å¼åªèƒ½è§£å†³æµè§ˆå™¨æ‰“å¼€æ…¢çš„é—®é¢˜ï¼Œä¸èƒ½å¤Ÿè§£å†³åœ¨ç»ˆç«¯å…‹éš†é¡¹ç›®æ…¢çš„é—®é¢˜ï¼Œå»ºè®®é€šè¿‡ä»£ç†çš„æ–¹å¼åŠ é€Ÿã€‚</p></blockquote><span id="more"></span><p>é¦–å…ˆä»è¿™ä¸ª<a href="https://zhuanlan.zhihu.com/p/36154464">ç½‘ç«™</a>ç»™å‡ºçš„é“¾æ¥ä¸­è·å–(ä¹Ÿå¯ä»¥ç›´æ¥ç”¨ä¸‹é¢çš„æ•°æ®)åˆ°å¦‚ä¸‹æ ¼å¼çš„æ•°æ®ï¼š</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">140.82.113.4 github.com</span><br><span class="line">199.232.69.194 github.global.ssl.fastly.net</span><br><span class="line">185.199.108.153 assets-cdn.github.com</span><br><span class="line">185.199.110.153 assets-cdn.github.com</span><br><span class="line">185.199.111.153 assets-cdn.github.com</span><br><span class="line">185.199.109.153 assets-cdn.github.com</span><br></pre></td></tr></tbody></table></figure><p>ç„¶åå°†è¿™äº›æ•°æ®æ·»åŠ åˆ°hostsï¼ˆmacä¸­çš„è·¯å¾„ä¸ºï¼š/private/ect/hostsï¼‰æ–‡ä»¶ä¸­å°±å¯ä»¥äº†ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> çˆ¬å‘æ€»ç»“ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> GitHub </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>hexoä¸ªäººåšå®¢æ­å»º</title>
      <link href="/2021/02/21/hexo-ge-ren-bo-ke-da-jian-jiao-cheng/"/>
      <url>/2021/02/21/hexo-ge-ren-bo-ke-da-jian-jiao-cheng/</url>
      
        <content type="html"><![CDATA[<p>å‰æ²¿ï¼š <a href="file:///Users/lyong/Desktop/Skylyong.github.io-main/2021/02/21/build/index.html">hexo</a>å’Œ<a href="https://themes.gohugo.io/hugo-swift-theme/">hugo</a>æ˜¯å¸¸ç”¨çš„ä¸ªäººåšå®¢æ­å»ºæ¡†æ¶ï¼ŒhexoæŠ€æœ¯æ›´æˆç†Ÿç¨³å®šï¼Œä½†æ˜¯é€Ÿåº¦æ…¢ï¼Œè€ŒåŸºäºgoè¯­è¨€çš„hugoæ‹¥æœ‰é€Ÿåº¦å¿«çš„ä¼˜ç‚¹ï¼Œä½†æ˜¯ç”±äºå‡ºç°è¾ƒæ™šï¼Œå®ƒçš„æŠ€æœ¯è¿˜ä¸å¤Ÿæˆç†Ÿï¼Œä¹Ÿæ²¡æœ‰ç›¸å¯¹ç¨³å®šçš„ä¸»é¢˜ã€‚</p><h4 id="é¦–æ¬¡æ­å»º"><a href="#é¦–æ¬¡æ­å»º" class="headerlink" title="é¦–æ¬¡æ­å»º"></a>é¦–æ¬¡æ­å»º</h4><p>ä»Šæ™šç”¨äº†3ä¸ªå°æ—¶æ­å»ºäº†åŸºäºhexoçš„ä¸ªäººåšå®¢ï¼Œç°åœ¨è®°å½•ä¸€ä¸‹ã€‚</p><p>ä¸»è¦å‚è€ƒäº†ä¸‹é¢å‡ ä¸ªé“¾æ¥</p><ul><li><p>åšå®¢æ­å»ºé“¾æ¥: <a href="https://zhuanlan.zhihu.com/p/26625249">https://zhuanlan.zhihu.com/p/26625249</a></p></li><li><p>pureä¸»é¢˜ä½¿ç”¨é“¾æ¥: <a href="https://github.com/cofess/hexo-theme-pure/blob/master/README.cn.md">https://github.com/cofess/hexo-theme-pure/blob/master/README.cn.md</a></p></li><li><p>nextä¸»é¢˜ä½¿ç”¨æ•™ç¨‹: <a href="https://theme-next.iissnan.com/theme-settings.html#tags-page">https://theme-next.iissnan.com/theme-settings.html#tags-page</a></p></li><li><p>nextä¸»é¢˜è¿›ä¸€æ­¥å®Œå–„: <a href="https://tding.top/top/">https://tding.top/top/</a></p></li></ul><p>æœ‰ä¸€ç‚¹è¦æ³¨æ„ï¼šæ•™ç¨‹ä¸­è®¾ç½®åŸŸåè§£æçš„æ—¶å€™ä¸åº”è¯¥ä½¿ç”¨Aæ¨¡å¼ï¼Œéƒ½åº”è¯¥ä½¿ç”¨CNAMEæ¨¡å¼</p><ul><li><p>hexoå¸¸ç”¨å‘½ä»¤</p></li><li><p>æ–°å»ºåšå®¢ï¼šhexo n â€œbolgâ€™s nameâ€</p></li><li><p>å‘å¸ƒåšå®¢ç”¨å¦‚ä¸‹ä¸‰ä¸ªå‘½ä»¤ï¼š</p></li></ul><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hexo clean</span><br><span class="line">hexo g</span><br><span class="line">hexo d</span><br></pre></td></tr></tbody></table></figure><h4 id="å¢åŠ åŠŸèƒ½"><a href="#å¢åŠ åŠŸèƒ½" class="headerlink" title="å¢åŠ åŠŸèƒ½"></a>å¢åŠ åŠŸèƒ½</h4><p>ä»Šå¤©ä¸ºåšå®¢å¢åŠ äº†<a href="http://www.yangyong.xyz/2018/01/03/add-hexo-next-post-views/">è®°å½•é˜…è¯»æ¬¡æ•°</a>å’Œ<a href="https://vic.kim/2019/05/22/Hexo%20Next%20%E4%B8%BB%E9%A2%98%E4%B8%AD%E6%B7%BB%E5%8A%A0%E6%9C%AC%E5%9C%B0%E6%90%9C%E7%B4%A2%E5%8A%9F%E8%83%BD/">ç«™å†…æœç´¢</a>çš„åŠŸèƒ½ã€‚å…¶ä¸­æ·»åŠ è®°å½•é˜…è¯»æ¬¡æ•°åŠŸèƒ½ç›¸å¯¹éº»çƒ¦ï¼Œéœ€è¦æ³¨å†Œ<a href="https://console.leancloud.cn/">leancloud</a>çš„è´¦å·ï¼Œå¹¶ä¸”æŒ‰ç…§æ•™ç¨‹è¿›è¡Œç›¸åº”è®¾ç½®ï¼Œå¦‚æœé‡åˆ°ä¸èƒ½å¤Ÿæ­£å¸¸æ˜¾ç¤ºé˜…è¯»æ¬¡æ•°ï¼Œè¦å®‰è£…ç›¸å…³æ’ä»¶ï¼›ç«™å†…æœç´¢åŠŸèƒ½æ¯”è¾ƒç®€å•ï¼ŒæŒ‰ç…§é“¾æ¥ä¸­çš„æ•™ç¨‹ä¸€æ­¥æ­¥æ“ä½œå°±å¥½äº†ã€‚</p><h4 id="è®¾ç½®githubå…è´¹å›¾åºŠ"><a href="#è®¾ç½®githubå…è´¹å›¾åºŠ" class="headerlink" title="è®¾ç½®githubå…è´¹å›¾åºŠ"></a>è®¾ç½®githubå…è´¹å›¾åºŠ</h4><p>é¦–å…ˆåœ¨<a href="https://github.com/Molunerfinn/PicGo/releases">è¿™é‡Œ</a>ä¸‹è½½å¯¹åº”ç‰ˆæœ¬çš„PicGo(æˆ‘é€‰æ‹©çš„æ˜¯2.2.2ç‰ˆæœ¬)ï¼Œç„¶åæ ¹æ®è¿™ä¸ª<a href="https://learnku.com/articles/48574">æ•™ç¨‹</a>è®¾ç½®å›¾åºŠï¼Œè®¾ç½®å¥½å›¾åºŠåå°±å¯ä»¥æŠŠæœ¬åœ°çš„å›¾ç‰‡ä¸Šä¼ åˆ°githubæœåŠ¡å™¨ï¼Œç”Ÿæˆé“¾æ¥ï¼Œæ–¹ä¾¿å†™markdownçš„æ—¶å€™å¼•ç”¨ã€‚</p><h4 id="æ·»åŠ è¯„è®ºåŠŸèƒ½"><a href="#æ·»åŠ è¯„è®ºåŠŸèƒ½" class="headerlink" title="æ·»åŠ è¯„è®ºåŠŸèƒ½"></a>æ·»åŠ è¯„è®ºåŠŸèƒ½</h4><p>è®¾ç½®å¥½è¯„è®ºï¼Œé»˜è®¤æ˜¯æ¯ä¸€ç¯‡æ–‡ç« ï¼ŒåŒ…æ‹¬â€å…³äºâ€œç­‰é¡µé¢ä¸‹é¢éƒ½ä¼šç”Ÿæˆè¯„è®ºå¯¹è¯æ¡†ï¼Œå¦‚æœæƒ³å…³é—­æŸä¸€ç¯‡æ–‡ç« ä¸‹é¢çš„è¯„è®ºå¯¹è¯æ¡†ï¼Œå¯ä»¥å‚è€ƒ<a href="https://nobige.cn/post/20190718-hexoxiavalineguanbijingzhimougewenzhangyemianpinglun/">è¿™é‡Œ</a>ã€‚</p><h4 id="ç”µè„‘å¥”æºƒï¼Œæˆ‘å¼ƒç”¨nextä¸»é¢˜äº†"><a href="#ç”µè„‘å¥”æºƒï¼Œæˆ‘å¼ƒç”¨nextä¸»é¢˜äº†" class="headerlink" title="ç”µè„‘å¥”æºƒï¼Œæˆ‘å¼ƒç”¨nextä¸»é¢˜äº†"></a>ç”µè„‘å¥”æºƒï¼Œæˆ‘å¼ƒç”¨nextä¸»é¢˜äº†</h4><ul><li>materyä¸»é¢˜é…ç½®: <a href="https://www.jianshu.com/p/cf9730925b5c">https://www.jianshu.com/p/cf9730925b5c</a></li><li>materyä¸»é¢˜æ·±åº¦é…ç½®: <a href="https://bbs.huaweicloud.com/blogs/226867">https://bbs.huaweicloud.com/blogs/226867</a></li><li>materyä¸»é¢˜ä¼˜ç§€åšå®¢: <a href="https://notes.zhangxiaocai.cn/">https://notes.zhangxiaocai.cn/</a></li></ul><h4 id="logoè®¾è®¡"><a href="#logoè®¾è®¡" class="headerlink" title="logoè®¾è®¡"></a>logoè®¾è®¡</h4><ul><li>åœ¨çº¿å…è´¹logoè®¾è®¡ï¼š<a href="http://yeelogo.com/#/">http://yeelogo.com/#/</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> ç”Ÿæ´»æ€»ç»“ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åšå®¢ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¥½ç”¨çš„å…è´¹æ— å¹¿å‘Šç”µå½±ç½‘ç«™æ¨è</title>
      <link href="/2021/02/21/hao-yong-de-mian-fei-wu-guang-gao-dian-ying-wang-zhan-tui-jian/"/>
      <url>/2021/02/21/hao-yong-de-mian-fei-wu-guang-gao-dian-ying-wang-zhan-tui-jian/</url>
      
        <content type="html"><![CDATA[<p>ä»Šæ—¥é˜³å…‰æ˜åªšï¼Œä¸­åˆååœ¨é˜³å°ä¸Šé¢æ„Ÿå—ç€æ˜¥æ—¥æš–é£æ‹‚é¢ï¼Œä¸ç”±å¾—è®©äººæƒ³æ‰¾ä¸€éƒ¨ç”µå½±ä¼´ç€æš–é˜³ä½“éªŒä¸€ç•ªæ˜¥æ—¥å‘¨æœ«çš„æ…¢ç”Ÿæ´»ã€‚ç›¸ä¿¡æœ‰ä¸å°‘åŒå­¦è·Ÿæˆ‘ä¸€æ ·ï¼Œä¸å–œæ¬¢å……è§†é¢‘ç½‘ç«™çš„ä¼šå‘˜ï¼Œæ›´ä¸å–œæ¬¢çœ‹ç”µå½±ä¹‹å‰æ¼«é•¿çš„å¹¿å‘Šã€‚å¥½åœ¨æ—¥å¸¸ç”Ÿæ´»ä¸­ç¢°åˆ°å¥½ç”¨çš„ç”µå½±ç½‘ç«™æˆ‘éƒ½ä¼šåŠ åœ¨æ”¶è—å¤¹ä¸­ï¼Œä¸‹é¢æ•´ç†ä¸€ä¸‹åˆ†äº«ç»™å„ä½å–œæ¬¢çœ‹ç”µå½±çš„åŒå­¦ã€‚</p><ul><li><p><a href="http://www.fenggoudy1.com/list-read-id-1.html">ç–¯ç‹—ç”µå½±</a></p><p>  æ˜¥èŠ‚æœŸé—´çœ‹ã€Šæ›¼è¾¾æ´›äººã€‹çš„æ—¶å€™å‘ç°çš„ï¼Œä¼˜ç‚¹æ˜¯æœ‰æœ€æ–°çš„ç‰‡æºï¼Œåˆšåˆšçœ‹äº†ä¸€ä¸‹ï¼Œç«Ÿç„¶æœ‰æœ€æ–°å¤§çƒ­çš„ã€Šä½ å¥½ï¼Œæç„•è‹±ã€‹ï¼Œèµ„æºè´¨é‡ä¸€èˆ¬ï¼Œè™½ç„¶çœ‹è§†é¢‘æ²¡æœ‰å¹¿å‘Šï¼Œä½†æ˜¯æµ®çª—å¹¿å‘Šæœ‰ç‚¹å¤šï¼Œå½±å“è§‚æ„Ÿï¼Œé€‚åˆå–œæ¬¢å°é²œä½†æ˜¯å¯¹èµ„æºè´¨é‡è¦æ±‚ä¸é«˜çš„åŒå­¦ã€‚</p><p>  èµ„æºå­˜é‡æŒ‡æ•°ï¼šâ˜…â˜…â˜…â˜†â˜†</p><p>  è§†é¢‘è´¨é‡æŒ‡æ•°ï¼šâ˜…â˜…â˜†â˜†â˜†</p><p>  ä¸ªäººæ¨èæŒ‡æ•°ï¼šâ˜…â˜†â˜†â˜†â˜†</p></li><li><p><a href="https://91kanju.com/vod-play/57173-2-1.html">91çœ‹å‰§</a></p><p>  è¿™ä¸ªç½‘ç«™çš„èµ„æºä»¥ç”µè§†å‰§ä¸ºä¸»ï¼Œä¹Ÿæœ‰ä¸å°‘ç”µå½±èµ„æºï¼Œèµ„æºæ¯”è¾ƒå¤šï¼Œä½†æ˜¯æœ‰äº›èµ„æºåŠ è½½æ—¶é—´æ¯”è¾ƒé•¿ï¼Œèµ„æºè´¨é‡ä¸€èˆ¬ï¼Œåˆšåˆšæµ‹è¯•äº†ä¸€ä¸‹ä¸ç”¨ç¿»å¢™ä¹Ÿå¯ä»¥è®¿é—®ã€‚</p><p>  èµ„æºå­˜é‡æŒ‡æ•°ï¼šâ˜…â˜…â˜…â˜…â˜…</p><p>  è§†é¢‘è´¨é‡æŒ‡æ•°ï¼šâ˜…â˜…â˜†â˜†â˜†</p><p>  ä¸ªäººæ¨èæŒ‡æ•°ï¼šâ˜…â˜…â˜†â˜†â˜†</p></li><li><p><a href="https://www.wandouys.com/">è±Œè±†å½±è§†</a></p><p>  è¿™æ˜¯æˆ‘ç”¨å¾—æœ€ä¹…çš„å…è´¹ç”µå½±ç½‘ç«™ï¼Œå®ƒç‰‡æºå¤šï¼Œæ–°ä¸Šæ˜ çš„ç”µå½±ä¹Ÿå¯ä»¥åœ¨ä¸Šé¢æ‰¾åˆ°ã€‚ç¼ºç‚¹æ˜¯éœ€è¦ç¿»å¢™æ‰èƒ½è§£æåˆ°è§†é¢‘ç½‘å€ï¼ˆç½‘å€è§£æä¹‹åä¸ç”¨ç¿»å¢™å¯ä»¥çœ‹ï¼‰ï¼Œè§†é¢‘è´¨é‡æ²¡æœ‰ä¿éšœï¼Œå–œæ¬¢é«˜æ¸…ç”µå½±çš„åŒå­¦å¯èƒ½è¦å¤±æœ›äº†ï¼›ç½‘ç«™æœ‰æ—¶å€™ä¸ç¨³å®šï¼Œçœ‹è§†é¢‘ä¼šå¡é¡¿ã€‚</p><p>  èµ„æºå­˜é‡æŒ‡æ•°ï¼šâ˜…â˜…â˜…â˜…â˜…</p><p>  è§†é¢‘è´¨é‡æŒ‡æ•°ï¼šâ˜…â˜…â˜…â˜†â˜†</p><p>  ä¸ªäººæ¨èæŒ‡æ•°ï¼šâ˜…â˜…â˜…â˜†â˜†</p></li><li><p><a href="https://é€Ÿå½±tv.com/movie/5.html">é€Ÿå½±TV</a></p><p>  è¿™ä¸ªç½‘ç«™ä¸ªäººä¸å¸¸ç”¨ï¼Œä¸è®°å¾—æ˜¯æ€ä¹ˆå‘ç°çš„äº†ï¼Œå®ƒçš„ç‰‡æºæ¯”è¾ƒå¤šï¼Œä½†æ˜¯èµ„æºè´¨é‡ä¸é«˜ï¼Œè²Œä¼¼éœ€è¦ç¿»å¢™æ‰å¯ä»¥çœ‹ã€‚è™½ä¸å¸¸ç”¨ï¼Œä½†æ˜¯æ‰¾ä¸åˆ°ç‰‡æºçš„æ—¶å€™ï¼Œåœ¨è¿™ä¸Šé¢æ‰¾æ‰¾ä¹Ÿå¯èƒ½æœ‰æ„å¤–æ”¶è·ã€‚</p><p>  èµ„æºå­˜é‡æŒ‡æ•°ï¼šâ˜…â˜…â˜…â˜…â˜†</p><p>  è§†é¢‘è´¨é‡æŒ‡æ•°ï¼šâ˜…â˜…â˜†â˜†â˜†</p><p>  ä¸ªäººæ¨èæŒ‡æ•°ï¼šâ˜…â˜…â˜†â˜†â˜†</p></li><li><p><a href="https://ddrk.me/the-witches/">ä½ç«¯ç”µå½±</a></p><p>  è¿™ä¸ªç½‘ç«™æ˜¯å‰æ®µæ—¶é—´æ— æ„ä¸­ä»googleä¸­æœç´¢åˆ°çš„ï¼Œä¼˜ç‚¹æ˜¯å¹¿å‘Šå°‘ï¼Œç‰‡æºéƒ½æ˜¯é«˜æ¸…çš„ç”µå½±ï¼Œè¿˜ä¸ç”¨ç¿»å¢™ï¼›ç¼ºç‚¹æ˜¯èµ„æºé‡ä¸å¤§ï¼Œä¸è¿‡è®¸å¤šç»å…¸ç”µå½±å’Œç”µè§†å‰§çš„èµ„æºéƒ½å¯ä»¥åœ¨é‡Œé¢æ‰¾åˆ°ï¼Œå¾ˆä¸é”™ï¼Œååˆ†æ¨èã€‚</p><p>  èµ„æºå­˜é‡æŒ‡æ•°ï¼šâ˜…â˜…â˜†â˜†â˜†</p><p>  è§†é¢‘è´¨é‡æŒ‡æ•°ï¼šâ˜…â˜…â˜…â˜…â˜…</p><p>  ä¸ªäººæ¨èæŒ‡æ•°ï¼šâ˜…â˜…â˜…â˜…â˜…</p></li><li><p><a href="https://www.d123movies.to/">123movies</a></p><p>  è¿™ä¸ªç½‘ç«™æ˜¯å›½å¤–çš„å…è´¹ç”µå½±ã€ç”µè§†å‰§ç½‘ç«™ï¼Œç½‘ç«™çš„è§†é¢‘éƒ½æä¾›äº†è‹±æ–‡å­—å¹•ï¼Œç‰¹åˆ«é€‚åˆäºå­¦ä¹ è‹±è¯­ï¼Œéå¸¸ä¸é”™ï¼Œååˆ†æ¨èã€‚</p><p>  èµ„æºå­˜é‡æŒ‡æ•°ï¼šâ˜…â˜…â˜…â˜…â˜…</p><p>  è§†é¢‘è´¨é‡æŒ‡æ•°ï¼šâ˜…â˜…â˜…â˜…â˜…</p><p>  ä¸ªäººæ¨èæŒ‡æ•°ï¼šâ˜…â˜…â˜…â˜…â˜…</p><p>  ä¸Šé¢æ¨èçš„ç½‘ç«™æœ‰æ—¶å€™å¯èƒ½ä¼šè¢«å°æ‰ï¼Œæœ€åå†æ¨èä¸€ä¸ªå­˜å‚¨ç”µå½±èµ„æºç½‘å€çš„<a href="http://www.dyhz1.com/">ç«™ç‚¹</a>ã€‚</p></li></ul>]]></content>
      
      
      <categories>
          
          <category> ç”Ÿæ´»æ€»ç»“ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç”µå½± </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
