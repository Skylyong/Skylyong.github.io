<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 7.3.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css" integrity="sha256-dABdfBfUoC8vJUBOwGVdm8L9qlMWaHTIfXt+7GnZCIo=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"eggplant.wiki","root":"/","images":"/images","scheme":"Muse","darkmode":false,"version":"8.22.0","exturl":false,"sidebar":{"position":"left","width_expanded":320,"width_dual_column":240,"display":"post","padding":18,"offset":12},"hljswrap":true,"copycode":{"enable":false,"style":null},"fold":{"enable":false,"height":500},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"duration":200,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"}}</script><script src="/js/config.js"></script>

    <meta name="description" content="Keep go on">
<meta property="og:type" content="website">
<meta property="og:title" content="Lyong&#39;s blog">
<meta property="og:url" content="https://eggplant.wiki/page/2/index.html">
<meta property="og:site_name" content="Lyong&#39;s blog">
<meta property="og:description" content="Keep go on">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="茄子">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://eggplant.wiki/page/2/">


<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"zh-CN","comments":"","permalink":"","path":"page/2/index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>Lyong's blog</title>
  








  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">Lyong's blog</h1>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">Keep go on</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="搜索" role="button">
    </div>
  </div>
</div>







</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">茄子</p>
  <div class="site-description" itemprop="description">Keep go on</div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">47</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">18</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">34</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>

        </div>
      </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://eggplant.wiki/2025/01/26/%E6%90%AD%E5%BB%BAWebdav%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%AE%9E%E7%8E%B0Obsidian%E5%92%8CZotero%E5%A4%9A%E7%AB%AF%E5%90%8C%E6%AD%A5/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="茄子">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Lyong's blog">
      <meta itemprop="description" content="Keep go on">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Lyong's blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2025/01/26/%E6%90%AD%E5%BB%BAWebdav%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%AE%9E%E7%8E%B0Obsidian%E5%92%8CZotero%E5%A4%9A%E7%AB%AF%E5%90%8C%E6%AD%A5/" class="post-title-link" itemprop="url">搭建Webdav服务器实现Obsidian和Zotero多端同步</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2025-01-26 21:08:21" itemprop="dateCreated datePublished" datetime="2025-01-26T21:08:21+08:00">2025-01-26</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-03-08 16:39:54" itemprop="dateModified" datetime="2025-03-08T16:39:54+08:00">2025-03-08</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E6%80%BB%E7%BB%93/" itemprop="url" rel="index"><span itemprop="name">总结</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="前-言"><a href="#前-言" class="headerlink" title="前 言"></a>前 言</h1><p>很长一段时间以来，都比较苦恼自己的obsidian和zotero在多端同步的时候经常碰到问题，有时候想在手机上面查看某篇paper的时候，正好发现pdf附件没被同步，导致不能查看。加之，最近给女朋友推荐了obsidian，她觉得非常好用，但由于设备原因不能实现多端同步。她采用幕布记录笔记，再导入obsidian的方法，以实现多端同步和笔记本地保存，我认为该种方式较为繁琐，不符合技术人的气质。</p>
<p>思考再三，我决定好好解决多端配置的问题，网络上搜索了一圈资料下来，发现很多手机端软件均支持以Webdav协议进行文件共享，遂决定搭建Webdav协议服务器实现多端共享。</p>
<p>虽有坚果云等支持Webdav协议的现成云盘，但坚果云限制不少，既然要彻底解决该问题，自然不能忍受。所以决定搭建一个属于自己的Webdav协议服务器，以实现多端丝滑共享同步。</p>
<p>由于要和女友一起使用共享服务器，那么网上常见的单一账号的Webdav服务教程，自然不能满足要求。期望的是，分别设置user1和user2，以达到各自有不同的文件存储空间，并设置一个shared存储空间，方便共享文件，共享文件只有user1和user2能够进行编辑，但可以被guest用户查看，方便我们共享资料给朋友。</p>
<p>网络上面搜寻了一圈，发现Apache2能够很好的满足上述需求，并且具有想对成熟的教程资源，遂采用Apache2进行服务搭建。服务搭建的详细步骤记录如下：</p>
<h1 id="环境及软件版本-："><a href="#环境及软件版本-：" class="headerlink" title="环境及软件版本 ："></a>环境及软件版本 ：</h1><ul>
<li>服务器操作系统： Ubuntu 22.04.4 LTS</li>
<li>zotero版本：7.0.9</li>
<li>obsidian版本：Version 1.5.8</li>
</ul>
<h1 id="安装Apache2并配置webdav协议"><a href="#安装Apache2并配置webdav协议" class="headerlink" title="安装Apache2并配置webdav协议"></a><a target="_blank" rel="noopener" href="https://reintech.io/blog/installing-configuring-webdav-server-ubuntu-22">安装Apache2并配置webdav协议</a></h1><p>这里，我们对一般的WebDav配置进行了扩展，以达到多用户的要求，详细内容体现在配置文件里面。</p>
<ol>
<li>安装 Apache2 HTTP 服务并开通webdav协议</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt update</span><br><span class="line"><span class="built_in">sudo</span> apt install apache2</span><br><span class="line"><span class="built_in">sudo</span> systemctl <span class="built_in">enable</span> apache2</span><br><span class="line"><span class="built_in">sudo</span> systemctl start apache2</span><br><span class="line"><span class="built_in">sudo</span> a2enmod dav dav_fs auth_digest</span><br><span class="line"><span class="built_in">sudo</span> systemctl restart apache2</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>创建WebDav文件夹，设置权限</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> <span class="built_in">mkdir</span> -p /var/www/webdav/user1</span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">mkdir</span> -p /var/www/webdav/user2</span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">mkdir</span> -p /var/www/webdav/shared</span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">chown</span> -R www-data:www-data /var/www/webdav</span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">chmod</span> -R 775 /var/www/webdav</span><br></pre></td></tr></table></figure>

<p>通过上面的设置，webdav服务在服务器上面的路径为: &#x2F;var&#x2F;www&#x2F;webdav<br>, 可以改为自己的。</p>
<ol start="3">
<li>创建用户认证文件<br>根据提示输入密码并确认</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> htdigest -c /etc/apache2/webdav.passwd <span class="string">&quot;WebDAV Realm&quot;</span> user1</span><br><span class="line"><span class="built_in">sudo</span> htdigest /etc/apache2/webdav.passwd <span class="string">&quot;WebDAV Realm&quot;</span> user2</span><br></pre></td></tr></table></figure>

<ol start="4">
<li><p>获取SSL证书<br>由于iso要求只能以https协议方式进行文件传输，所以要使得搭建的webdav服务能够用于电脑端和iPhone、ipad同步，必须配置SSL证书，以启用https协议。<br>SSL证书有两种获取方式，一种是自签名证书，该种证书只适合测试环境，不适合生产环境，因为简单笔者一开始采用的是该种方式，但经过了大量尝试，最终得到的自签名证书，并不能用于iso端。因此，不推荐自签名证书。<br>网络上的SSL证书颁发机构，一般仅针对于域名进行证书颁发，但是国内域名备案流程繁琐。笔者经过大量的查询，最终找到了一家可以为ip地址颁发免费证书的机构 <a target="_blank" rel="noopener" href="https://app.zerossl.com/dashboard">ZeroSSL</a>，虽然一次申请使用期仅为三个月，但是足以解决燃煤之急。<br>ZeroSSL的网站上有较为详细的证书申请及使用方法，这里不做赘述。</p>
</li>
<li><p>配置WebDav<br>完成上述操作之后，我们开始对WebDav服务进行配置，打开配置文件</p>
</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> vim /etc/apache2/sites-available/000-default.conf</span><br></pre></td></tr></table></figure>

<p>   往配置文件中添加以下完整配置内容</p>
<pre><code><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line">&lt;VirtualHost *:443&gt;</span><br><span class="line">ServerAdmin webmaster@localhost</span><br><span class="line">DocumentRoot /var/www/webdav</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置ssl证书，路径表示证书的存放位置</span></span><br><span class="line"><span class="comment"># ServerName webdav.local</span></span><br><span class="line">SSLEngine on</span><br><span class="line">SSLCertificateFile /etc/ssl/certs/certificate.crt</span><br><span class="line">SSLCertificateKeyFile /etc/ssl/private/private.key</span><br><span class="line">SSLCertificateChainFile /etc/ssl/certs/ca_bundle.crt</span><br><span class="line"></span><br><span class="line">Alias /webdav /var/www/webdav</span><br><span class="line">&lt;Directory /home/webdav&gt;</span><br><span class="line">Options Indexes FollowSymLinks</span><br><span class="line">AllowOverride None</span><br><span class="line"><span class="comment"># Require all granted</span></span><br><span class="line"><span class="comment"># Dav On</span></span><br><span class="line">&lt;/Directory&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;Location /webdav/user1&gt;</span><br><span class="line">AuthType Digest</span><br><span class="line">AuthName <span class="string">&quot;WebDAV Realm&quot;</span></span><br><span class="line">AuthDigestProvider file</span><br><span class="line">AuthUserFile /etc/apache2/webdav.passwd</span><br><span class="line">Require user user1</span><br><span class="line">Dav On</span><br><span class="line">&lt;/Location&gt;</span><br><span class="line"></span><br><span class="line">&lt;Location /webdav/user2&gt;</span><br><span class="line">AuthType Digest</span><br><span class="line">AuthName <span class="string">&quot;WebDAV Realm&quot;</span></span><br><span class="line">AuthDigestProvider file</span><br><span class="line">AuthUserFile /etc/apache2/webdav.passwd</span><br><span class="line">Require user user2</span><br><span class="line">Dav On</span><br><span class="line">&lt;/Location&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置共享路径的权限</span></span><br><span class="line">&lt;Location /webdav/shared&gt;</span><br><span class="line">Dav On</span><br><span class="line">Allow from all</span><br><span class="line">&lt;LimitExcept OPTIONS GET&gt;</span><br><span class="line">AuthType Digest</span><br><span class="line">AuthName <span class="string">&quot;WebDAV Realm&quot;</span></span><br><span class="line">AuthDigestProvider file</span><br><span class="line">AuthUserFile /etc/apache2/webdav.passwd</span><br><span class="line">Require valid-user</span><br><span class="line">&lt;/LimitExcept&gt;</span><br><span class="line">&lt;LimitExcept PUT POST DELETE MOVE&gt;</span><br><span class="line">Require all granted</span><br><span class="line">&lt;/LimitExcept&gt;</span><br><span class="line">&lt;/Location&gt;</span><br><span class="line"></span><br><span class="line">ErrorLog <span class="variable">$&#123;APACHE_LOG_DIR&#125;</span>/error.log</span><br><span class="line">CustomLog <span class="variable">$&#123;APACHE_LOG_DIR&#125;</span>/access.log combined</span><br><span class="line">&lt;/VirtualHost&gt;</span><br><span class="line"><span class="comment"># vim: syntax=apache ts=4 sw=4 sts=4 sr noet</span></span><br></pre></td></tr></table></figure>
</code></pre>
<ol start="6">
<li>重启Apache2并测试</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl restart apache2</span><br></pre></td></tr></table></figure>

<p>如果使用云服务器，需要在安全组中开通443端口，才能够正常访问服务。</p>
<ul>
<li>访问方式<br>  地址为 <code>http://your-server-ip/webdav</code></li>
<li>预期效果<ul>
<li>用户 <code>user1</code> 只能访问 <code>/webdav/user1</code>。</li>
<li>用户 <code>user2</code> 只能访问 <code>/webdav/user2</code>。</li>
<li>所有人均可访问 <code>/webdav/shared</code>，无需密码，但只有查看权限，user1和user2通过登录验证，有查看、编辑和删除权限。</li>
</ul>
</li>
</ul>
<h1 id="Zotero-配置"><a href="#Zotero-配置" class="headerlink" title="Zotero 配置"></a>Zotero 配置</h1><p>zotero 中的配置很简单，只要打开设置-&gt;同步，附件同步方式选择”WebDAV”填入在配置文件中设置的网址、用户名、密码即可，填写好之后通过点击”验证服务器”按钮，对服务进行验证，验证通过即表示zotero已经与服务器建立了连接。然后关闭设置界面，点击右上角的同步图标即可将文件附件同步到远程服务器。手机端和ipad端的设置类似，此处略。</p>
<p>值得注意的是，如果服务器ip没有获得ssl证书，或者使用自签名证书，此处将会报错，在电脑端的解决方法在<a target="_blank" rel="noopener" href="https://www.zotero.org/support/kb/cert_override">这里</a>, 手机端和ipad端笔者暂未找到合适的解决方法，笔者在配置的时候，在这里耗费了大量心力，最终才找到了 <a target="_blank" rel="noopener" href="https://app.zerossl.com/dashboard">ZeroSSL</a> 这个免费为ip地址颁发ssl证书的机构，并获得了ssl证书。</p>
<h1 id="Obsidian-配置"><a href="#Obsidian-配置" class="headerlink" title="Obsidian 配置"></a>Obsidian 配置</h1><p>obsidian 配置远程同步，主要使用了remotely-save这个插件，该插件的配置使用可以参考<a target="_blank" rel="noopener" href="https://forum-zh.obsidian.md/t/topic/5291">这里</a> 和 <a target="_blank" rel="noopener" href="https://forum-zh.obsidian.md/t/topic/16390">这里</a>, 细节这里不赘述。</p>
<p>由于我们在上述配置中，使用了htdigest生成用户密码，因此，鉴权类型要选择digest，否则连接失败。</p>
<p><img src="https://raw.githubusercontent.com/Skylyong/i/main/20250126211142.png" alt="image-20250126211130501"></p>
<p>此外，在obsidian中下载插件需要科学上网，由于手机或ipad不具备科学上网的条件，这使得无法在手机或ipad上的obsidian中安装remotely-save。一种简单的解决方法是，将手机或ipad端obsidian根目录下的.obsidian替换成电脑端obsidian根目录下的.obsidian，重启之后就会发现手机端的配置和电脑上一模一样了。</p>
<h1 id="其-他"><a href="#其-他" class="headerlink" title="其 他"></a>其 他</h1><p>只要能够支持WebDAV协议备份文件的App均可通过类似上述的设置，将资料备份到云端服务器，并实现多端共享访问。</p>
<h1 id="总-结"><a href="#总-结" class="headerlink" title="总 结"></a>总 结</h1><p>本文详细介绍了，在一台Ubuntu 22.04服务器上通过Apache2配置多用户的webdav服务，给出了经过笔者实践过的详细配置文件，并提供了获取免费ip地址ssl证书的方法。同时，给出了简单的zotero和obsidian配置指导。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://eggplant.wiki/2025/01/07/sentence-transformers%20sampler%20bug%20%E4%B9%8B%20set%20%E4%B8%8D%E4%B8%80%E5%AE%9A%E6%98%AF%E6%97%A0%E5%BA%8F%E7%9A%84/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="茄子">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Lyong's blog">
      <meta itemprop="description" content="Keep go on">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Lyong's blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2025/01/07/sentence-transformers%20sampler%20bug%20%E4%B9%8B%20set%20%E4%B8%8D%E4%B8%80%E5%AE%9A%E6%98%AF%E6%97%A0%E5%BA%8F%E7%9A%84/" class="post-title-link" itemprop="url">sentence-transformers sampler bug 之 set 不一定是无序的</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2025-01-07 16:12:50" itemprop="dateCreated datePublished" datetime="2025-01-07T16:12:50+08:00">2025-01-07</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-03-08 16:39:54" itemprop="dateModified" datetime="2025-03-08T16:39:54+08:00">2025-03-08</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E7%BC%96%E7%A8%8B/" itemprop="url" rel="index"><span itemprop="name">编程</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>问  题： 最近准备训练一个基于对比学习的模型， 用 huggface 的 trainer 训练器，在官方给的源代码中，有一个现成的 sampler 用于数据采样，我需要改写这个 sampler 以保证能够用于自己的数据上。</p>
<h1 id="实验"><a href="#实验" class="headerlink" title="实验"></a>实验</h1><p>改完之后，发现采样出来的 indices 竟然是有序的，实际在一个批次中需要打乱样本的顺序，仔细阅读了官方给的源码，发现问题出在如下图所示的 第187行。这里先用 torch.randperm生成了一个乱序的下标，然后转换为set。按理说set是无序的，转换之后也是无序的，看起来很正确。</p>
<p><img src="https://raw.githubusercontent.com/Skylyong/i/main/20250107163459.png"></p>
<p>当我做了小测试后，发现并不是：</p>
<p><img src="https://raw.githubusercontent.com/Skylyong/i/main/20250107163527.png"><br>从上面的结果，可以看到：torch.randperm() 生成的序列是乱序的，但经过 set() 处理之后似乎变成了有序。</p>
<p>我们又做了一组测试：<br><img src="https://raw.githubusercontent.com/Skylyong/i/main/20250107163635.png"><br>可以看到：当list中的元素全部是数字，且没有重复值的时候，set()出来后的序列变成了有序，而中间的那个试验，序列是无序的。</p>
<p>所以很多python的教程说set的无序的，这点并不具体。更加具体的说法应该是：set是一个集合，它没有序惯性质，如果任务要求的数据结构需要包含元素的序列，则不能采用set作为数据结构。上面的bug就是一个错误例子。</p>
<h1 id="后续"><a href="#后续" class="headerlink" title="后续"></a>后续</h1><p>我检查了一下所使用的库是最新版，找到了官方的github地址，准备提交issue。才发现官方2个月前就已经在github源码中修改这个 <a target="_blank" rel="noopener" href="https://github.com/UKPLab/sentence-transformers/pull/3073">bug</a>，但是由于依赖原因，并没有提交到代码仓库。下面是修改后的版本的关键代码(关键代码在190行)：</p>
<p><img src="https://raw.githubusercontent.com/Skylyong/i/main/20250107164427.png"></p>
<p>小结一下： 这是一个非常隐蔽的bug，如果不是因为我要实现自己的sampler，一定不会发现不同epoch中相同的batch的下标是一样的，所以说当模型性能不够好的时候，可以去溯源一下代码，看看具体的代码实现是否和自己所设想的一致。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://eggplant.wiki/2023/09/12/ubuntu%E4%B8%8A%E5%AE%89%E8%A3%85NIVIDIA%E9%A9%B1%E5%8A%A8%E5%92%8CCUDA-Tookit/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="茄子">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Lyong's blog">
      <meta itemprop="description" content="Keep go on">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Lyong's blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2023/09/12/ubuntu%E4%B8%8A%E5%AE%89%E8%A3%85NIVIDIA%E9%A9%B1%E5%8A%A8%E5%92%8CCUDA-Tookit/" class="post-title-link" itemprop="url">ubuntu上安装NIVIDIA驱动和CUDA_Tookit</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2023-09-12 09:37:44" itemprop="dateCreated datePublished" datetime="2023-09-12T09:37:44+08:00">2023-09-12</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-03-08 16:39:54" itemprop="dateModified" datetime="2025-03-08T16:39:54+08:00">2025-03-08</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E7%88%AC%E5%9D%91%E6%80%BB%E7%BB%93/" itemprop="url" rel="index"><span itemprop="name">爬坑总结</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>每一次安装NIVIDIA驱动或CUDA Tookit时，都要经过一番折腾，才能够安装成功，这里把过程记录一下，以便以后可以参考。</p>
<p>本次安装遇到的最大问题是：pytorch所能支持的最高cuda版本为11.8，而安装后的cuda为最新12.2版本，pytorch没法识别cuda。<br>导致这一问题的主要原因在于两点：</p>
<ol>
<li>安装的NIVIDIA驱动版本过高，导致CUDA Tookit版本也过高，无法降级</li>
<li>使用网络方式安装CUDA Tookit，安装之后得到的是最新版的CUDA Tookit，不是我想要的11.8版本</li>
</ol>
<p>接下来是安装过程：</p>
<ul>
<li><p>删除已安装的NIVIDIA驱动或CUDA Tookit</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> <span class="built_in">rm</span> /etc/apt/sources.list.d/cuda*</span><br><span class="line"><span class="built_in">sudo</span> apt-get --purge remove <span class="string">&quot;*cublas*&quot;</span> <span class="string">&quot;cuda*&quot;</span> <span class="string">&quot;nsight*&quot;</span> </span><br><span class="line"><span class="built_in">sudo</span> apt-get --purge remove <span class="string">&quot;*nvidia*&quot;</span></span><br><span class="line"><span class="built_in">sudo</span> apt-get autoremove</span><br><span class="line"><span class="built_in">sudo</span> apt-get autoclean</span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">rm</span> -rf /usr/local/cuda*</span><br></pre></td></tr></table></figure>
</li>
<li><p>查看ubuntu系统版本和驱动器型号，并下载对应驱动安装</p>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cat</span> /etc/os-release <span class="comment"># 查看系统版本</span></span><br><span class="line"></span><br><span class="line">lspci | grep VGA    <span class="comment"># 查看显卡型号</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>  查看好版本之后，在<a target="_blank" rel="noopener" href="https://www.nvidia.com/Download/Find.aspx?lang=en-us">这里</a>下载对应的驱动程序并安装。</p>
<p>  本次安装，服务器的版本为Ubuntu 22.04.2 LTS，显卡型号为GeForce RTX 3090.</p>
</li>
<li><p>查看驱动安装结果</p>
<p>  驱动程序安装好之后，使用”nividia smi”命令查看安装结果，这里如果显示错误信息，重启系统就好了。</p>
<p>  需要注意的是，这里出来的cuda的版本号不能大于pytorch所能支持的最大cuda版本号。</p>
<p>  比如这次安装的时候，pytorch所能支持的最大cuda版本号为11.8，而我安装后，这里显示的版本号是12.2，最终导致无论如何pytorch都不能识别cuda。原因就是因为这里安装的驱动太新，nividia设置成了最新的cuda toolkit,后面安装cuda toolkit软件包的时候不能降级，导致pytorch没法识别。</p>
<p>  在本次安装过程中，最终成功安装的驱动器版本为<a target="_blank" rel="noopener" href="https://www.nvidia.com/download/driverResults.aspx/194569/en-us/">510</a>，安装成功之后查询到的cuda版本为11.04， 由于最新的pytorch支持的cuda版本为11.8，所以后面我们还需要安装11.8版本的cuda toolkit，才能让pytorch使用cuda。</p>
</li>
<li><p>安装cuda toolkit</p>
<p>  在<a target="_blank" rel="noopener" href="https://developer.nvidia.com/cuda-toolkit-archive">这里</a>找到对应版本的cuda toolkit，点进去之后，选择操作系统、操作系统版本等信息，下载类型选择第三个，安装包下载好之后，根据提示安装就好了。</p>
<p>  完成之后，再用”nividia smi”查询cuda信息，这次版本应该就是pytorch支持的了。</p>
<p>  这里有个疑问，貌似以本次包方式，安装cuda toolkit的时候可以勾选安装nividia驱动程序，也就是说可以省去前面安装驱动这一步。</p>
<p>  这里遇到的<strong>大坑</strong>是，下载类型一定要选择第三个”runfile(local)”,之前好几次选择第二个”deb(network)”，安装完，一查询cuda信息，得到的都是12.2的版本， 但是pytorch不支持12.2的cuda，所以没法用。</p>
<p>  本次安装过程中，下载的是11.8版本的cuda toolkit,下载和安装脚本如下</p>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">wget https://developer.download.nvidia.com/compute/cuda/11.8.0/local_installers/cuda_11.8.0_520.61.05_linux.run</span><br><span class="line"><span class="built_in">sudo</span> sh cuda_11.8.0_520.61.05_linux.run</span><br><span class="line"></span><br></pre></td></tr></table></figure>
</li>
<li><p>安装对应版本的pytorch</p>
<p>  在<a target="_blank" rel="noopener" href="https://pytorch.org/get-started/locally/">这里</a>找到对应的pytorch版本，然后安装就好了。</p>
</li>
<li><p>最后，查看cuda是否能够被pytorch识别</p>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">import torch</span><br><span class="line"><span class="built_in">print</span>(torch.cuda.is_available())</span><br></pre></td></tr></table></figure>
<p>  如果显示为ture，则表示安装成功。</p>
</li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://eggplant.wiki/2023/07/23/%E5%9C%A8mac%E4%B8%8A%E4%BD%BF%E7%94%A8pybind11%E5%AE%9E%E7%8E%B0c-%E4%B8%8Epython%E4%BA%92%E9%80%9A%E7%9A%84demo/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="茄子">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Lyong's blog">
      <meta itemprop="description" content="Keep go on">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Lyong's blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2023/07/23/%E5%9C%A8mac%E4%B8%8A%E4%BD%BF%E7%94%A8pybind11%E5%AE%9E%E7%8E%B0c-%E4%B8%8Epython%E4%BA%92%E9%80%9A%E7%9A%84demo/" class="post-title-link" itemprop="url">在mac上使用pybind11实现c++与python互通的demo</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2023-07-23 02:28:00" itemprop="dateCreated datePublished" datetime="2023-07-23T02:28:00+08:00">2023-07-23</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-03-08 16:39:54" itemprop="dateModified" datetime="2025-03-08T16:39:54+08:00">2025-03-08</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" itemprop="url" rel="index"><span itemprop="name">学习笔记</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h4 id="在mac上使用pybind11实现c-与python互通的demo"><a href="#在mac上使用pybind11实现c-与python互通的demo" class="headerlink" title="在mac上使用pybind11实现c++与python互通的demo"></a>在mac上使用pybind11实现c++与python互通的demo</h4><h5 id="0-问题描述"><a href="#0-问题描述" class="headerlink" title="0. 问题描述"></a>0. 问题描述</h5><p>下面的python代码定义了一个类，类中有一个名为analyze_data的函数，其采用递归的方法解析json格式的data数据，由于处理速度达不到要求，我们希望用c++改写该类，并封装成可供python代码调用的库，以达到加速的效果。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment"># 待解析的数据deom</span></span><br><span class="line"> data_demo = &#123;<span class="string">&quot;resbody&quot;</span>: &#123;<span class="string">&quot;data&quot;</span>: &#123;<span class="string">&quot;name&quot;</span>: <span class="string">&quot;John&quot;</span>, <span class="string">&quot;age&quot;</span>: <span class="number">30</span>, <span class="string">&quot;address&quot;</span>: &#123;<span class="string">&quot;city&quot;</span>: <span class="string">&quot;New York&quot;</span>, <span class="string">&quot;zipcode&quot;</span>: <span class="number">10001</span>&#125;&#125;&#125;&#125;</span><br><span class="line"> </span><br><span class="line"> <span class="comment"># 需要转换为c++代码的类</span></span><br><span class="line"> <span class="keyword">class</span> <span class="title class_">AnalyzeDataUtil</span>:</span><br><span class="line"> </span><br><span class="line">     <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, datas</span>):</span><br><span class="line">         <span class="variable language_">self</span>.datas = datas</span><br><span class="line"> </span><br><span class="line">     <span class="keyword">def</span> <span class="title function_">analyze_data</span>(<span class="params">self, data, result=<span class="string">&quot;resbody&quot;</span>, depth=<span class="number">0</span></span>):</span><br><span class="line">         <span class="keyword">if</span> depth == <span class="number">5</span>:</span><br><span class="line">             <span class="keyword">return</span></span><br><span class="line">         <span class="keyword">if</span> <span class="built_in">isinstance</span>(data, <span class="built_in">dict</span>):</span><br><span class="line">             <span class="keyword">for</span> k, v <span class="keyword">in</span> data.items():</span><br><span class="line">                 <span class="variable language_">self</span>.analyze_data(v, result + <span class="string">&quot;$%s&quot;</span> % <span class="built_in">str</span>(k), depth+<span class="number">1</span>)</span><br><span class="line">         <span class="keyword">if</span> <span class="built_in">isinstance</span>(data, (<span class="built_in">list</span>, <span class="built_in">tuple</span>)):</span><br><span class="line">             <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(data)):</span><br><span class="line">                 <span class="variable language_">self</span>.analyze_data(data[i], result, depth+<span class="number">1</span>)</span><br><span class="line">         <span class="keyword">else</span>:</span><br><span class="line">             <span class="variable language_">self</span>.datas[result] = <span class="built_in">str</span>(data)</span><br></pre></td></tr></table></figure>

<p><strong>问题分析</strong>：</p>
<p>根据问题描述，首先，我们要用c++对python定义的类进行改写，由于传入的变量data类型不固定，且涉及到类型判断，一种比较简单的方式是采用pybind11，它针对python的常见数据类型，都有对应的c++实现版本，代码改写工作大大减少。其次，类改写好之后，我们需要打通c++与python之间的隔阂，使用pybind11实现起来也非常方便，只需要在c++源码中添加少量代码即可。最后，我们还需要将c++源码编译成共享库，供下游代码调用。</p>
<h5 id="1-安装必要的工具和包"><a href="#1-安装必要的工具和包" class="headerlink" title="1. 安装必要的工具和包"></a>1. 安装必要的工具和包</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"> brew install cmake</span><br><span class="line"> conda install pybind11</span><br></pre></td></tr></table></figure>

<p>注意：安装pybind11的时候要用conda来安装，用pip方式安装，编译的时候会报路径错误。</p>
<h5 id="2-创建c-源文件"><a href="#2-创建c-源文件" class="headerlink" title="2. 创建c++源文件"></a>2. 创建c++源文件</h5><p>下面的代码实现了AnalyzeDataUtil类的c++版本，第54行到第60行的作用是打通c++与python之间的隔阂。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">//path: analyze_data_util/analyze_data_util.cpp</span></span><br><span class="line"> <span class="meta">#<span class="keyword">include</span> <span class="string">&lt;pybind11/pybind11.h&gt;</span></span></span><br><span class="line"> <span class="meta">#<span class="keyword">include</span> <span class="string">&lt;pybind11/stl.h&gt;</span></span></span><br><span class="line"> </span><br><span class="line"> <span class="keyword">namespace</span> py = pybind11;</span><br><span class="line"> </span><br><span class="line"> <span class="keyword">struct</span> <span class="title class_">AnalyzeDataUtil</span></span><br><span class="line"> &#123;</span><br><span class="line"> <span class="keyword">public</span>:</span><br><span class="line">     <span class="built_in">AnalyzeDataUtil</span>(py::dict datas) : <span class="built_in">datas</span>(datas) &#123;&#125;</span><br><span class="line"> </span><br><span class="line">     <span class="function"><span class="type">void</span> <span class="title">analyze_data</span><span class="params">(<span class="type">const</span> py::object &amp;data, std::string result = <span class="string">&quot;&quot;</span>, <span class="type">int</span> depth = <span class="number">0</span>)</span></span></span><br><span class="line"><span class="function">     </span>&#123;</span><br><span class="line"> </span><br><span class="line">         <span class="keyword">if</span> (depth == <span class="number">5</span>)</span><br><span class="line">             <span class="keyword">return</span>;</span><br><span class="line"> </span><br><span class="line">         <span class="keyword">if</span> (py::<span class="built_in">isinstance</span>&lt;py::dict&gt;(data))</span><br><span class="line">         &#123;</span><br><span class="line">             py::dict dict_data = py::<span class="built_in">cast</span>&lt;py::dict&gt;(data);</span><br><span class="line"> </span><br><span class="line">             <span class="keyword">for</span> (<span class="type">const</span> <span class="keyword">auto</span> &amp;item : dict_data)</span><br><span class="line">             &#123;</span><br><span class="line">                 <span class="keyword">auto</span> key = py::<span class="built_in">reinterpret_borrow</span>&lt;py::object&gt;(item.first);</span><br><span class="line">                 <span class="keyword">auto</span> value = py::<span class="built_in">reinterpret_borrow</span>&lt;py::object&gt;(item.second);</span><br><span class="line">                 <span class="built_in">analyze_data</span>(value, result + <span class="string">&quot;$&quot;</span> + py::<span class="built_in">str</span>(key).<span class="built_in">cast</span>&lt;std::string&gt;(), depth + <span class="number">1</span>);</span><br><span class="line">             &#125;</span><br><span class="line">         &#125;</span><br><span class="line">         <span class="keyword">if</span> (py::<span class="built_in">isinstance</span>&lt;py::list&gt;(data) || py::<span class="built_in">isinstance</span>&lt;py::tuple&gt;(data))</span><br><span class="line">         &#123;</span><br><span class="line">             py::list list_data = py::<span class="built_in">cast</span>&lt;py::list&gt;(data);</span><br><span class="line"> </span><br><span class="line">             <span class="keyword">for</span> (<span class="type">const</span> <span class="keyword">auto</span> &amp;item : list_data)</span><br><span class="line">             &#123;</span><br><span class="line"> </span><br><span class="line">                 <span class="built_in">analyze_data</span>(py::<span class="built_in">cast</span>&lt;py::object&gt;(item), result, depth + <span class="number">1</span>);</span><br><span class="line">             &#125;</span><br><span class="line">         &#125;</span><br><span class="line">         <span class="keyword">else</span></span><br><span class="line">         &#123;</span><br><span class="line"> </span><br><span class="line">             datas[py::<span class="built_in">str</span>(result)] = py::<span class="built_in">str</span>(data).<span class="built_in">cast</span>&lt;std::string&gt;();</span><br><span class="line">         &#125;</span><br><span class="line">     &#125;</span><br><span class="line"> </span><br><span class="line">     <span class="function">py::dict <span class="title">get_datas</span><span class="params">()</span></span></span><br><span class="line"><span class="function">     </span>&#123;</span><br><span class="line">         <span class="keyword">return</span> datas;</span><br><span class="line">     &#125;</span><br><span class="line"> </span><br><span class="line"> <span class="keyword">private</span>:</span><br><span class="line">     py::dict datas;</span><br><span class="line"> &#125;;</span><br><span class="line"> </span><br><span class="line"> <span class="built_in">PYBIND11_MODULE</span>(analyze_data_util, m)</span><br><span class="line"> &#123;</span><br><span class="line">     py::<span class="built_in">class_</span>&lt;AnalyzeDataUtil&gt;(m, <span class="string">&quot;AnalyzeDataUtil&quot;</span>)</span><br><span class="line">         .<span class="built_in">def</span>(py::<span class="built_in">init</span>&lt;py::dict&gt;())</span><br><span class="line">         .<span class="built_in">def</span>(<span class="string">&quot;analyze_data&quot;</span>, &amp;AnalyzeDataUtil::analyze_data)</span><br><span class="line">         .<span class="built_in">def</span>(<span class="string">&quot;get_datas&quot;</span>, &amp;AnalyzeDataUtil::get_datas);</span><br><span class="line"> &#125;</span><br><span class="line"> </span><br></pre></td></tr></table></figure>

<h5 id="4-创建CMakeLists-txt文件编译C-模块"><a href="#4-创建CMakeLists-txt文件编译C-模块" class="headerlink" title="4. 创建CMakeLists.txt文件编译C++模块"></a>4. 创建CMakeLists.txt文件编译C++模块</h5><p>创建文件analyze_data_util&#x2F;CMakeLists.txt， 然后将下面的脚本拷贝到文件中。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"> cmake_minimum_required(VERSION 3.12)</span><br><span class="line"></span><br><span class="line"> project(analyze_data_util LANGUAGES CXX)</span><br><span class="line"> </span><br><span class="line"> <span class="built_in">set</span>(CMAKE_CXX_STANDARD 14)</span><br><span class="line"> </span><br><span class="line"> find_package(pybind11 REQUIRED)</span><br><span class="line"> </span><br><span class="line"> pybind11_add_module(analyze_data_util analyze_data_util.cpp)</span><br></pre></td></tr></table></figure>

<h5 id="5-编译C-模块"><a href="#5-编译C-模块" class="headerlink" title="5. 编译C++模块"></a>5. 编译C++模块</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"> <span class="built_in">mkdir</span> build</span><br><span class="line"> <span class="built_in">cd</span> build</span><br><span class="line"> cmake ..</span><br><span class="line"> cmake --build .</span><br></pre></td></tr></table></figure>

<p>将工作目录切换到analyze_data_util中，分别执行上面的代码。将会创建共享库文件，在Mac或Linux中名为：analyze_data_util.so，在Windows中为analyze_data_util.pyd</p>
<h5 id="6-构造接口"><a href="#6-构造接口" class="headerlink" title="6. 构造接口"></a>6. 构造接口</h5><p>因为在c++中不允许直接访问私有成员，因此我们实现了get_datas()方法来间接访问成员，但是这不符合python的使用习惯，因此我们构造一个同名的AnalyzeDataUtil类将这一细节隐藏起来。也可以省去该步奏，但必须通过get_datas()函数访问解析后的数据。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment"># path: demo/analyze_data_tool.py</span></span><br><span class="line"> <span class="keyword">import</span> analyze_data_util</span><br><span class="line"> </span><br><span class="line"> <span class="comment"># Wrapper for AnalyzeDataUtil class</span></span><br><span class="line"> <span class="keyword">class</span> <span class="title class_">AnalyzeDataUtil</span>:</span><br><span class="line"> </span><br><span class="line">     <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, datas</span>):</span><br><span class="line">         <span class="variable language_">self</span>.analyzer = analyze_data_util.AnalyzeDataUtil(datas)</span><br><span class="line">         <span class="variable language_">self</span>.datas = datas</span><br><span class="line"> </span><br><span class="line">     <span class="keyword">def</span> <span class="title function_">analyze_data</span>(<span class="params">self, data, result=<span class="string">&quot;resbody&quot;</span>, depth=<span class="number">0</span></span>):   </span><br><span class="line">         <span class="variable language_">self</span>.analyzer.analyze_data(data, result, depth)</span><br><span class="line">         <span class="variable language_">self</span>.datas = <span class="variable language_">self</span>.analyzer.get_datas()</span><br></pre></td></tr></table></figure>

<h5 id="7-在python中使用C-模块"><a href="#7-在python中使用C-模块" class="headerlink" title="7. 在python中使用C++模块"></a>7. 在python中使用C++模块</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment"># path: demo/test.py</span></span><br><span class="line"> <span class="keyword">from</span> analyze_data_tool <span class="keyword">import</span> AnalyzeDataUtil</span><br><span class="line"> <span class="keyword">import</span> json</span><br><span class="line"> <span class="keyword">import</span> time</span><br><span class="line"> <span class="keyword">import</span> pprint</span><br><span class="line"> </span><br><span class="line"> <span class="built_in">print</span>(<span class="string">&#x27;示例用法,c++版本:&#x27;</span>)</span><br><span class="line"> json_data = <span class="string">&#x27;&#123;&quot;resbody&quot;: &#123;&quot;data&quot;: &#123;&quot;name&quot;: &quot;John&quot;, &quot;age&quot;: 30, &quot;address&quot;: &#123;&quot;city&quot;: &quot;New York&quot;, &quot;zipcode&quot;: 10001&#125;&#125;&#125;&#125;&#x27;</span></span><br><span class="line"> data_dict = json.loads(json_data)</span><br><span class="line"> time1 = time.time()</span><br><span class="line"> analyzer2 = AnalyzeDataUtil(&#123;&#125;)</span><br><span class="line"> analyzer2.analyze_data(data_dict, <span class="string">&quot;resbody&quot;</span>, <span class="number">0</span>)</span><br><span class="line"> time2 = time.time()</span><br><span class="line"> all_keys1 = analyzer2.datas.keys()</span><br><span class="line"> keys_list1 = <span class="string">&#x27; &#x27;</span>.join(<span class="built_in">list</span>(all_keys1))</span><br><span class="line"> </span><br><span class="line"> result = time2 - time1</span><br><span class="line"> formatted_result = <span class="string">f&quot;<span class="subst">&#123;result:<span class="number">.10</span>f&#125;</span>&quot;</span></span><br><span class="line"> pp.pprint(all_keys1)</span><br><span class="line"> <span class="built_in">print</span>(formatted_result)</span><br></pre></td></tr></table></figure>

<p>创建以上代码，然后将生成的.so or .pyd文件拷贝到demo&#x2F;目录下，运行python test.py。</p>
<h5 id="8-后记"><a href="#8-后记" class="headerlink" title="8. 后记"></a>8. 后记</h5><p>虽然上面的解决方案实现了c++与python的互通，但我在对单个文件进行测试比较的时候，得到如下结果：</p>
<p><img src="https://raw.githubusercontent.com/Skylyong/i/main/20230723015325.png" alt="image-20230723015325241"></p>
<p>从结果中我们发现，对于相同的json文件，c++版本与python版本处理结果是一致的，但对于速度的提升并不理想，对于单个文件的处理c++的版本甚至比python的低，可能是因为python调用c++包的时候占用了更多的时间，因此，处理速度的提升体现不出来。针对这个问题，我们至少可以从以下两个方面进行考虑：首先，从算法层面上来看，我们可以将递归改为动态规划，或者对递归过程进行剪枝处理，因为递归虽然好用，但是效率往往不高，它重复的过程实比较多。其次，我们还可以尝试使用一些能够快速解析json格式的优秀库(比如<a target="_blank" rel="noopener" href="https://rapidjson.org/zh-cn/">RapidJSON</a>)，这或许会比使用我们自己写的粗糙代码效率来的更快。</p>
<p>最后，虽然上面讲解中涉及到的每个脚本，我都给出了它所在的文件名和位置，但是并不直观，为了方便大家更直观的理解(我跑别人博客代码的时候，经常因为位置放错，浪费时间去调试)，我把工程目录粘贴出来：</p>
<p><img src="https://raw.githubusercontent.com/Skylyong/i/main/20230723022224.png" alt="image-20230723022223900"></p>
<p>以上就是使用pybind11实现c++与python互通的demo啦，希望能够帮到你，想要了解更多，可以去看下面的官方文档喔。</p>
<ul>
<li><strong>参考资料</strong><ul>
<li><strong>pybind11文档：</strong><a target="_blank" rel="noopener" href="https://pybind11.readthedocs.io/en/stable/">https://pybind11.readthedocs.io/en/stable/</a></li>
<li><strong>pybind11中文文档：</strong><a target="_blank" rel="noopener" href="https://github.com/charlotteLive/pybind11-Chinese-docs">https://github.com/charlotteLive/pybind11-Chinese-docs</a></li>
</ul>
</li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://eggplant.wiki/2022/09/07/Mac%E7%B3%BB%E7%BB%9F%E5%88%B6%E4%BD%9Cwin10%E5%90%AF%E5%8A%A8U%E7%9B%98/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="茄子">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Lyong's blog">
      <meta itemprop="description" content="Keep go on">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Lyong's blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/09/07/Mac%E7%B3%BB%E7%BB%9F%E5%88%B6%E4%BD%9Cwin10%E5%90%AF%E5%8A%A8U%E7%9B%98/" class="post-title-link" itemprop="url">Mac系统制作win10启动U盘</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2022-09-07 19:51:54" itemprop="dateCreated datePublished" datetime="2022-09-07T19:51:54+08:00">2022-09-07</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-03-08 16:39:54" itemprop="dateModified" datetime="2025-03-08T16:39:54+08:00">2025-03-08</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E7%88%AC%E5%9D%91%E6%80%BB%E7%BB%93/" itemprop="url" rel="index"><span itemprop="name">爬坑总结</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h5 id="Mac系统下制作win10安装盘"><a href="#Mac系统下制作win10安装盘" class="headerlink" title="Mac系统下制作win10安装盘"></a>Mac系统下制作win10安装盘</h5><h6 id="准备"><a href="#准备" class="headerlink" title="准备"></a>准备</h6><ul>
<li><p>一台mac电脑</p>
</li>
<li><p>一个大于8G的U盘</p>
</li>
<li><p>win10镜像文件</p>
</li>
<li><p>Boot Camp ISO Converter软件（这个软件可以解决FAT32格式的u盘单个文件大小不能超过4GB的问题），下载<a target="_blank" rel="noopener" href="https://macdownload.informer.com/boot-camp-iso-converter/download/">链接</a></p>
</li>
</ul>
<h6 id="制作步骤"><a href="#制作步骤" class="headerlink" title="制作步骤"></a>制作步骤</h6><ul>
<li><p>打开Boot Camp ISO Converter软件对下载好的iso镜像文件进行处理，目的是将镜像文件insta.win分配为大小小于4GB的文件</p>
</li>
<li><p>在插入U盘的状态下，打开终端，输入：</p>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">diskutil list</span><br></pre></td></tr></table></figure>

<p>  找到U盘对应的盘符，本例中U盘对应的盘符为：disk2</p>
</li>
<li><p>将U盘(disk2)格式化为FAT32格式</p>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">diskutil eraseDisk FAT32 <span class="string">&quot;WINDOWS10&quot;</span> MBR disk2</span><br></pre></td></tr></table></figure>
</li>
<li><p>找到经过Boot Camp ISO Converter处理后的镜像文件，然后双击挂载镜像文件</p>
</li>
<li><p>输入命令，将挂载的镜像盘拷贝至U盘中(disk2)</p>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cp</span> -rp /Volumes/CPBA_X64FRE_ZH-CN_DV9/* /Volumes/WINDOWS10/</span><br></pre></td></tr></table></figure></li>
</ul>
<p> 这里的CPBA_X64FRE_ZH是刚刚挂载的镜像的名称,大约等待10分钟，命令运行结束之后，启动盘就做好了。</p>
<h6 id="win10系统安装过程中报错解决方法"><a href="#win10系统安装过程中报错解决方法" class="headerlink" title="win10系统安装过程中报错解决方法"></a>win10系统安装过程中报错解决方法</h6><p>在磁盘格式步骤可能会报“windows无法安装到这个磁盘，选中的磁盘采用的GPT&#x2F;MBR分区形式”错误，解决方法有2种，这里只列举其中一种方法：</p>
<ul>
<li><p>转换磁盘格式为MBR，但是会清除所有磁盘分区</p>
<p>  在错误提示的时候，不要重启电脑，直接按”Shift+F10”组合键，这个时候会弹出CMD提示框，然后依次输入如下命令：</p>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">list disk <span class="comment"># 回车键确定；（会列出所有的磁盘，记住自己硬盘的磁盘号，通过容量大小就可以分辨了，如下图所示，磁盘0就是我们的硬盘，磁盘1就是U盘）</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> disk 0 <span class="comment"># 回车键确定；（选择磁盘0，也就是我们的硬盘，就是准备做系统的硬盘）</span></span><br><span class="line"></span><br><span class="line">clean <span class="comment"># 回车键确定；（清空磁盘，相当于格式化全盘）</span></span><br><span class="line"></span><br><span class="line">convert mbr <span class="comment"># 回车键确定；（将该硬盘转换为mbr格式，如果想要将硬盘转化为gpt，那就是输入“convert gpt”）</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h6 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a><a target="_blank" rel="noopener" href="https://blog.csdn.net/h21396577548/article/details/125572053">参考链接</a></h6>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://eggplant.wiki/2022/09/05/%E7%94%B5%E7%A3%81%E6%AF%94%E8%B5%9B%E6%80%BB%E7%BB%93/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="茄子">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Lyong's blog">
      <meta itemprop="description" content="Keep go on">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Lyong's blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/09/05/%E7%94%B5%E7%A3%81%E6%AF%94%E8%B5%9B%E6%80%BB%E7%BB%93/" class="post-title-link" itemprop="url">电磁比赛总结</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2022-09-05 14:47:54" itemprop="dateCreated datePublished" datetime="2022-09-05T14:47:54+08:00">2022-09-05</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-03-08 16:39:54" itemprop="dateModified" datetime="2025-03-08T16:39:54+08:00">2025-03-08</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E7%88%AC%E5%9D%91%E6%80%BB%E7%BB%93/" itemprop="url" rel="index"><span itemprop="name">爬坑总结</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>电磁比赛总结</p>
<p>代码总结</p>
<ol>
<li>要会静态分析资源占有率，特别是当服务器内存资源不足的时候，提前做好静态分析，设置合理的运行参数，才能提升效率。比如本次实验过程中，做数据增强预处理数据时需要占用大量内存资源，参数设置过大，会导致运行一半后因为内存不足，进程被killed掉，参数设置过小效率又变得很低。</li>
<li>当数据很多，需要占用大量内存时，不要将数据转换为pandas的DataFrame对象，因为它会吃掉更多的内存，此外使用apply方法对数据进行逐行处理的时候，即使使用了加速方法，也没有将数据存储为list然后使用多进程方法处理高效。在本次实验中，后者的速度至少是前者的5倍。</li>
<li>尽量使用class对代码进行封装，而不是使用一个个单独的函数</li>
<li>尽量保证函数的功能单一，这样的函数更容易被复用，多写几个函数没有关系</li>
<li>几种常用的保存&#x2F;读取数据方式：</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">  <span class="keyword">import</span> pickle</span><br><span class="line">  <span class="keyword">import</span> json</span><br><span class="line"> </span><br><span class="line"> <span class="comment"># 使用pickle </span></span><br><span class="line"> pickle.dump(data, file=<span class="built_in">open</span>(file_name,<span class="string">&quot;wb&quot;</span>))</span><br><span class="line"> data = pickle.load(file=<span class="built_in">open</span>(file_name, <span class="string">&quot;rb&quot;</span>))</span><br><span class="line"> </span><br><span class="line"> <span class="comment"># 使用json</span></span><br><span class="line"> json.dump(data, file=<span class="built_in">open</span>(file_name,<span class="string">&quot;w&quot;</span>))</span><br><span class="line"> data = json.load(file=<span class="built_in">open</span>(file_name, <span class="string">&quot;r&quot;</span>))</span><br></pre></td></tr></table></figure>

<ol start="6">
<li>使用coment来可视化训练过程</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">  <span class="keyword">from</span> comet_ml <span class="keyword">import</span> Experiment</span><br><span class="line"> </span><br><span class="line"> experiment = Experiment(project_name=args.project_name,</span><br><span class="line">                         api_key=args.api_key)</span><br><span class="line"> </span><br><span class="line"> experiment.log_parameters(<span class="built_in">vars</span>(args))</span><br><span class="line"> </span><br><span class="line"> <span class="keyword">with</span> experiment.train():</span><br><span class="line">     experiment.log_metric(<span class="string">&#x27;epoch_loss&#x27;</span>, train_loss, step=epoch)</span><br><span class="line"> </span><br><span class="line"> <span class="keyword">with</span> experiment.validate():</span><br><span class="line">     experiment.log_metric(<span class="string">&#x27;epoch_loss&#x27;</span>, val_loss, step=epoch)</span><br><span class="line"> </span><br><span class="line"> experiment.end()</span><br></pre></td></tr></table></figure>

<ol start="7">
<li>使用argparse来构建超参数管理入口</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">  <span class="keyword">import</span> argparse</span><br><span class="line">  parser = argparse.ArgumentParser()</span><br><span class="line"> </span><br><span class="line">   parser.add_argument(<span class="string">&quot;--drop_data_rate&quot;</span>, default=<span class="number">0.9</span>, <span class="built_in">type</span>=<span class="built_in">float</span>,required=<span class="literal">False</span>)</span><br><span class="line"> </span><br><span class="line">   args = parser.parse_args() <span class="comment">#将参数变成可调用对象</span></span><br><span class="line"> </span><br><span class="line">   pp.pprint(<span class="built_in">vars</span>(args)) <span class="comment"># 打印参数</span></span><br><span class="line"> </span><br><span class="line">   <span class="keyword">def</span> <span class="title function_">str2bool</span>(<span class="params">v</span>):</span><br><span class="line">     <span class="keyword">if</span> v.lower() <span class="keyword">in</span> (<span class="string">&#x27;yes&#x27;</span>, <span class="string">&#x27;true&#x27;</span>, <span class="string">&#x27;t&#x27;</span>, <span class="string">&#x27;y&#x27;</span>, <span class="string">&#x27;1&#x27;</span>):</span><br><span class="line">         <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">     <span class="keyword">elif</span> v.lower() <span class="keyword">in</span> (<span class="string">&#x27;no&#x27;</span>, <span class="string">&#x27;false&#x27;</span>, <span class="string">&#x27;f&#x27;</span>, <span class="string">&#x27;n&#x27;</span>, <span class="string">&#x27;0&#x27;</span>):</span><br><span class="line">         <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">     <span class="keyword">else</span>:</span><br><span class="line">         <span class="keyword">raise</span> argparse.ArgumentTypeError(<span class="string">&#x27;Unsupported value encountered.&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>注： 使用add_argument()添加参数的时候有一个大坑，&#x3D;当添加参数的type为bool的时候，不能设置type&#x3D;bool，需要自定义str2bool函数，然后设置type&#x3D;str2bool。</p>
<ol start="8">
<li>使用multiprocessing提高处理速度：凡是能够并行处理且数据量巨大的任务，应尽量使用多进程编程</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"> <span class="keyword">from</span> multiprocessing <span class="keyword">import</span> Pool</span><br><span class="line"> <span class="keyword">from</span> tqdm <span class="keyword">import</span> tqdm</span><br><span class="line"> </span><br><span class="line">  <span class="keyword">with</span> Pool(n_workers) <span class="keyword">as</span> p: <span class="comment"># n_workers表示进程数</span></span><br><span class="line">     result = <span class="built_in">list</span>(tqdm(p.imap(function, data), total=<span class="built_in">len</span>(data))) <span class="comment"># 这里使用tqdm显示进度条，需要调用imap，如果不用显示进度条调用map函数</span></span><br></pre></td></tr></table></figure>

<ol start="9">
<li>使用plt将图片保存到内存中，提高处理效率</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"> <span class="keyword">from</span> io <span class="keyword">import</span> BytesIO</span><br><span class="line"> <span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"> </span><br><span class="line"> p_bytes = BytesIO() <span class="comment">#申请内存</span></span><br><span class="line"> plt.savefig(p_bytes, <span class="built_in">format</span>=<span class="string">&#x27;png&#x27;</span>)</span><br></pre></td></tr></table></figure>

<ol start="10">
<li>关于采样的函数</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"> <span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"> <span class="keyword">import</span> random</span><br><span class="line"> </span><br><span class="line"> indents = np.random.choice(<span class="number">2</span>, n,replace=<span class="literal">True</span>,p=[pro1, pro2]) <span class="comment"># 有放回的从[0,1]中取n个值，取0的概率为pro1，取1的概率为pro2</span></span><br><span class="line"> </span><br><span class="line"> random.shuffle(data)</span><br><span class="line"> sample_resulut = random.sample(data, n)</span><br></pre></td></tr></table></figure>

<p>11.PIL库读取图片</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"> <span class="keyword">import</span> PIL</span><br><span class="line"> </span><br><span class="line"> img = PIL.Image.<span class="built_in">open</span>(image_byte)</span><br><span class="line"> img = img.convert(<span class="string">&#x27;RGB&#x27;</span>)</span><br></pre></td></tr></table></figure>

<ol start="12">
<li>plt 画散点图和图片画布设置</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"> <span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"> </span><br><span class="line"> plt.rcParams[<span class="string">&#x27;figure.figsize&#x27;</span>] = (<span class="number">4</span>, <span class="number">4</span>) <span class="comment"># 设置图片大小</span></span><br><span class="line"> </span><br><span class="line"> plt.rcParams[<span class="string">&#x27;savefig.dpi&#x27;</span>] = <span class="number">56</span> <span class="comment">#设置像素</span></span><br><span class="line"> plt.rcParams[<span class="string">&#x27;figure.dpi&#x27;</span>] = <span class="number">56</span> <span class="comment">#设置像素</span></span><br><span class="line"> plt.axis(<span class="string">&#x27;off&#x27;</span>) <span class="comment">#关闭坐标</span></span><br><span class="line"> </span><br><span class="line"> <span class="comment"># 多张子图</span></span><br><span class="line"> fig, axs = plt.subplots(n, <span class="number">1</span>)</span><br><span class="line"> <span class="keyword">for</span> idx, dim <span class="keyword">in</span> <span class="built_in">enumerate</span>(<span class="built_in">range</span>(n)):</span><br><span class="line">     axs[idx].axis(<span class="string">&#x27;off&#x27;</span>)</span><br><span class="line">     axs[idx].scatter(x, y, s=<span class="number">0.1</span>)</span><br><span class="line"> </span><br><span class="line"> <span class="comment"># 单张子图</span></span><br><span class="line"> fig, axs = plt.subplots(<span class="number">1</span>, <span class="number">1</span>)</span><br><span class="line"> axs.axis(<span class="string">&#x27;off&#x27;</span>)</span><br><span class="line"> axs.scatter(x, y, s=<span class="number">0.1</span>)</span><br><span class="line"> </span><br><span class="line"> plt.savefig(file_name) <span class="comment"># 保存到磁盘</span></span><br><span class="line"> p_bytes = BytesIO()</span><br><span class="line"> plt.savefig(p_bytes, <span class="built_in">format</span>=<span class="string">&#x27;png&#x27;</span>) <span class="comment"># 保存到内存</span></span><br><span class="line"> plt.cla()</span><br><span class="line"> plt.close(<span class="string">&#x27;all&#x27;</span>) <span class="comment"># 清空缓存</span></span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://eggplant.wiki/2022/04/29/%E8%BF%9C%E7%A8%8B%E8%AE%BF%E9%97%AE%E6%9C%8D%E5%8A%A1%E5%99%A8Jupyter-Notebook/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="茄子">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Lyong's blog">
      <meta itemprop="description" content="Keep go on">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Lyong's blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/04/29/%E8%BF%9C%E7%A8%8B%E8%AE%BF%E9%97%AE%E6%9C%8D%E5%8A%A1%E5%99%A8Jupyter-Notebook/" class="post-title-link" itemprop="url">远程访问服务器Jupyter-Notebook</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2022-04-29 16:24:56" itemprop="dateCreated datePublished" datetime="2022-04-29T16:24:56+08:00">2022-04-29</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-03-08 16:39:54" itemprop="dateModified" datetime="2025-03-08T16:39:54+08:00">2025-03-08</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E7%88%AC%E5%9D%91%E6%80%BB%E7%BB%93/" itemprop="url" rel="index"><span itemprop="name">爬坑总结</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h4 id="方法：-ssh远程使用jupyter-notebook"><a href="#方法：-ssh远程使用jupyter-notebook" class="headerlink" title="方法： ssh远程使用jupyter notebook"></a>方法： ssh远程使用jupyter notebook</h4><p>在远程服务器上，启动jupyter notebooks服务：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jupyter notebook --no-browser --port=8889</span><br></pre></td></tr></table></figure>

<p>在本地终端中启动SSH：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh -N -f -L localhost:8888:localhost:8889 username@serverIP</span><br></pre></td></tr></table></figure>

<p>其中： -N 告诉SSH没有命令要被远程执行； -f 告诉SSH在后台执行； -L 是指定port forwarding的配置，远端端口是8889，本地的端口号的8888。</p>
<p>注意：username@serverIP替换成服务器的对应账号。</p>
<p>最后打开浏览器，访问：<a target="_blank" rel="noopener" href="http://localhost:8888/">http://localhost:8888/</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://eggplant.wiki/2021/12/10/C-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="茄子">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Lyong's blog">
      <meta itemprop="description" content="Keep go on">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Lyong's blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/12/10/C-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B/" class="post-title-link" itemprop="url">C++多线程编程</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2021-12-10 22:48:07" itemprop="dateCreated datePublished" datetime="2021-12-10T22:48:07+08:00">2021-12-10</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-03-08 16:39:54" itemprop="dateModified" datetime="2025-03-08T16:39:54+08:00">2025-03-08</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h4 id="常用线程函数"><a href="#常用线程函数" class="headerlink" title="常用线程函数"></a>常用线程函数</h4><ul>
<li><p>join() :</p>
<blockquote>
<p>阻塞主线程，让主线程等待子线程执行完，当子线程执行完毕，这个join（）就执行完毕，主线程继续执行</p>
</blockquote>
</li>
<li><p>detach() :</p>
<blockquote>
<p>从主线程中将子线程分离，主线程不必等待子线程执行完，一旦detach()之后子线程将失去与主线程的关联，<br>此时这个子线程就会驻留在后台运行，被c++运行时接管，当这个子线程执行完成后，由运行时库负责清理线程相关的资源。</p>
</blockquote>
</li>
</ul>
<h4 id="线程创建方法"><a href="#线程创建方法" class="headerlink" title="线程创建方法"></a>线程创建方法</h4><ul>
<li><p>通过函数创建线程</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;thread&gt;</span></span></span><br><span class="line"><span class="keyword">using</span>  <span class="keyword">namespace</span>  std;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">do_something</span><span class="params">()</span></span>&#123;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;线程开始&quot;</span>&lt;&lt; endl;</span><br><span class="line">    <span class="comment">//do something</span></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;线程结束&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="function">thread <span class="title">myjob</span> <span class="params">(do_something)</span></span>; </span><br><span class="line">    myjob.<span class="built_in">join</span>(); <span class="comment">//阻塞主线程，等待子线程结束</span></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;The End&quot;</span> &lt;&lt;endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


</li>
<li><p>通过类创建线程</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;thread&gt;</span></span></span><br><span class="line"><span class="keyword">using</span>  <span class="keyword">namespace</span>  std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span>  <span class="title class_">myClass</span>&#123;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="type">int</span> data;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">myClass</span>(<span class="type">int</span> d):<span class="built_in">data</span>(d)&#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;构造函数&quot;</span> &lt;&lt;endl;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">myClass</span>(<span class="type">const</span> myClass&amp;myClass1):<span class="built_in">data</span>(myClass<span class="number">1.</span>data)&#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;拷贝构造函数&quot;</span> &lt;&lt;endl;</span><br><span class="line">    &#125;</span><br><span class="line">    ~<span class="built_in">myClass</span>()&#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;析构函数&quot;</span> &lt;&lt;endl;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">operator</span><span class="params">()</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="comment">//线程的入口</span></span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;线程开始&quot;</span> &lt;&lt;endl;</span><br><span class="line"><span class="comment">//        do something</span></span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;线程结束&quot;</span> &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="type">int</span> a = <span class="number">10</span>;</span><br><span class="line">    <span class="function">myClass <span class="title">myclass</span><span class="params">(a)</span></span>;</span><br><span class="line">    <span class="function">thread <span class="title">myjob</span> <span class="params">(myclass)</span></span>; <span class="comment">// 复制一次myclass</span></span><br><span class="line">    myjob.<span class="built_in">join</span>();</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;The End&quot;</span> &lt;&lt;endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


</li>
<li><p>通过lambda表达式创建线程</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;thread&gt;</span></span></span><br><span class="line"><span class="keyword">using</span>  <span class="keyword">namespace</span>  std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">auto</span> myLambdaThread = []&#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;线程开始&quot;</span> &lt;&lt; endl;</span><br><span class="line"><span class="comment">//        do something</span></span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;线程结束&quot;</span> &lt;&lt; endl;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="function">thread <span class="title">myjob</span> <span class="params">(myLambdaThread)</span></span>;</span><br><span class="line">    myjob.<span class="built_in">join</span>();</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;The End&quot;</span> &lt;&lt;endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="传递临时对象作为线程参数"><a href="#传递临时对象作为线程参数" class="headerlink" title="传递临时对象作为线程参数"></a>传递临时对象作为线程参数</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;thread&gt;</span></span></span><br><span class="line"><span class="keyword">using</span>  <span class="keyword">namespace</span>  std;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">do_something_with_parameters</span><span class="params">(<span class="type">const</span> <span class="type">int</span>&amp; a, <span class="type">char</span> *buff)</span></span>&#123;</span><br><span class="line">    cout &lt;&lt; a &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; buff &lt;&lt; endl;<span class="comment">//传指针危险</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="type">int</span> val = <span class="number">1</span>;</span><br><span class="line">    <span class="type">char</span> buff[] = <span class="string">&quot;this is a test!&quot;</span>;</span><br><span class="line">    <span class="function">thread <span class="title">myjob</span> <span class="params">(do_something_with_parameters, val, buff)</span></span>;</span><br><span class="line">    myjob.<span class="built_in">join</span>(); <span class="comment">//阻塞主线程，等待子线程结束</span></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;The End&quot;</span> &lt;&lt;endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="线程id"><a href="#线程id" class="headerlink" title="线程id"></a>线程id</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">获取线程<span class="built_in">id</span>：get_id（）</span><br><span class="line">获取当前线程<span class="built_in">id</span>：std::this_thread::get_id()</span><br></pre></td></tr></table></figure>

<h4 id="线程间的值传递"><a href="#线程间的值传递" class="headerlink" title="线程间的值传递"></a>线程间的值传递</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">std::ref()</span><br><span class="line">std::move()</span><br></pre></td></tr></table></figure>



<h4 id="最多可以使用的线程数"><a href="#最多可以使用的线程数" class="headerlink" title="最多可以使用的线程数"></a>最多可以使用的线程数</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">std::thread::hardware_concurrency()</span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://eggplant.wiki/2021/09/29/%E5%B0%86%E5%BE%AE%E4%BF%A1%E8%81%8A%E5%A4%A9%E4%B8%AD%E7%9A%84%E8%AF%AD%E9%9F%B3%E8%BD%AC%E6%8D%A2%E4%B8%BAmp3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="茄子">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Lyong's blog">
      <meta itemprop="description" content="Keep go on">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Lyong's blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/09/29/%E5%B0%86%E5%BE%AE%E4%BF%A1%E8%81%8A%E5%A4%A9%E4%B8%AD%E7%9A%84%E8%AF%AD%E9%9F%B3%E8%BD%AC%E6%8D%A2%E4%B8%BAmp3/" class="post-title-link" itemprop="url">将微信聊天中的语音转换为mp3</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2021-09-29 17:21:06" itemprop="dateCreated datePublished" datetime="2021-09-29T17:21:06+08:00">2021-09-29</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-03-08 16:39:54" itemprop="dateModified" datetime="2025-03-08T16:39:54+08:00">2025-03-08</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E7%94%9F%E6%B4%BB%E6%80%BB%E7%BB%93/" itemprop="url" rel="index"><span itemprop="name">生活总结</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <ol>
<li><p>找到语音文件将其导出</p>
<ul>
<li>找到MAC微信图片，鼠标放在图片上面按下右键调出如下图所示的提示框，然后点击“在Finder中显示”，打开音频、图片等文件在本地保存的位置。</li>
</ul>
 <img src="https://raw.githubusercontent.com/Skylyong/i/main/20210929173234.png" alt="image-20210929173226533" style="zoom:50%;" />

<p> ​            这个地方需要注意的是，微信保存到本地的记录是按照聊天会话存储的，不同会话的内容保存的位置不一样。我们应该先定位到要获取音频的会话，在该会话中调出“在Finder”中显示才行。</p>
<ul>
<li><p>如下图所示Audio目录就是存储会话语音</p>
<img src="https://raw.githubusercontent.com/Skylyong/i/main/20210929173725.png" alt="image-20210929173725735" style="zoom:45%;" /></li>
</ul>
</li>
<li><p>将silk格式文件转换为mp3格式文件</p>
<ul>
<li><p>安装silk-v3</p>
<p>silk-v3依赖gcc和FFmpeg来运行，如果没有这两个依赖项，通过如下命令安装依赖：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">brew install gcc</span><br><span class="line">brew install ffmpeg</span><br></pre></td></tr></table></figure>

<p>安装好依赖之后，在<a target="_blank" rel="noopener" href="https://github.com/kn007/silk-v3-decoder">这里</a>将silk-v3克隆到本地电脑。</p>
</li>
<li><p>用silk-v3进行格式转换</p>
<p>按照<a target="_blank" rel="noopener" href="https://github.com/Skylyong/silk-v3-decoder">silk-v3项目说明</a>运行命令，完成格式转换。</p>
<ul>
<li><p>转换单个文件</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sh converter.sh xxx.slk mp3</span><br></pre></td></tr></table></figure>
</li>
<li><p>批量转换文件夹中的多个文件</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sh converter.sh inputFolder ouputFolder mp3</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
</li>
<li><p>参考资料</p>
</li>
</ol>
<p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/fbccd8a52374">微信语音silk格式文件转换处理记录</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/henryhu712/article/details/89852514">将微信语音消息转换为 mp3</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://eggplant.wiki/2021/09/19/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="茄子">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Lyong's blog">
      <meta itemprop="description" content="Keep go on">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Lyong's blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/09/19/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/" class="post-title-link" itemprop="url">机器学习参考资料</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2021-09-19 23:59:09" itemprop="dateCreated datePublished" datetime="2021-09-19T23:59:09+08:00">2021-09-19</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-03-08 16:39:54" itemprop="dateModified" datetime="2025-03-08T16:39:54+08:00">2025-03-08</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%AD%A6%E4%B9%A0%E8%B5%84%E6%96%99/" itemprop="url" rel="index"><span itemprop="name">学习资料</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>机器学习参考资料：</p>
<ul>
<li><p>机器学习参考书籍：</p>
<ul>
<li>《神经网络与深度学习》书籍及PPT：<a target="_blank" rel="noopener" href="https://nndl.github.io/">https://nndl.github.io/</a></li>
<li>《统计学习方法》李航著</li>
<li>《机器学习》周志华著</li>
<li>《南瓜书》：<a target="_blank" rel="noopener" href="https://datawhalechina.github.io/pumpkin-book/%EF%BC%8C">https://datawhalechina.github.io/pumpkin-book/，</a> <a target="_blank" rel="noopener" href="https://github.com/datawhalechina/pumpkin-book">https://github.com/datawhalechina/pumpkin-book</a></li>
<li>《迁移学习》杨强等著</li>
<li>《联邦学习》杨强等著</li>
<li>Python Machine Learning： <a target="_blank" rel="noopener" href="https://github.com/rasbt/python-machine-learning-book">https://github.com/rasbt/python-machine-learning-book</a></li>
<li>深度学习：英文版（ <a target="_blank" rel="noopener" href="https://www.deeplearningbook.org/%EF%BC%89%E3%80%81%E4%B8%AD%E6%96%87%E7%89%88%EF%BC%88">https://www.deeplearningbook.org/）、中文版（</a> <a target="_blank" rel="noopener" href="https://github.com/exacity/deeplearningbook-chinese%EF%BC%89">https://github.com/exacity/deeplearningbook-chinese）</a></li>
<li>《强化学习Reinforcement Learning（第2版）》[加]Richard S.Sutton [美]Andrew G. Barto著，俞凯等译</li>
</ul>
</li>
<li><p>数学类参考书籍：</p>
<ul>
<li>凸优化Convex Optimization（<a target="_blank" rel="noopener" href="http://stanford.edu/~boyd/cvxbook/%EF%BC%89%E3%80%81">http://stanford.edu/~boyd/cvxbook/）、</a></li>
<li>线性代数 <a target="_blank" rel="noopener" href="https://ocw.mit.edu/courses/mathematics/18-06sc-linear-algebra-fall-2011/index.htm">https://ocw.mit.edu/courses/mathematics/18-06sc-linear-algebra-fall-2011/index.htm</a></li>
<li>概率论与统计：1）斯坦福课程CS109 Probability for Computer Scientists： <a target="_blank" rel="noopener" href="http://web.stanford.edu/class/cs109/%EF%BC%9B2%EF%BC%89Introduction">http://web.stanford.edu/class/cs109/；2）Introduction</a> to Probability, Statistics, and Random Processes： <a target="_blank" rel="noopener" href="https://www.probabilitycourse.com/">https://www.probabilitycourse.com/</a></li>
</ul>
</li>
<li><p>机器学习库&#x2F;平台：</p>
<ul>
<li>SKlearn（<a target="_blank" rel="noopener" href="https://scikit-learn.org/stable/%EF%BC%89%EF%BC%8CSKlearn%E7%9A%84User">https://scikit-learn.org/stable/），SKlearn的User</a> Guide里总结了很多机器学习模型，可以学习下<a target="_blank" rel="noopener" href="https://scikit-learn.org/stable/user_guide.html%E3%80%82%E4%B8%8A%E9%9D%A2%E6%8F%90%E5%88%B0%E7%9A%84Python">https://scikit-learn.org/stable/user_guide.html。上面提到的Python</a> Machine Learning书籍中就大量使用SKlearn的API。</li>
<li>Pytorch： <a target="_blank" rel="noopener" href="https://pytorch.org/tutorials/">https://pytorch.org/tutorials/</a></li>
<li>TensorFlow</li>
<li>Keras（ <a target="_blank" rel="noopener" href="https://keras.io/%EF%BC%89%E7%AD%89%E3%80%82">https://keras.io/）等。</a></li>
</ul>
</li>
<li><p>线上课程：</p>
<ul>
<li>吴恩达教授的视频教学课程（ <a target="_blank" rel="noopener" href="https://www.coursera.org/learn/machine-learning%EF%BC%89">https://www.coursera.org/learn/machine-learning）</a></li>
<li>李宏毅-台湾大学（<a target="_blank" rel="noopener" href="http://speech.ee.ntu.edu.tw/~tlkagk/courses_ML20.html%EF%BC%89">http://speech.ee.ntu.edu.tw/~tlkagk/courses_ML20.html）</a></li>
<li>Google的深度学习课程（<a target="_blank" rel="noopener" href="https://www.udacity.com/course/intro-to-tensorflow-for-deep-learning--ud187%EF%BC%89">https://www.udacity.com/course/intro-to-tensorflow-for-deep-learning--ud187）</a></li>
<li>李飞飞教授的计算机视觉课程（<a target="_blank" rel="noopener" href="http://cs231n.stanford.edu)/">http://cs231n.stanford.edu）</a></li>
<li>Richard Socher 的自然语言处理课程（<a target="_blank" rel="noopener" href="http://cs224d.stanford.edu/">http://cs224d.stanford.edu</a>)</li>
<li>University of Chicago Mathematical Foundations of Machine Learning(<a target="_blank" rel="noopener" href="https://voices.uchicago.edu/willett/teaching/mathematical-foundations-of-machine-learning-fall-2020/">https://voices.uchicago.edu/willett/teaching/mathematical-foundations-of-machine-learning-fall-2020/</a>)</li>
</ul>
</li>
<li><p>其他资料：</p>
<ul>
<li>Machine Learning and Artificial Intelligence and their role in networking： <a target="_blank" rel="noopener" href="https://www.bilibili.com/video/av70398058/">https://www.bilibili.com/video/av70398058/</a></li>
<li>链接：<a target="_blank" rel="noopener" href="https://pan.baidu.com/s/1qgYRbtfCLZE8d0MuCSrRLw">https://pan.baidu.com/s/1qgYRbtfCLZE8d0MuCSrRLw</a>  密码:1am4</li>
<li>链接：<a target="_blank" rel="noopener" href="https://pan.baidu.com/s/1YAujUyivMKZcOCUxB9GZlw">https://pan.baidu.com/s/1YAujUyivMKZcOCUxB9GZlw</a> 提取码：wru7</li>
</ul>
</li>
</ul>
<!-- + 博客： -->

<blockquote>
<p>声明： 内容摘自<a target="_blank" rel="noopener" href="https://tingwang1122.github.io/">王老师</a>的个人主页。</p>
</blockquote>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://eggplant.wiki/2021/09/19/%E6%9C%89%E7%94%A8%E7%9A%84%E8%B5%84%E6%BA%90/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="茄子">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Lyong's blog">
      <meta itemprop="description" content="Keep go on">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Lyong's blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/09/19/%E6%9C%89%E7%94%A8%E7%9A%84%E8%B5%84%E6%BA%90/" class="post-title-link" itemprop="url">有用的资源</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2021-09-19 23:28:51" itemprop="dateCreated datePublished" datetime="2021-09-19T23:28:51+08:00">2021-09-19</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-03-08 16:39:54" itemprop="dateModified" datetime="2025-03-08T16:39:54+08:00">2025-03-08</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%AD%A6%E4%B9%A0%E8%B5%84%E6%96%99/" itemprop="url" rel="index"><span itemprop="name">学习资料</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>有用的资源</p>
<!-- <br> -->

<ul>
<li><p><a target="_blank" rel="noopener" href="https://github.com/Skylyong/Skylyong.github.io/tree/main/files/paper-reading.pdf">How to Read a Paper</a>, by <a target="_blank" rel="noopener" href="http://blizzard.cs.uwaterloo.ca/keshav/wiki/index.php/Main_Page">Prof. Srinivasan Keshav</a>.</p>
</li>
<li><p><a target="_blank" rel="noopener" href="http://dustintran.com/blog/a-research-to-engineering-workflow">A Research to Engineering Workflow</a>, by <a target="_blank" rel="noopener" href="http://dustintran.com/">Dr. Dustin Tran</a>.</p>
</li>
<li><p><a target="_blank" rel="noopener" href="https://github.com/Skylyong/Skylyong.github.io/tree/main/files/mathwriting.pdf">Mathematical Writing</a>, by <a target="_blank" rel="noopener" href="https://www-cs-faculty.stanford.edu/~knuth/">Donald E. Knuth</a>,<a target="_blank" rel="noopener" href="https://larrabee.soe.ucsc.edu/">Tracy Larrabee</a> and <a target="_blank" rel="noopener" href="http://www.math.utah.edu/~roberts/">Paul M. Roberts</a>.</p>
</li>
</ul>
<!-- + [Whitesides' Group: Writing a Paper](), by [George M. Whitesides](https://gmwgroup.harvard.edu/people/george-m-whitesides). -->

<ul>
<li><p><a target="_blank" rel="noopener" href="https://github.com/Skylyong/Skylyong.github.io/tree/main/files/review-writing.pdf">Writing reviews for systems conferences</a>, by <a target="_blank" rel="noopener" href="http://people.inf.ethz.ch/troscoe/">Timothy Roscoe</a>.</p>
</li>
<li><p><a target="_blank" rel="noopener" href="https://github.com/Skylyong/Skylyong.github.io/tree/main/files/how-to-write-a-paper.pdf">How to write a paper</a>, by <a target="_blank" rel="noopener" href="http://www-edc.eng.cam.ac.uk/people/mfa2.html">Mike Ashby</a>.</p>
</li>
<li><p><a target="_blank" rel="noopener" href="https://github.com/Skylyong/Skylyong.github.io/tree/main/files/Leading_Paper_Discussions.pdf">Pointers for Leading Paper Discussions</a>, by <a target="_blank" rel="noopener" href="https://www2.eecs.berkeley.edu/Faculty/Homepages/katz.html">Randy H. Katz</a>.</p>
</li>
<li><p><a target="_blank" rel="noopener" href="https://ailyong.cn/2021/09/19/ji-qi-xue-xi-can-kao-zi-liao/">Machine Learning Materials for Beginners</a>.</p>
</li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://eggplant.wiki/2021/08/14/%E5%BE%AE%E4%BF%A1%E6%A0%87%E7%AD%BE%E6%95%B4%E7%90%86/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="茄子">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Lyong's blog">
      <meta itemprop="description" content="Keep go on">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Lyong's blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/08/14/%E5%BE%AE%E4%BF%A1%E6%A0%87%E7%AD%BE%E6%95%B4%E7%90%86/" class="post-title-link" itemprop="url">微信标签整理</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2021-08-14 01:06:28" itemprop="dateCreated datePublished" datetime="2021-08-14T01:06:28+08:00">2021-08-14</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-03-08 16:39:54" itemprop="dateModified" datetime="2025-03-08T16:39:54+08:00">2025-03-08</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E6%80%BB%E7%BB%93/" itemprop="url" rel="index"><span itemprop="name">总结</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <blockquote>
<p>最近对微信通讯录做了一次比较彻底的整理，记录一下。</p>
</blockquote>
<p>我根据兴趣、人生阶段、亲疏关系和生活四个维度来分类，每个维度的具体分类标签如下：</p>
<ul>
<li>按兴趣： 兴趣-户外，兴趣-跑步，兴趣-阅读，兴趣-美食等</li>
<li>按人生阶段划分为：中学，本科，研究生，兼职等，每一个阶段又可以做进一步划分。<ul>
<li>中学-同学，中学-校友，中学-老师</li>
<li>本科-同学，本科-校友，本科-老师</li>
<li>研究生-同学，研究生-校友，研究生-老师</li>
<li>兼职-同事，兼职-同行</li>
</ul>
</li>
<li>按亲疏关系可分为：<ul>
<li>家人</li>
<li>亲戚</li>
<li>朋友</li>
<li>有缘相逢</li>
</ul>
</li>
<li>生活涉及的东西比较杂，我是把“照相、打印和水电等”都放在了“生活便利”这一个标签里面，然后在名字上面做备注，比如“张三|打印”。此外，我把医生、法律人士做了单独的标签，最后加了一个“大佬”标签，方便时刻关注大佬的动态、向大佬靠齐。<ul>
<li>生活便利</li>
<li>生活-医务</li>
<li>生活-法律</li>
<li>大佬</li>
</ul>
</li>
</ul>
<p>分好之后才感觉这种二级分类有点繁琐，先用一段时间看看，不行的话再做优化。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <a class="extend prev" rel="prev" title="上一页" aria-label="上一页" href="/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><a class="page-number" href="/page/4/">4</a><a class="extend next" rel="next" title="下一页" aria-label="下一页" href="/page/3/"><i class="fa fa-angle-right"></i></a>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 
    <span itemprop="copyrightYear">2025</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">茄子</span>
  </div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/muse/" rel="noopener" target="_blank">NexT.Muse</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/sidebar.js"></script><script src="/js/next-boot.js"></script>

  






  





</body>
</html>
